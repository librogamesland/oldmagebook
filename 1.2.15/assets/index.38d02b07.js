var YQ=Object.defineProperty;var KQ=(n,e,t)=>e in n?YQ(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var lu=(n,e,t)=>(KQ(n,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function We(){}function JQ(n){return n&&typeof n=="object"&&typeof n.then=="function"}function vS(n){return n()}function kv(){return Object.create(null)}function Wt(n){n.forEach(vS)}function LO(n){return typeof n=="function"}function On(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}let cu;function io(n,e){return cu||(cu=document.createElement("a")),cu.href=e,n===cu.href}function eN(n){return Object.keys(n).length===0}function Tc(n,...e){if(n==null)return We;const t=n.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function Sn(n){let e;return Tc(n,t=>e=t)(),e}function Me(n,e,t){n.$$.on_destroy.push(Tc(e,t))}function ar(n){return n==null?"":n}function Js(n,e,t){return n.set(t),e}function U(n,e){n.appendChild(e)}function Ee(n,e,t){n.insertBefore(e,t||null)}function Se(n){n.parentNode&&n.parentNode.removeChild(n)}function Sr(n,e){for(let t=0;t<n.length;t+=1)n[t]&&n[t].d(e)}function G(n){return document.createElement(n)}function tN(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function ve(n){return document.createTextNode(n)}function he(){return ve(" ")}function Df(){return ve("")}function xe(n,e,t,r){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}function nN(n){return function(e){return e.preventDefault(),n.call(this,e)}}function rN(n){return function(e){return e.stopPropagation(),n.call(this,e)}}function Tv(n){return function(e){e.target===this&&n.call(this,e)}}function z(n,e,t){t==null?n.removeAttribute(e):n.getAttribute(e)!==t&&n.setAttribute(e,t)}function Or(n){return n===""?null:+n}function iN(n){return Array.from(n.childNodes)}function Te(n,e){e=""+e,n.wholeText!==e&&(n.data=e)}function ct(n,e){n.value=e==null?"":e}function kn(n,e,t,r){t===null?n.style.removeProperty(e):n.style.setProperty(e,t,r?"important":"")}function _h(n,e){for(let t=0;t<n.options.length;t+=1){const r=n.options[t];if(r.__value===e){r.selected=!0;return}}n.selectedIndex=-1}function wS(n){const e=n.querySelector(":checked")||n.options[0];return e&&e.__value}function un(n,e,t){n.classList[t?"add":"remove"](e)}class sN{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,r=null){this.e||(this.is_svg?this.e=tN(t.nodeName):this.e=G(t.nodeName),this.t=t,this.c(e)),this.i(r)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)Ee(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(Se)}}function Ev(n,e){return new n(e)}let Dl;function Ii(n){Dl=n}function DO(){if(!Dl)throw new Error("Function called outside component initialization");return Dl}function oN(n){DO().$$.on_mount.push(n)}function _S(n){DO().$$.on_destroy.push(n)}function aN(n,e){const t=n.$$.callbacks[e.type];t&&t.slice().forEach(r=>r.call(this,e))}const ml=[],Cv=[],zu=[],Av=[],xS=Promise.resolve();let Tm=!1;function SS(){Tm||(Tm=!0,xS.then(MO))}function na(){return SS(),xS}function Ml(n){zu.push(n)}const wp=new Set;let uu=0;function MO(){const n=Dl;do{for(;uu<ml.length;){const e=ml[uu];uu++,Ii(e),lN(e.$$)}for(Ii(null),ml.length=0,uu=0;Cv.length;)Cv.pop()();for(let e=0;e<zu.length;e+=1){const t=zu[e];wp.has(t)||(wp.add(t),t())}zu.length=0}while(ml.length);for(;Av.length;)Av.pop()();Tm=!1,wp.clear(),Ii(n)}function lN(n){if(n.fragment!==null){n.update(),Wt(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(Ml)}}const Hu=new Set;let Zs;function Mf(){Zs={r:0,c:[],p:Zs}}function $f(){Zs.r||Wt(Zs.c),Zs=Zs.p}function nn(n,e){n&&n.i&&(Hu.delete(n),n.i(e))}function Nn(n,e,t,r){if(n&&n.o){if(Hu.has(n))return;Hu.add(n),Zs.c.push(()=>{Hu.delete(n),r&&(t&&n.d(1),r())}),n.o(e)}else r&&r()}function kS(n,e){const t=e.token={};function r(i,s,o,a){if(e.token!==t)return;e.resolved=a;let l=e.ctx;o!==void 0&&(l=l.slice(),l[o]=a);const c=i&&(e.current=i)(l);let u=!1;e.block&&(e.blocks?e.blocks.forEach((h,f)=>{f!==s&&h&&(Mf(),Nn(h,1,1,()=>{e.blocks[f]===h&&(e.blocks[f]=null)}),$f())}):e.block.d(1),c.c(),nn(c,1),c.m(e.mount(),e.anchor),u=!0),e.block=c,e.blocks&&(e.blocks[s]=c),u&&MO()}if(JQ(n)){const i=DO();if(n.then(s=>{Ii(i),r(e.then,1,e.value,s),Ii(null)},s=>{if(Ii(i),r(e.catch,2,e.error,s),Ii(null),!e.hasCatch)throw s}),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,n),!0;e.resolved=n}}function TS(n,e,t){const r=e.slice(),{resolved:i}=n;n.current===n.then&&(r[n.value]=i),n.current===n.catch&&(r[n.error]=i),n.block.p(r,t)}const cN=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function Qi(n){n&&n.c()}function ni(n,e,t,r){const{fragment:i,after_update:s}=n.$$;i&&i.m(e,t),r||Ml(()=>{const o=n.$$.on_mount.map(vS).filter(LO);n.$$.on_destroy?n.$$.on_destroy.push(...o):Wt(o),n.$$.on_mount=[]}),s.forEach(Ml)}function ri(n,e){const t=n.$$;t.fragment!==null&&(Wt(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function uN(n,e){n.$$.dirty[0]===-1&&(ml.push(n),SS(),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function Tn(n,e,t,r,i,s,o,a=[-1]){const l=Dl;Ii(n);const c=n.$$={fragment:null,ctx:[],props:s,update:We,not_equal:i,bound:kv(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:kv(),dirty:a,skip_bound:!1,root:e.target||l.$$.root};o&&o(c.root);let u=!1;if(c.ctx=t?t(n,e.props||{},(h,f,...p)=>{const d=p.length?p[0]:f;return c.ctx&&i(c.ctx[h],c.ctx[h]=d)&&(!c.skip_bound&&c.bound[h]&&c.bound[h](d),u&&uN(n,h)),f}):[],c.update(),u=!0,Wt(c.before_update),c.fragment=r?r(c.ctx):!1,e.target){if(e.hydrate){const h=iN(e.target);c.fragment&&c.fragment.l(h),h.forEach(Se)}else c.fragment&&c.fragment.c();e.intro&&nn(n.$$.fragment),ni(n,e.target,e.anchor,e.customElement),MO()}Ii(l)}class En{$destroy(){ri(this,1),this.$destroy=We}$on(e,t){if(!LO(t))return We;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(t),()=>{const i=r.indexOf(t);i!==-1&&r.splice(i,1)}}$set(e){this.$$set&&!eN(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Qo=[];function hN(n,e){return{subscribe:$n(n,e).subscribe}}function $n(n,e=We){let t;const r=new Set;function i(a){if(On(n,a)&&(n=a,t)){const l=!Qo.length;for(const c of r)c[1](),Qo.push(c,n);if(l){for(let c=0;c<Qo.length;c+=2)Qo[c][0](Qo[c+1]);Qo.length=0}}}function s(a){i(a(n))}function o(a,l=We){const c=[a,l];return r.add(c),r.size===1&&(t=e(i)||We),a(n),()=>{r.delete(c),r.size===0&&(t(),t=null)}}return{set:i,update:s,subscribe:o}}function Vr(n,e,t){const r=!Array.isArray(n),i=r?[n]:n,s=e.length<2;return hN(t,o=>{let a=!1;const l=[];let c=0,u=We;const h=()=>{if(c)return;u();const p=e(r?l[0]:l,o);s?o(p):u=LO(p)?p:We},f=i.map((p,d)=>Tc(p,m=>{l[d]=m,c&=~(1<<d),a&&h()},()=>{c|=1<<d}));return a=!0,h(),function(){Wt(f),u()}})}var Ja=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fN(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var dN=function(e){return pN(e)&&!mN(e)};function pN(n){return!!n&&typeof n=="object"}function mN(n){var e=Object.prototype.toString.call(n);return e==="[object RegExp]"||e==="[object Date]"||yN(n)}var gN=typeof Symbol=="function"&&Symbol.for,ON=gN?Symbol.for("react.element"):60103;function yN(n){return n.$$typeof===ON}function bN(n){return Array.isArray(n)?[]:{}}function $l(n,e){return e.clone!==!1&&e.isMergeableObject(n)?ra(bN(n),n,e):n}function vN(n,e,t){return n.concat(e).map(function(r){return $l(r,t)})}function wN(n,e){if(!e.customMerge)return ra;var t=e.customMerge(n);return typeof t=="function"?t:ra}function _N(n){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(n).filter(function(e){return n.propertyIsEnumerable(e)}):[]}function Pv(n){return Object.keys(n).concat(_N(n))}function ES(n,e){try{return e in n}catch{return!1}}function xN(n,e){return ES(n,e)&&!(Object.hasOwnProperty.call(n,e)&&Object.propertyIsEnumerable.call(n,e))}function SN(n,e,t){var r={};return t.isMergeableObject(n)&&Pv(n).forEach(function(i){r[i]=$l(n[i],t)}),Pv(e).forEach(function(i){xN(n,i)||(ES(n,i)&&t.isMergeableObject(e[i])?r[i]=wN(i,t)(n[i],e[i],t):r[i]=$l(e[i],t))}),r}function ra(n,e,t){t=t||{},t.arrayMerge=t.arrayMerge||vN,t.isMergeableObject=t.isMergeableObject||dN,t.cloneUnlessOtherwiseSpecified=$l;var r=Array.isArray(e),i=Array.isArray(n),s=r===i;return s?r?t.arrayMerge(n,e,t):SN(n,e,t):$l(e,t)}ra.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(r,i){return ra(r,i,t)},{})};var kN=ra,TN=kN,Em=function(n,e){return Em=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},Em(n,e)};function Bf(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Em(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var gt=function(){return gt=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},gt.apply(this,arguments)};function _p(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||Array.prototype.slice.call(e))}var ut;(function(n){n[n.EXPECT_ARGUMENT_CLOSING_BRACE=1]="EXPECT_ARGUMENT_CLOSING_BRACE",n[n.EMPTY_ARGUMENT=2]="EMPTY_ARGUMENT",n[n.MALFORMED_ARGUMENT=3]="MALFORMED_ARGUMENT",n[n.EXPECT_ARGUMENT_TYPE=4]="EXPECT_ARGUMENT_TYPE",n[n.INVALID_ARGUMENT_TYPE=5]="INVALID_ARGUMENT_TYPE",n[n.EXPECT_ARGUMENT_STYLE=6]="EXPECT_ARGUMENT_STYLE",n[n.INVALID_NUMBER_SKELETON=7]="INVALID_NUMBER_SKELETON",n[n.INVALID_DATE_TIME_SKELETON=8]="INVALID_DATE_TIME_SKELETON",n[n.EXPECT_NUMBER_SKELETON=9]="EXPECT_NUMBER_SKELETON",n[n.EXPECT_DATE_TIME_SKELETON=10]="EXPECT_DATE_TIME_SKELETON",n[n.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE=11]="UNCLOSED_QUOTE_IN_ARGUMENT_STYLE",n[n.EXPECT_SELECT_ARGUMENT_OPTIONS=12]="EXPECT_SELECT_ARGUMENT_OPTIONS",n[n.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE=13]="EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE",n[n.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE=14]="INVALID_PLURAL_ARGUMENT_OFFSET_VALUE",n[n.EXPECT_SELECT_ARGUMENT_SELECTOR=15]="EXPECT_SELECT_ARGUMENT_SELECTOR",n[n.EXPECT_PLURAL_ARGUMENT_SELECTOR=16]="EXPECT_PLURAL_ARGUMENT_SELECTOR",n[n.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT=17]="EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT",n[n.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT=18]="EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT",n[n.INVALID_PLURAL_ARGUMENT_SELECTOR=19]="INVALID_PLURAL_ARGUMENT_SELECTOR",n[n.DUPLICATE_PLURAL_ARGUMENT_SELECTOR=20]="DUPLICATE_PLURAL_ARGUMENT_SELECTOR",n[n.DUPLICATE_SELECT_ARGUMENT_SELECTOR=21]="DUPLICATE_SELECT_ARGUMENT_SELECTOR",n[n.MISSING_OTHER_CLAUSE=22]="MISSING_OTHER_CLAUSE",n[n.INVALID_TAG=23]="INVALID_TAG",n[n.INVALID_TAG_NAME=25]="INVALID_TAG_NAME",n[n.UNMATCHED_CLOSING_TAG=26]="UNMATCHED_CLOSING_TAG",n[n.UNCLOSED_TAG=27]="UNCLOSED_TAG"})(ut||(ut={}));var Lt;(function(n){n[n.literal=0]="literal",n[n.argument=1]="argument",n[n.number=2]="number",n[n.date=3]="date",n[n.time=4]="time",n[n.select=5]="select",n[n.plural=6]="plural",n[n.pound=7]="pound",n[n.tag=8]="tag"})(Lt||(Lt={}));var ia;(function(n){n[n.number=0]="number",n[n.dateTime=1]="dateTime"})(ia||(ia={}));function Rv(n){return n.type===Lt.literal}function EN(n){return n.type===Lt.argument}function CS(n){return n.type===Lt.number}function AS(n){return n.type===Lt.date}function PS(n){return n.type===Lt.time}function RS(n){return n.type===Lt.select}function IS(n){return n.type===Lt.plural}function CN(n){return n.type===Lt.pound}function QS(n){return n.type===Lt.tag}function NS(n){return!!(n&&typeof n=="object"&&n.type===ia.number)}function Cm(n){return!!(n&&typeof n=="object"&&n.type===ia.dateTime)}var LS=/[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/,AN=/(?:[Eec]{1,6}|G{1,5}|[Qq]{1,5}|(?:[yYur]+|U{1,5})|[ML]{1,5}|d{1,2}|D{1,3}|F{1}|[abB]{1,5}|[hkHK]{1,2}|w{1,2}|W{1}|m{1,2}|s{1,2}|[zZOvVxX]{1,4})(?=([^']*'[^']*')*[^']*$)/g;function PN(n){var e={};return n.replace(AN,function(t){var r=t.length;switch(t[0]){case"G":e.era=r===4?"long":r===5?"narrow":"short";break;case"y":e.year=r===2?"2-digit":"numeric";break;case"Y":case"u":case"U":case"r":throw new RangeError("`Y/u/U/r` (year) patterns are not supported, use `y` instead");case"q":case"Q":throw new RangeError("`q/Q` (quarter) patterns are not supported");case"M":case"L":e.month=["numeric","2-digit","short","long","narrow"][r-1];break;case"w":case"W":throw new RangeError("`w/W` (week) patterns are not supported");case"d":e.day=["numeric","2-digit"][r-1];break;case"D":case"F":case"g":throw new RangeError("`D/F/g` (day) patterns are not supported, use `d` instead");case"E":e.weekday=r===4?"short":r===5?"narrow":"short";break;case"e":if(r<4)throw new RangeError("`e..eee` (weekday) patterns are not supported");e.weekday=["short","long","narrow","short"][r-4];break;case"c":if(r<4)throw new RangeError("`c..ccc` (weekday) patterns are not supported");e.weekday=["short","long","narrow","short"][r-4];break;case"a":e.hour12=!0;break;case"b":case"B":throw new RangeError("`b/B` (period) patterns are not supported, use `a` instead");case"h":e.hourCycle="h12",e.hour=["numeric","2-digit"][r-1];break;case"H":e.hourCycle="h23",e.hour=["numeric","2-digit"][r-1];break;case"K":e.hourCycle="h11",e.hour=["numeric","2-digit"][r-1];break;case"k":e.hourCycle="h24",e.hour=["numeric","2-digit"][r-1];break;case"j":case"J":case"C":throw new RangeError("`j/J/C` (hour) patterns are not supported, use `h/H/K/k` instead");case"m":e.minute=["numeric","2-digit"][r-1];break;case"s":e.second=["numeric","2-digit"][r-1];break;case"S":case"A":throw new RangeError("`S/A` (second) patterns are not supported, use `s` instead");case"z":e.timeZoneName=r<4?"short":"long";break;case"Z":case"O":case"v":case"V":case"X":case"x":throw new RangeError("`Z/O/v/V/X/x` (timeZone) patterns are not supported, use `z` instead")}return""}),e}var RN=/[\t-\r \x85\u200E\u200F\u2028\u2029]/i;function IN(n){if(n.length===0)throw new Error("Number skeleton cannot be empty");for(var e=n.split(RN).filter(function(f){return f.length>0}),t=[],r=0,i=e;r<i.length;r++){var s=i[r],o=s.split("/");if(o.length===0)throw new Error("Invalid number skeleton");for(var a=o[0],l=o.slice(1),c=0,u=l;c<u.length;c++){var h=u[c];if(h.length===0)throw new Error("Invalid number skeleton")}t.push({stem:a,options:l})}return t}function QN(n){return n.replace(/^(.*?)-/,"")}var Iv=/^\.(?:(0+)(\*)?|(#+)|(0+)(#+))$/g,DS=/^(@+)?(\+|#+)?[rs]?$/g,NN=/(\*)(0+)|(#+)(0+)|(0+)/g,MS=/^(0+)$/;function Qv(n){var e={};return n[n.length-1]==="r"?e.roundingPriority="morePrecision":n[n.length-1]==="s"&&(e.roundingPriority="lessPrecision"),n.replace(DS,function(t,r,i){return typeof i!="string"?(e.minimumSignificantDigits=r.length,e.maximumSignificantDigits=r.length):i==="+"?e.minimumSignificantDigits=r.length:r[0]==="#"?e.maximumSignificantDigits=r.length:(e.minimumSignificantDigits=r.length,e.maximumSignificantDigits=r.length+(typeof i=="string"?i.length:0)),""}),e}function $S(n){switch(n){case"sign-auto":return{signDisplay:"auto"};case"sign-accounting":case"()":return{currencySign:"accounting"};case"sign-always":case"+!":return{signDisplay:"always"};case"sign-accounting-always":case"()!":return{signDisplay:"always",currencySign:"accounting"};case"sign-except-zero":case"+?":return{signDisplay:"exceptZero"};case"sign-accounting-except-zero":case"()?":return{signDisplay:"exceptZero",currencySign:"accounting"};case"sign-never":case"+_":return{signDisplay:"never"}}}function LN(n){var e;if(n[0]==="E"&&n[1]==="E"?(e={notation:"engineering"},n=n.slice(2)):n[0]==="E"&&(e={notation:"scientific"},n=n.slice(1)),e){var t=n.slice(0,2);if(t==="+!"?(e.signDisplay="always",n=n.slice(2)):t==="+?"&&(e.signDisplay="exceptZero",n=n.slice(2)),!MS.test(n))throw new Error("Malformed concise eng/scientific notation");e.minimumIntegerDigits=n.length}return e}function Nv(n){var e={},t=$S(n);return t||e}function DN(n){for(var e={},t=0,r=n;t<r.length;t++){var i=r[t];switch(i.stem){case"percent":case"%":e.style="percent";continue;case"%x100":e.style="percent",e.scale=100;continue;case"currency":e.style="currency",e.currency=i.options[0];continue;case"group-off":case",_":e.useGrouping=!1;continue;case"precision-integer":case".":e.maximumFractionDigits=0;continue;case"measure-unit":case"unit":e.style="unit",e.unit=QN(i.options[0]);continue;case"compact-short":case"K":e.notation="compact",e.compactDisplay="short";continue;case"compact-long":case"KK":e.notation="compact",e.compactDisplay="long";continue;case"scientific":e=gt(gt(gt({},e),{notation:"scientific"}),i.options.reduce(function(l,c){return gt(gt({},l),Nv(c))},{}));continue;case"engineering":e=gt(gt(gt({},e),{notation:"engineering"}),i.options.reduce(function(l,c){return gt(gt({},l),Nv(c))},{}));continue;case"notation-simple":e.notation="standard";continue;case"unit-width-narrow":e.currencyDisplay="narrowSymbol",e.unitDisplay="narrow";continue;case"unit-width-short":e.currencyDisplay="code",e.unitDisplay="short";continue;case"unit-width-full-name":e.currencyDisplay="name",e.unitDisplay="long";continue;case"unit-width-iso-code":e.currencyDisplay="symbol";continue;case"scale":e.scale=parseFloat(i.options[0]);continue;case"integer-width":if(i.options.length>1)throw new RangeError("integer-width stems only accept a single optional option");i.options[0].replace(NN,function(l,c,u,h,f,p){if(c)e.minimumIntegerDigits=u.length;else{if(h&&f)throw new Error("We currently do not support maximum integer digits");if(p)throw new Error("We currently do not support exact integer digits")}return""});continue}if(MS.test(i.stem)){e.minimumIntegerDigits=i.stem.length;continue}if(Iv.test(i.stem)){if(i.options.length>1)throw new RangeError("Fraction-precision stems only accept a single optional option");i.stem.replace(Iv,function(l,c,u,h,f,p){return u==="*"?e.minimumFractionDigits=c.length:h&&h[0]==="#"?e.maximumFractionDigits=h.length:f&&p?(e.minimumFractionDigits=f.length,e.maximumFractionDigits=f.length+p.length):(e.minimumFractionDigits=c.length,e.maximumFractionDigits=c.length),""});var s=i.options[0];s==="w"?e=gt(gt({},e),{trailingZeroDisplay:"stripIfInteger"}):s&&(e=gt(gt({},e),Qv(s)));continue}if(DS.test(i.stem)){e=gt(gt({},e),Qv(i.stem));continue}var o=$S(i.stem);o&&(e=gt(gt({},e),o));var a=LN(i.stem);a&&(e=gt(gt({},e),a))}return e}var hu={AX:["H"],BQ:["H"],CP:["H"],CZ:["H"],DK:["H"],FI:["H"],ID:["H"],IS:["H"],ML:["H"],NE:["H"],RU:["H"],SE:["H"],SJ:["H"],SK:["H"],AS:["h","H"],BT:["h","H"],DJ:["h","H"],ER:["h","H"],GH:["h","H"],IN:["h","H"],LS:["h","H"],PG:["h","H"],PW:["h","H"],SO:["h","H"],TO:["h","H"],VU:["h","H"],WS:["h","H"],"001":["H","h"],AL:["h","H","hB"],TD:["h","H","hB"],"ca-ES":["H","h","hB"],CF:["H","h","hB"],CM:["H","h","hB"],"fr-CA":["H","h","hB"],"gl-ES":["H","h","hB"],"it-CH":["H","h","hB"],"it-IT":["H","h","hB"],LU:["H","h","hB"],NP:["H","h","hB"],PF:["H","h","hB"],SC:["H","h","hB"],SM:["H","h","hB"],SN:["H","h","hB"],TF:["H","h","hB"],VA:["H","h","hB"],CY:["h","H","hb","hB"],GR:["h","H","hb","hB"],CO:["h","H","hB","hb"],DO:["h","H","hB","hb"],KP:["h","H","hB","hb"],KR:["h","H","hB","hb"],NA:["h","H","hB","hb"],PA:["h","H","hB","hb"],PR:["h","H","hB","hb"],VE:["h","H","hB","hb"],AC:["H","h","hb","hB"],AI:["H","h","hb","hB"],BW:["H","h","hb","hB"],BZ:["H","h","hb","hB"],CC:["H","h","hb","hB"],CK:["H","h","hb","hB"],CX:["H","h","hb","hB"],DG:["H","h","hb","hB"],FK:["H","h","hb","hB"],GB:["H","h","hb","hB"],GG:["H","h","hb","hB"],GI:["H","h","hb","hB"],IE:["H","h","hb","hB"],IM:["H","h","hb","hB"],IO:["H","h","hb","hB"],JE:["H","h","hb","hB"],LT:["H","h","hb","hB"],MK:["H","h","hb","hB"],MN:["H","h","hb","hB"],MS:["H","h","hb","hB"],NF:["H","h","hb","hB"],NG:["H","h","hb","hB"],NR:["H","h","hb","hB"],NU:["H","h","hb","hB"],PN:["H","h","hb","hB"],SH:["H","h","hb","hB"],SX:["H","h","hb","hB"],TA:["H","h","hb","hB"],ZA:["H","h","hb","hB"],"af-ZA":["H","h","hB","hb"],AR:["H","h","hB","hb"],CL:["H","h","hB","hb"],CR:["H","h","hB","hb"],CU:["H","h","hB","hb"],EA:["H","h","hB","hb"],"es-BO":["H","h","hB","hb"],"es-BR":["H","h","hB","hb"],"es-EC":["H","h","hB","hb"],"es-ES":["H","h","hB","hb"],"es-GQ":["H","h","hB","hb"],"es-PE":["H","h","hB","hb"],GT:["H","h","hB","hb"],HN:["H","h","hB","hb"],IC:["H","h","hB","hb"],KG:["H","h","hB","hb"],KM:["H","h","hB","hb"],LK:["H","h","hB","hb"],MA:["H","h","hB","hb"],MX:["H","h","hB","hb"],NI:["H","h","hB","hb"],PY:["H","h","hB","hb"],SV:["H","h","hB","hb"],UY:["H","h","hB","hb"],JP:["H","h","K"],AD:["H","hB"],AM:["H","hB"],AO:["H","hB"],AT:["H","hB"],AW:["H","hB"],BE:["H","hB"],BF:["H","hB"],BJ:["H","hB"],BL:["H","hB"],BR:["H","hB"],CG:["H","hB"],CI:["H","hB"],CV:["H","hB"],DE:["H","hB"],EE:["H","hB"],FR:["H","hB"],GA:["H","hB"],GF:["H","hB"],GN:["H","hB"],GP:["H","hB"],GW:["H","hB"],HR:["H","hB"],IL:["H","hB"],IT:["H","hB"],KZ:["H","hB"],MC:["H","hB"],MD:["H","hB"],MF:["H","hB"],MQ:["H","hB"],MZ:["H","hB"],NC:["H","hB"],NL:["H","hB"],PM:["H","hB"],PT:["H","hB"],RE:["H","hB"],RO:["H","hB"],SI:["H","hB"],SR:["H","hB"],ST:["H","hB"],TG:["H","hB"],TR:["H","hB"],WF:["H","hB"],YT:["H","hB"],BD:["h","hB","H"],PK:["h","hB","H"],AZ:["H","hB","h"],BA:["H","hB","h"],BG:["H","hB","h"],CH:["H","hB","h"],GE:["H","hB","h"],LI:["H","hB","h"],ME:["H","hB","h"],RS:["H","hB","h"],UA:["H","hB","h"],UZ:["H","hB","h"],XK:["H","hB","h"],AG:["h","hb","H","hB"],AU:["h","hb","H","hB"],BB:["h","hb","H","hB"],BM:["h","hb","H","hB"],BS:["h","hb","H","hB"],CA:["h","hb","H","hB"],DM:["h","hb","H","hB"],"en-001":["h","hb","H","hB"],FJ:["h","hb","H","hB"],FM:["h","hb","H","hB"],GD:["h","hb","H","hB"],GM:["h","hb","H","hB"],GU:["h","hb","H","hB"],GY:["h","hb","H","hB"],JM:["h","hb","H","hB"],KI:["h","hb","H","hB"],KN:["h","hb","H","hB"],KY:["h","hb","H","hB"],LC:["h","hb","H","hB"],LR:["h","hb","H","hB"],MH:["h","hb","H","hB"],MP:["h","hb","H","hB"],MW:["h","hb","H","hB"],NZ:["h","hb","H","hB"],SB:["h","hb","H","hB"],SG:["h","hb","H","hB"],SL:["h","hb","H","hB"],SS:["h","hb","H","hB"],SZ:["h","hb","H","hB"],TC:["h","hb","H","hB"],TT:["h","hb","H","hB"],UM:["h","hb","H","hB"],US:["h","hb","H","hB"],VC:["h","hb","H","hB"],VG:["h","hb","H","hB"],VI:["h","hb","H","hB"],ZM:["h","hb","H","hB"],BO:["H","hB","h","hb"],EC:["H","hB","h","hb"],ES:["H","hB","h","hb"],GQ:["H","hB","h","hb"],PE:["H","hB","h","hb"],AE:["h","hB","hb","H"],"ar-001":["h","hB","hb","H"],BH:["h","hB","hb","H"],DZ:["h","hB","hb","H"],EG:["h","hB","hb","H"],EH:["h","hB","hb","H"],HK:["h","hB","hb","H"],IQ:["h","hB","hb","H"],JO:["h","hB","hb","H"],KW:["h","hB","hb","H"],LB:["h","hB","hb","H"],LY:["h","hB","hb","H"],MO:["h","hB","hb","H"],MR:["h","hB","hb","H"],OM:["h","hB","hb","H"],PH:["h","hB","hb","H"],PS:["h","hB","hb","H"],QA:["h","hB","hb","H"],SA:["h","hB","hb","H"],SD:["h","hB","hb","H"],SY:["h","hB","hb","H"],TN:["h","hB","hb","H"],YE:["h","hB","hb","H"],AF:["H","hb","hB","h"],LA:["H","hb","hB","h"],CN:["H","hB","hb","h"],LV:["H","hB","hb","h"],TL:["H","hB","hb","h"],"zu-ZA":["H","hB","hb","h"],CD:["hB","H"],IR:["hB","H"],"hi-IN":["hB","h","H"],"kn-IN":["hB","h","H"],"ml-IN":["hB","h","H"],"te-IN":["hB","h","H"],KH:["hB","h","H","hb"],"ta-IN":["hB","h","hb","H"],BN:["hb","hB","h","H"],MY:["hb","hB","h","H"],ET:["hB","hb","h","H"],"gu-IN":["hB","hb","h","H"],"mr-IN":["hB","hb","h","H"],"pa-IN":["hB","hb","h","H"],TW:["hB","hb","h","H"],KE:["hB","hb","H","h"],MM:["hB","hb","H","h"],TZ:["hB","hb","H","h"],UG:["hB","hb","H","h"]};function MN(n,e){for(var t="",r=0;r<n.length;r++){var i=n.charAt(r);if(i==="j"){for(var s=0;r+1<n.length&&n.charAt(r+1)===i;)s++,r++;var o=1+(s&1),a=s<2?1:3+(s>>1),l="a",c=$N(e);for((c=="H"||c=="k")&&(a=0);a-- >0;)t+=l;for(;o-- >0;)t=c+t}else i==="J"?t+="H":t+=i}return t}function $N(n){var e=n.hourCycle;if(e===void 0&&n.hourCycles&&n.hourCycles.length&&(e=n.hourCycles[0]),e)switch(e){case"h24":return"k";case"h23":return"H";case"h12":return"h";case"h11":return"K";default:throw new Error("Invalid hourCycle")}var t=n.language,r;t!=="root"&&(r=n.maximize().region);var i=hu[r||""]||hu[t||""]||hu["".concat(t,"-001")]||hu["001"];return i[0]}var xp,BN=new RegExp("^".concat(LS.source,"*")),FN=new RegExp("".concat(LS.source,"*$"));function ft(n,e){return{start:n,end:e}}var UN=!!String.prototype.startsWith,VN=!!String.fromCodePoint,WN=!!Object.fromEntries,jN=!!String.prototype.codePointAt,qN=!!String.prototype.trimStart,XN=!!String.prototype.trimEnd,zN=!!Number.isSafeInteger,HN=zN?Number.isSafeInteger:function(n){return typeof n=="number"&&isFinite(n)&&Math.floor(n)===n&&Math.abs(n)<=9007199254740991},Am=!0;try{var ZN=FS("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");Am=((xp=ZN.exec("a"))===null||xp===void 0?void 0:xp[0])==="a"}catch{Am=!1}var Lv=UN?function(e,t,r){return e.startsWith(t,r)}:function(e,t,r){return e.slice(r,r+t.length)===t},Pm=VN?String.fromCodePoint:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r="",i=e.length,s=0,o;i>s;){if(o=e[s++],o>1114111)throw RangeError(o+" is not a valid code point");r+=o<65536?String.fromCharCode(o):String.fromCharCode(((o-=65536)>>10)+55296,o%1024+56320)}return r},Dv=WN?Object.fromEntries:function(e){for(var t={},r=0,i=e;r<i.length;r++){var s=i[r],o=s[0],a=s[1];t[o]=a}return t},BS=jN?function(e,t){return e.codePointAt(t)}:function(e,t){var r=e.length;if(!(t<0||t>=r)){var i=e.charCodeAt(t),s;return i<55296||i>56319||t+1===r||(s=e.charCodeAt(t+1))<56320||s>57343?i:(i-55296<<10)+(s-56320)+65536}},GN=qN?function(e){return e.trimStart()}:function(e){return e.replace(BN,"")},YN=XN?function(e){return e.trimEnd()}:function(e){return e.replace(FN,"")};function FS(n,e){return new RegExp(n,e)}var Rm;if(Am){var Mv=FS("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");Rm=function(e,t){var r;Mv.lastIndex=t;var i=Mv.exec(e);return(r=i[1])!==null&&r!==void 0?r:""}}else Rm=function(e,t){for(var r=[];;){var i=BS(e,t);if(i===void 0||US(i)||tL(i))break;r.push(i),t+=i>=65536?2:1}return Pm.apply(void 0,r)};var KN=function(){function n(e,t){t===void 0&&(t={}),this.message=e,this.position={offset:0,line:1,column:1},this.ignoreTag=!!t.ignoreTag,this.locale=t.locale,this.requiresOtherClause=!!t.requiresOtherClause,this.shouldParseSkeletons=!!t.shouldParseSkeletons}return n.prototype.parse=function(){if(this.offset()!==0)throw Error("parser can only be used once");return this.parseMessage(0,"",!1)},n.prototype.parseMessage=function(e,t,r){for(var i=[];!this.isEOF();){var s=this.char();if(s===123){var o=this.parseArgument(e,r);if(o.err)return o;i.push(o.val)}else{if(s===125&&e>0)break;if(s===35&&(t==="plural"||t==="selectordinal")){var a=this.clonePosition();this.bump(),i.push({type:Lt.pound,location:ft(a,this.clonePosition())})}else if(s===60&&!this.ignoreTag&&this.peek()===47){if(r)break;return this.error(ut.UNMATCHED_CLOSING_TAG,ft(this.clonePosition(),this.clonePosition()))}else if(s===60&&!this.ignoreTag&&Im(this.peek()||0)){var o=this.parseTag(e,t);if(o.err)return o;i.push(o.val)}else{var o=this.parseLiteral(e,t);if(o.err)return o;i.push(o.val)}}}return{val:i,err:null}},n.prototype.parseTag=function(e,t){var r=this.clonePosition();this.bump();var i=this.parseTagName();if(this.bumpSpace(),this.bumpIf("/>"))return{val:{type:Lt.literal,value:"<".concat(i,"/>"),location:ft(r,this.clonePosition())},err:null};if(this.bumpIf(">")){var s=this.parseMessage(e+1,t,!0);if(s.err)return s;var o=s.val,a=this.clonePosition();if(this.bumpIf("</")){if(this.isEOF()||!Im(this.char()))return this.error(ut.INVALID_TAG,ft(a,this.clonePosition()));var l=this.clonePosition(),c=this.parseTagName();return i!==c?this.error(ut.UNMATCHED_CLOSING_TAG,ft(l,this.clonePosition())):(this.bumpSpace(),this.bumpIf(">")?{val:{type:Lt.tag,value:i,children:o,location:ft(r,this.clonePosition())},err:null}:this.error(ut.INVALID_TAG,ft(a,this.clonePosition())))}else return this.error(ut.UNCLOSED_TAG,ft(r,this.clonePosition()))}else return this.error(ut.INVALID_TAG,ft(r,this.clonePosition()))},n.prototype.parseTagName=function(){var e=this.offset();for(this.bump();!this.isEOF()&&eL(this.char());)this.bump();return this.message.slice(e,this.offset())},n.prototype.parseLiteral=function(e,t){for(var r=this.clonePosition(),i="";;){var s=this.tryParseQuote(t);if(s){i+=s;continue}var o=this.tryParseUnquoted(e,t);if(o){i+=o;continue}var a=this.tryParseLeftAngleBracket();if(a){i+=a;continue}break}var l=ft(r,this.clonePosition());return{val:{type:Lt.literal,value:i,location:l},err:null}},n.prototype.tryParseLeftAngleBracket=function(){return!this.isEOF()&&this.char()===60&&(this.ignoreTag||!JN(this.peek()||0))?(this.bump(),"<"):null},n.prototype.tryParseQuote=function(e){if(this.isEOF()||this.char()!==39)return null;switch(this.peek()){case 39:return this.bump(),this.bump(),"'";case 123:case 60:case 62:case 125:break;case 35:if(e==="plural"||e==="selectordinal")break;return null;default:return null}this.bump();var t=[this.char()];for(this.bump();!this.isEOF();){var r=this.char();if(r===39)if(this.peek()===39)t.push(39),this.bump();else{this.bump();break}else t.push(r);this.bump()}return Pm.apply(void 0,t)},n.prototype.tryParseUnquoted=function(e,t){if(this.isEOF())return null;var r=this.char();return r===60||r===123||r===35&&(t==="plural"||t==="selectordinal")||r===125&&e>0?null:(this.bump(),Pm(r))},n.prototype.parseArgument=function(e,t){var r=this.clonePosition();if(this.bump(),this.bumpSpace(),this.isEOF())return this.error(ut.EXPECT_ARGUMENT_CLOSING_BRACE,ft(r,this.clonePosition()));if(this.char()===125)return this.bump(),this.error(ut.EMPTY_ARGUMENT,ft(r,this.clonePosition()));var i=this.parseIdentifierIfPossible().value;if(!i)return this.error(ut.MALFORMED_ARGUMENT,ft(r,this.clonePosition()));if(this.bumpSpace(),this.isEOF())return this.error(ut.EXPECT_ARGUMENT_CLOSING_BRACE,ft(r,this.clonePosition()));switch(this.char()){case 125:return this.bump(),{val:{type:Lt.argument,value:i,location:ft(r,this.clonePosition())},err:null};case 44:return this.bump(),this.bumpSpace(),this.isEOF()?this.error(ut.EXPECT_ARGUMENT_CLOSING_BRACE,ft(r,this.clonePosition())):this.parseArgumentOptions(e,t,i,r);default:return this.error(ut.MALFORMED_ARGUMENT,ft(r,this.clonePosition()))}},n.prototype.parseIdentifierIfPossible=function(){var e=this.clonePosition(),t=this.offset(),r=Rm(this.message,t),i=t+r.length;this.bumpTo(i);var s=this.clonePosition(),o=ft(e,s);return{value:r,location:o}},n.prototype.parseArgumentOptions=function(e,t,r,i){var s,o=this.clonePosition(),a=this.parseIdentifierIfPossible().value,l=this.clonePosition();switch(a){case"":return this.error(ut.EXPECT_ARGUMENT_TYPE,ft(o,l));case"number":case"date":case"time":{this.bumpSpace();var c=null;if(this.bumpIf(",")){this.bumpSpace();var u=this.clonePosition(),h=this.parseSimpleArgStyleIfPossible();if(h.err)return h;var f=YN(h.val);if(f.length===0)return this.error(ut.EXPECT_ARGUMENT_STYLE,ft(this.clonePosition(),this.clonePosition()));var p=ft(u,this.clonePosition());c={style:f,styleLocation:p}}var d=this.tryParseArgumentClose(i);if(d.err)return d;var m=ft(i,this.clonePosition());if(c&&Lv(c==null?void 0:c.style,"::",0)){var y=GN(c.style.slice(2));if(a==="number"){var h=this.parseNumberSkeletonFromString(y,c.styleLocation);return h.err?h:{val:{type:Lt.number,value:r,location:m,style:h.val},err:null}}else{if(y.length===0)return this.error(ut.EXPECT_DATE_TIME_SKELETON,m);var w=y;this.locale&&(w=MN(y,this.locale));var f={type:ia.dateTime,pattern:w,location:c.styleLocation,parsedOptions:this.shouldParseSkeletons?PN(w):{}},b=a==="date"?Lt.date:Lt.time;return{val:{type:b,value:r,location:m,style:f},err:null}}}return{val:{type:a==="number"?Lt.number:a==="date"?Lt.date:Lt.time,value:r,location:m,style:(s=c==null?void 0:c.style)!==null&&s!==void 0?s:null},err:null}}case"plural":case"selectordinal":case"select":{var O=this.clonePosition();if(this.bumpSpace(),!this.bumpIf(","))return this.error(ut.EXPECT_SELECT_ARGUMENT_OPTIONS,ft(O,gt({},O)));this.bumpSpace();var v=this.parseIdentifierIfPossible(),_=0;if(a!=="select"&&v.value==="offset"){if(!this.bumpIf(":"))return this.error(ut.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,ft(this.clonePosition(),this.clonePosition()));this.bumpSpace();var h=this.tryParseDecimalInteger(ut.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,ut.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE);if(h.err)return h;this.bumpSpace(),v=this.parseIdentifierIfPossible(),_=h.val}var S=this.tryParsePluralOrSelectOptions(e,a,t,v);if(S.err)return S;var d=this.tryParseArgumentClose(i);if(d.err)return d;var R=ft(i,this.clonePosition());return a==="select"?{val:{type:Lt.select,value:r,options:Dv(S.val),location:R},err:null}:{val:{type:Lt.plural,value:r,options:Dv(S.val),offset:_,pluralType:a==="plural"?"cardinal":"ordinal",location:R},err:null}}default:return this.error(ut.INVALID_ARGUMENT_TYPE,ft(o,l))}},n.prototype.tryParseArgumentClose=function(e){return this.isEOF()||this.char()!==125?this.error(ut.EXPECT_ARGUMENT_CLOSING_BRACE,ft(e,this.clonePosition())):(this.bump(),{val:!0,err:null})},n.prototype.parseSimpleArgStyleIfPossible=function(){for(var e=0,t=this.clonePosition();!this.isEOF();){var r=this.char();switch(r){case 39:{this.bump();var i=this.clonePosition();if(!this.bumpUntil("'"))return this.error(ut.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE,ft(i,this.clonePosition()));this.bump();break}case 123:{e+=1,this.bump();break}case 125:{if(e>0)e-=1;else return{val:this.message.slice(t.offset,this.offset()),err:null};break}default:this.bump();break}}return{val:this.message.slice(t.offset,this.offset()),err:null}},n.prototype.parseNumberSkeletonFromString=function(e,t){var r=[];try{r=IN(e)}catch{return this.error(ut.INVALID_NUMBER_SKELETON,t)}return{val:{type:ia.number,tokens:r,location:t,parsedOptions:this.shouldParseSkeletons?DN(r):{}},err:null}},n.prototype.tryParsePluralOrSelectOptions=function(e,t,r,i){for(var s,o=!1,a=[],l=new Set,c=i.value,u=i.location;;){if(c.length===0){var h=this.clonePosition();if(t!=="select"&&this.bumpIf("=")){var f=this.tryParseDecimalInteger(ut.EXPECT_PLURAL_ARGUMENT_SELECTOR,ut.INVALID_PLURAL_ARGUMENT_SELECTOR);if(f.err)return f;u=ft(h,this.clonePosition()),c=this.message.slice(h.offset,this.offset())}else break}if(l.has(c))return this.error(t==="select"?ut.DUPLICATE_SELECT_ARGUMENT_SELECTOR:ut.DUPLICATE_PLURAL_ARGUMENT_SELECTOR,u);c==="other"&&(o=!0),this.bumpSpace();var p=this.clonePosition();if(!this.bumpIf("{"))return this.error(t==="select"?ut.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT:ut.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT,ft(this.clonePosition(),this.clonePosition()));var d=this.parseMessage(e+1,t,r);if(d.err)return d;var m=this.tryParseArgumentClose(p);if(m.err)return m;a.push([c,{value:d.val,location:ft(p,this.clonePosition())}]),l.add(c),this.bumpSpace(),s=this.parseIdentifierIfPossible(),c=s.value,u=s.location}return a.length===0?this.error(t==="select"?ut.EXPECT_SELECT_ARGUMENT_SELECTOR:ut.EXPECT_PLURAL_ARGUMENT_SELECTOR,ft(this.clonePosition(),this.clonePosition())):this.requiresOtherClause&&!o?this.error(ut.MISSING_OTHER_CLAUSE,ft(this.clonePosition(),this.clonePosition())):{val:a,err:null}},n.prototype.tryParseDecimalInteger=function(e,t){var r=1,i=this.clonePosition();this.bumpIf("+")||this.bumpIf("-")&&(r=-1);for(var s=!1,o=0;!this.isEOF();){var a=this.char();if(a>=48&&a<=57)s=!0,o=o*10+(a-48),this.bump();else break}var l=ft(i,this.clonePosition());return s?(o*=r,HN(o)?{val:o,err:null}:this.error(t,l)):this.error(e,l)},n.prototype.offset=function(){return this.position.offset},n.prototype.isEOF=function(){return this.offset()===this.message.length},n.prototype.clonePosition=function(){return{offset:this.position.offset,line:this.position.line,column:this.position.column}},n.prototype.char=function(){var e=this.position.offset;if(e>=this.message.length)throw Error("out of bound");var t=BS(this.message,e);if(t===void 0)throw Error("Offset ".concat(e," is at invalid UTF-16 code unit boundary"));return t},n.prototype.error=function(e,t){return{val:null,err:{kind:e,message:this.message,location:t}}},n.prototype.bump=function(){if(!this.isEOF()){var e=this.char();e===10?(this.position.line+=1,this.position.column=1,this.position.offset+=1):(this.position.column+=1,this.position.offset+=e<65536?1:2)}},n.prototype.bumpIf=function(e){if(Lv(this.message,e,this.offset())){for(var t=0;t<e.length;t++)this.bump();return!0}return!1},n.prototype.bumpUntil=function(e){var t=this.offset(),r=this.message.indexOf(e,t);return r>=0?(this.bumpTo(r),!0):(this.bumpTo(this.message.length),!1)},n.prototype.bumpTo=function(e){if(this.offset()>e)throw Error("targetOffset ".concat(e," must be greater than or equal to the current offset ").concat(this.offset()));for(e=Math.min(e,this.message.length);;){var t=this.offset();if(t===e)break;if(t>e)throw Error("targetOffset ".concat(e," is at invalid UTF-16 code unit boundary"));if(this.bump(),this.isEOF())break}},n.prototype.bumpSpace=function(){for(;!this.isEOF()&&US(this.char());)this.bump()},n.prototype.peek=function(){if(this.isEOF())return null;var e=this.char(),t=this.offset(),r=this.message.charCodeAt(t+(e>=65536?2:1));return r!=null?r:null},n}();function Im(n){return n>=97&&n<=122||n>=65&&n<=90}function JN(n){return Im(n)||n===47}function eL(n){return n===45||n===46||n>=48&&n<=57||n===95||n>=97&&n<=122||n>=65&&n<=90||n==183||n>=192&&n<=214||n>=216&&n<=246||n>=248&&n<=893||n>=895&&n<=8191||n>=8204&&n<=8205||n>=8255&&n<=8256||n>=8304&&n<=8591||n>=11264&&n<=12271||n>=12289&&n<=55295||n>=63744&&n<=64975||n>=65008&&n<=65533||n>=65536&&n<=983039}function US(n){return n>=9&&n<=13||n===32||n===133||n>=8206&&n<=8207||n===8232||n===8233}function tL(n){return n>=33&&n<=35||n===36||n>=37&&n<=39||n===40||n===41||n===42||n===43||n===44||n===45||n>=46&&n<=47||n>=58&&n<=59||n>=60&&n<=62||n>=63&&n<=64||n===91||n===92||n===93||n===94||n===96||n===123||n===124||n===125||n===126||n===161||n>=162&&n<=165||n===166||n===167||n===169||n===171||n===172||n===174||n===176||n===177||n===182||n===187||n===191||n===215||n===247||n>=8208&&n<=8213||n>=8214&&n<=8215||n===8216||n===8217||n===8218||n>=8219&&n<=8220||n===8221||n===8222||n===8223||n>=8224&&n<=8231||n>=8240&&n<=8248||n===8249||n===8250||n>=8251&&n<=8254||n>=8257&&n<=8259||n===8260||n===8261||n===8262||n>=8263&&n<=8273||n===8274||n===8275||n>=8277&&n<=8286||n>=8592&&n<=8596||n>=8597&&n<=8601||n>=8602&&n<=8603||n>=8604&&n<=8607||n===8608||n>=8609&&n<=8610||n===8611||n>=8612&&n<=8613||n===8614||n>=8615&&n<=8621||n===8622||n>=8623&&n<=8653||n>=8654&&n<=8655||n>=8656&&n<=8657||n===8658||n===8659||n===8660||n>=8661&&n<=8691||n>=8692&&n<=8959||n>=8960&&n<=8967||n===8968||n===8969||n===8970||n===8971||n>=8972&&n<=8991||n>=8992&&n<=8993||n>=8994&&n<=9e3||n===9001||n===9002||n>=9003&&n<=9083||n===9084||n>=9085&&n<=9114||n>=9115&&n<=9139||n>=9140&&n<=9179||n>=9180&&n<=9185||n>=9186&&n<=9254||n>=9255&&n<=9279||n>=9280&&n<=9290||n>=9291&&n<=9311||n>=9472&&n<=9654||n===9655||n>=9656&&n<=9664||n===9665||n>=9666&&n<=9719||n>=9720&&n<=9727||n>=9728&&n<=9838||n===9839||n>=9840&&n<=10087||n===10088||n===10089||n===10090||n===10091||n===10092||n===10093||n===10094||n===10095||n===10096||n===10097||n===10098||n===10099||n===10100||n===10101||n>=10132&&n<=10175||n>=10176&&n<=10180||n===10181||n===10182||n>=10183&&n<=10213||n===10214||n===10215||n===10216||n===10217||n===10218||n===10219||n===10220||n===10221||n===10222||n===10223||n>=10224&&n<=10239||n>=10240&&n<=10495||n>=10496&&n<=10626||n===10627||n===10628||n===10629||n===10630||n===10631||n===10632||n===10633||n===10634||n===10635||n===10636||n===10637||n===10638||n===10639||n===10640||n===10641||n===10642||n===10643||n===10644||n===10645||n===10646||n===10647||n===10648||n>=10649&&n<=10711||n===10712||n===10713||n===10714||n===10715||n>=10716&&n<=10747||n===10748||n===10749||n>=10750&&n<=11007||n>=11008&&n<=11055||n>=11056&&n<=11076||n>=11077&&n<=11078||n>=11079&&n<=11084||n>=11085&&n<=11123||n>=11124&&n<=11125||n>=11126&&n<=11157||n===11158||n>=11159&&n<=11263||n>=11776&&n<=11777||n===11778||n===11779||n===11780||n===11781||n>=11782&&n<=11784||n===11785||n===11786||n===11787||n===11788||n===11789||n>=11790&&n<=11798||n===11799||n>=11800&&n<=11801||n===11802||n===11803||n===11804||n===11805||n>=11806&&n<=11807||n===11808||n===11809||n===11810||n===11811||n===11812||n===11813||n===11814||n===11815||n===11816||n===11817||n>=11818&&n<=11822||n===11823||n>=11824&&n<=11833||n>=11834&&n<=11835||n>=11836&&n<=11839||n===11840||n===11841||n===11842||n>=11843&&n<=11855||n>=11856&&n<=11857||n===11858||n>=11859&&n<=11903||n>=12289&&n<=12291||n===12296||n===12297||n===12298||n===12299||n===12300||n===12301||n===12302||n===12303||n===12304||n===12305||n>=12306&&n<=12307||n===12308||n===12309||n===12310||n===12311||n===12312||n===12313||n===12314||n===12315||n===12316||n===12317||n>=12318&&n<=12319||n===12320||n===12336||n===64830||n===64831||n>=65093&&n<=65094}function Qm(n){n.forEach(function(e){if(delete e.location,RS(e)||IS(e))for(var t in e.options)delete e.options[t].location,Qm(e.options[t].value);else CS(e)&&NS(e.style)||(AS(e)||PS(e))&&Cm(e.style)?delete e.style.location:QS(e)&&Qm(e.children)})}function nL(n,e){e===void 0&&(e={}),e=gt({shouldParseSkeletons:!0,requiresOtherClause:!0},e);var t=new KN(n,e).parse();if(t.err){var r=SyntaxError(ut[t.err.kind]);throw r.location=t.err.location,r.originalMessage=t.err.message,r}return e!=null&&e.captureLocation||Qm(t.val),t.val}function Sp(n,e){var t=e&&e.cache?e.cache:lL,r=e&&e.serializer?e.serializer:aL,i=e&&e.strategy?e.strategy:iL;return i(n,{cache:t,serializer:r})}function rL(n){return n==null||typeof n=="number"||typeof n=="boolean"}function VS(n,e,t,r){var i=rL(r)?r:t(r),s=e.get(i);return typeof s>"u"&&(s=n.call(this,r),e.set(i,s)),s}function WS(n,e,t){var r=Array.prototype.slice.call(arguments,3),i=t(r),s=e.get(i);return typeof s>"u"&&(s=n.apply(this,r),e.set(i,s)),s}function $O(n,e,t,r,i){return t.bind(e,n,r,i)}function iL(n,e){var t=n.length===1?VS:WS;return $O(n,this,t,e.cache.create(),e.serializer)}function sL(n,e){return $O(n,this,WS,e.cache.create(),e.serializer)}function oL(n,e){return $O(n,this,VS,e.cache.create(),e.serializer)}var aL=function(){return JSON.stringify(arguments)};function BO(){this.cache=Object.create(null)}BO.prototype.get=function(n){return this.cache[n]};BO.prototype.set=function(n,e){this.cache[n]=e};var lL={create:function(){return new BO}},kp={variadic:sL,monadic:oL},sa;(function(n){n.MISSING_VALUE="MISSING_VALUE",n.INVALID_VALUE="INVALID_VALUE",n.MISSING_INTL_API="MISSING_INTL_API"})(sa||(sa={}));var Ff=function(n){Bf(e,n);function e(t,r,i){var s=n.call(this,t)||this;return s.code=r,s.originalMessage=i,s}return e.prototype.toString=function(){return"[formatjs Error: ".concat(this.code,"] ").concat(this.message)},e}(Error),$v=function(n){Bf(e,n);function e(t,r,i,s){return n.call(this,'Invalid values for "'.concat(t,'": "').concat(r,'". Options are "').concat(Object.keys(i).join('", "'),'"'),sa.INVALID_VALUE,s)||this}return e}(Ff),cL=function(n){Bf(e,n);function e(t,r,i){return n.call(this,'Value for "'.concat(t,'" must be of type ').concat(r),sa.INVALID_VALUE,i)||this}return e}(Ff),uL=function(n){Bf(e,n);function e(t,r){return n.call(this,'The intl string context variable "'.concat(t,'" was not provided to the string "').concat(r,'"'),sa.MISSING_VALUE,r)||this}return e}(Ff),Fn;(function(n){n[n.literal=0]="literal",n[n.object=1]="object"})(Fn||(Fn={}));function hL(n){return n.length<2?n:n.reduce(function(e,t){var r=e[e.length-1];return!r||r.type!==Fn.literal||t.type!==Fn.literal?e.push(t):r.value+=t.value,e},[])}function fL(n){return typeof n=="function"}function Zu(n,e,t,r,i,s,o){if(n.length===1&&Rv(n[0]))return[{type:Fn.literal,value:n[0].value}];for(var a=[],l=0,c=n;l<c.length;l++){var u=c[l];if(Rv(u)){a.push({type:Fn.literal,value:u.value});continue}if(CN(u)){typeof s=="number"&&a.push({type:Fn.literal,value:t.getNumberFormat(e).format(s)});continue}var h=u.value;if(!(i&&h in i))throw new uL(h,o);var f=i[h];if(EN(u)){(!f||typeof f=="string"||typeof f=="number")&&(f=typeof f=="string"||typeof f=="number"?String(f):""),a.push({type:typeof f=="string"?Fn.literal:Fn.object,value:f});continue}if(AS(u)){var p=typeof u.style=="string"?r.date[u.style]:Cm(u.style)?u.style.parsedOptions:void 0;a.push({type:Fn.literal,value:t.getDateTimeFormat(e,p).format(f)});continue}if(PS(u)){var p=typeof u.style=="string"?r.time[u.style]:Cm(u.style)?u.style.parsedOptions:r.time.medium;a.push({type:Fn.literal,value:t.getDateTimeFormat(e,p).format(f)});continue}if(CS(u)){var p=typeof u.style=="string"?r.number[u.style]:NS(u.style)?u.style.parsedOptions:void 0;p&&p.scale&&(f=f*(p.scale||1)),a.push({type:Fn.literal,value:t.getNumberFormat(e,p).format(f)});continue}if(QS(u)){var d=u.children,m=u.value,y=i[m];if(!fL(y))throw new cL(m,"function",o);var w=Zu(d,e,t,r,i,s),b=y(w.map(function(_){return _.value}));Array.isArray(b)||(b=[b]),a.push.apply(a,b.map(function(_){return{type:typeof _=="string"?Fn.literal:Fn.object,value:_}}))}if(RS(u)){var O=u.options[f]||u.options.other;if(!O)throw new $v(u.value,f,Object.keys(u.options),o);a.push.apply(a,Zu(O.value,e,t,r,i));continue}if(IS(u)){var O=u.options["=".concat(f)];if(!O){if(!Intl.PluralRules)throw new Ff(`Intl.PluralRules is not available in this environment.
Try polyfilling it using "@formatjs/intl-pluralrules"
`,sa.MISSING_INTL_API,o);var v=t.getPluralRules(e,{type:u.pluralType}).select(f-(u.offset||0));O=u.options[v]||u.options.other}if(!O)throw new $v(u.value,f,Object.keys(u.options),o);a.push.apply(a,Zu(O.value,e,t,r,i,f-(u.offset||0)));continue}}return hL(a)}function dL(n,e){return e?gt(gt(gt({},n||{}),e||{}),Object.keys(n).reduce(function(t,r){return t[r]=gt(gt({},n[r]),e[r]||{}),t},{})):n}function pL(n,e){return e?Object.keys(n).reduce(function(t,r){return t[r]=dL(n[r],e[r]),t},gt({},n)):n}function Tp(n){return{create:function(){return{get:function(e){return n[e]},set:function(e,t){n[e]=t}}}}}function mL(n){return n===void 0&&(n={number:{},dateTime:{},pluralRules:{}}),{getNumberFormat:Sp(function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return new((e=Intl.NumberFormat).bind.apply(e,_p([void 0],t,!1)))},{cache:Tp(n.number),strategy:kp.variadic}),getDateTimeFormat:Sp(function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return new((e=Intl.DateTimeFormat).bind.apply(e,_p([void 0],t,!1)))},{cache:Tp(n.dateTime),strategy:kp.variadic}),getPluralRules:Sp(function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return new((e=Intl.PluralRules).bind.apply(e,_p([void 0],t,!1)))},{cache:Tp(n.pluralRules),strategy:kp.variadic})}}var gL=function(){function n(e,t,r,i){var s=this;if(t===void 0&&(t=n.defaultLocale),this.formatterCache={number:{},dateTime:{},pluralRules:{}},this.format=function(o){var a=s.formatToParts(o);if(a.length===1)return a[0].value;var l=a.reduce(function(c,u){return!c.length||u.type!==Fn.literal||typeof c[c.length-1]!="string"?c.push(u.value):c[c.length-1]+=u.value,c},[]);return l.length<=1?l[0]||"":l},this.formatToParts=function(o){return Zu(s.ast,s.locales,s.formatters,s.formats,o,void 0,s.message)},this.resolvedOptions=function(){return{locale:s.resolvedLocale.toString()}},this.getAst=function(){return s.ast},this.locales=t,this.resolvedLocale=n.resolveLocale(t),typeof e=="string"){if(this.message=e,!n.__parse)throw new TypeError("IntlMessageFormat.__parse must be set to process `message` of type `string`");this.ast=n.__parse(e,{ignoreTag:i==null?void 0:i.ignoreTag,locale:this.resolvedLocale})}else this.ast=e;if(!Array.isArray(this.ast))throw new TypeError("A message must be provided as a String or AST.");this.formats=pL(n.formats,r),this.formatters=i&&i.formatters||mL(this.formatterCache)}return Object.defineProperty(n,"defaultLocale",{get:function(){return n.memoizedDefaultLocale||(n.memoizedDefaultLocale=new Intl.NumberFormat().resolvedOptions().locale),n.memoizedDefaultLocale},enumerable:!1,configurable:!0}),n.memoizedDefaultLocale=null,n.resolveLocale=function(e){var t=Intl.NumberFormat.supportedLocalesOf(e);return t.length>0?new Intl.Locale(t[0]):new Intl.Locale(typeof e=="string"?e:e[0])},n.__parse=nL,n.formats={number:{integer:{maximumFractionDigits:0},currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}},n}();const OL=gL,ss={},yL=(n,e,t)=>t&&(e in ss||(ss[e]={}),n in ss[e]||(ss[e][n]=t),t),jS=(n,e)=>{if(e==null)return;if(e in ss&&n in ss[e])return ss[e][n];const t=Cc(e);for(let r=0;r<t.length;r++){const i=bL(t[r],n);if(i)return yL(n,e,i)}};let FO;const Ec=$n({});function qS(n){return n in FO}function bL(n,e){if(!qS(n))return null;const t=function(r){return FO[r]||null}(n);return function(r,i){if(i==null)return;if(i in r)return r[i];const s=i.split(".");let o=r;for(let a=0;a<s.length;a++)if(typeof o=="object"){if(a>0){const l=s.slice(a,s.length).join(".");if(l in o){o=o[l];break}}o=o[s[a]]}else o=void 0;return o}(t,e)}function UO(n,...e){delete ss[n],Ec.update(t=>(t[n]=TN.all([t[n]||{},...e]),t))}Vr([Ec],([n])=>Object.keys(n));Ec.subscribe(n=>FO=n);const Gu={};function XS(n){return Gu[n]}function xh(n){return n!=null&&Cc(n).some(e=>{var t;return(t=XS(e))===null||t===void 0?void 0:t.size})}function vL(n,e){return Promise.all(e.map(r=>(function(i,s){Gu[i].delete(s),Gu[i].size===0&&delete Gu[i]}(n,r),r().then(i=>i.default||i)))).then(r=>UO(n,...r))}const el={};function zS(n){if(!xh(n))return n in el?el[n]:Promise.resolve();const e=function(t){return Cc(t).map(r=>{const i=XS(r);return[r,i?[...i]:[]]}).filter(([,r])=>r.length>0)}(n);return el[n]=Promise.all(e.map(([t,r])=>vL(t,r))).then(()=>{if(xh(n))return zS(n);delete el[n]}),el[n]}function wL({locale:n,id:e}){console.warn(`[svelte-i18n] The message "${e}" was not found in "${Cc(n).join('", "')}".${xh(Ns())?`

Note: there are at least one loader still registered to this locale that wasn't executed.`:""}`)}const gl={fallbackLocale:null,loadingDelay:200,formats:{number:{scientific:{notation:"scientific"},engineering:{notation:"engineering"},compactLong:{notation:"compact",compactDisplay:"long"},compactShort:{notation:"compact",compactDisplay:"short"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}},warnOnMissingMessages:!0,handleMissingMessage:void 0,ignoreTag:!0};function oa(){return gl}function _L(n){const{formats:e,...t}=n,r=n.initialLocale||n.fallbackLocale;return t.warnOnMissingMessages&&(delete t.warnOnMissingMessages,t.handleMissingMessage==null?t.handleMissingMessage=wL:console.warn('[svelte-i18n] The "warnOnMissingMessages" option is deprecated. Please use the "handleMissingMessage" option instead.')),Object.assign(gl,t,{initialLocale:r}),e&&("number"in e&&Object.assign(gl.formats.number,e.number),"date"in e&&Object.assign(gl.formats.date,e.date),"time"in e&&Object.assign(gl.formats.time,e.time)),Aa.set(r)}const Ep=$n(!1);let Nm;const Yu=$n(null);function Bv(n){return n.split("-").map((e,t,r)=>r.slice(0,t+1).join("-")).reverse()}function Cc(n,e=oa().fallbackLocale){const t=Bv(n);return e?[...new Set([...t,...Bv(e)])]:t}function Ns(){return Nm!=null?Nm:void 0}Yu.subscribe(n=>{Nm=n!=null?n:void 0,typeof window<"u"&&n!=null&&document.documentElement.setAttribute("lang",n)});const Aa={...Yu,set:n=>{if(n&&function(e){if(e==null)return;const t=Cc(e);for(let r=0;r<t.length;r++){const i=t[r];if(qS(i))return i}}(n)&&xh(n)){const{loadingDelay:e}=oa();let t;return typeof window<"u"&&Ns()!=null&&e?t=window.setTimeout(()=>Ep.set(!0),e):Ep.set(!0),zS(n).then(()=>{Yu.set(n)}).finally(()=>{clearTimeout(t),Ep.set(!1)})}return Yu.set(n)}},xL=()=>typeof window>"u"?null:window.navigator.language||window.navigator.languages[0],Uf=n=>{const e=Object.create(null);return t=>{const r=JSON.stringify(t);return r in e?e[r]:e[r]=n(t)}},Bl=(n,e)=>{const{formats:t}=oa();if(n in t&&e in t[n])return t[n][e];throw new Error(`[svelte-i18n] Unknown "${e}" ${n} format.`)},SL=Uf(({locale:n,format:e,...t})=>{if(n==null)throw new Error('[svelte-i18n] A "locale" must be set to format numbers');return e&&(t=Bl("number",e)),new Intl.NumberFormat(n,t)}),kL=Uf(({locale:n,format:e,...t})=>{if(n==null)throw new Error('[svelte-i18n] A "locale" must be set to format dates');return e?t=Bl("date",e):Object.keys(t).length===0&&(t=Bl("date","short")),new Intl.DateTimeFormat(n,t)}),TL=Uf(({locale:n,format:e,...t})=>{if(n==null)throw new Error('[svelte-i18n] A "locale" must be set to format time values');return e?t=Bl("time",e):Object.keys(t).length===0&&(t=Bl("time","short")),new Intl.DateTimeFormat(n,t)}),EL=({locale:n=Ns(),...e}={})=>SL({locale:n,...e}),CL=({locale:n=Ns(),...e}={})=>kL({locale:n,...e}),AL=({locale:n=Ns(),...e}={})=>TL({locale:n,...e}),PL=Uf((n,e=Ns())=>new OL(n,e,oa().formats,{ignoreTag:oa().ignoreTag})),RL=(n,e={})=>{var t,r,i,s;let o=e;typeof n=="object"&&(o=n,n=o.id);const{values:a,locale:l=Ns(),default:c}=o;if(l==null)throw new Error("[svelte-i18n] Cannot format a message without first setting the initial locale.");let u=jS(n,l);if(u){if(typeof u!="string")return console.warn(`[svelte-i18n] Message with id "${n}" must be of type "string", found: "${typeof u}". Gettin its value through the "$format" method is deprecated; use the "json" method instead.`),u}else u=(s=(i=(r=(t=oa()).handleMissingMessage)===null||r===void 0?void 0:r.call(t,{locale:l,id:n,defaultValue:c}))!==null&&i!==void 0?i:c)!==null&&s!==void 0?s:n;if(!a)return u;let h=u;try{h=PL(u,l).format(a)}catch(f){f instanceof Error&&console.warn(`[svelte-i18n] Message "${n}" has syntax error:`,f.message)}return h},IL=(n,e)=>AL(e).format(n),QL=(n,e)=>CL(e).format(n),NL=(n,e)=>EL(e).format(n),LL=(n,e=Ns())=>jS(n,e),ln=Vr([Aa,Ec],()=>RL);Vr([Aa],()=>IL);Vr([Aa],()=>QL);Vr([Aa],()=>NL);Vr([Aa,Ec],()=>LL);function Fv(n){let e,t,r,i,s,o=n[5]("dialogs.lock.title")+"",a,l,c,u=n[5]("dialogs.lock.text")+"",h,f,p=n[5]("dialogs.lock.new")+"",d,m,y,w=n[5]("dialogs.lock.overwrite")+"",b,O,v;return{c(){e=G("div"),t=he(),r=G("div"),i=G("div"),s=G("h3"),a=ve(o),l=he(),c=G("p"),h=he(),f=G("button"),d=ve(p),m=he(),y=G("button"),b=ve(w),z(e,"class","dialog-mask"),z(f,"class","ok"),z(y,"class","error"),z(i,"class","dialog lock svelte-8wx2vf"),z(r,"class","dialog-container")},m(_,S){Ee(_,e,S),Ee(_,t,S),Ee(_,r,S),U(r,i),U(i,s),U(s,a),U(i,l),U(i,c),c.innerHTML=u,U(i,h),U(i,f),U(f,d),U(i,m),U(i,y),U(y,b),O||(v=[xe(f,"click",n[6]),xe(y,"click",n[7])],O=!0)},p(_,S){S&32&&o!==(o=_[5]("dialogs.lock.title")+"")&&Te(a,o),S&32&&u!==(u=_[5]("dialogs.lock.text")+"")&&(c.innerHTML=u),S&32&&p!==(p=_[5]("dialogs.lock.new")+"")&&Te(d,p),S&32&&w!==(w=_[5]("dialogs.lock.overwrite")+"")&&Te(b,w)},d(_){_&&Se(e),_&&Se(t),_&&Se(r),O=!1,Wt(v)}}}function Uv(n){let e,t,r,i,s,o,a;var l=n[2];function c(u){return{props:{params:u[4],callback:u[3]}}}return l&&(i=Ev(l,c(n))),{c(){e=G("div"),t=he(),r=G("div"),i&&Qi(i.$$.fragment),z(e,"class","dialog-mask"),z(r,"class","dialog-container")},m(u,h){Ee(u,e,h),Ee(u,t,h),Ee(u,r,h),i&&ni(i,r,null),s=!0,o||(a=[xe(e,"click",Tv(n[8])),xe(r,"click",Tv(n[9]))],o=!0)},p(u,h){const f={};if(h&16&&(f.params=u[4]),h&8&&(f.callback=u[3]),l!==(l=u[2])){if(i){Mf();const p=i;Nn(p.$$.fragment,1,0,()=>{ri(p,1)}),$f()}l?(i=Ev(l,c(u)),Qi(i.$$.fragment),nn(i.$$.fragment,1),ni(i,r,null)):i=null}else l&&i.$set(f)},i(u){s||(i&&nn(i.$$.fragment,u),s=!0)},o(u){i&&Nn(i.$$.fragment,u),s=!1},d(u){u&&Se(e),u&&Se(t),u&&Se(r),i&&ri(i),o=!1,Wt(a)}}}function DL(n){let e,t,r,i=n[0]&&Fv(n),s=n[2]&&Uv(n);return{c(){i&&i.c(),e=he(),s&&s.c(),t=Df()},m(o,a){i&&i.m(o,a),Ee(o,e,a),s&&s.m(o,a),Ee(o,t,a),r=!0},p(o,[a]){o[0]?i?i.p(o,a):(i=Fv(o),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),o[2]?s?(s.p(o,a),a&4&&nn(s,1)):(s=Uv(o),s.c(),nn(s,1),s.m(t.parentNode,t)):s&&(Mf(),Nn(s,1,1,()=>{s=null}),$f())},i(o){r||(nn(s),r=!0)},o(o){Nn(s),r=!1},d(o){i&&i.d(o),o&&Se(e),s&&s.d(o),o&&Se(t)}}}const Lm=$n({}),Dm=$n(!1),sr=(n,...e)=>new Promise(t=>Lm.set({component:n,callback(...r){Lm.set({}),t(...r)},params:$n(e)}));function ML(n,e,t){let r;Me(n,ln,p=>t(5,r=p));let i=!1,s,o,a,l;return Dm.subscribe(p=>t(0,{lock:i,session:s}=p,i,t(1,s))),Lm.subscribe(async p=>{t(2,{component:o,callback:a,params:l}=p,o,t(3,a),t(4,l)),await na();const d=document.querySelector("button.ok");d&&d.focus()}),[i,s,o,a,l,r,()=>s.duplicate(),()=>s.lock(),()=>a(!1),()=>a(!1)]}class $L extends En{constructor(e){super(),Tn(this,e,ML,DL,On,{})}}function BL(n){let e,t,r,i,s,o,a,l=n[4]("dialogs.ok")+"",c,u,h;return{c(){e=G("div"),t=G("h3"),r=ve(n[2]),i=he(),s=G("p"),o=he(),a=G("button"),c=ve(l),z(a,"class","ok"),z(e,"class","dialog")},m(f,p){Ee(f,e,p),U(e,t),U(t,r),U(e,i),U(e,s),s.innerHTML=n[3],U(e,o),U(e,a),U(a,c),u||(h=xe(a,"click",n[6]),u=!0)},p(f,[p]){p&4&&Te(r,f[2]),p&8&&(s.innerHTML=f[3]),p&16&&l!==(l=f[4]("dialogs.ok")+"")&&Te(c,l)},i:We,o:We,d(f){f&&Se(e),u=!1,h()}}}function FL(n,e,t){let r,i=We,s=()=>(i(),i=Tc(a,f=>t(5,r=f)),a),o;Me(n,ln,f=>t(4,o=f)),n.$$.on_destroy.push(()=>i());let{params:a}=e;s();let{callback:l}=e,c,u;const h=()=>l(!0);return n.$$set=f=>{"params"in f&&s(t(0,a=f.params)),"callback"in f&&t(1,l=f.callback)},n.$$.update=()=>{n.$$.dirty&32&&t(2,[c,u]=r,c,(t(3,u),t(5,r)))},[a,l,c,u,o,r,h]}class UL extends En{constructor(e){super(),Tn(this,e,FL,BL,On,{params:0,callback:1})}}const Mm={},VO=n=>Object.assign(Mm,n),VL=function(n){if(n.ctrlKey){const e=String.fromCharCode(n.keyCode).toUpperCase();e in Mm&&(Mm[e](),n.stopPropagation(),n.stopImmediatePropagation(),n.preventDefault())}},fu=(n,e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789")=>{let t="";const r=e.length;for(let i=0;i<n;i++)t+=e.charAt(Math.floor(Math.random()*r));return t},WL=n=>{for(let e=n.length-1;e>0;e--){let t=Math.floor(Math.random()*(e+1));[n[e],n[t]]=[n[t],n[e]]}},Vf=n=>(n>0||String(n)==="0")&&Math.floor(n)===+n,Vo=n=>n.replace(/[^a-z0-9]/gi,""),jL=({key:n,title:e="",flags:t=[],group:r="",text:i="",beforeSpaceLines:s=2,afterSpaceLines:o=0})=>{let a=`
`.repeat(s);return a+=e?`### ${e} {#${n}}`:`### ${n}`,t&&t.length>0&&(a+=`
`+t.map(l=>`![][flag-${l}]`).join(" ")),r&&(a+=`
[group]:<> ("${r}")`),i&&(a+=`
${i}`),a+`
`.repeat(o)},HS=n=>{const e={properties:{},chapters:new Map,linksToChapter:new Map,groups:new Set};let t="",r,i=!1,s=1;const o=n.split(`
`);return o.forEach((a,l)=>{const c=l,u=a.trim();if(i&&(s=c),i=u!=="",t===""&&!u.startsWith("### ")){if(u.startsWith("# ")){e.properties.title=u.replace(/\#/g,"").trim();return}const m=u.indexOf(":");m!==-1&&(e.properties[u.substr(0,m).trim()]=u.substr(m+1).trim());return}if(u.startsWith("### ")){t!==""&&(r.contentEnd=s-1,r.end=c-1,e.chapters.set(t,r)),t=u.substr(4).trim();let m="";const y=t.indexOf("{#");y!=-1&&(m=t.substr(0,y-1).trim(),t=t.substr(y+2,t.lastIndexOf("}")-2-y).trim()),r={title:m,group:"",start:s,contentStart:c,contentEnd:c,end:c,flags:[],links:new Set};return}if(u.includes("![flag-")||u.includes("![][flag-")){["final","fixed","death"].forEach(m=>{(u.includes(`![flag-${m}]`)||u.includes(`![][flag-${m}]`))&&r.flags.push(m)});return}const h=u.indexOf('[group]:<> ("');if(h!=-1){r.group=u.substr(h+13,u.lastIndexOf('")')-h-13),e.groups.add(r.group);return}let f=new RegExp("\\[([^\\[]*)\\]\\(\\s*\\#([^\\)]+)\\s*\\)","g"),p=f.exec(a);for(;p!=null;){const m=p[2].trim();r.links.add(m),e.linksToChapter.has(m)||e.linksToChapter.set(m,new Set),e.linksToChapter.get(m).add(t),p=f.exec(a)}if(e.properties&&e.properties.disableShortLinks==="true")return;let d=new RegExp("\\[([^\\[]*)\\](?!\\()","g");for(p=d.exec(a);p!=null;){const m=p[1].trim();r.links.add(m),e.linksToChapter.has(m)||e.linksToChapter.set(m,new Set),e.linksToChapter.get(m).add(t),p=d.exec(a)}}),t!==""&&(r.end=o.length-1,r.contentEnd=i?r.end:s-1,e.chapters.set(t,r)),e},mi=n=>{const e={properties:{},chapters:new Map,linksToChapter:new Map,groups:new Set,...HS(n)},t=n.split(`
`);e.titlePage=t.slice(0,e.chapters.size>0?e.chapters.values().next().value.contentStart:t.length-1).join(`
`);for(const[r,{contentStart:i,contentEnd:s}]of e.chapters){const o=t.slice(i+1,s+1).filter(l=>{const c=l.trim();return!(c.startsWith("###")||c.includes("[group]:")||c.includes("![][flag-")||c.includes("![flag-"))}).join(`
`),a=t.slice(i,s+1).join(`
`);Object.assign(e.chapters.get(r),{text:o,fullText:a})}return e},WO=(n,e)=>{const t=new Map;for(const[a,l]of e)t.set(l,a);const r=[...e.keys()];let i=n.titlePage,s=0;for(const[a,l]of n.chapters){let c=t.has(a)?r[s++]:a;const{title:u,flags:h,group:f,text:p}=t.has(a)?n.chapters.get(e.get(c)):l;i+=jL({key:c,title:u,flags:h,group:f,text:p,beforeSpaceLines:1,afterSpaceLines:2})}let o=i.replace(/\[([^\[]*)\](\(\s*#(\w+)\s*\))/g,(...a)=>`[${a[1]}](#${t.has(a[3])?t.get(a[3]):a[3]})`);return n.properties.disableShortLinks||(o=o.replace(/\[([^\[]*)\]/g,(...a)=>`[${t.has(a[1])?t.get(a[1]):a[1]}]`)),o},qL=(n,{selectedFlags:e=[],groupsFilter:t=[],onlyNumbers:r=!0}={})=>{const i=mi(n),s=[];for(const[a,{group:l,flags:c}]of i.chapters)r&&!Vf(a)||t.length>0&&!t.includes(l)||c.some(u=>e.includes(u))||s.push(a);const o=JSON.parse(JSON.stringify(s));return WL(o),WO(i,new Map(s.map((a,l)=>[String(a),String(o[l])])))},XL=n=>{const e=mi(n),t=[],r=[];let i=0;for(const[s]of e.chapters)Vf(s)&&(t.push(s),r.push(++i));return WO(e,new Map(t.map((s,o)=>[String(r[o]),String(s)])))},zL=n=>{const e=mi(n),t=[];for(const[r]of e.chapters)Vf(r)&&t.push(Number(r));return t.sort((r,i)=>Number(r)-Number(i)),WO(e,new Map(t.map(r=>[String(r),String(r)])))},HL=window["@hpcc-js/wasm"],Vv=n=>n.replace(/\//g,"\\").replace(/\"/g,'"'),ZL=n=>n.replace(/[\]\[\#\)\(]/g,""),GL=(n,e,t)=>e.includes("final")?', color="#ffa200"':e.includes("death")?', color="#000000", fontcolor="#FFFFFF"':e.includes("fixed")?', color="#b02900", fontcolor="#FFFFFF"':"",YL=n=>{const e=mi(n);let t=`digraph{
    graph [fontname="arial", fontsize=10]; 
    node  [fontname="arial", fontsize=12, style="rounded,filled", shape=box];
    edge  [fontname="arial", fontsize=12];
  `;const r=Object.fromEntries([...e.groups].map(s=>[s,[]]));for(let[s,{title:o,group:a,links:l,flags:c,text:u}]of e.chapters){t+=`
      ${s} [label="${Vv(o?`${s} - ${o}`:s)}", tooltip="${u.replaceAll(/[^0-9a-z \`\<\>\.\'\[\]\(\)]/gi,"")}"${GL(s,c)}]`;for(const h of l)e.chapters.has(h)&&(t+=`
        ${s} -> ${ZL(h)}`);a&&r[a].push(s)}let i=0;for(let s of e.groups)t+=`
    
    subgraph cluster${i++}{
      graph [fontname="arial", fontsize=10]; 
      node  [fontname="arial", fontsize=12, style="rounded,filled", shape=box];
      edge  [fontname="arial", fontsize=12];
      style=filled
      fillcolor="#EEEEEE"
      color=black
      label = "${Vv(s)}"
      labelfontsize=14
      labelfontname=arial

      ${r[s].join("; ")}
    }`;return t+=`
}`,console.log(t),t},KL=n=>HL.graphviz.layout(YL(n),"svg","dot");var ZS={exports:{}};(function(n){function e(c,u){for(var h=c.toString();h.length<u;)h="0"+h;return h}function t(c){return e(c,2)}function r(c){var u=Math.abs(c),h=String(Math.floor(u/60)),f=String(u%60);return h=("0"+h).slice(-2),f=("0"+f).slice(-2),c===0?"Z":(c<0?"+":"-")+h+":"+f}function i(c,u){typeof c!="string"&&(u=c,c=n.exports.ISO8601_FORMAT),u||(u=n.exports.now());var h=t(u.getDate()),f=t(u.getMonth()+1),p=t(u.getFullYear()),d=t(p.substring(2,4)),m=c.indexOf("yyyy")>-1?p:d,y=t(u.getHours()),w=t(u.getMinutes()),b=t(u.getSeconds()),O=e(u.getMilliseconds(),3),v=r(u.getTimezoneOffset()),_=c.replace(/dd/g,h).replace(/MM/g,f).replace(/y{1,4}/g,m).replace(/hh/g,y).replace(/mm/g,w).replace(/ss/g,b).replace(/SSS/g,O).replace(/O/g,v);return _}function s(c,u,h,f){c["set"+(f?"":"UTC")+u](h)}function o(c,u,h){var f=c.indexOf("O")<0,p=!1,d=[{pattern:/y{1,4}/,regexp:"\\d{1,4}",fn:function(v,_){s(v,"FullYear",_,f)}},{pattern:/MM/,regexp:"\\d{1,2}",fn:function(v,_){s(v,"Month",_-1,f),v.getMonth()!==_-1&&(p=!0)}},{pattern:/dd/,regexp:"\\d{1,2}",fn:function(v,_){p&&s(v,"Month",v.getMonth()-1,f),s(v,"Date",_,f)}},{pattern:/hh/,regexp:"\\d{1,2}",fn:function(v,_){s(v,"Hours",_,f)}},{pattern:/mm/,regexp:"\\d\\d",fn:function(v,_){s(v,"Minutes",_,f)}},{pattern:/ss/,regexp:"\\d\\d",fn:function(v,_){s(v,"Seconds",_,f)}},{pattern:/SSS/,regexp:"\\d\\d\\d",fn:function(v,_){s(v,"Milliseconds",_,f)}},{pattern:/O/,regexp:"[+-]\\d{1,2}:?\\d{2}?|Z",fn:function(v,_){_==="Z"?_=0:_=_.replace(":","");var S=Math.abs(_),R=(_>0?-1:1)*(S%100+Math.floor(S/100)*60);v.setUTCMinutes(v.getUTCMinutes()+R)}}],m=d.reduce(function(v,_){return _.pattern.test(v.regexp)?(_.index=v.regexp.match(_.pattern).index,v.regexp=v.regexp.replace(_.pattern,"("+_.regexp+")")):_.index=-1,v},{regexp:c,index:[]}),y=d.filter(function(v){return v.index>-1});y.sort(function(v,_){return v.index-_.index});var w=new RegExp(m.regexp),b=w.exec(u);if(b){var O=h||n.exports.now();return y.forEach(function(v,_){v.fn(O,b[_+1])}),O}throw new Error("String '"+u+"' could not be parsed as '"+c+"'")}function a(c,u,h){if(!c)throw new Error("pattern must be supplied");return o(c,u,h)}function l(){return new Date}n.exports=i,n.exports.asString=i,n.exports.parse=a,n.exports.now=l,n.exports.ISO8601_FORMAT="yyyy-MM-ddThh:mm:ss.SSS",n.exports.ISO8601_WITH_TZ_OFFSET_FORMAT="yyyy-MM-ddThh:mm:ss.SSSO",n.exports.DATETIME_FORMAT="dd MM yyyy hh:mm:ss.SSS",n.exports.ABSOLUTETIME_FORMAT="hh:mm:ss.SSS"})(ZS);const GS=ZS.exports;var YS={exports:{}};(function(n,e){(function(t,r){r()})(Ja,function(){function t(c,u){return typeof u>"u"?u={autoBom:!1}:typeof u!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),u={autoBom:!u}),u.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(c.type)?new Blob(["\uFEFF",c],{type:c.type}):c}function r(c,u,h){var f=new XMLHttpRequest;f.open("GET",c),f.responseType="blob",f.onload=function(){l(f.response,u,h)},f.onerror=function(){console.error("could not download file")},f.send()}function i(c){var u=new XMLHttpRequest;u.open("HEAD",c,!1);try{u.send()}catch{}return 200<=u.status&&299>=u.status}function s(c){try{c.dispatchEvent(new MouseEvent("click"))}catch{var u=document.createEvent("MouseEvents");u.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),c.dispatchEvent(u)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Ja=="object"&&Ja.global===Ja?Ja:void 0,a=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(c,u,h){var f=o.URL||o.webkitURL,p=document.createElement("a");u=u||c.name||"download",p.download=u,p.rel="noopener",typeof c=="string"?(p.href=c,p.origin===location.origin?s(p):i(p.href)?r(c,u,h):s(p,p.target="_blank")):(p.href=f.createObjectURL(c),setTimeout(function(){f.revokeObjectURL(p.href)},4e4),setTimeout(function(){s(p)},0))}:"msSaveOrOpenBlob"in navigator?function(c,u,h){if(u=u||c.name||"download",typeof c!="string")navigator.msSaveOrOpenBlob(t(c,h),u);else if(i(c))r(c,u,h);else{var f=document.createElement("a");f.href=c,f.target="_blank",setTimeout(function(){s(f)})}}:function(c,u,h,f){if(f=f||open("","_blank"),f&&(f.document.title=f.document.body.innerText="downloading..."),typeof c=="string")return r(c,u,h);var p=c.type==="application/octet-stream",d=/constructor/i.test(o.HTMLElement)||o.safari,m=/CriOS\/[\d]+/.test(navigator.userAgent);if((m||p&&d||a)&&typeof FileReader<"u"){var y=new FileReader;y.onloadend=function(){var O=y.result;O=m?O:O.replace(/^data:[^;]*;/,"data:attachment/file;"),f?f.location.href=O:location=O,f=null},y.readAsDataURL(c)}else{var w=o.URL||o.webkitURL,b=w.createObjectURL(c);f?f.location=b:location.href=b,f=null,setTimeout(function(){w.revokeObjectURL(b)},4e4)}});o.saveAs=l.saveAs=l,n.exports=l})})(YS);const JL=YS.exports,eD=typeof atob=="function",tD=typeof btoa=="function",Pa=typeof Buffer=="function",Wv=typeof TextDecoder=="function"?new TextDecoder:void 0,jv=typeof TextEncoder=="function"?new TextEncoder:void 0,nD="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Ol=Array.prototype.slice.call(nD),du=(n=>{let e={};return n.forEach((t,r)=>e[t]=r),e})(Ol),rD=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,wn=String.fromCharCode.bind(String),qv=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):(n,e=t=>t)=>new Uint8Array(Array.prototype.slice.call(n,0).map(e)),iD=n=>n.replace(/=/g,"").replace(/[+\/]/g,e=>e=="+"?"-":"_"),KS=n=>n.replace(/[^A-Za-z0-9\+\/]/g,""),sD=n=>{let e,t,r,i,s="";const o=n.length%3;for(let a=0;a<n.length;){if((t=n.charCodeAt(a++))>255||(r=n.charCodeAt(a++))>255||(i=n.charCodeAt(a++))>255)throw new TypeError("invalid character found");e=t<<16|r<<8|i,s+=Ol[e>>18&63]+Ol[e>>12&63]+Ol[e>>6&63]+Ol[e&63]}return o?s.slice(0,o-3)+"===".substring(o):s},JS=tD?n=>btoa(n):Pa?n=>Buffer.from(n,"binary").toString("base64"):sD,oD=Pa?n=>Buffer.from(n).toString("base64"):n=>{let t=[];for(let r=0,i=n.length;r<i;r+=4096)t.push(wn.apply(null,n.subarray(r,r+4096)));return JS(t.join(""))},aD=n=>{if(n.length<2){var e=n.charCodeAt(0);return e<128?n:e<2048?wn(192|e>>>6)+wn(128|e&63):wn(224|e>>>12&15)+wn(128|e>>>6&63)+wn(128|e&63)}else{var e=65536+(n.charCodeAt(0)-55296)*1024+(n.charCodeAt(1)-56320);return wn(240|e>>>18&7)+wn(128|e>>>12&63)+wn(128|e>>>6&63)+wn(128|e&63)}},lD=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,cD=n=>n.replace(lD,aD),Xv=Pa?n=>Buffer.from(n,"utf8").toString("base64"):jv?n=>oD(jv.encode(n)):n=>JS(cD(n)),$m=(n,e=!1)=>e?iD(Xv(n)):Xv(n),uD=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,hD=n=>{switch(n.length){case 4:var e=(7&n.charCodeAt(0))<<18|(63&n.charCodeAt(1))<<12|(63&n.charCodeAt(2))<<6|63&n.charCodeAt(3),t=e-65536;return wn((t>>>10)+55296)+wn((t&1023)+56320);case 3:return wn((15&n.charCodeAt(0))<<12|(63&n.charCodeAt(1))<<6|63&n.charCodeAt(2));default:return wn((31&n.charCodeAt(0))<<6|63&n.charCodeAt(1))}},fD=n=>n.replace(uD,hD),dD=n=>{if(n=n.replace(/\s+/g,""),!rD.test(n))throw new TypeError("malformed base64.");n+="==".slice(2-(n.length&3));let e,t="",r,i;for(let s=0;s<n.length;)e=du[n.charAt(s++)]<<18|du[n.charAt(s++)]<<12|(r=du[n.charAt(s++)])<<6|(i=du[n.charAt(s++)]),t+=r===64?wn(e>>16&255):i===64?wn(e>>16&255,e>>8&255):wn(e>>16&255,e>>8&255,e&255);return t},ek=eD?n=>atob(KS(n)):Pa?n=>Buffer.from(n,"base64").toString("binary"):dD,pD=Pa?n=>qv(Buffer.from(n,"base64")):n=>qv(ek(n),e=>e.charCodeAt(0)),mD=Pa?n=>Buffer.from(n,"base64").toString("utf8"):Wv?n=>Wv.decode(pD(n)):n=>fD(ek(n)),gD=n=>KS(n.replace(/[-_]/g,e=>e=="-"?"+":"/")),OD=n=>mD(gD(n)),tk="text/markdown",yD="magebook",bD=n=>n,vD=n=>({encodedBook:n.book||n,mimetype:tk,extension:yD}),wD={mimetype:tk,decode:bD,encode:vD};function nk(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}let Ra=nk();function _D(n){Ra=n}const rk=/[&<>"']/,xD=new RegExp(rk.source,"g"),ik=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,SD=new RegExp(ik.source,"g"),kD={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},zv=n=>kD[n];function bn(n,e){if(e){if(rk.test(n))return n.replace(xD,zv)}else if(ik.test(n))return n.replace(SD,zv);return n}const TD=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function sk(n){return n.replace(TD,(e,t)=>(t=t.toLowerCase(),t==="colon"?":":t.charAt(0)==="#"?t.charAt(1)==="x"?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""))}const ED=/(^|[^\[])\^/g;function Tt(n,e){n=typeof n=="string"?n:n.source,e=e||"";const t={replace:(r,i)=>(i=i.source||i,i=i.replace(ED,"$1"),n=n.replace(r,i),t),getRegex:()=>new RegExp(n,e)};return t}const CD=/[^\w:]/g,AD=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function Hv(n,e,t){if(n){let r;try{r=decodeURIComponent(sk(t)).replace(CD,"").toLowerCase()}catch{return null}if(r.indexOf("javascript:")===0||r.indexOf("vbscript:")===0||r.indexOf("data:")===0)return null}e&&!AD.test(t)&&(t=QD(e,t));try{t=encodeURI(t).replace(/%25/g,"%")}catch{return null}return t}const pu={},PD=/^[^:]+:\/*[^/]*$/,RD=/^([^:]+:)[\s\S]*$/,ID=/^([^:]+:\/*[^/]*)[\s\S]*$/;function QD(n,e){pu[" "+n]||(PD.test(n)?pu[" "+n]=n+"/":pu[" "+n]=Ku(n,"/",!0)),n=pu[" "+n];const t=n.indexOf(":")===-1;return e.substring(0,2)==="//"?t?e:n.replace(RD,"$1")+e:e.charAt(0)==="/"?t?e:n.replace(ID,"$1")+e:n+e}const Sh={exec:function(){}};function Wr(n){let e=1,t,r;for(;e<arguments.length;e++){t=arguments[e];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n}function Zv(n,e){const t=n.replace(/\|/g,(s,o,a)=>{let l=!1,c=o;for(;--c>=0&&a[c]==="\\";)l=!l;return l?"|":" |"}),r=t.split(/ \|/);let i=0;if(r[0].trim()||r.shift(),r.length>0&&!r[r.length-1].trim()&&r.pop(),r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;i<r.length;i++)r[i]=r[i].trim().replace(/\\\|/g,"|");return r}function Ku(n,e,t){const r=n.length;if(r===0)return"";let i=0;for(;i<r;){const s=n.charAt(r-i-1);if(s===e&&!t)i++;else if(s!==e&&t)i++;else break}return n.slice(0,r-i)}function ND(n,e){if(n.indexOf(e[1])===-1)return-1;const t=n.length;let r=0,i=0;for(;i<t;i++)if(n[i]==="\\")i++;else if(n[i]===e[0])r++;else if(n[i]===e[1]&&(r--,r<0))return i;return-1}function ok(n){n&&n.sanitize&&!n.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function Gv(n,e){if(e<1)return"";let t="";for(;e>1;)e&1&&(t+=n),e>>=1,n+=n;return t+n}function Yv(n,e,t,r){const i=e.href,s=e.title?bn(e.title):null,o=n[1].replace(/\\([\[\]])/g,"$1");if(n[0].charAt(0)!=="!"){r.state.inLink=!0;const a={type:"link",raw:t,href:i,title:s,text:o,tokens:r.inlineTokens(o)};return r.state.inLink=!1,a}return{type:"image",raw:t,href:i,title:s,text:bn(o)}}function LD(n,e){const t=n.match(/^(\s+)(?:```)/);if(t===null)return e;const r=t[1];return e.split(`
`).map(i=>{const s=i.match(/^\s+/);if(s===null)return i;const[o]=s;return o.length>=r.length?i.slice(r.length):i}).join(`
`)}class jO{constructor(e){this.options=e||Ra}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const r=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?r:Ku(r,`
`)}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const r=t[0],i=LD(r,t[3]||"");return{type:"code",raw:r,lang:t[2]?t[2].trim().replace(this.rules.inline._escapes,"$1"):t[2],text:i}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let r=t[2].trim();if(/#$/.test(r)){const i=Ku(r,"#");(this.options.pedantic||!i||/ $/.test(i))&&(r=i.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){const r=t[0].replace(/^ *>[ \t]?/gm,"");return{type:"blockquote",raw:t[0],tokens:this.lexer.blockTokens(r,[]),text:r}}}list(e){let t=this.rules.block.list.exec(e);if(t){let r,i,s,o,a,l,c,u,h,f,p,d,m=t[1].trim();const y=m.length>1,w={type:"list",raw:"",ordered:y,start:y?+m.slice(0,-1):"",loose:!1,items:[]};m=y?`\\d{1,9}\\${m.slice(-1)}`:`\\${m}`,this.options.pedantic&&(m=y?m:"[*+-]");const b=new RegExp(`^( {0,3}${m})((?:[	 ][^\\n]*)?(?:\\n|$))`);for(;e&&(d=!1,!(!(t=b.exec(e))||this.rules.block.hr.test(e)));){if(r=t[0],e=e.substring(r.length),u=t[2].split(`
`,1)[0],h=e.split(`
`,1)[0],this.options.pedantic?(o=2,p=u.trimLeft()):(o=t[2].search(/[^ ]/),o=o>4?1:o,p=u.slice(o),o+=t[1].length),l=!1,!u&&/^ *$/.test(h)&&(r+=h+`
`,e=e.substring(h.length+1),d=!0),!d){const v=new RegExp(`^ {0,${Math.min(3,o-1)}}(?:[*+-]|\\d{1,9}[.)])((?: [^\\n]*)?(?:\\n|$))`),_=new RegExp(`^ {0,${Math.min(3,o-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),S=new RegExp(`^ {0,${Math.min(3,o-1)}}(?:\`\`\`|~~~)`),R=new RegExp(`^ {0,${Math.min(3,o-1)}}#`);for(;e&&(f=e.split(`
`,1)[0],u=f,this.options.pedantic&&(u=u.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(S.test(u)||R.test(u)||v.test(u)||_.test(e)));){if(u.search(/[^ ]/)>=o||!u.trim())p+=`
`+u.slice(o);else if(!l)p+=`
`+u;else break;!l&&!u.trim()&&(l=!0),r+=f+`
`,e=e.substring(f.length+1)}}w.loose||(c?w.loose=!0:/\n *\n *$/.test(r)&&(c=!0)),this.options.gfm&&(i=/^\[[ xX]\] /.exec(p),i&&(s=i[0]!=="[ ] ",p=p.replace(/^\[[ xX]\] +/,""))),w.items.push({type:"list_item",raw:r,task:!!i,checked:s,loose:!1,text:p}),w.raw+=r}w.items[w.items.length-1].raw=r.trimRight(),w.items[w.items.length-1].text=p.trimRight(),w.raw=w.raw.trimRight();const O=w.items.length;for(a=0;a<O;a++){this.lexer.state.top=!1,w.items[a].tokens=this.lexer.blockTokens(w.items[a].text,[]);const v=w.items[a].tokens.filter(S=>S.type==="space"),_=v.every(S=>{const R=S.raw.split("");let N=0;for(const T of R)if(T===`
`&&(N+=1),N>1)return!0;return!1});!w.loose&&v.length&&_&&(w.loose=!0,w.items[a].loose=!0)}return w}}html(e){const t=this.rules.block.html.exec(e);if(t){const r={type:"html",raw:t[0],pre:!this.options.sanitizer&&(t[1]==="pre"||t[1]==="script"||t[1]==="style"),text:t[0]};if(this.options.sanitize){const i=this.options.sanitizer?this.options.sanitizer(t[0]):bn(t[0]);r.type="paragraph",r.text=i,r.tokens=this.lexer.inline(i)}return r}}def(e){const t=this.rules.block.def.exec(e);if(t){const r=t[1].toLowerCase().replace(/\s+/g," "),i=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",s=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline._escapes,"$1"):t[3];return{type:"def",tag:r,raw:t[0],href:i,title:s}}}table(e){const t=this.rules.block.table.exec(e);if(t){const r={type:"table",header:Zv(t[1]).map(i=>({text:i})),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(r.header.length===r.align.length){r.raw=t[0];let i=r.align.length,s,o,a,l;for(s=0;s<i;s++)/^ *-+: *$/.test(r.align[s])?r.align[s]="right":/^ *:-+: *$/.test(r.align[s])?r.align[s]="center":/^ *:-+ *$/.test(r.align[s])?r.align[s]="left":r.align[s]=null;for(i=r.rows.length,s=0;s<i;s++)r.rows[s]=Zv(r.rows[s],r.header.length).map(c=>({text:c}));for(i=r.header.length,o=0;o<i;o++)r.header[o].tokens=this.lexer.inline(r.header[o].text);for(i=r.rows.length,o=0;o<i;o++)for(l=r.rows[o],a=0;a<l.length;a++)l[a].tokens=this.lexer.inline(l[a].text);return r}}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const r=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:r,tokens:this.lexer.inline(r)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:bn(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):bn(t[0]):t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const r=t[2].trim();if(!this.options.pedantic&&/^</.test(r)){if(!/>$/.test(r))return;const o=Ku(r.slice(0,-1),"\\");if((r.length-o.length)%2===0)return}else{const o=ND(t[2],"()");if(o>-1){const l=(t[0].indexOf("!")===0?5:4)+t[1].length+o;t[2]=t[2].substring(0,o),t[0]=t[0].substring(0,l).trim(),t[3]=""}}let i=t[2],s="";if(this.options.pedantic){const o=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(i);o&&(i=o[1],s=o[3])}else s=t[3]?t[3].slice(1,-1):"";return i=i.trim(),/^</.test(i)&&(this.options.pedantic&&!/>$/.test(r)?i=i.slice(1):i=i.slice(1,-1)),Yv(t,{href:i&&i.replace(this.rules.inline._escapes,"$1"),title:s&&s.replace(this.rules.inline._escapes,"$1")},t[0],this.lexer)}}reflink(e,t){let r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){let i=(r[2]||r[1]).replace(/\s+/g," ");if(i=t[i.toLowerCase()],!i){const s=r[0].charAt(0);return{type:"text",raw:s,text:s}}return Yv(r,i,r[0],this.lexer)}}emStrong(e,t,r=""){let i=this.rules.inline.emStrong.lDelim.exec(e);if(!i||i[3]&&r.match(/[\p{L}\p{N}]/u))return;const s=i[1]||i[2]||"";if(!s||s&&(r===""||this.rules.inline.punctuation.exec(r))){const o=i[0].length-1;let a,l,c=o,u=0;const h=i[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(h.lastIndex=0,t=t.slice(-1*e.length+o);(i=h.exec(t))!=null;){if(a=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!a)continue;if(l=a.length,i[3]||i[4]){c+=l;continue}else if((i[5]||i[6])&&o%3&&!((o+l)%3)){u+=l;continue}if(c-=l,c>0)continue;l=Math.min(l,l+c+u);const f=e.slice(0,o+i.index+(i[0].length-a.length)+l);if(Math.min(o,l)%2){const d=f.slice(1,-1);return{type:"em",raw:f,text:d,tokens:this.lexer.inlineTokens(d)}}const p=f.slice(2,-2);return{type:"strong",raw:f,text:p,tokens:this.lexer.inlineTokens(p)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let r=t[2].replace(/\n/g," ");const i=/[^ ]/.test(r),s=/^ /.test(r)&&/ $/.test(r);return i&&s&&(r=r.substring(1,r.length-1)),r=bn(r,!0),{type:"codespan",raw:t[0],text:r}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e,t){const r=this.rules.inline.autolink.exec(e);if(r){let i,s;return r[2]==="@"?(i=bn(this.options.mangle?t(r[1]):r[1]),s="mailto:"+i):(i=bn(r[1]),s=i),{type:"link",raw:r[0],text:i,href:s,tokens:[{type:"text",raw:i,text:i}]}}}url(e,t){let r;if(r=this.rules.inline.url.exec(e)){let i,s;if(r[2]==="@")i=bn(this.options.mangle?t(r[0]):r[0]),s="mailto:"+i;else{let o;do o=r[0],r[0]=this.rules.inline._backpedal.exec(r[0])[0];while(o!==r[0]);i=bn(r[0]),r[1]==="www."?s="http://"+i:s=i}return{type:"link",raw:r[0],text:i,href:s,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(e,t){const r=this.rules.inline.text.exec(e);if(r){let i;return this.lexer.state.inRawBlock?i=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):bn(r[0]):r[0]:i=bn(this.options.smartypants?t(r[0]):r[0]),{type:"text",raw:r[0],text:i}}}}const He={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:Sh,lheading:/^((?:.|\n(?!\n))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};He._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/;He._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;He.def=Tt(He.def).replace("label",He._label).replace("title",He._title).getRegex();He.bullet=/(?:[*+-]|\d{1,9}[.)])/;He.listItemStart=Tt(/^( *)(bull) */).replace("bull",He.bullet).getRegex();He.list=Tt(He.list).replace(/bull/g,He.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+He.def.source+")").getRegex();He._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";He._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/;He.html=Tt(He.html,"i").replace("comment",He._comment).replace("tag",He._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();He.paragraph=Tt(He._paragraph).replace("hr",He.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",He._tag).getRegex();He.blockquote=Tt(He.blockquote).replace("paragraph",He.paragraph).getRegex();He.normal=Wr({},He);He.gfm=Wr({},He.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"});He.gfm.table=Tt(He.gfm.table).replace("hr",He.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",He._tag).getRegex();He.gfm.paragraph=Tt(He._paragraph).replace("hr",He.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",He.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",He._tag).getRegex();He.pedantic=Wr({},He.normal,{html:Tt(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",He._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Sh,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Tt(He.normal._paragraph).replace("hr",He.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",He.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});const De={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:Sh,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^(?:[^_*\\]|\\.)*?\_\_(?:[^_*\\]|\\.)*?\*(?:[^_*\\]|\\.)*?(?=\_\_)|(?:[^*\\]|\\.)+(?=[^*])|[punct_](\*+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|(?:[^punct*_\s\\]|\\.)(\*+)(?=[^punct*_\s])/,rDelimUnd:/^(?:[^_*\\]|\\.)*?\*\*(?:[^_*\\]|\\.)*?\_(?:[^_*\\]|\\.)*?(?=\*\*)|(?:[^_\\]|\\.)+(?=[^_])|[punct*](\_+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:Sh,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};De._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~";De.punctuation=Tt(De.punctuation).replace(/punctuation/g,De._punctuation).getRegex();De.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g;De.escapedEmSt=/(?:^|[^\\])(?:\\\\)*\\[*_]/g;De._comment=Tt(He._comment).replace("(?:-->|$)","-->").getRegex();De.emStrong.lDelim=Tt(De.emStrong.lDelim).replace(/punct/g,De._punctuation).getRegex();De.emStrong.rDelimAst=Tt(De.emStrong.rDelimAst,"g").replace(/punct/g,De._punctuation).getRegex();De.emStrong.rDelimUnd=Tt(De.emStrong.rDelimUnd,"g").replace(/punct/g,De._punctuation).getRegex();De._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g;De._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;De._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;De.autolink=Tt(De.autolink).replace("scheme",De._scheme).replace("email",De._email).getRegex();De._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;De.tag=Tt(De.tag).replace("comment",De._comment).replace("attribute",De._attribute).getRegex();De._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;De._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;De._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;De.link=Tt(De.link).replace("label",De._label).replace("href",De._href).replace("title",De._title).getRegex();De.reflink=Tt(De.reflink).replace("label",De._label).replace("ref",He._label).getRegex();De.nolink=Tt(De.nolink).replace("ref",He._label).getRegex();De.reflinkSearch=Tt(De.reflinkSearch,"g").replace("reflink",De.reflink).replace("nolink",De.nolink).getRegex();De.normal=Wr({},De);De.pedantic=Wr({},De.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:Tt(/^!?\[(label)\]\((.*?)\)/).replace("label",De._label).getRegex(),reflink:Tt(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",De._label).getRegex()});De.gfm=Wr({},De.normal,{escape:Tt(De.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/});De.gfm.url=Tt(De.gfm.url,"i").replace("email",De.gfm._extended_email).getRegex();De.breaks=Wr({},De.gfm,{br:Tt(De.br).replace("{2,}","*").getRegex(),text:Tt(De.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});function DD(n){return n.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201C").replace(/"/g,"\u201D").replace(/\.{3}/g,"\u2026")}function Kv(n){let e="",t,r;const i=n.length;for(t=0;t<i;t++)r=n.charCodeAt(t),Math.random()>.5&&(r="x"+r.toString(16)),e+="&#"+r+";";return e}class Vi{constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Ra,this.options.tokenizer=this.options.tokenizer||new jO,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:He.normal,inline:De.normal};this.options.pedantic?(t.block=He.pedantic,t.inline=De.pedantic):this.options.gfm&&(t.block=He.gfm,this.options.breaks?t.inline=De.breaks:t.inline=De.gfm),this.tokenizer.rules=t}static get rules(){return{block:He,inline:De}}static lex(e,t){return new Vi(t).lex(e)}static lexInline(e,t){return new Vi(t).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);let t;for(;t=this.inlineQueue.shift();)this.inlineTokens(t.src,t.tokens);return this.tokens}blockTokens(e,t=[]){this.options.pedantic?e=e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e=e.replace(/^( *)(\t+)/gm,(a,l,c)=>l+"    ".repeat(c.length));let r,i,s,o;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>(r=a.call({lexer:this},e,t))?(e=e.substring(r.raw.length),t.push(r),!0):!1))){if(r=this.tokenizer.space(e)){e=e.substring(r.raw.length),r.raw.length===1&&t.length>0?t[t.length-1].raw+=`
`:t.push(r);continue}if(r=this.tokenizer.code(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(r);continue}if(r=this.tokenizer.fences(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.heading(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.hr(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.blockquote(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.list(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.html(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.def(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+r.raw,i.text+=`
`+r.raw,this.inlineQueue[this.inlineQueue.length-1].src=i.text):this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title});continue}if(r=this.tokenizer.table(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.lheading(e)){e=e.substring(r.raw.length),t.push(r);continue}if(s=e,this.options.extensions&&this.options.extensions.startBlock){let a=1/0;const l=e.slice(1);let c;this.options.extensions.startBlock.forEach(function(u){c=u.call({lexer:this},l),typeof c=="number"&&c>=0&&(a=Math.min(a,c))}),a<1/0&&a>=0&&(s=e.substring(0,a+1))}if(this.state.top&&(r=this.tokenizer.paragraph(s))){i=t[t.length-1],o&&i.type==="paragraph"?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(r),o=s.length!==e.length,e=e.substring(r.raw.length);continue}if(r=this.tokenizer.text(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&i.type==="text"?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(r);continue}if(e){const a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}else throw new Error(a)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let r,i,s,o=e,a,l,c;if(this.tokens.links){const u=Object.keys(this.tokens.links);if(u.length>0)for(;(a=this.tokenizer.rules.inline.reflinkSearch.exec(o))!=null;)u.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(o=o.slice(0,a.index)+"["+Gv("a",a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(a=this.tokenizer.rules.inline.blockSkip.exec(o))!=null;)o=o.slice(0,a.index)+"["+Gv("a",a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(a=this.tokenizer.rules.inline.escapedEmSt.exec(o))!=null;)o=o.slice(0,a.index+a[0].length-2)+"++"+o.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex),this.tokenizer.rules.inline.escapedEmSt.lastIndex--;for(;e;)if(l||(c=""),l=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(u=>(r=u.call({lexer:this},e,t))?(e=e.substring(r.raw.length),t.push(r),!0):!1))){if(r=this.tokenizer.escape(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.tag(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&r.type==="text"&&i.type==="text"?(i.raw+=r.raw,i.text+=r.text):t.push(r);continue}if(r=this.tokenizer.link(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(r.raw.length),i=t[t.length-1],i&&r.type==="text"&&i.type==="text"?(i.raw+=r.raw,i.text+=r.text):t.push(r);continue}if(r=this.tokenizer.emStrong(e,o,c)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.codespan(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.br(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.del(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.autolink(e,Kv)){e=e.substring(r.raw.length),t.push(r);continue}if(!this.state.inLink&&(r=this.tokenizer.url(e,Kv))){e=e.substring(r.raw.length),t.push(r);continue}if(s=e,this.options.extensions&&this.options.extensions.startInline){let u=1/0;const h=e.slice(1);let f;this.options.extensions.startInline.forEach(function(p){f=p.call({lexer:this},h),typeof f=="number"&&f>=0&&(u=Math.min(u,f))}),u<1/0&&u>=0&&(s=e.substring(0,u+1))}if(r=this.tokenizer.inlineText(s,DD)){e=e.substring(r.raw.length),r.raw.slice(-1)!=="_"&&(c=r.raw.slice(-1)),l=!0,i=t[t.length-1],i&&i.type==="text"?(i.raw+=r.raw,i.text+=r.text):t.push(r);continue}if(e){const u="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return t}}class qO{constructor(e){this.options=e||Ra}code(e,t,r){const i=(t||"").match(/\S*/)[0];if(this.options.highlight){const s=this.options.highlight(e,i);s!=null&&s!==e&&(r=!0,e=s)}return e=e.replace(/\n$/,"")+`
`,i?'<pre><code class="'+this.options.langPrefix+bn(i)+'">'+(r?e:bn(e,!0))+`</code></pre>
`:"<pre><code>"+(r?e:bn(e,!0))+`</code></pre>
`}blockquote(e){return`<blockquote>
${e}</blockquote>
`}html(e){return e}heading(e,t,r,i){if(this.options.headerIds){const s=this.options.headerPrefix+i.slug(r);return`<h${t} id="${s}">${e}</h${t}>
`}return`<h${t}>${e}</h${t}>
`}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(e,t,r){const i=t?"ol":"ul",s=t&&r!==1?' start="'+r+'"':"";return"<"+i+s+`>
`+e+"</"+i+`>
`}listitem(e){return`<li>${e}</li>
`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(e){return`<p>${e}</p>
`}table(e,t){return t&&(t=`<tbody>${t}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+t+`</table>
`}tablerow(e){return`<tr>
${e}</tr>
`}tablecell(e,t){const r=t.header?"th":"td";return(t.align?`<${r} align="${t.align}">`:`<${r}>`)+e+`</${r}>
`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return`<del>${e}</del>`}link(e,t,r){if(e=Hv(this.options.sanitize,this.options.baseUrl,e),e===null)return r;let i='<a href="'+e+'"';return t&&(i+=' title="'+t+'"'),i+=">"+r+"</a>",i}image(e,t,r){if(e=Hv(this.options.sanitize,this.options.baseUrl,e),e===null)return r;let i=`<img src="${e}" alt="${r}"`;return t&&(i+=` title="${t}"`),i+=this.options.xhtml?"/>":">",i}text(e){return e}}class ak{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,r){return""+r}image(e,t,r){return""+r}br(){return""}}class lk{constructor(){this.seen={}}serialize(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(e,t){let r=e,i=0;if(this.seen.hasOwnProperty(r)){i=this.seen[e];do i++,r=e+"-"+i;while(this.seen.hasOwnProperty(r))}return t||(this.seen[e]=i,this.seen[r]=0),r}slug(e,t={}){const r=this.serialize(e);return this.getNextSafeSlug(r,t.dryrun)}}class si{constructor(e){this.options=e||Ra,this.options.renderer=this.options.renderer||new qO,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new ak,this.slugger=new lk}static parse(e,t){return new si(t).parse(e)}static parseInline(e,t){return new si(t).parseInline(e)}parse(e,t=!0){let r="",i,s,o,a,l,c,u,h,f,p,d,m,y,w,b,O,v,_,S;const R=e.length;for(i=0;i<R;i++){if(p=e[i],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[p.type]&&(S=this.options.extensions.renderers[p.type].call({parser:this},p),S!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(p.type))){r+=S||"";continue}switch(p.type){case"space":continue;case"hr":{r+=this.renderer.hr();continue}case"heading":{r+=this.renderer.heading(this.parseInline(p.tokens),p.depth,sk(this.parseInline(p.tokens,this.textRenderer)),this.slugger);continue}case"code":{r+=this.renderer.code(p.text,p.lang,p.escaped);continue}case"table":{for(h="",u="",a=p.header.length,s=0;s<a;s++)u+=this.renderer.tablecell(this.parseInline(p.header[s].tokens),{header:!0,align:p.align[s]});for(h+=this.renderer.tablerow(u),f="",a=p.rows.length,s=0;s<a;s++){for(c=p.rows[s],u="",l=c.length,o=0;o<l;o++)u+=this.renderer.tablecell(this.parseInline(c[o].tokens),{header:!1,align:p.align[o]});f+=this.renderer.tablerow(u)}r+=this.renderer.table(h,f);continue}case"blockquote":{f=this.parse(p.tokens),r+=this.renderer.blockquote(f);continue}case"list":{for(d=p.ordered,m=p.start,y=p.loose,a=p.items.length,f="",s=0;s<a;s++)b=p.items[s],O=b.checked,v=b.task,w="",b.task&&(_=this.renderer.checkbox(O),y?b.tokens.length>0&&b.tokens[0].type==="paragraph"?(b.tokens[0].text=_+" "+b.tokens[0].text,b.tokens[0].tokens&&b.tokens[0].tokens.length>0&&b.tokens[0].tokens[0].type==="text"&&(b.tokens[0].tokens[0].text=_+" "+b.tokens[0].tokens[0].text)):b.tokens.unshift({type:"text",text:_}):w+=_),w+=this.parse(b.tokens,y),f+=this.renderer.listitem(w,v,O);r+=this.renderer.list(f,d,m);continue}case"html":{r+=this.renderer.html(p.text);continue}case"paragraph":{r+=this.renderer.paragraph(this.parseInline(p.tokens));continue}case"text":{for(f=p.tokens?this.parseInline(p.tokens):p.text;i+1<R&&e[i+1].type==="text";)p=e[++i],f+=`
`+(p.tokens?this.parseInline(p.tokens):p.text);r+=t?this.renderer.paragraph(f):f;continue}default:{const N='Token with "'+p.type+'" type was not found.';if(this.options.silent){console.error(N);return}else throw new Error(N)}}}return r}parseInline(e,t){t=t||this.renderer;let r="",i,s,o;const a=e.length;for(i=0;i<a;i++){if(s=e[i],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]&&(o=this.options.extensions.renderers[s.type].call({parser:this},s),o!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type))){r+=o||"";continue}switch(s.type){case"escape":{r+=t.text(s.text);break}case"html":{r+=t.html(s.text);break}case"link":{r+=t.link(s.href,s.title,this.parseInline(s.tokens,t));break}case"image":{r+=t.image(s.href,s.title,s.text);break}case"strong":{r+=t.strong(this.parseInline(s.tokens,t));break}case"em":{r+=t.em(this.parseInline(s.tokens,t));break}case"codespan":{r+=t.codespan(s.text);break}case"br":{r+=t.br();break}case"del":{r+=t.del(this.parseInline(s.tokens,t));break}case"text":{r+=t.text(s.text);break}default:{const l='Token with "'+s.type+'" type was not found.';if(this.options.silent){console.error(l);return}else throw new Error(l)}}}return r}}function je(n,e,t){if(typeof n>"u"||n===null)throw new Error("marked(): input parameter is undefined or null");if(typeof n!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected");if(typeof e=="function"&&(t=e,e=null),e=Wr({},je.defaults,e||{}),ok(e),t){const i=e.highlight;let s;try{s=Vi.lex(n,e)}catch(l){return t(l)}const o=function(l){let c;if(!l)try{e.walkTokens&&je.walkTokens(s,e.walkTokens),c=si.parse(s,e)}catch(u){l=u}return e.highlight=i,l?t(l):t(null,c)};if(!i||i.length<3||(delete e.highlight,!s.length))return o();let a=0;je.walkTokens(s,function(l){l.type==="code"&&(a++,setTimeout(()=>{i(l.text,l.lang,function(c,u){if(c)return o(c);u!=null&&u!==l.text&&(l.text=u,l.escaped=!0),a--,a===0&&o()})},0))}),a===0&&o();return}function r(i){if(i.message+=`
Please report this to https://github.com/markedjs/marked.`,e.silent)return"<p>An error occurred:</p><pre>"+bn(i.message+"",!0)+"</pre>";throw i}try{const i=Vi.lex(n,e);if(e.walkTokens){if(e.async)return Promise.all(je.walkTokens(i,e.walkTokens)).then(()=>si.parse(i,e)).catch(r);je.walkTokens(i,e.walkTokens)}return si.parse(i,e)}catch(i){r(i)}}je.options=je.setOptions=function(n){return Wr(je.defaults,n),_D(je.defaults),je};je.getDefaults=nk;je.defaults=Ra;je.use=function(...n){const e=je.defaults.extensions||{renderers:{},childTokens:{}};n.forEach(t=>{const r=Wr({},t);if(r.async=je.defaults.async||r.async,t.extensions&&(t.extensions.forEach(i=>{if(!i.name)throw new Error("extension name required");if(i.renderer){const s=e.renderers[i.name];s?e.renderers[i.name]=function(...o){let a=i.renderer.apply(this,o);return a===!1&&(a=s.apply(this,o)),a}:e.renderers[i.name]=i.renderer}if(i.tokenizer){if(!i.level||i.level!=="block"&&i.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");e[i.level]?e[i.level].unshift(i.tokenizer):e[i.level]=[i.tokenizer],i.start&&(i.level==="block"?e.startBlock?e.startBlock.push(i.start):e.startBlock=[i.start]:i.level==="inline"&&(e.startInline?e.startInline.push(i.start):e.startInline=[i.start]))}i.childTokens&&(e.childTokens[i.name]=i.childTokens)}),r.extensions=e),t.renderer){const i=je.defaults.renderer||new qO;for(const s in t.renderer){const o=i[s];i[s]=(...a)=>{let l=t.renderer[s].apply(i,a);return l===!1&&(l=o.apply(i,a)),l}}r.renderer=i}if(t.tokenizer){const i=je.defaults.tokenizer||new jO;for(const s in t.tokenizer){const o=i[s];i[s]=(...a)=>{let l=t.tokenizer[s].apply(i,a);return l===!1&&(l=o.apply(i,a)),l}}r.tokenizer=i}if(t.walkTokens){const i=je.defaults.walkTokens;r.walkTokens=function(s){let o=[];return o.push(t.walkTokens.call(this,s)),i&&(o=o.concat(i.call(this,s))),o}}je.setOptions(r)})};je.walkTokens=function(n,e){let t=[];for(const r of n)switch(t=t.concat(e.call(je,r)),r.type){case"table":{for(const i of r.header)t=t.concat(je.walkTokens(i.tokens,e));for(const i of r.rows)for(const s of i)t=t.concat(je.walkTokens(s.tokens,e));break}case"list":{t=t.concat(je.walkTokens(r.items,e));break}default:je.defaults.extensions&&je.defaults.extensions.childTokens&&je.defaults.extensions.childTokens[r.type]?je.defaults.extensions.childTokens[r.type].forEach(function(i){t=t.concat(je.walkTokens(r[i],e))}):r.tokens&&(t=t.concat(je.walkTokens(r.tokens,e)))}return t};je.parseInline=function(n,e){if(typeof n>"u"||n===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof n!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected");e=Wr({},je.defaults,e||{}),ok(e);try{const t=Vi.lexInline(n,e);return e.walkTokens&&je.walkTokens(t,e.walkTokens),si.parseInline(t,e)}catch(t){if(t.message+=`
Please report this to https://github.com/markedjs/marked.`,e.silent)return"<p>An error occurred:</p><pre>"+bn(t.message+"",!0)+"</pre>";throw t}};je.Parser=si;je.parser=si.parse;je.Renderer=qO;je.TextRenderer=ak;je.Lexer=Vi;je.lexer=Vi.lex;je.Tokenizer=jO;je.Slugger=lk;je.parse=je;je.options;je.setOptions;je.use;je.walkTokens;je.parseInline;si.parse;Vi.lex;if(typeof DOMParser>"u"){const n=global.JSDOM||require("jsdom").JSDOM;global.DOMParser=new n().window.DOMParser,global.document=new n().window.document}const kh=document.createElement("p"),ck=n=>(kh.innerHTML=n,kh.textContent),so=n=>(kh.textContent=n,kh.innerHTML);window.marked=je;const MD={heading(n){},nptable(n){},hr(n){},blockquote(n){},code(n){},def(n){},list(n){},table(n){},lheading(n){}};je.use({tokenizer:MD});const $D=n=>{je.use({tokenizer:{reflink(e){if(n)return;const r=/^\[(.*?)\]/.exec(e);if(r)return{type:"link",raw:r[0],text:"",title:"",href:"#"+r[1].trim(),tokens:[]}}}})},BD={html:n=>so(n),paragraph:n=>`${n.trim()}<br>`,strong:n=>`<b>${n}</b>`,em:n=>`<i>${n}</i>`,codespan:n=>"",code:n=>"",reflink:(...n)=>JSON.stringify(n),br:(...n)=>"</p><p>"},ci=(n,e=BD,t=[])=>je(n.replace(/\n/g,` \\
`).replaceAll(" \\\n```","\n\n```"),{renderer:Object.assign(new je.Renderer,e,{code:(r,i,...s)=>e.code(r.replaceAll(` \\
`,`
`),i.replace(" \\",""),...s)})}),XO=n=>n.replaceAll(/( )*\<p\>( )*/g,"<p>").replaceAll(/( )*\<\/p\>( )*/g,"</p>").replaceAll(/( )*\<br>( )*/g,"<br>"),Wf=n=>{const e={disableShortLinks:!1,page:{width:"14.8",height:"21",margins:["2.5","2","2","2"]},textFont:{family:"Times New Roman",spacing:"100%",size:"12pt"},titleFont:{family:"Times New Roman",spacing:"100%",size:"12pt"},titleStyle:"default",renameTitle:({book:t,chapter:r,key:i,title:s})=>"<b>"+(s==""?i:s)+"</b>",renameLink:({book:t,chapter:r,text:i,title:s,key:o,currentChapter:a})=>i==""?r==null?"ERROR":s==""?o:s:i,renameAnchor:({book:t,key:r})=>r,advancedFormat:["text/html","html"]};if(n.disableShortLinks&&n.disableShortLinks.trim().toLowerCase()=="true"&&(e.disableShortLinks=!0),n.page){const t=n.page.split(",");if(t[0]){const r={A3:"29.70 42.00",A4:"21.00 29.70",A5:"14.80 21.00",A6:"10.50 14.80",B4:"25.00 35.30",B5:"17.60 25.00",B6:"12.50 17.60",Letter:"21.59 27.94"},i=(r[t[0].trim()]?r[t[0].trim()]:t[0].trim()).split(/\s+/);i.length>=2&&(e.page.width=i[0],e.page.height=i[1])}if(t[1]){const r=t[1].trim().split(/\s+/);r.length>=4&&(e.page.margins=r)}}if(n.textFont){const t=n.textFont.split(",");if(t[0]&&(e.textFont.family=t[0].trim()),t[1]){let r=t[1].trim();r.endsWith("pt")||(r+="pt"),e.textFont.size=r}t[2]&&(e.textFont.spacing=t[2].trim())}if(n.titleFont){const t=n.titleFont.split(",");if(t[0]&&(e.titleFont.family=t[0].trim()),t[1]){let r=t[1].trim();r.endsWith("pt")||(r+="pt"),e.titleFont.size=r}t[2]&&(e.titleFont.spacing=t[2].trim())}if(n.titleStyle){const t=["default","inline"],r=t.indexOf(n.titleStyle.trim().toLowerCase());r!=-1&&(e.titleStyle=t[r])}if(n.renameTitle&&(e.renameTitle=new Function("{book, chapter, key, title}","return "+n.renameTitle.trim())),n.renameLink&&(e.renameLink=new Function("{book, text, chapter, title, key, currentChapter}","return "+n.renameLink.trim())),n.renameAnchor&&(e.renameAnchor=new Function("{book, key}","return "+n.renameAnchor.trim())),n.advancedFormat){const t=n.advancedFormat.split(",");t[0]&&(e.advancedFormat[0]=t[0].trim()),t[1]&&(e.advancedFormat[1]=t[1].trim())}return e},Bm=Vf,uk="application/xml",FD="xlgc",UD=n=>Object.keys(n).sort((e,t)=>{const r=Bm(e),i=Bm(t);if(!r&&i)return-1;if(r&&!i)return 1;if(!r&&!i)return e.localeCompare(t);if(r&&i)return parseInt(e,10)-parseInt(t,10)}),VD=n=>{const e={},t={},r=["lgc_version","title","author","version","revision","table_of_contents","editing_action","editing_chapter"],i=new DOMParser().parseFromString(n,"text/xml");[...i.documentElement.children||i.documentElement.childNodes].forEach(o=>{const a=o.getAttribute("name"),l=o.getAttribute("type"),c=o.getAttribute("group");if(l==="entity"&&a==="game"){[...o.children].forEach(h=>{const f=h.getAttribute("name"),p=h.innerHTML.substring(9,h.innerHTML.length-3);f=="editing_chapter"||r.includes(f)&&(e[f]=p)});return}if(l==="entity"&&a==="map_data"){[...o.children].forEach(h=>{const f=h.getAttribute("name"),p=h.innerHTML.substring(9,h.innerHTML.length-3);f==="map_file"&&(e.map=p)});return}let u={title:"",text:"",flags:[]};c&&(u.group=c),[...o.children].forEach(h=>{const f=h.getAttribute("name"),p=h.innerHTML.substring(9,h.innerHTML.length-3);f==="chapter_title"&&p&&(u.title=p),f==="description"&&(u.text=p),f==="map_position"&&(u.map=p),f.startsWith("flag_")&&p==="true"&&u.flags.push(f.substring(5))}),u.text=ck(u.text.replace(/\<\/\p\>/g,`
`).replace(/\<\p\>/g,"").replaceAll("<br>",`
`).replace(/\<i\>/g,"&lt;i&gt;").replace(/\<\/i\>/g,"&lt;/i&gt;").replace(/\<b\>/g,"&lt;b&gt;").replace(/\<\/b\>/g,"&lt;/b&gt;").replace(/\<u\>/g,"&lt;b&gt;").replace(/\<\/u\>/g,"&lt;/b&gt;").replace(/{link (\w+):([^\}\{]+)}/g,(...h)=>h[2].trim()=="@T"?`[${h[1]}]`:`[${h[2]}](#${h[1]})`).replace(/[\n\s]+$/,"")),t[a]=u});let s=`# ${e.title}
`;return Object.entries(e).forEach(([o,a])=>{o!=="title"&&(s+=`${o}: ${a.trim()}
`)}),s+=`


`,UD(t).forEach(o=>{const a=t[o];if(s+=a.title?`### ${a.title} {#${o}}
`:`### ${o}
`,a.flags&&a.flags.length){const l={death:"![][flag-death]",final:"![][flag-final]",fixed:"![][flag-fixed]"};s+=a.flags.map(c=>l[c]).join(" ")+`
`}a.group&&(s+=`[group]:<> ("${a.group}")
`),s+=a.text.replace(/\n+$/,"")+`


`}),s},WD=["<b>","</b>","<i>","</i>","<u>","</u>"],jD={html:n=>WD.includes(n.trim().toLowerCase())?n.trim().toLowerCase():so(n),paragraph:n=>`<p>${n}</p>`,strong:n=>`<b>${n}</b>`,em:n=>`<i>${n}</i>`,codespan:n=>"`"+n+"`",code:(n,e)=>"<p>```"+e+so(n).replace(/\n/g,"</p><p>")+"```</p>",link:(n,e,t)=>`{link ${n.replace("#","")}:${t||"@T"}}`,br:()=>"</p><p>"},qD=n=>{const e=document.createElement("p");return e.innerHTML=n,e.innerHTML},XD=(n,e)=>`<entity group="setup" name="game" type="entity"><attribute name="description" type="string"><![CDATA[<p></p>]]></attribute><attribute name="chapter_title" type="string"/><attribute name="lgc_version" type="string"><![CDATA[${n.lgc_version||""}]]></attribute><attribute name="title" type="string"><![CDATA[${n.title||""}]]></attribute><attribute name="author" type="string"><![CDATA[${n.author||""}]]></attribute><attribute name="version" type="string"><![CDATA[${n.version||""}]]></attribute><attribute name="revision" type="integer"><![CDATA[${n.revision||"1"}]]></attribute><attribute name="editing_action" type="string"><![CDATA[${n.editing_action||"WRITING"}]]></attribute><attribute name="table_of_contents" type="string"><![CDATA[${n.table_of_contents||"P(ALL)"}]]></attribute><attribute name="editing_chapter" type="string"><![CDATA[${e||"1"}]]></attribute></entity>`,zD=n=>n.map?`<entity group="setup" name="map_data" type="entity"><attribute name="description" type="string"><![CDATA[<p></p>]]></attribute><attribute name="chapter_title" type="string"/><attribute name="map_file" type="string"><![CDATA[${n.map}]]></attribute></entity>`:"",HD=(n,e)=>`<entity group="${e.group||""}" name="${n}" type="${Bm(n)?"chapter":"section"}"><attribute name="description" type="string"><![CDATA[${XO(qD(ci(e.text,jD))||"<p></p>")}]]></attribute><attribute name="chapter_title" type="string"><![CDATA[${e.title||""}]]></attribute>${e.type&&e.type!=="chapter"?"":`<attribute name="flag_final" type="boolean"><![CDATA[${e.flags&&e.flags.includes("final")?"true":"false"}]]></attribute><attribute name="flag_fixed" type="boolean"><![CDATA[${e.flags&&e.flags.includes("fixed")?"true":"false"}]]></attribute><attribute name="flag_death" type="boolean"><![CDATA[${e.flags&&e.flags.includes("death")?"true":"false"}]]></attribute>`}`+(e.map?`<attribute name="map_position" type="string"><![CDATA[${e.map||""}]]></attribute>`:"")+"</entity>",ZD=n=>{const e=mi(n),{chapters:t,properties:r}=e;let i=`<?xml version="1.0" encoding="UTF-8"?><entities>${XD(r)+zD(r)}`;for(const[s,o]of t)i+=HD(s,o);return{encodedBook:i+"</entities>",mimetype:uk,extension:FD}},GD={decode:VD,encode:ZD,mimetype:uk},YD=`
  <style:style style:name="right" style:family="paragraph" style:parent-style-name="Standard">
    <style:paragraph-properties fo:text-align="end" style:justify-single-word="false"/>
  </style:style>
  <style:style style:name="justify" style:family="paragraph" style:parent-style-name="Standard">
    <style:paragraph-properties fo:text-align="justify" style:justify-single-word="false"/>
  </style:style>
  <style:style style:name="break" style:family="paragraph" style:parent-style-name="Standard">
    <style:paragraph-properties fo:break-after="page"/>
  </style:style>
  <style:style style:name="bold" style:family="text">
   <style:text-properties fo:font-weight="bold" style:font-weight-asian="bold" style:font-weight-complex="bold"/>
  </style:style>
  <style:style style:name="underline" style:family="text">
    <style:text-properties style:text-underline-style="solid" style:text-underline-width="auto" style:text-underline-color="font-color"/>
  </style:style>
  <style:style style:name="italic" style:family="text">
    <style:text-properties fo:font-style="italic" style:font-style-asian="italic" style:font-style-complex="italic"/>
  </style:style>`,KD=(n,e)=>`<?xml version="1.0" encoding="UTF-8"?>

<office:document xmlns:grddl="http://www.w3.org/2003/g/data-view#" xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:css3t="http://www.w3.org/TR/css3-text/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:formx="urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0" xmlns:xforms="http://www.w3.org/2002/xforms" xmlns:dom="http://www.w3.org/2001/xml-events" xmlns:script="urn:oasis:names:tc:opendocument:xmlns:script:1.0" xmlns:form="urn:oasis:names:tc:opendocument:xmlns:form:1.0" xmlns:math="http://www.w3.org/1998/Math/MathML" xmlns:field="urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0" xmlns:of="urn:oasis:names:tc:opendocument:xmlns:of:1.2" xmlns:oooc="http://openoffice.org/2004/calc" xmlns:ooow="http://openoffice.org/2004/writer" xmlns:config="urn:oasis:names:tc:opendocument:xmlns:config:1.0" xmlns:tableooo="http://openoffice.org/2009/table" xmlns:text="urn:oasis:names:tc:opendocument:xmlns:text:1.0" xmlns:calcext="urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0" xmlns:fo="urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:loext="urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:ooo="http://openoffice.org/2004/office" xmlns:table="urn:oasis:names:tc:opendocument:xmlns:table:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:officeooo="http://openoffice.org/2009/office" xmlns:style="urn:oasis:names:tc:opendocument:xmlns:style:1.0" xmlns:drawooo="http://openoffice.org/2010/draw" xmlns:draw="urn:oasis:names:tc:opendocument:xmlns:drawing:1.0" xmlns:dr3d="urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0" xmlns:svg="urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0" xmlns:chart="urn:oasis:names:tc:opendocument:xmlns:chart:1.0" xmlns:rpt="http://openoffice.org/2005/report" xmlns:number="urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0" office:version="1.2" office:mimetype="application/vnd.oasis.opendocument.text">
 <office:meta><meta:creation-date>2017-01-01T14:28:30.863048091</meta:creation-date><meta:generator>LibreOffice/6.4.1.2$Linux_X86_64 LibreOffice_project/e1ad903d8acbc5f5b474f1d8ec3defef24b8c46b</meta:generator><meta:editing-cycles>0</meta:editing-cycles><meta:editing-duration>P0D</meta:editing-duration><meta:document-statistic meta:table-count="0" meta:image-count="0" meta:object-count="0" meta:page-count="2" meta:paragraph-count="14" meta:word-count="48" meta:character-count="272" meta:non-whitespace-character-count="237"/></office:meta>
 <office:settings>
  <config:config-item-set config:name="ooo:view-settings">
   <config:config-item config:name="ViewAreaTop" config:type="long">7895</config:config-item>
   <config:config-item config:name="ViewAreaLeft" config:type="long">0</config:config-item>
   <config:config-item config:name="ViewAreaWidth" config:type="long">33413</config:config-item>
   <config:config-item config:name="ViewAreaHeight" config:type="long">15162</config:config-item>
   <config:config-item config:name="ShowRedlineChanges" config:type="boolean">true</config:config-item>
   <config:config-item config:name="InBrowseMode" config:type="boolean">false</config:config-item>
   <config:config-item-map-indexed config:name="Views">
    <config:config-item-map-entry>
     <config:config-item config:name="ViewId" config:type="string">view2</config:config-item>
     <config:config-item config:name="ViewLeft" config:type="long">16095</config:config-item>
     <config:config-item config:name="ViewTop" config:type="long">7869</config:config-item>
     <config:config-item config:name="VisibleLeft" config:type="long">0</config:config-item>
     <config:config-item config:name="VisibleTop" config:type="long">7895</config:config-item>
     <config:config-item config:name="VisibleRight" config:type="long">33412</config:config-item>
     <config:config-item config:name="VisibleBottom" config:type="long">23056</config:config-item>
     <config:config-item config:name="ZoomType" config:type="short">0</config:config-item>
     <config:config-item config:name="ViewLayoutColumns" config:type="short">1</config:config-item>
     <config:config-item config:name="ViewLayoutBookMode" config:type="boolean">false</config:config-item>
     <config:config-item config:name="ZoomFactor" config:type="short">140</config:config-item>
     <config:config-item config:name="IsSelectedFrame" config:type="boolean">false</config:config-item>
     <config:config-item config:name="AnchoredTextOverflowLegacy" config:type="boolean">true</config:config-item>
    </config:config-item-map-entry>
   </config:config-item-map-indexed>
  </config:config-item-set>
  <config:config-item-set config:name="ooo:configuration-settings">
   <config:config-item config:name="PrintPaperFromSetup" config:type="boolean">false</config:config-item>
   <config:config-item config:name="PrintFaxName" config:type="string"/>
   <config:config-item config:name="PrintSingleJobs" config:type="boolean">false</config:config-item>
   <config:config-item config:name="PrintProspectRTL" config:type="boolean">false</config:config-item>
   <config:config-item config:name="PrintProspect" config:type="boolean">false</config:config-item>
   <config:config-item config:name="PrintReversed" config:type="boolean">false</config:config-item>
   <config:config-item config:name="PrintTextPlaceholder" config:type="boolean">false</config:config-item>
   <config:config-item config:name="PrintTables" config:type="boolean">true</config:config-item>
   <config:config-item config:name="PrintPageBackground" config:type="boolean">true</config:config-item>
   <config:config-item config:name="PrintLeftPages" config:type="boolean">true</config:config-item>
   <config:config-item config:name="PrintAnnotationMode" config:type="short">0</config:config-item>
   <config:config-item config:name="PrintControls" config:type="boolean">true</config:config-item>
   <config:config-item config:name="PrintHiddenText" config:type="boolean">false</config:config-item>
   <config:config-item config:name="PrintDrawings" config:type="boolean">true</config:config-item>
   <config:config-item config:name="IgnoreFirstLineIndentInNumbering" config:type="boolean">false</config:config-item>
   <config:config-item config:name="PrinterSetup" config:type="base64Binary"/>
   <config:config-item config:name="CollapseEmptyCellPara" config:type="boolean">true</config:config-item>
   <config:config-item config:name="UseOldPrinterMetrics" config:type="boolean">false</config:config-item>
   <config:config-item config:name="UseOldNumbering" config:type="boolean">false</config:config-item>
   <config:config-item config:name="AddExternalLeading" config:type="boolean">true</config:config-item>
   <config:config-item config:name="TreatSingleColumnBreakAsPageBreak" config:type="boolean">false</config:config-item>
   <config:config-item config:name="IsLabelDocument" config:type="boolean">false</config:config-item>
   <config:config-item config:name="RsidRoot" config:type="int">1031266</config:config-item>
   <config:config-item config:name="ConsiderTextWrapOnObjPos" config:type="boolean">false</config:config-item>
   <config:config-item config:name="TableRowKeep" config:type="boolean">false</config:config-item>
   <config:config-item config:name="TabsRelativeToIndent" config:type="boolean">true</config:config-item>
   <config:config-item config:name="UpdateFromTemplate" config:type="boolean">true</config:config-item>
   <config:config-item config:name="SaveVersionOnClose" config:type="boolean">false</config:config-item>
   <config:config-item config:name="UseFormerTextWrapping" config:type="boolean">false</config:config-item>
   <config:config-item config:name="ChartAutoUpdate" config:type="boolean">true</config:config-item>
   <config:config-item config:name="AllowPrintJobCancel" config:type="boolean">true</config:config-item>
   <config:config-item config:name="AddParaTableSpacing" config:type="boolean">true</config:config-item>
   <config:config-item config:name="AddParaSpacingToTableCells" config:type="boolean">true</config:config-item>
   <config:config-item config:name="UseFormerLineSpacing" config:type="boolean">false</config:config-item>
   <config:config-item config:name="OutlineLevelYieldsNumbering" config:type="boolean">false</config:config-item>
   <config:config-item config:name="AlignTabStopPosition" config:type="boolean">true</config:config-item>
   <config:config-item config:name="DoNotJustifyLinesWithManualBreak" config:type="boolean">false</config:config-item>
   <config:config-item config:name="EmbedOnlyUsedFonts" config:type="boolean">false</config:config-item>
   <config:config-item config:name="LinkUpdateMode" config:type="short">1</config:config-item>
   <config:config-item config:name="CurrentDatabaseCommandType" config:type="int">0</config:config-item>
   <config:config-item config:name="CurrentDatabaseCommand" config:type="string"/>
   <config:config-item config:name="CharacterCompressionType" config:type="short">0</config:config-item>
   <config:config-item config:name="SmallCapsPercentage66" config:type="boolean">false</config:config-item>
   <config:config-item config:name="ApplyUserData" config:type="boolean">false</config:config-item>
   <config:config-item config:name="StylesNoDefault" config:type="boolean">false</config:config-item>
   <config:config-item config:name="EmbeddedDatabaseName" config:type="string"/>
   <config:config-item config:name="FloattableNomargins" config:type="boolean">false</config:config-item>
   <config:config-item config:name="BackgroundParaOverDrawings" config:type="boolean">false</config:config-item>
   <config:config-item config:name="PrinterName" config:type="string"/>
   <config:config-item config:name="UseFormerObjectPositioning" config:type="boolean">false</config:config-item>
   <config:config-item config:name="TabOverMargin" config:type="boolean">false</config:config-item>
   <config:config-item config:name="SaveGlobalDocumentLinks" config:type="boolean">false</config:config-item>
   <config:config-item config:name="CurrentDatabaseDataSource" config:type="string"/>
   <config:config-item config:name="IsKernAsianPunctuation" config:type="boolean">false</config:config-item>
   <config:config-item config:name="SaveThumbnail" config:type="boolean">true</config:config-item>
   <config:config-item config:name="PrinterPaperFromSetup" config:type="boolean">false</config:config-item>
   <config:config-item config:name="PrinterIndependentLayout" config:type="string">high-resolution</config:config-item>
   <config:config-item config:name="TabOverflow" config:type="boolean">true</config:config-item>
   <config:config-item config:name="PrintGraphics" config:type="boolean">true</config:config-item>
   <config:config-item config:name="PropLineSpacingShrinksFirstLine" config:type="boolean">true</config:config-item>
   <config:config-item config:name="DoNotResetParaAttrsForNumFont" config:type="boolean">false</config:config-item>
   <config:config-item config:name="FieldAutoUpdate" config:type="boolean">true</config:config-item>
   <config:config-item config:name="IgnoreTabsAndBlanksForLineCalculation" config:type="boolean">false</config:config-item>
   <config:config-item config:name="RedlineProtectionKey" config:type="base64Binary"/>
   <config:config-item config:name="EmbedComplexScriptFonts" config:type="boolean">true</config:config-item>
   <config:config-item config:name="LoadReadonly" config:type="boolean">false</config:config-item>
   <config:config-item config:name="DoNotCaptureDrawObjsOnPage" config:type="boolean">false</config:config-item>
   <config:config-item config:name="ClipAsCharacterAnchoredWriterFlyFrames" config:type="boolean">false</config:config-item>
   <config:config-item config:name="PrintBlackFonts" config:type="boolean">false</config:config-item>
   <config:config-item config:name="DisableOffPagePositioning" config:type="boolean">false</config:config-item>
   <config:config-item config:name="SurroundTextWrapSmall" config:type="boolean">false</config:config-item>
   <config:config-item config:name="UnxForceZeroExtLeading" config:type="boolean">false</config:config-item>
   <config:config-item config:name="EmbedAsianScriptFonts" config:type="boolean">true</config:config-item>
   <config:config-item config:name="TabAtLeftIndentForParagraphsInList" config:type="boolean">false</config:config-item>
   <config:config-item config:name="PrintRightPages" config:type="boolean">true</config:config-item>
   <config:config-item config:name="Rsid" config:type="int">1168269</config:config-item>
   <config:config-item config:name="MathBaselineAlignment" config:type="boolean">true</config:config-item>
   <config:config-item config:name="MsWordCompTrailingBlanks" config:type="boolean">false</config:config-item>
   <config:config-item config:name="InvertBorderSpacing" config:type="boolean">false</config:config-item>
   <config:config-item config:name="EmbedFonts" config:type="boolean">false</config:config-item>
   <config:config-item config:name="UnbreakableNumberings" config:type="boolean">false</config:config-item>
   <config:config-item config:name="AddFrameOffsets" config:type="boolean">false</config:config-item>
   <config:config-item config:name="ClippedPictures" config:type="boolean">false</config:config-item>
   <config:config-item config:name="EmbedLatinScriptFonts" config:type="boolean">true</config:config-item>
   <config:config-item config:name="EmbedSystemFonts" config:type="boolean">false</config:config-item>
   <config:config-item config:name="AddParaTableSpacingAtStart" config:type="boolean">true</config:config-item>
   <config:config-item config:name="ContinuousEndnotes" config:type="boolean">false</config:config-item>
   <config:config-item config:name="ApplyParagraphMarkFormatToNumbering" config:type="boolean">false</config:config-item>
   <config:config-item config:name="SubtractFlysAnchoredAtFlys" config:type="boolean">false</config:config-item>
   <config:config-item config:name="EmptyDbFieldHidesPara" config:type="boolean">false</config:config-item>
   <config:config-item config:name="ProtectForm" config:type="boolean">false</config:config-item>
   <config:config-item config:name="AddVerticalFrameOffsets" config:type="boolean">false</config:config-item>
   <config:config-item config:name="PrintEmptyPages" config:type="boolean">false</config:config-item>
  </config:config-item-set>
 </office:settings>
 <office:scripts>
  <office:script script:language="ooo:Basic">
   <ooo:libraries xmlns:ooo="http://openoffice.org/2004/office" xmlns:xlink="http://www.w3.org/1999/xlink">
    <ooo:library-embedded ooo:name="Standard"/>
   </ooo:libraries>
  </office:script>
 </office:scripts>
 <office:font-face-decls>
  <style:font-face style:name="FreeSans1" svg:font-family="FreeSans" style:font-family-generic="swiss"/>
  <style:font-face style:name="Liberation Serif" svg:font-family="&apos;Liberation Serif&apos;" style:font-family-generic="roman" style:font-pitch="variable"/>
  <style:font-face style:name="Times New Roman" svg:font-family="&apos;Times New Roman&apos;" style:font-adornments="Normale" style:font-family-generic="roman" style:font-pitch="variable"/>
  <style:font-face style:name="Liberation Sans" svg:font-family="&apos;Liberation Sans&apos;" style:font-family-generic="swiss" style:font-pitch="variable"/>
  <style:font-face style:name="FreeSans" svg:font-family="FreeSans" style:font-family-generic="system" style:font-pitch="variable"/>
  <style:font-face style:name="Noto Sans CJK SC Regular" svg:font-family="&apos;Noto Sans CJK SC Regular&apos;" style:font-family-generic="system" style:font-pitch="variable"/>
 </office:font-face-decls>
 <office:styles>
  <style:default-style style:family="graphic">
   <style:graphic-properties svg:stroke-color="#3465a4" draw:fill-color="#729fcf" fo:wrap-option="no-wrap" draw:shadow-offset-x="0.3cm" draw:shadow-offset-y="0.3cm" draw:start-line-spacing-horizontal="0.283cm" draw:start-line-spacing-vertical="0.283cm" draw:end-line-spacing-horizontal="0.283cm" draw:end-line-spacing-vertical="0.283cm" style:flow-with-text="false"/>
   <style:paragraph-properties style:text-autospace="ideograph-alpha" style:line-break="strict" style:font-independent-line-spacing="false">
    <style:tab-stops/>
   </style:paragraph-properties>
   <style:text-properties style:use-window-font-color="true" style:font-name="Liberation Serif" fo:font-size="12pt" fo:language="en" fo:country="US" style:letter-kerning="true" style:font-name-asian="Noto Sans CJK SC Regular" style:font-size-asian="10.5pt" style:language-asian="zh" style:country-asian="CN" style:font-name-complex="FreeSans" style:font-size-complex="12pt" style:language-complex="hi" style:country-complex="IN"/>
  </style:default-style>
  <style:default-style style:family="paragraph">
   <style:paragraph-properties fo:orphans="2" fo:widows="2" fo:hyphenation-ladder-count="no-limit" style:text-autospace="ideograph-alpha" style:punctuation-wrap="hanging" style:line-break="strict" style:tab-stop-distance="1.251cm" style:writing-mode="page"/>
   <style:text-properties style:use-window-font-color="true" style:font-name="Liberation Serif" fo:font-size="12pt" fo:language="en" fo:country="US" style:letter-kerning="true" style:font-name-asian="Noto Sans CJK SC Regular" style:font-size-asian="10.5pt" style:language-asian="zh" style:country-asian="CN" style:font-name-complex="FreeSans" style:font-size-complex="12pt" style:language-complex="hi" style:country-complex="IN" fo:hyphenate="false" fo:hyphenation-remain-char-count="2" fo:hyphenation-push-char-count="2" loext:hyphenation-no-caps="false"/>
  </style:default-style>
  <style:default-style style:family="table">
   <style:table-properties table:border-model="collapsing"/>
  </style:default-style>
  <style:default-style style:family="table-row">
   <style:table-row-properties fo:keep-together="auto"/>
  </style:default-style>
  <style:style style:name="Standard" style:family="paragraph" style:class="text">
   <style:paragraph-properties fo:line-height="${e.textFont.spacing}" style:page-number="auto"/>
   <style:text-properties style:font-name="${e.textFont.family}" fo:font-family="&apos;${e.textFont.family}&apos;" style:font-style-name="Normale" style:font-family-generic="roman" style:font-pitch="variable" fo:language="zxx" fo:country="none" fo:font-size="${e.textFont.size}" />
  </style:style>
  <style:style style:name="Heading" style:family="paragraph" style:parent-style-name="Standard" style:next-style-name="Text_20_body" style:class="text">
   <style:text-properties style:font-name="Liberation Sans" fo:font-family="&apos;Liberation Sans&apos;" style:font-family-generic="swiss" style:font-pitch="variable" fo:font-size="14pt" style:font-name-asian="Noto Sans CJK SC Regular" style:font-family-asian="&apos;Noto Sans CJK SC Regular&apos;" style:font-family-generic-asian="system" style:font-pitch-asian="variable" style:font-size-asian="14pt" style:font-name-complex="FreeSans" style:font-family-complex="FreeSans" style:font-family-generic-complex="system" style:font-pitch-complex="variable" style:font-size-complex="14pt"/>
  </style:style>
  <style:style style:name="Heading_3" style:family="paragraph" style:display-name="Heading 3" style:parent-style-name="Heading" style:next-style-name="Standard" style:default-outline-level="3" style:class="text">
    <style:paragraph-properties fo:text-align="center" style:justify-single-word="false"/>
    <style:text-properties fo:font-weight="bold" style:font-weight-asian="bold" style:font-weight-complex="bold"/>
    <style:paragraph-properties fo:line-height="${e.titleFont.spacing}" style:page-number="auto"/>
    <style:text-properties style:font-name="${e.titleFont.family}" fo:font-family="&apos;${e.titleFont.family}&apos;" style:font-style-name="Normale" style:font-family-generic="roman" fo:font-size="${e.titleFont.size}" style:font-pitch="variable" fo:language="zxx" fo:country="none"/>
  </style:style>
  <style:style style:name="Text_20_body" style:display-name="Text body" style:family="paragraph" style:parent-style-name="Standard" style:class="text">
   <style:paragraph-properties fo:margin-top="0cm" fo:margin-bottom="0.247cm" loext:contextual-spacing="false" fo:line-height="120%"/>
  </style:style>
  <style:style style:name="List" style:family="paragraph" style:parent-style-name="Text_20_body" style:class="list">
   <style:text-properties style:font-size-asian="12pt" style:font-name-complex="FreeSans1" style:font-family-complex="FreeSans" style:font-family-generic-complex="swiss"/>
  </style:style>
  <style:style style:name="Caption" style:family="paragraph" style:parent-style-name="Standard" style:class="extra">
   <style:paragraph-properties fo:margin-top="0.212cm" fo:margin-bottom="0.212cm" loext:contextual-spacing="false" text:number-lines="false" text:line-number="0"/>
   <style:text-properties fo:font-size="12pt" fo:font-style="italic" style:font-size-asian="12pt" style:font-style-asian="italic" style:font-name-complex="FreeSans1" style:font-family-complex="FreeSans" style:font-family-generic-complex="swiss" style:font-size-complex="12pt" style:font-style-complex="italic"/>
  </style:style>
  <style:style style:name="Index" style:family="paragraph" style:parent-style-name="Standard" style:class="index">
   <style:paragraph-properties text:number-lines="false" text:line-number="0"/>
   <style:text-properties style:font-size-asian="12pt" style:font-name-complex="FreeSans1" style:font-family-complex="FreeSans" style:font-family-generic-complex="swiss"/>
  </style:style>
  <style:style style:name="Internet_20_link" style:display-name="Internet link" style:family="text">
   <style:text-properties fo:color="#000080" fo:language="zxx" fo:country="none" style:language-asian="zxx" style:country-asian="none" style:language-complex="zxx" style:country-complex="none"/>
  </style:style>
  <style:style style:name="Visited_20_Internet_20_Link" style:display-name="Visited Internet Link" style:family="text">
   <style:text-properties fo:color="#800000" fo:language="zxx" fo:country="none" style:language-asian="zxx" style:country-asian="none" style:language-complex="zxx" style:country-complex="none"/>
  </style:style>
  <text:outline-style style:name="Outline">
   <text:outline-level-style text:level="1" style:num-format="">
    <style:list-level-properties text:list-level-position-and-space-mode="label-alignment">
     <style:list-level-label-alignment text:label-followed-by="listtab"/>
    </style:list-level-properties>
   </text:outline-level-style>
   <text:outline-level-style text:level="2" style:num-format="">
    <style:list-level-properties text:list-level-position-and-space-mode="label-alignment">
     <style:list-level-label-alignment text:label-followed-by="listtab"/>
    </style:list-level-properties>
   </text:outline-level-style>
   <text:outline-level-style text:level="3" style:num-format="">
    <style:list-level-properties text:list-level-position-and-space-mode="label-alignment">
     <style:list-level-label-alignment text:label-followed-by="listtab"/>
    </style:list-level-properties>
   </text:outline-level-style>
   <text:outline-level-style text:level="4" style:num-format="">
    <style:list-level-properties text:list-level-position-and-space-mode="label-alignment">
     <style:list-level-label-alignment text:label-followed-by="listtab"/>
    </style:list-level-properties>
   </text:outline-level-style>
   <text:outline-level-style text:level="5" style:num-format="">
    <style:list-level-properties text:list-level-position-and-space-mode="label-alignment">
     <style:list-level-label-alignment text:label-followed-by="listtab"/>
    </style:list-level-properties>
   </text:outline-level-style>
   <text:outline-level-style text:level="6" style:num-format="">
    <style:list-level-properties text:list-level-position-and-space-mode="label-alignment">
     <style:list-level-label-alignment text:label-followed-by="listtab"/>
    </style:list-level-properties>
   </text:outline-level-style>
   <text:outline-level-style text:level="7" style:num-format="">
    <style:list-level-properties text:list-level-position-and-space-mode="label-alignment">
     <style:list-level-label-alignment text:label-followed-by="listtab"/>
    </style:list-level-properties>
   </text:outline-level-style>
   <text:outline-level-style text:level="8" style:num-format="">
    <style:list-level-properties text:list-level-position-and-space-mode="label-alignment">
     <style:list-level-label-alignment text:label-followed-by="listtab"/>
    </style:list-level-properties>
   </text:outline-level-style>
   <text:outline-level-style text:level="9" style:num-format="">
    <style:list-level-properties text:list-level-position-and-space-mode="label-alignment">
     <style:list-level-label-alignment text:label-followed-by="listtab"/>
    </style:list-level-properties>
   </text:outline-level-style>
   <text:outline-level-style text:level="10" style:num-format="">
    <style:list-level-properties text:list-level-position-and-space-mode="label-alignment">
     <style:list-level-label-alignment text:label-followed-by="listtab"/>
    </style:list-level-properties>
   </text:outline-level-style>
  </text:outline-style>
  <text:notes-configuration text:note-class="footnote" style:num-format="1" text:start-value="0" text:footnotes-position="page" text:start-numbering-at="document"/>
  <text:notes-configuration text:note-class="endnote" style:num-format="i" text:start-value="0"/>
  <text:linenumbering-configuration text:number-lines="false" text:offset="0.499cm" style:num-format="1" text:number-position="left" text:increment="5"/>
 </office:styles>
 <office:automatic-styles>${YD}
  <style:page-layout style:name="pm1">
   <style:page-layout-properties fo:page-width="${e.page.width}cm" fo:page-height="${e.page.height}cm" style:num-format="1" style:print-orientation="portrait" fo:margin-top="${e.page.margins[0]}cm" fo:margin-bottom="${e.page.margins[2]}cm" fo:margin-left="${e.page.margins[3]}cm" fo:margin-right="${e.page.margins[1]}cm" style:writing-mode="lr-tb" style:layout-grid-color="#c0c0c0" style:layout-grid-lines="20" style:layout-grid-base-height="0.706cm" style:layout-grid-ruby-height="0.353cm" style:layout-grid-mode="none" style:layout-grid-ruby-below="false" style:layout-grid-print="false" style:layout-grid-display="false" style:footnote-max-height="0cm">
    <style:footnote-sep style:width="0.018cm" style:distance-before-sep="0.101cm" style:distance-after-sep="0.101cm" style:line-style="solid" style:adjustment="left" style:rel-width="25%" style:color="#000000"/>
   </style:page-layout-properties>
   <style:header-style/>
   <style:footer-style/>
  </style:page-layout>
 </office:automatic-styles>
 <office:master-styles>
  <style:master-page style:name="Standard" style:page-layout-name="pm1"/>
 </office:master-styles>
 <office:body>
  <office:text text:use-soft-page-breaks="true">
   <office:forms form:automatic-focus="false" form:apply-design-mode="false"/>
   <text:sequence-decls>
    <text:sequence-decl text:display-outline-level="0" text:name="Illustration"/>
    <text:sequence-decl text:display-outline-level="0" text:name="Table"/>
    <text:sequence-decl text:display-outline-level="0" text:name="Text"/>
    <text:sequence-decl text:display-outline-level="0" text:name="Drawing"/>
    <text:sequence-decl text:display-outline-level="0" text:name="Figure"/>
   </text:sequence-decls>${n}
  </office:text>
 </office:body>
</office:document>`,hk="application/vnd.oasis.opendocument.text",JD="fodt",Jv={"<p>":'<text:p text:style-name="Standard">',"</p>":"</text:p>","<b>":'<text:span text:style-name="bold">',"</b>":"</text:span>","<i>":'<text:span text:style-name="italic">',"</i>":"</text:span>","<u>":'<text:span text:style-name="underline">',"</u>":"</text:span>",'<mage-link to="':'<text:a xlink:type="simple" text:style-name="Internet_20_link" text:visited-style-name="Visited_20_Internet_20_Link" xlink:href="#',"</mage-link>":"</text:a>"},fk=["<b>","</b>","<i>","</i>","<u>","</u>"],dk=()=>({html:n=>fk.includes(n.trim().toLowerCase())?n.trim().toLowerCase():so(n),paragraph:n=>`${n}`,strong:n=>`<b>${n}</b>`,em:n=>`<i>${n}</i>`,codespan:()=>"",code:()=>"",link:()=>""}),eM=(n,e,t)=>({html:r=>fk.includes(r.trim().toLowerCase())?r.trim().toLowerCase():so(r),paragraph:r=>`<p>${r}</p>`,strong:r=>`<b>${r}</b>`,em:r=>`<i>${r}</i>`,br:()=>"</p><p>",codespan:r=>"",code:(r,i)=>"",link:(r,i,s)=>{const o=r.replace("#","").trim(),a=e.renameAnchor({key:o,book:n}),l=n.chapters.has(o)?n.chapters.get(o):null;return`<mage-link to="${a}">${ci(e.renameLink({book:n,text:s.trim(),chapter:l,title:l?l.title:null,key:o,currentChapter:t}),dk())}</mage-link>`}}),tM=(n,e)=>`<text:span text:style-name="bold"><text:bookmark-start text:name="${n}"/>${ci(e,dk())}<text:bookmark-end text:name="${n}"/></text:span>`,nM=n=>{const e=document.createElement("p");e.innerHTML=n,n=e.innerHTML;for(const t in Jv)n=n.replaceAll(t,Jv[t]);return n},rM=n=>{const e=mi(n),t=Wf(e.properties),r=t.titleStyle=="inline";let i="";for(const[o,a]of e.chapters){const{text:l}=a,c=t.renameAnchor({key:o,book:e}),u=t.renameTitle({book:e,chapter:a,key:o,title:a.title?a.title.trim():""}),h=tM(c,u),f=XO(ci(l,eM(e,t,a)).replaceAll("<br>","</p><p>").trim()||"<p></p>"),p=nM(f);r?i+=p.replace(">",">"+h+" "):i+=`<text:p text:style-name="Heading_3" text:outline-level="3">${h}</text:p>`+p,i+='<text:p text:style-name="Standard"/>'}return{encodedBook:KD(i,t).split(`
`).map(o=>o.trim()).join(""),mimetype:hk,extension:JD}},iM={encode:rM,mimetype:hk};var pk={exports:{}};/*! For license information please see index.js.LICENSE.txt */(function(n,e){(function(t,r){n.exports=r()})(globalThis,()=>(()=>{var t={9742:(o,a)=>{a.byteLength=function(y){var w=d(y),b=w[0],O=w[1];return 3*(b+O)/4-O},a.toByteArray=function(y){var w,b,O=d(y),v=O[0],_=O[1],S=new u(function(T,C,Q){return 3*(C+Q)/4-Q}(0,v,_)),R=0,N=_>0?v-4:v;for(b=0;b<N;b+=4)w=c[y.charCodeAt(b)]<<18|c[y.charCodeAt(b+1)]<<12|c[y.charCodeAt(b+2)]<<6|c[y.charCodeAt(b+3)],S[R++]=w>>16&255,S[R++]=w>>8&255,S[R++]=255&w;return _===2&&(w=c[y.charCodeAt(b)]<<2|c[y.charCodeAt(b+1)]>>4,S[R++]=255&w),_===1&&(w=c[y.charCodeAt(b)]<<10|c[y.charCodeAt(b+1)]<<4|c[y.charCodeAt(b+2)]>>2,S[R++]=w>>8&255,S[R++]=255&w),S},a.fromByteArray=function(y){for(var w,b=y.length,O=b%3,v=[],_=16383,S=0,R=b-O;S<R;S+=_)v.push(m(y,S,S+_>R?R:S+_));return O===1?(w=y[b-1],v.push(l[w>>2]+l[w<<4&63]+"==")):O===2&&(w=(y[b-2]<<8)+y[b-1],v.push(l[w>>10]+l[w>>4&63]+l[w<<2&63]+"=")),v.join("")};for(var l=[],c=[],u=typeof Uint8Array<"u"?Uint8Array:Array,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=0,p=h.length;f<p;++f)l[f]=h[f],c[h.charCodeAt(f)]=f;function d(y){var w=y.length;if(w%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var b=y.indexOf("=");return b===-1&&(b=w),[b,b===w?0:4-b%4]}function m(y,w,b){for(var O,v,_=[],S=w;S<b;S+=3)O=(y[S]<<16&16711680)+(y[S+1]<<8&65280)+(255&y[S+2]),_.push(l[(v=O)>>18&63]+l[v>>12&63]+l[v>>6&63]+l[63&v]);return _.join("")}c["-".charCodeAt(0)]=62,c["_".charCodeAt(0)]=63},8764:(o,a,l)=>{const c=l(9742),u=l(645),h=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;a.Buffer=d,a.SlowBuffer=function(A){return+A!=A&&(A=0),d.alloc(+A)},a.INSPECT_MAX_BYTES=50;const f=2147483647;function p(A){if(A>f)throw new RangeError('The value "'+A+'" is invalid for option "size"');const L=new Uint8Array(A);return Object.setPrototypeOf(L,d.prototype),L}function d(A,L,q){if(typeof A=="number"){if(typeof L=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return w(A)}return m(A,L,q)}function m(A,L,q){if(typeof A=="string")return function(ce,fe){if(typeof fe=="string"&&fe!==""||(fe="utf8"),!d.isEncoding(fe))throw new TypeError("Unknown encoding: "+fe);const Ie=0|_(ce,fe);let at=p(Ie);const vt=at.write(ce,fe);return vt!==Ie&&(at=at.slice(0,vt)),at}(A,L);if(ArrayBuffer.isView(A))return function(ce){if(we(ce,Uint8Array)){const fe=new Uint8Array(ce);return O(fe.buffer,fe.byteOffset,fe.byteLength)}return b(ce)}(A);if(A==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof A);if(we(A,ArrayBuffer)||A&&we(A.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(we(A,SharedArrayBuffer)||A&&we(A.buffer,SharedArrayBuffer)))return O(A,L,q);if(typeof A=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const te=A.valueOf&&A.valueOf();if(te!=null&&te!==A)return d.from(te,L,q);const ae=function(ce){if(d.isBuffer(ce)){const fe=0|v(ce.length),Ie=p(fe);return Ie.length===0||ce.copy(Ie,0,0,fe),Ie}return ce.length!==void 0?typeof ce.length!="number"||Ne(ce.length)?p(0):b(ce):ce.type==="Buffer"&&Array.isArray(ce.data)?b(ce.data):void 0}(A);if(ae)return ae;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof A[Symbol.toPrimitive]=="function")return d.from(A[Symbol.toPrimitive]("string"),L,q);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof A)}function y(A){if(typeof A!="number")throw new TypeError('"size" argument must be of type number');if(A<0)throw new RangeError('The value "'+A+'" is invalid for option "size"')}function w(A){return y(A),p(A<0?0:0|v(A))}function b(A){const L=A.length<0?0:0|v(A.length),q=p(L);for(let te=0;te<L;te+=1)q[te]=255&A[te];return q}function O(A,L,q){if(L<0||A.byteLength<L)throw new RangeError('"offset" is outside of buffer bounds');if(A.byteLength<L+(q||0))throw new RangeError('"length" is outside of buffer bounds');let te;return te=L===void 0&&q===void 0?new Uint8Array(A):q===void 0?new Uint8Array(A,L):new Uint8Array(A,L,q),Object.setPrototypeOf(te,d.prototype),te}function v(A){if(A>=f)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+f.toString(16)+" bytes");return 0|A}function _(A,L){if(d.isBuffer(A))return A.length;if(ArrayBuffer.isView(A)||we(A,ArrayBuffer))return A.byteLength;if(typeof A!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof A);const q=A.length,te=arguments.length>2&&arguments[2]===!0;if(!te&&q===0)return 0;let ae=!1;for(;;)switch(L){case"ascii":case"latin1":case"binary":return q;case"utf8":case"utf-8":return ye(A).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*q;case"hex":return q>>>1;case"base64":return Re(A).length;default:if(ae)return te?-1:ye(A).length;L=(""+L).toLowerCase(),ae=!0}}function S(A,L,q){let te=!1;if((L===void 0||L<0)&&(L=0),L>this.length||((q===void 0||q>this.length)&&(q=this.length),q<=0)||(q>>>=0)<=(L>>>=0))return"";for(A||(A="utf8");;)switch(A){case"hex":return pe(this,L,q);case"utf8":case"utf-8":return ne(this,L,q);case"ascii":return le(this,L,q);case"latin1":case"binary":return oe(this,L,q);case"base64":return j(this,L,q);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,L,q);default:if(te)throw new TypeError("Unknown encoding: "+A);A=(A+"").toLowerCase(),te=!0}}function R(A,L,q){const te=A[L];A[L]=A[q],A[q]=te}function N(A,L,q,te,ae){if(A.length===0)return-1;if(typeof q=="string"?(te=q,q=0):q>2147483647?q=2147483647:q<-2147483648&&(q=-2147483648),Ne(q=+q)&&(q=ae?0:A.length-1),q<0&&(q=A.length+q),q>=A.length){if(ae)return-1;q=A.length-1}else if(q<0){if(!ae)return-1;q=0}if(typeof L=="string"&&(L=d.from(L,te)),d.isBuffer(L))return L.length===0?-1:T(A,L,q,te,ae);if(typeof L=="number")return L&=255,typeof Uint8Array.prototype.indexOf=="function"?ae?Uint8Array.prototype.indexOf.call(A,L,q):Uint8Array.prototype.lastIndexOf.call(A,L,q):T(A,[L],q,te,ae);throw new TypeError("val must be string, number or Buffer")}function T(A,L,q,te,ae){let ce,fe=1,Ie=A.length,at=L.length;if(te!==void 0&&((te=String(te).toLowerCase())==="ucs2"||te==="ucs-2"||te==="utf16le"||te==="utf-16le")){if(A.length<2||L.length<2)return-1;fe=2,Ie/=2,at/=2,q/=2}function vt(Ze,Et){return fe===1?Ze[Et]:Ze.readUInt16BE(Et*fe)}if(ae){let Ze=-1;for(ce=q;ce<Ie;ce++)if(vt(A,ce)===vt(L,Ze===-1?0:ce-Ze)){if(Ze===-1&&(Ze=ce),ce-Ze+1===at)return Ze*fe}else Ze!==-1&&(ce-=ce-Ze),Ze=-1}else for(q+at>Ie&&(q=Ie-at),ce=q;ce>=0;ce--){let Ze=!0;for(let Et=0;Et<at;Et++)if(vt(A,ce+Et)!==vt(L,Et)){Ze=!1;break}if(Ze)return ce}return-1}function C(A,L,q,te){q=Number(q)||0;const ae=A.length-q;te?(te=Number(te))>ae&&(te=ae):te=ae;const ce=L.length;let fe;for(te>ce/2&&(te=ce/2),fe=0;fe<te;++fe){const Ie=parseInt(L.substr(2*fe,2),16);if(Ne(Ie))return fe;A[q+fe]=Ie}return fe}function Q(A,L,q,te){return ge(ye(L,A.length-q),A,q,te)}function I(A,L,q,te){return ge(function(ae){const ce=[];for(let fe=0;fe<ae.length;++fe)ce.push(255&ae.charCodeAt(fe));return ce}(L),A,q,te)}function B(A,L,q,te){return ge(Re(L),A,q,te)}function k(A,L,q,te){return ge(function(ae,ce){let fe,Ie,at;const vt=[];for(let Ze=0;Ze<ae.length&&!((ce-=2)<0);++Ze)fe=ae.charCodeAt(Ze),Ie=fe>>8,at=fe%256,vt.push(at),vt.push(Ie);return vt}(L,A.length-q),A,q,te)}function j(A,L,q){return L===0&&q===A.length?c.fromByteArray(A):c.fromByteArray(A.slice(L,q))}function ne(A,L,q){q=Math.min(A.length,q);const te=[];let ae=L;for(;ae<q;){const ce=A[ae];let fe=null,Ie=ce>239?4:ce>223?3:ce>191?2:1;if(ae+Ie<=q){let at,vt,Ze,Et;switch(Ie){case 1:ce<128&&(fe=ce);break;case 2:at=A[ae+1],(192&at)==128&&(Et=(31&ce)<<6|63&at,Et>127&&(fe=Et));break;case 3:at=A[ae+1],vt=A[ae+2],(192&at)==128&&(192&vt)==128&&(Et=(15&ce)<<12|(63&at)<<6|63&vt,Et>2047&&(Et<55296||Et>57343)&&(fe=Et));break;case 4:at=A[ae+1],vt=A[ae+2],Ze=A[ae+3],(192&at)==128&&(192&vt)==128&&(192&Ze)==128&&(Et=(15&ce)<<18|(63&at)<<12|(63&vt)<<6|63&Ze,Et>65535&&Et<1114112&&(fe=Et))}}fe===null?(fe=65533,Ie=1):fe>65535&&(fe-=65536,te.push(fe>>>10&1023|55296),fe=56320|1023&fe),te.push(fe),ae+=Ie}return function(ce){const fe=ce.length;if(fe<=Z)return String.fromCharCode.apply(String,ce);let Ie="",at=0;for(;at<fe;)Ie+=String.fromCharCode.apply(String,ce.slice(at,at+=Z));return Ie}(te)}a.kMaxLength=f,d.TYPED_ARRAY_SUPPORT=function(){try{const A=new Uint8Array(1),L={foo:function(){return 42}};return Object.setPrototypeOf(L,Uint8Array.prototype),Object.setPrototypeOf(A,L),A.foo()===42}catch{return!1}}(),d.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(d.prototype,"parent",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.buffer}}),Object.defineProperty(d.prototype,"offset",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.byteOffset}}),d.poolSize=8192,d.from=function(A,L,q){return m(A,L,q)},Object.setPrototypeOf(d.prototype,Uint8Array.prototype),Object.setPrototypeOf(d,Uint8Array),d.alloc=function(A,L,q){return function(te,ae,ce){return y(te),te<=0?p(te):ae!==void 0?typeof ce=="string"?p(te).fill(ae,ce):p(te).fill(ae):p(te)}(A,L,q)},d.allocUnsafe=function(A){return w(A)},d.allocUnsafeSlow=function(A){return w(A)},d.isBuffer=function(A){return A!=null&&A._isBuffer===!0&&A!==d.prototype},d.compare=function(A,L){if(we(A,Uint8Array)&&(A=d.from(A,A.offset,A.byteLength)),we(L,Uint8Array)&&(L=d.from(L,L.offset,L.byteLength)),!d.isBuffer(A)||!d.isBuffer(L))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(A===L)return 0;let q=A.length,te=L.length;for(let ae=0,ce=Math.min(q,te);ae<ce;++ae)if(A[ae]!==L[ae]){q=A[ae],te=L[ae];break}return q<te?-1:te<q?1:0},d.isEncoding=function(A){switch(String(A).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(A,L){if(!Array.isArray(A))throw new TypeError('"list" argument must be an Array of Buffers');if(A.length===0)return d.alloc(0);let q;if(L===void 0)for(L=0,q=0;q<A.length;++q)L+=A[q].length;const te=d.allocUnsafe(L);let ae=0;for(q=0;q<A.length;++q){let ce=A[q];if(we(ce,Uint8Array))ae+ce.length>te.length?(d.isBuffer(ce)||(ce=d.from(ce)),ce.copy(te,ae)):Uint8Array.prototype.set.call(te,ce,ae);else{if(!d.isBuffer(ce))throw new TypeError('"list" argument must be an Array of Buffers');ce.copy(te,ae)}ae+=ce.length}return te},d.byteLength=_,d.prototype._isBuffer=!0,d.prototype.swap16=function(){const A=this.length;if(A%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let L=0;L<A;L+=2)R(this,L,L+1);return this},d.prototype.swap32=function(){const A=this.length;if(A%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let L=0;L<A;L+=4)R(this,L,L+3),R(this,L+1,L+2);return this},d.prototype.swap64=function(){const A=this.length;if(A%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let L=0;L<A;L+=8)R(this,L,L+7),R(this,L+1,L+6),R(this,L+2,L+5),R(this,L+3,L+4);return this},d.prototype.toString=function(){const A=this.length;return A===0?"":arguments.length===0?ne(this,0,A):S.apply(this,arguments)},d.prototype.toLocaleString=d.prototype.toString,d.prototype.equals=function(A){if(!d.isBuffer(A))throw new TypeError("Argument must be a Buffer");return this===A||d.compare(this,A)===0},d.prototype.inspect=function(){let A="";const L=a.INSPECT_MAX_BYTES;return A=this.toString("hex",0,L).replace(/(.{2})/g,"$1 ").trim(),this.length>L&&(A+=" ... "),"<Buffer "+A+">"},h&&(d.prototype[h]=d.prototype.inspect),d.prototype.compare=function(A,L,q,te,ae){if(we(A,Uint8Array)&&(A=d.from(A,A.offset,A.byteLength)),!d.isBuffer(A))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof A);if(L===void 0&&(L=0),q===void 0&&(q=A?A.length:0),te===void 0&&(te=0),ae===void 0&&(ae=this.length),L<0||q>A.length||te<0||ae>this.length)throw new RangeError("out of range index");if(te>=ae&&L>=q)return 0;if(te>=ae)return-1;if(L>=q)return 1;if(this===A)return 0;let ce=(ae>>>=0)-(te>>>=0),fe=(q>>>=0)-(L>>>=0);const Ie=Math.min(ce,fe),at=this.slice(te,ae),vt=A.slice(L,q);for(let Ze=0;Ze<Ie;++Ze)if(at[Ze]!==vt[Ze]){ce=at[Ze],fe=vt[Ze];break}return ce<fe?-1:fe<ce?1:0},d.prototype.includes=function(A,L,q){return this.indexOf(A,L,q)!==-1},d.prototype.indexOf=function(A,L,q){return N(this,A,L,q,!0)},d.prototype.lastIndexOf=function(A,L,q){return N(this,A,L,q,!1)},d.prototype.write=function(A,L,q,te){if(L===void 0)te="utf8",q=this.length,L=0;else if(q===void 0&&typeof L=="string")te=L,q=this.length,L=0;else{if(!isFinite(L))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");L>>>=0,isFinite(q)?(q>>>=0,te===void 0&&(te="utf8")):(te=q,q=void 0)}const ae=this.length-L;if((q===void 0||q>ae)&&(q=ae),A.length>0&&(q<0||L<0)||L>this.length)throw new RangeError("Attempt to write outside buffer bounds");te||(te="utf8");let ce=!1;for(;;)switch(te){case"hex":return C(this,A,L,q);case"utf8":case"utf-8":return Q(this,A,L,q);case"ascii":case"latin1":case"binary":return I(this,A,L,q);case"base64":return B(this,A,L,q);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,A,L,q);default:if(ce)throw new TypeError("Unknown encoding: "+te);te=(""+te).toLowerCase(),ce=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const Z=4096;function le(A,L,q){let te="";q=Math.min(A.length,q);for(let ae=L;ae<q;++ae)te+=String.fromCharCode(127&A[ae]);return te}function oe(A,L,q){let te="";q=Math.min(A.length,q);for(let ae=L;ae<q;++ae)te+=String.fromCharCode(A[ae]);return te}function pe(A,L,q){const te=A.length;(!L||L<0)&&(L=0),(!q||q<0||q>te)&&(q=te);let ae="";for(let ce=L;ce<q;++ce)ae+=$e[A[ce]];return ae}function P(A,L,q){const te=A.slice(L,q);let ae="";for(let ce=0;ce<te.length-1;ce+=2)ae+=String.fromCharCode(te[ce]+256*te[ce+1]);return ae}function D(A,L,q){if(A%1!=0||A<0)throw new RangeError("offset is not uint");if(A+L>q)throw new RangeError("Trying to access beyond buffer length")}function H(A,L,q,te,ae,ce){if(!d.isBuffer(A))throw new TypeError('"buffer" argument must be a Buffer instance');if(L>ae||L<ce)throw new RangeError('"value" argument is out of bounds');if(q+te>A.length)throw new RangeError("Index out of range")}function F(A,L,q,te,ae){E(L,te,ae,A,q,7);let ce=Number(L&BigInt(4294967295));A[q++]=ce,ce>>=8,A[q++]=ce,ce>>=8,A[q++]=ce,ce>>=8,A[q++]=ce;let fe=Number(L>>BigInt(32)&BigInt(4294967295));return A[q++]=fe,fe>>=8,A[q++]=fe,fe>>=8,A[q++]=fe,fe>>=8,A[q++]=fe,q}function se(A,L,q,te,ae){E(L,te,ae,A,q,7);let ce=Number(L&BigInt(4294967295));A[q+7]=ce,ce>>=8,A[q+6]=ce,ce>>=8,A[q+5]=ce,ce>>=8,A[q+4]=ce;let fe=Number(L>>BigInt(32)&BigInt(4294967295));return A[q+3]=fe,fe>>=8,A[q+2]=fe,fe>>=8,A[q+1]=fe,fe>>=8,A[q]=fe,q+8}function W(A,L,q,te,ae,ce){if(q+te>A.length)throw new RangeError("Index out of range");if(q<0)throw new RangeError("Index out of range")}function Y(A,L,q,te,ae){return L=+L,q>>>=0,ae||W(A,0,q,4),u.write(A,L,q,te,23,4),q+4}function ee(A,L,q,te,ae){return L=+L,q>>>=0,ae||W(A,0,q,8),u.write(A,L,q,te,52,8),q+8}d.prototype.slice=function(A,L){const q=this.length;(A=~~A)<0?(A+=q)<0&&(A=0):A>q&&(A=q),(L=L===void 0?q:~~L)<0?(L+=q)<0&&(L=0):L>q&&(L=q),L<A&&(L=A);const te=this.subarray(A,L);return Object.setPrototypeOf(te,d.prototype),te},d.prototype.readUintLE=d.prototype.readUIntLE=function(A,L,q){A>>>=0,L>>>=0,q||D(A,L,this.length);let te=this[A],ae=1,ce=0;for(;++ce<L&&(ae*=256);)te+=this[A+ce]*ae;return te},d.prototype.readUintBE=d.prototype.readUIntBE=function(A,L,q){A>>>=0,L>>>=0,q||D(A,L,this.length);let te=this[A+--L],ae=1;for(;L>0&&(ae*=256);)te+=this[A+--L]*ae;return te},d.prototype.readUint8=d.prototype.readUInt8=function(A,L){return A>>>=0,L||D(A,1,this.length),this[A]},d.prototype.readUint16LE=d.prototype.readUInt16LE=function(A,L){return A>>>=0,L||D(A,2,this.length),this[A]|this[A+1]<<8},d.prototype.readUint16BE=d.prototype.readUInt16BE=function(A,L){return A>>>=0,L||D(A,2,this.length),this[A]<<8|this[A+1]},d.prototype.readUint32LE=d.prototype.readUInt32LE=function(A,L){return A>>>=0,L||D(A,4,this.length),(this[A]|this[A+1]<<8|this[A+2]<<16)+16777216*this[A+3]},d.prototype.readUint32BE=d.prototype.readUInt32BE=function(A,L){return A>>>=0,L||D(A,4,this.length),16777216*this[A]+(this[A+1]<<16|this[A+2]<<8|this[A+3])},d.prototype.readBigUInt64LE=Be(function(A){$(A>>>=0,"offset");const L=this[A],q=this[A+7];L!==void 0&&q!==void 0||X(A,this.length-8);const te=L+256*this[++A]+65536*this[++A]+this[++A]*2**24,ae=this[++A]+256*this[++A]+65536*this[++A]+q*2**24;return BigInt(te)+(BigInt(ae)<<BigInt(32))}),d.prototype.readBigUInt64BE=Be(function(A){$(A>>>=0,"offset");const L=this[A],q=this[A+7];L!==void 0&&q!==void 0||X(A,this.length-8);const te=L*2**24+65536*this[++A]+256*this[++A]+this[++A],ae=this[++A]*2**24+65536*this[++A]+256*this[++A]+q;return(BigInt(te)<<BigInt(32))+BigInt(ae)}),d.prototype.readIntLE=function(A,L,q){A>>>=0,L>>>=0,q||D(A,L,this.length);let te=this[A],ae=1,ce=0;for(;++ce<L&&(ae*=256);)te+=this[A+ce]*ae;return ae*=128,te>=ae&&(te-=Math.pow(2,8*L)),te},d.prototype.readIntBE=function(A,L,q){A>>>=0,L>>>=0,q||D(A,L,this.length);let te=L,ae=1,ce=this[A+--te];for(;te>0&&(ae*=256);)ce+=this[A+--te]*ae;return ae*=128,ce>=ae&&(ce-=Math.pow(2,8*L)),ce},d.prototype.readInt8=function(A,L){return A>>>=0,L||D(A,1,this.length),128&this[A]?-1*(255-this[A]+1):this[A]},d.prototype.readInt16LE=function(A,L){A>>>=0,L||D(A,2,this.length);const q=this[A]|this[A+1]<<8;return 32768&q?4294901760|q:q},d.prototype.readInt16BE=function(A,L){A>>>=0,L||D(A,2,this.length);const q=this[A+1]|this[A]<<8;return 32768&q?4294901760|q:q},d.prototype.readInt32LE=function(A,L){return A>>>=0,L||D(A,4,this.length),this[A]|this[A+1]<<8|this[A+2]<<16|this[A+3]<<24},d.prototype.readInt32BE=function(A,L){return A>>>=0,L||D(A,4,this.length),this[A]<<24|this[A+1]<<16|this[A+2]<<8|this[A+3]},d.prototype.readBigInt64LE=Be(function(A){$(A>>>=0,"offset");const L=this[A],q=this[A+7];L!==void 0&&q!==void 0||X(A,this.length-8);const te=this[A+4]+256*this[A+5]+65536*this[A+6]+(q<<24);return(BigInt(te)<<BigInt(32))+BigInt(L+256*this[++A]+65536*this[++A]+this[++A]*16777216)}),d.prototype.readBigInt64BE=Be(function(A){$(A>>>=0,"offset");const L=this[A],q=this[A+7];L!==void 0&&q!==void 0||X(A,this.length-8);const te=(L<<24)+65536*this[++A]+256*this[++A]+this[++A];return(BigInt(te)<<BigInt(32))+BigInt(this[++A]*16777216+65536*this[++A]+256*this[++A]+q)}),d.prototype.readFloatLE=function(A,L){return A>>>=0,L||D(A,4,this.length),u.read(this,A,!0,23,4)},d.prototype.readFloatBE=function(A,L){return A>>>=0,L||D(A,4,this.length),u.read(this,A,!1,23,4)},d.prototype.readDoubleLE=function(A,L){return A>>>=0,L||D(A,8,this.length),u.read(this,A,!0,52,8)},d.prototype.readDoubleBE=function(A,L){return A>>>=0,L||D(A,8,this.length),u.read(this,A,!1,52,8)},d.prototype.writeUintLE=d.prototype.writeUIntLE=function(A,L,q,te){A=+A,L>>>=0,q>>>=0,te||H(this,A,L,q,Math.pow(2,8*q)-1,0);let ae=1,ce=0;for(this[L]=255&A;++ce<q&&(ae*=256);)this[L+ce]=A/ae&255;return L+q},d.prototype.writeUintBE=d.prototype.writeUIntBE=function(A,L,q,te){A=+A,L>>>=0,q>>>=0,te||H(this,A,L,q,Math.pow(2,8*q)-1,0);let ae=q-1,ce=1;for(this[L+ae]=255&A;--ae>=0&&(ce*=256);)this[L+ae]=A/ce&255;return L+q},d.prototype.writeUint8=d.prototype.writeUInt8=function(A,L,q){return A=+A,L>>>=0,q||H(this,A,L,1,255,0),this[L]=255&A,L+1},d.prototype.writeUint16LE=d.prototype.writeUInt16LE=function(A,L,q){return A=+A,L>>>=0,q||H(this,A,L,2,65535,0),this[L]=255&A,this[L+1]=A>>>8,L+2},d.prototype.writeUint16BE=d.prototype.writeUInt16BE=function(A,L,q){return A=+A,L>>>=0,q||H(this,A,L,2,65535,0),this[L]=A>>>8,this[L+1]=255&A,L+2},d.prototype.writeUint32LE=d.prototype.writeUInt32LE=function(A,L,q){return A=+A,L>>>=0,q||H(this,A,L,4,4294967295,0),this[L+3]=A>>>24,this[L+2]=A>>>16,this[L+1]=A>>>8,this[L]=255&A,L+4},d.prototype.writeUint32BE=d.prototype.writeUInt32BE=function(A,L,q){return A=+A,L>>>=0,q||H(this,A,L,4,4294967295,0),this[L]=A>>>24,this[L+1]=A>>>16,this[L+2]=A>>>8,this[L+3]=255&A,L+4},d.prototype.writeBigUInt64LE=Be(function(A,L=0){return F(this,A,L,BigInt(0),BigInt("0xffffffffffffffff"))}),d.prototype.writeBigUInt64BE=Be(function(A,L=0){return se(this,A,L,BigInt(0),BigInt("0xffffffffffffffff"))}),d.prototype.writeIntLE=function(A,L,q,te){if(A=+A,L>>>=0,!te){const Ie=Math.pow(2,8*q-1);H(this,A,L,q,Ie-1,-Ie)}let ae=0,ce=1,fe=0;for(this[L]=255&A;++ae<q&&(ce*=256);)A<0&&fe===0&&this[L+ae-1]!==0&&(fe=1),this[L+ae]=(A/ce>>0)-fe&255;return L+q},d.prototype.writeIntBE=function(A,L,q,te){if(A=+A,L>>>=0,!te){const Ie=Math.pow(2,8*q-1);H(this,A,L,q,Ie-1,-Ie)}let ae=q-1,ce=1,fe=0;for(this[L+ae]=255&A;--ae>=0&&(ce*=256);)A<0&&fe===0&&this[L+ae+1]!==0&&(fe=1),this[L+ae]=(A/ce>>0)-fe&255;return L+q},d.prototype.writeInt8=function(A,L,q){return A=+A,L>>>=0,q||H(this,A,L,1,127,-128),A<0&&(A=255+A+1),this[L]=255&A,L+1},d.prototype.writeInt16LE=function(A,L,q){return A=+A,L>>>=0,q||H(this,A,L,2,32767,-32768),this[L]=255&A,this[L+1]=A>>>8,L+2},d.prototype.writeInt16BE=function(A,L,q){return A=+A,L>>>=0,q||H(this,A,L,2,32767,-32768),this[L]=A>>>8,this[L+1]=255&A,L+2},d.prototype.writeInt32LE=function(A,L,q){return A=+A,L>>>=0,q||H(this,A,L,4,2147483647,-2147483648),this[L]=255&A,this[L+1]=A>>>8,this[L+2]=A>>>16,this[L+3]=A>>>24,L+4},d.prototype.writeInt32BE=function(A,L,q){return A=+A,L>>>=0,q||H(this,A,L,4,2147483647,-2147483648),A<0&&(A=4294967295+A+1),this[L]=A>>>24,this[L+1]=A>>>16,this[L+2]=A>>>8,this[L+3]=255&A,L+4},d.prototype.writeBigInt64LE=Be(function(A,L=0){return F(this,A,L,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),d.prototype.writeBigInt64BE=Be(function(A,L=0){return se(this,A,L,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),d.prototype.writeFloatLE=function(A,L,q){return Y(this,A,L,!0,q)},d.prototype.writeFloatBE=function(A,L,q){return Y(this,A,L,!1,q)},d.prototype.writeDoubleLE=function(A,L,q){return ee(this,A,L,!0,q)},d.prototype.writeDoubleBE=function(A,L,q){return ee(this,A,L,!1,q)},d.prototype.copy=function(A,L,q,te){if(!d.isBuffer(A))throw new TypeError("argument should be a Buffer");if(q||(q=0),te||te===0||(te=this.length),L>=A.length&&(L=A.length),L||(L=0),te>0&&te<q&&(te=q),te===q||A.length===0||this.length===0)return 0;if(L<0)throw new RangeError("targetStart out of bounds");if(q<0||q>=this.length)throw new RangeError("Index out of range");if(te<0)throw new RangeError("sourceEnd out of bounds");te>this.length&&(te=this.length),A.length-L<te-q&&(te=A.length-L+q);const ae=te-q;return this===A&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(L,q,te):Uint8Array.prototype.set.call(A,this.subarray(q,te),L),ae},d.prototype.fill=function(A,L,q,te){if(typeof A=="string"){if(typeof L=="string"?(te=L,L=0,q=this.length):typeof q=="string"&&(te=q,q=this.length),te!==void 0&&typeof te!="string")throw new TypeError("encoding must be a string");if(typeof te=="string"&&!d.isEncoding(te))throw new TypeError("Unknown encoding: "+te);if(A.length===1){const ce=A.charCodeAt(0);(te==="utf8"&&ce<128||te==="latin1")&&(A=ce)}}else typeof A=="number"?A&=255:typeof A=="boolean"&&(A=Number(A));if(L<0||this.length<L||this.length<q)throw new RangeError("Out of range index");if(q<=L)return this;let ae;if(L>>>=0,q=q===void 0?this.length:q>>>0,A||(A=0),typeof A=="number")for(ae=L;ae<q;++ae)this[ae]=A;else{const ce=d.isBuffer(A)?A:d.from(A,te),fe=ce.length;if(fe===0)throw new TypeError('The value "'+A+'" is invalid for argument "value"');for(ae=0;ae<q-L;++ae)this[ae+L]=ce[ae%fe]}return this};const re={};function ie(A,L,q){re[A]=class extends q{constructor(){super(),Object.defineProperty(this,"message",{value:L.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${A}]`,this.stack,delete this.name}get code(){return A}set code(te){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:te,writable:!0})}toString(){return`${this.name} [${A}]: ${this.message}`}}}function V(A){let L="",q=A.length;const te=A[0]==="-"?1:0;for(;q>=te+4;q-=3)L=`_${A.slice(q-3,q)}${L}`;return`${A.slice(0,q)}${L}`}function E(A,L,q,te,ae,ce){if(A>q||A<L){const fe=typeof L=="bigint"?"n":"";let Ie;throw Ie=ce>3?L===0||L===BigInt(0)?`>= 0${fe} and < 2${fe} ** ${8*(ce+1)}${fe}`:`>= -(2${fe} ** ${8*(ce+1)-1}${fe}) and < 2 ** ${8*(ce+1)-1}${fe}`:`>= ${L}${fe} and <= ${q}${fe}`,new re.ERR_OUT_OF_RANGE("value",Ie,A)}(function(fe,Ie,at){$(Ie,"offset"),fe[Ie]!==void 0&&fe[Ie+at]!==void 0||X(Ie,fe.length-(at+1))})(te,ae,ce)}function $(A,L){if(typeof A!="number")throw new re.ERR_INVALID_ARG_TYPE(L,"number",A)}function X(A,L,q){throw Math.floor(A)!==A?($(A,q),new re.ERR_OUT_OF_RANGE(q||"offset","an integer",A)):L<0?new re.ERR_BUFFER_OUT_OF_BOUNDS:new re.ERR_OUT_OF_RANGE(q||"offset",`>= ${q?1:0} and <= ${L}`,A)}ie("ERR_BUFFER_OUT_OF_BOUNDS",function(A){return A?`${A} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ie("ERR_INVALID_ARG_TYPE",function(A,L){return`The "${A}" argument must be of type number. Received type ${typeof L}`},TypeError),ie("ERR_OUT_OF_RANGE",function(A,L,q){let te=`The value of "${A}" is out of range.`,ae=q;return Number.isInteger(q)&&Math.abs(q)>4294967296?ae=V(String(q)):typeof q=="bigint"&&(ae=String(q),(q>BigInt(2)**BigInt(32)||q<-(BigInt(2)**BigInt(32)))&&(ae=V(ae)),ae+="n"),te+=` It must be ${L}. Received ${ae}`,te},RangeError);const ue=/[^+/0-9A-Za-z-_]/g;function ye(A,L){let q;L=L||1/0;const te=A.length;let ae=null;const ce=[];for(let fe=0;fe<te;++fe){if(q=A.charCodeAt(fe),q>55295&&q<57344){if(!ae){if(q>56319){(L-=3)>-1&&ce.push(239,191,189);continue}if(fe+1===te){(L-=3)>-1&&ce.push(239,191,189);continue}ae=q;continue}if(q<56320){(L-=3)>-1&&ce.push(239,191,189),ae=q;continue}q=65536+(ae-55296<<10|q-56320)}else ae&&(L-=3)>-1&&ce.push(239,191,189);if(ae=null,q<128){if((L-=1)<0)break;ce.push(q)}else if(q<2048){if((L-=2)<0)break;ce.push(q>>6|192,63&q|128)}else if(q<65536){if((L-=3)<0)break;ce.push(q>>12|224,q>>6&63|128,63&q|128)}else{if(!(q<1114112))throw new Error("Invalid code point");if((L-=4)<0)break;ce.push(q>>18|240,q>>12&63|128,q>>6&63|128,63&q|128)}}return ce}function Re(A){return c.toByteArray(function(L){if((L=(L=L.split("=")[0]).trim().replace(ue,"")).length<2)return"";for(;L.length%4!=0;)L+="=";return L}(A))}function ge(A,L,q,te){let ae;for(ae=0;ae<te&&!(ae+q>=L.length||ae>=A.length);++ae)L[ae+q]=A[ae];return ae}function we(A,L){return A instanceof L||A!=null&&A.constructor!=null&&A.constructor.name!=null&&A.constructor.name===L.name}function Ne(A){return A!=A}const $e=function(){const A="0123456789abcdef",L=new Array(256);for(let q=0;q<16;++q){const te=16*q;for(let ae=0;ae<16;++ae)L[te+ae]=A[q]+A[ae]}return L}();function Be(A){return typeof BigInt>"u"?Ce:A}function Ce(){throw new Error("BigInt not supported")}},7187:o=>{var a,l=typeof Reflect=="object"?Reflect:null,c=l&&typeof l.apply=="function"?l.apply:function(S,R,N){return Function.prototype.apply.call(S,R,N)};a=l&&typeof l.ownKeys=="function"?l.ownKeys:Object.getOwnPropertySymbols?function(S){return Object.getOwnPropertyNames(S).concat(Object.getOwnPropertySymbols(S))}:function(S){return Object.getOwnPropertyNames(S)};var u=Number.isNaN||function(S){return S!=S};function h(){h.init.call(this)}o.exports=h,o.exports.once=function(S,R){return new Promise(function(N,T){function C(I){S.removeListener(R,Q),T(I)}function Q(){typeof S.removeListener=="function"&&S.removeListener("error",C),N([].slice.call(arguments))}_(S,R,Q,{once:!0}),R!=="error"&&function(I,B,k){typeof I.on=="function"&&_(I,"error",B,{once:!0})}(S,C)})},h.EventEmitter=h,h.prototype._events=void 0,h.prototype._eventsCount=0,h.prototype._maxListeners=void 0;var f=10;function p(S){if(typeof S!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof S)}function d(S){return S._maxListeners===void 0?h.defaultMaxListeners:S._maxListeners}function m(S,R,N,T){var C,Q,I,B;if(p(N),(Q=S._events)===void 0?(Q=S._events=Object.create(null),S._eventsCount=0):(Q.newListener!==void 0&&(S.emit("newListener",R,N.listener?N.listener:N),Q=S._events),I=Q[R]),I===void 0)I=Q[R]=N,++S._eventsCount;else if(typeof I=="function"?I=Q[R]=T?[N,I]:[I,N]:T?I.unshift(N):I.push(N),(C=d(S))>0&&I.length>C&&!I.warned){I.warned=!0;var k=new Error("Possible EventEmitter memory leak detected. "+I.length+" "+String(R)+" listeners added. Use emitter.setMaxListeners() to increase limit");k.name="MaxListenersExceededWarning",k.emitter=S,k.type=R,k.count=I.length,B=k,console&&console.warn&&console.warn(B)}return S}function y(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function w(S,R,N){var T={fired:!1,wrapFn:void 0,target:S,type:R,listener:N},C=y.bind(T);return C.listener=N,T.wrapFn=C,C}function b(S,R,N){var T=S._events;if(T===void 0)return[];var C=T[R];return C===void 0?[]:typeof C=="function"?N?[C.listener||C]:[C]:N?function(Q){for(var I=new Array(Q.length),B=0;B<I.length;++B)I[B]=Q[B].listener||Q[B];return I}(C):v(C,C.length)}function O(S){var R=this._events;if(R!==void 0){var N=R[S];if(typeof N=="function")return 1;if(N!==void 0)return N.length}return 0}function v(S,R){for(var N=new Array(R),T=0;T<R;++T)N[T]=S[T];return N}function _(S,R,N,T){if(typeof S.on=="function")T.once?S.once(R,N):S.on(R,N);else{if(typeof S.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof S);S.addEventListener(R,function C(Q){T.once&&S.removeEventListener(R,C),N(Q)})}}Object.defineProperty(h,"defaultMaxListeners",{enumerable:!0,get:function(){return f},set:function(S){if(typeof S!="number"||S<0||u(S))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+S+".");f=S}}),h.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},h.prototype.setMaxListeners=function(S){if(typeof S!="number"||S<0||u(S))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+S+".");return this._maxListeners=S,this},h.prototype.getMaxListeners=function(){return d(this)},h.prototype.emit=function(S){for(var R=[],N=1;N<arguments.length;N++)R.push(arguments[N]);var T=S==="error",C=this._events;if(C!==void 0)T=T&&C.error===void 0;else if(!T)return!1;if(T){var Q;if(R.length>0&&(Q=R[0]),Q instanceof Error)throw Q;var I=new Error("Unhandled error."+(Q?" ("+Q.message+")":""));throw I.context=Q,I}var B=C[S];if(B===void 0)return!1;if(typeof B=="function")c(B,this,R);else{var k=B.length,j=v(B,k);for(N=0;N<k;++N)c(j[N],this,R)}return!0},h.prototype.addListener=function(S,R){return m(this,S,R,!1)},h.prototype.on=h.prototype.addListener,h.prototype.prependListener=function(S,R){return m(this,S,R,!0)},h.prototype.once=function(S,R){return p(R),this.on(S,w(this,S,R)),this},h.prototype.prependOnceListener=function(S,R){return p(R),this.prependListener(S,w(this,S,R)),this},h.prototype.removeListener=function(S,R){var N,T,C,Q,I;if(p(R),(T=this._events)===void 0)return this;if((N=T[S])===void 0)return this;if(N===R||N.listener===R)--this._eventsCount==0?this._events=Object.create(null):(delete T[S],T.removeListener&&this.emit("removeListener",S,N.listener||R));else if(typeof N!="function"){for(C=-1,Q=N.length-1;Q>=0;Q--)if(N[Q]===R||N[Q].listener===R){I=N[Q].listener,C=Q;break}if(C<0)return this;C===0?N.shift():function(B,k){for(;k+1<B.length;k++)B[k]=B[k+1];B.pop()}(N,C),N.length===1&&(T[S]=N[0]),T.removeListener!==void 0&&this.emit("removeListener",S,I||R)}return this},h.prototype.off=h.prototype.removeListener,h.prototype.removeAllListeners=function(S){var R,N,T;if((N=this._events)===void 0)return this;if(N.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):N[S]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete N[S]),this;if(arguments.length===0){var C,Q=Object.keys(N);for(T=0;T<Q.length;++T)(C=Q[T])!=="removeListener"&&this.removeAllListeners(C);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(R=N[S])=="function")this.removeListener(S,R);else if(R!==void 0)for(T=R.length-1;T>=0;T--)this.removeListener(S,R[T]);return this},h.prototype.listeners=function(S){return b(this,S,!0)},h.prototype.rawListeners=function(S){return b(this,S,!1)},h.listenerCount=function(S,R){return typeof S.listenerCount=="function"?S.listenerCount(R):O.call(S,R)},h.prototype.listenerCount=O,h.prototype.eventNames=function(){return this._eventsCount>0?a(this._events):[]}},645:(o,a)=>{a.read=function(l,c,u,h,f){var p,d,m=8*f-h-1,y=(1<<m)-1,w=y>>1,b=-7,O=u?f-1:0,v=u?-1:1,_=l[c+O];for(O+=v,p=_&(1<<-b)-1,_>>=-b,b+=m;b>0;p=256*p+l[c+O],O+=v,b-=8);for(d=p&(1<<-b)-1,p>>=-b,b+=h;b>0;d=256*d+l[c+O],O+=v,b-=8);if(p===0)p=1-w;else{if(p===y)return d?NaN:1/0*(_?-1:1);d+=Math.pow(2,h),p-=w}return(_?-1:1)*d*Math.pow(2,p-h)},a.write=function(l,c,u,h,f,p){var d,m,y,w=8*p-f-1,b=(1<<w)-1,O=b>>1,v=f===23?Math.pow(2,-24)-Math.pow(2,-77):0,_=h?0:p-1,S=h?1:-1,R=c<0||c===0&&1/c<0?1:0;for(c=Math.abs(c),isNaN(c)||c===1/0?(m=isNaN(c)?1:0,d=b):(d=Math.floor(Math.log(c)/Math.LN2),c*(y=Math.pow(2,-d))<1&&(d--,y*=2),(c+=d+O>=1?v/y:v*Math.pow(2,1-O))*y>=2&&(d++,y/=2),d+O>=b?(m=0,d=b):d+O>=1?(m=(c*y-1)*Math.pow(2,f),d+=O):(m=c*Math.pow(2,O-1)*Math.pow(2,f),d=0));f>=8;l[u+_]=255&m,_+=S,m/=256,f-=8);for(d=d<<f|m,w+=f;w>0;l[u+_]=255&d,_+=S,d/=256,w-=8);l[u+_-S]|=128*R}},5705:(o,a,l)=>{var c,u,h=l.g.MutationObserver||l.g.WebKitMutationObserver;if(h){var f=0,p=new h(w),d=l.g.document.createTextNode("");p.observe(d,{characterData:!0}),c=function(){d.data=f=++f%2}}else if(l.g.setImmediate||l.g.MessageChannel===void 0)c="document"in l.g&&"onreadystatechange"in l.g.document.createElement("script")?function(){var b=l.g.document.createElement("script");b.onreadystatechange=function(){w(),b.onreadystatechange=null,b.parentNode.removeChild(b),b=null},l.g.document.documentElement.appendChild(b)}:function(){setTimeout(w,0)};else{var m=new l.g.MessageChannel;m.port1.onmessage=w,c=function(){m.port2.postMessage(0)}}var y=[];function w(){var b,O;u=!0;for(var v=y.length;v;){for(O=y,y=[],b=-1;++b<v;)O[b]();v=y.length}u=!1}o.exports=function(b){y.push(b)!==1||u||c()}},5717:o=>{typeof Object.create=="function"?o.exports=function(a,l){l&&(a.super_=l,a.prototype=Object.create(l.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}))}:o.exports=function(a,l){if(l){a.super_=l;var c=function(){};c.prototype=l.prototype,a.prototype=new c,a.prototype.constructor=a}}},8458:(o,a,l)=>{var c=l(8910),u=l(3790),h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a.encode=function(f){for(var p,d,m,y,w,b,O,v=[],_=0,S=f.length,R=S,N=c.getTypeOf(f)!=="string";_<f.length;)R=S-_,N?(p=f[_++],d=_<S?f[_++]:0,m=_<S?f[_++]:0):(p=f.charCodeAt(_++),d=_<S?f.charCodeAt(_++):0,m=_<S?f.charCodeAt(_++):0),y=p>>2,w=(3&p)<<4|d>>4,b=R>1?(15&d)<<2|m>>6:64,O=R>2?63&m:64,v.push(h.charAt(y)+h.charAt(w)+h.charAt(b)+h.charAt(O));return v.join("")},a.decode=function(f){var p,d,m,y,w,b,O=0,v=0,_="data:";if(f.substr(0,_.length)===_)throw new Error("Invalid base64 input, it looks like a data url.");var S,R=3*(f=f.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(f.charAt(f.length-1)===h.charAt(64)&&R--,f.charAt(f.length-2)===h.charAt(64)&&R--,R%1!=0)throw new Error("Invalid base64 input, bad content length.");for(S=u.uint8array?new Uint8Array(0|R):new Array(0|R);O<f.length;)p=h.indexOf(f.charAt(O++))<<2|(y=h.indexOf(f.charAt(O++)))>>4,d=(15&y)<<4|(w=h.indexOf(f.charAt(O++)))>>2,m=(3&w)<<6|(b=h.indexOf(f.charAt(O++))),S[v++]=p,w!==64&&(S[v++]=d),b!==64&&(S[v++]=m);return S}},7326:(o,a,l)=>{var c=l(8565),u=l(5301),h=l(2541),f=l(5977);function p(d,m,y,w,b){this.compressedSize=d,this.uncompressedSize=m,this.crc32=y,this.compression=w,this.compressedContent=b}p.prototype={getContentWorker:function(){var d=new u(c.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new f("data_length")),m=this;return d.on("end",function(){if(this.streamInfo.data_length!==m.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),d},getCompressedWorker:function(){return new u(c.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},p.createWorkerFrom=function(d,m,y){return d.pipe(new h).pipe(new f("uncompressedSize")).pipe(m.compressWorker(y)).pipe(new f("compressedSize")).withStreamInfo("compression",m)},o.exports=p},1678:(o,a,l)=>{var c=l(3718);a.STORE={magic:"\0\0",compressWorker:function(){return new c("STORE compression")},uncompressWorker:function(){return new c("STORE decompression")}},a.DEFLATE=l(1033)},6988:(o,a,l)=>{var c=l(8910),u=function(){for(var h,f=[],p=0;p<256;p++){h=p;for(var d=0;d<8;d++)h=1&h?3988292384^h>>>1:h>>>1;f[p]=h}return f}();o.exports=function(h,f){return h!==void 0&&h.length?c.getTypeOf(h)!=="string"?function(p,d,m,y){var w=u,b=0+m;p^=-1;for(var O=0;O<b;O++)p=p>>>8^w[255&(p^d[O])];return-1^p}(0|f,h,h.length):function(p,d,m,y){var w=u,b=0+m;p^=-1;for(var O=0;O<b;O++)p=p>>>8^w[255&(p^d.charCodeAt(O))];return-1^p}(0|f,h,h.length):0}},6032:(o,a)=>{a.base64=!1,a.binary=!1,a.dir=!1,a.createFolders=!0,a.date=null,a.compression=null,a.compressionOptions=null,a.comment=null,a.unixPermissions=null,a.dosPermissions=null},8565:(o,a,l)=>{var c;c=typeof Promise<"u"?Promise:l(3389),o.exports={Promise:c}},1033:(o,a,l)=>{var c=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",u=l(9591),h=l(8910),f=l(3718),p=c?"uint8array":"array";function d(m,y){f.call(this,"FlateWorker/"+m),this._pako=null,this._pakoAction=m,this._pakoOptions=y,this.meta={}}a.magic="\b\0",h.inherits(d,f),d.prototype.processChunk=function(m){this.meta=m.meta,this._pako===null&&this._createPako(),this._pako.push(h.transformTo(p,m.data),!1)},d.prototype.flush=function(){f.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},d.prototype.cleanUp=function(){f.prototype.cleanUp.call(this),this._pako=null},d.prototype._createPako=function(){this._pako=new u[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var m=this;this._pako.onData=function(y){m.push({data:y,meta:m.meta})}},a.compressWorker=function(m){return new d("Deflate",m)},a.uncompressWorker=function(){return new d("Inflate",{})}},4979:(o,a,l)=>{var c=l(8910),u=l(3718),h=l(3600),f=l(6988),p=l(1141),d=function(b,O){var v,_="";for(v=0;v<O;v++)_+=String.fromCharCode(255&b),b>>>=8;return _},m=function(b,O,v,_,S,R){var N,T,C=b.file,Q=b.compression,I=R!==h.utf8encode,B=c.transformTo("string",R(C.name)),k=c.transformTo("string",h.utf8encode(C.name)),j=C.comment,ne=c.transformTo("string",R(j)),Z=c.transformTo("string",h.utf8encode(j)),le=k.length!==C.name.length,oe=Z.length!==j.length,pe="",P="",D="",H=C.dir,F=C.date,se={crc32:0,compressedSize:0,uncompressedSize:0};O&&!v||(se.crc32=b.crc32,se.compressedSize=b.compressedSize,se.uncompressedSize=b.uncompressedSize);var W=0;O&&(W|=8),I||!le&&!oe||(W|=2048);var Y,ee,re=0,ie=0;H&&(re|=16),S==="UNIX"?(ie=798,re|=(ee=Y=C.unixPermissions,Y||(ee=H?16893:33204),(65535&ee)<<16)):(ie=20,re|=63&(C.dosPermissions||0)),N=F.getUTCHours(),N<<=6,N|=F.getUTCMinutes(),N<<=5,N|=F.getUTCSeconds()/2,T=F.getUTCFullYear()-1980,T<<=4,T|=F.getUTCMonth()+1,T<<=5,T|=F.getUTCDate(),le&&(P=d(1,1)+d(f(B),4)+k,pe+="up"+d(P.length,2)+P),oe&&(D=d(1,1)+d(f(ne),4)+Z,pe+="uc"+d(D.length,2)+D);var V="";return V+=`
\0`,V+=d(W,2),V+=Q.magic,V+=d(N,2),V+=d(T,2),V+=d(se.crc32,4),V+=d(se.compressedSize,4),V+=d(se.uncompressedSize,4),V+=d(B.length,2),V+=d(pe.length,2),{fileRecord:p.LOCAL_FILE_HEADER+V+B+pe,dirRecord:p.CENTRAL_FILE_HEADER+d(ie,2)+V+d(ne.length,2)+"\0\0\0\0"+d(re,4)+d(_,4)+B+pe+ne}},y=function(b){return p.DATA_DESCRIPTOR+d(b.crc32,4)+d(b.compressedSize,4)+d(b.uncompressedSize,4)};function w(b,O,v,_){u.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=O,this.zipPlatform=v,this.encodeFileName=_,this.streamFiles=b,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}c.inherits(w,u),w.prototype.push=function(b){var O=b.meta.percent||0,v=this.entriesCount,_=this._sources.length;this.accumulate?this.contentBuffer.push(b):(this.bytesWritten+=b.data.length,u.prototype.push.call(this,{data:b.data,meta:{currentFile:this.currentFile,percent:v?(O+100*(v-_-1))/v:100}}))},w.prototype.openedSource=function(b){this.currentSourceOffset=this.bytesWritten,this.currentFile=b.file.name;var O=this.streamFiles&&!b.file.dir;if(O){var v=m(b,O,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:v.fileRecord,meta:{percent:0}})}else this.accumulate=!0},w.prototype.closedSource=function(b){this.accumulate=!1;var O=this.streamFiles&&!b.file.dir,v=m(b,O,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(v.dirRecord),O)this.push({data:y(b),meta:{percent:100}});else for(this.push({data:v.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},w.prototype.flush=function(){for(var b=this.bytesWritten,O=0;O<this.dirRecords.length;O++)this.push({data:this.dirRecords[O],meta:{percent:100}});var v=this.bytesWritten-b,_=function(S,R,N,T,C){var Q=c.transformTo("string",C(T));return p.CENTRAL_DIRECTORY_END+"\0\0\0\0"+d(S,2)+d(S,2)+d(R,4)+d(N,4)+d(Q.length,2)+Q}(this.dirRecords.length,v,b,this.zipComment,this.encodeFileName);this.push({data:_,meta:{percent:100}})},w.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},w.prototype.registerPrevious=function(b){this._sources.push(b);var O=this;return b.on("data",function(v){O.processChunk(v)}),b.on("end",function(){O.closedSource(O.previous.streamInfo),O._sources.length?O.prepareNextSource():O.end()}),b.on("error",function(v){O.error(v)}),this},w.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},w.prototype.error=function(b){var O=this._sources;if(!u.prototype.error.call(this,b))return!1;for(var v=0;v<O.length;v++)try{O[v].error(b)}catch{}return!0},w.prototype.lock=function(){u.prototype.lock.call(this);for(var b=this._sources,O=0;O<b.length;O++)b[O].lock()},o.exports=w},7834:(o,a,l)=>{var c=l(1678),u=l(4979);a.generateWorker=function(h,f,p){var d=new u(f.streamFiles,p,f.platform,f.encodeFileName),m=0;try{h.forEach(function(y,w){m++;var b=function(S,R){var N=S||R,T=c[N];if(!T)throw new Error(N+" is not a valid compression method !");return T}(w.options.compression,f.compression),O=w.options.compressionOptions||f.compressionOptions||{},v=w.dir,_=w.date;w._compressWorker(b,O).withStreamInfo("file",{name:y,dir:v,date:_,comment:w.comment||"",unixPermissions:w.unixPermissions,dosPermissions:w.dosPermissions}).pipe(d)}),d.entriesCount=m}catch(y){d.error(y)}return d}},6085:(o,a,l)=>{function c(){if(!(this instanceof c))return new c;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var u=new c;for(var h in this)typeof this[h]!="function"&&(u[h]=this[h]);return u}}c.prototype=l(7132),c.prototype.loadAsync=l(1062),c.support=l(3790),c.defaults=l(6032),c.version="3.10.1",c.loadAsync=function(u,h){return new c().loadAsync(u,h)},c.external=l(8565),o.exports=c},1062:(o,a,l)=>{var c=l(8910),u=l(8565),h=l(3600),f=l(6624),p=l(2541),d=l(2182);function m(y){return new u.Promise(function(w,b){var O=y.decompressed.getContentWorker().pipe(new p);O.on("error",function(v){b(v)}).on("end",function(){O.streamInfo.crc32!==y.decompressed.crc32?b(new Error("Corrupted zip : CRC32 mismatch")):w()}).resume()})}o.exports=function(y,w){var b=this;return w=c.extend(w||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:h.utf8decode}),d.isNode&&d.isStream(y)?u.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):c.prepareContent("the loaded zip file",y,!0,w.optimizedBinaryString,w.base64).then(function(O){var v=new f(w);return v.load(O),v}).then(function(O){var v=[u.Promise.resolve(O)],_=O.files;if(w.checkCRC32)for(var S=0;S<_.length;S++)v.push(m(_[S]));return u.Promise.all(v)}).then(function(O){for(var v=O.shift(),_=v.files,S=0;S<_.length;S++){var R=_[S],N=R.fileNameStr,T=c.resolve(R.fileNameStr);b.file(T,R.decompressed,{binary:!0,optimizedBinaryString:!0,date:R.date,dir:R.dir,comment:R.fileCommentStr.length?R.fileCommentStr:null,unixPermissions:R.unixPermissions,dosPermissions:R.dosPermissions,createFolders:w.createFolders}),R.dir||(b.file(T).unsafeOriginalName=N)}return v.zipComment.length&&(b.comment=v.zipComment),b})}},2182:o=>{o.exports={isNode:typeof Buffer<"u",newBufferFrom:function(a,l){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(a,l);if(typeof a=="number")throw new Error('The "data" argument must not be a number');return new Buffer(a,l)},allocBuffer:function(a){if(Buffer.alloc)return Buffer.alloc(a);var l=new Buffer(a);return l.fill(0),l},isBuffer:function(a){return Buffer.isBuffer(a)},isStream:function(a){return a&&typeof a.on=="function"&&typeof a.pause=="function"&&typeof a.resume=="function"}}},660:(o,a,l)=>{var c=l(8910),u=l(3718);function h(f,p){u.call(this,"Nodejs stream input adapter for "+f),this._upstreamEnded=!1,this._bindStream(p)}c.inherits(h,u),h.prototype._bindStream=function(f){var p=this;this._stream=f,f.pause(),f.on("data",function(d){p.push({data:d,meta:{percent:0}})}).on("error",function(d){p.isPaused?this.generatedError=d:p.error(d)}).on("end",function(){p.isPaused?p._upstreamEnded=!0:p.end()})},h.prototype.pause=function(){return!!u.prototype.pause.call(this)&&(this._stream.pause(),!0)},h.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},o.exports=h},1220:(o,a,l)=>{var c=l(749).Readable;function u(h,f,p){c.call(this,f),this._helper=h;var d=this;h.on("data",function(m,y){d.push(m)||d._helper.pause(),p&&p(y)}).on("error",function(m){d.emit("error",m)}).on("end",function(){d.push(null)})}l(8910).inherits(u,c),u.prototype._read=function(){this._helper.resume()},o.exports=u},7132:(o,a,l)=>{var c=l(3600),u=l(8910),h=l(3718),f=l(1285),p=l(6032),d=l(7326),m=l(6859),y=l(7834),w=l(2182),b=l(660),O=function(T,C,Q){var I,B=u.getTypeOf(C),k=u.extend(Q||{},p);k.date=k.date||new Date,k.compression!==null&&(k.compression=k.compression.toUpperCase()),typeof k.unixPermissions=="string"&&(k.unixPermissions=parseInt(k.unixPermissions,8)),k.unixPermissions&&16384&k.unixPermissions&&(k.dir=!0),k.dosPermissions&&16&k.dosPermissions&&(k.dir=!0),k.dir&&(T=_(T)),k.createFolders&&(I=v(T))&&S.call(this,I,!0);var j=B==="string"&&k.binary===!1&&k.base64===!1;Q&&Q.binary!==void 0||(k.binary=!j),(C instanceof d&&C.uncompressedSize===0||k.dir||!C||C.length===0)&&(k.base64=!1,k.binary=!0,C="",k.compression="STORE",B="string");var ne;ne=C instanceof d||C instanceof h?C:w.isNode&&w.isStream(C)?new b(T,C):u.prepareContent(T,C,k.binary,k.optimizedBinaryString,k.base64);var Z=new m(T,ne,k);this.files[T]=Z},v=function(T){T.slice(-1)==="/"&&(T=T.substring(0,T.length-1));var C=T.lastIndexOf("/");return C>0?T.substring(0,C):""},_=function(T){return T.slice(-1)!=="/"&&(T+="/"),T},S=function(T,C){return C=C!==void 0?C:p.createFolders,T=_(T),this.files[T]||O.call(this,T,null,{dir:!0,createFolders:C}),this.files[T]};function R(T){return Object.prototype.toString.call(T)==="[object RegExp]"}var N={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(T){var C,Q,I;for(C in this.files)I=this.files[C],(Q=C.slice(this.root.length,C.length))&&C.slice(0,this.root.length)===this.root&&T(Q,I)},filter:function(T){var C=[];return this.forEach(function(Q,I){T(Q,I)&&C.push(I)}),C},file:function(T,C,Q){if(arguments.length===1){if(R(T)){var I=T;return this.filter(function(k,j){return!j.dir&&I.test(k)})}var B=this.files[this.root+T];return B&&!B.dir?B:null}return T=this.root+T,O.call(this,T,C,Q),this},folder:function(T){if(!T)return this;if(R(T))return this.filter(function(B,k){return k.dir&&T.test(B)});var C=this.root+T,Q=S.call(this,C),I=this.clone();return I.root=Q.name,I},remove:function(T){T=this.root+T;var C=this.files[T];if(C||(T.slice(-1)!=="/"&&(T+="/"),C=this.files[T]),C&&!C.dir)delete this.files[T];else for(var Q=this.filter(function(B,k){return k.name.slice(0,T.length)===T}),I=0;I<Q.length;I++)delete this.files[Q[I].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(T){var C,Q={};try{if((Q=u.extend(T||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:c.utf8encode})).type=Q.type.toLowerCase(),Q.compression=Q.compression.toUpperCase(),Q.type==="binarystring"&&(Q.type="string"),!Q.type)throw new Error("No output type specified.");u.checkSupport(Q.type),Q.platform!=="darwin"&&Q.platform!=="freebsd"&&Q.platform!=="linux"&&Q.platform!=="sunos"||(Q.platform="UNIX"),Q.platform==="win32"&&(Q.platform="DOS");var I=Q.comment||this.comment||"";C=y.generateWorker(this,Q,I)}catch(B){(C=new h("error")).error(B)}return new f(C,Q.type||"string",Q.mimeType)},generateAsync:function(T,C){return this.generateInternalStream(T).accumulate(C)},generateNodeStream:function(T,C){return(T=T||{}).type||(T.type="nodebuffer"),this.generateInternalStream(T).toNodejsStream(C)}};o.exports=N},749:(o,a,l)=>{o.exports=l(2830)},2370:(o,a,l)=>{var c=l(8542);function u(h){c.call(this,h);for(var f=0;f<this.data.length;f++)h[f]=255&h[f]}l(8910).inherits(u,c),u.prototype.byteAt=function(h){return this.data[this.zero+h]},u.prototype.lastIndexOfSignature=function(h){for(var f=h.charCodeAt(0),p=h.charCodeAt(1),d=h.charCodeAt(2),m=h.charCodeAt(3),y=this.length-4;y>=0;--y)if(this.data[y]===f&&this.data[y+1]===p&&this.data[y+2]===d&&this.data[y+3]===m)return y-this.zero;return-1},u.prototype.readAndCheckSignature=function(h){var f=h.charCodeAt(0),p=h.charCodeAt(1),d=h.charCodeAt(2),m=h.charCodeAt(3),y=this.readData(4);return f===y[0]&&p===y[1]&&d===y[2]&&m===y[3]},u.prototype.readData=function(h){if(this.checkOffset(h),h===0)return[];var f=this.data.slice(this.zero+this.index,this.zero+this.index+h);return this.index+=h,f},o.exports=u},8542:(o,a,l)=>{var c=l(8910);function u(h){this.data=h,this.length=h.length,this.index=0,this.zero=0}u.prototype={checkOffset:function(h){this.checkIndex(this.index+h)},checkIndex:function(h){if(this.length<this.zero+h||h<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+h+"). Corrupted zip ?")},setIndex:function(h){this.checkIndex(h),this.index=h},skip:function(h){this.setIndex(this.index+h)},byteAt:function(){},readInt:function(h){var f,p=0;for(this.checkOffset(h),f=this.index+h-1;f>=this.index;f--)p=(p<<8)+this.byteAt(f);return this.index+=h,p},readString:function(h){return c.transformTo("string",this.readData(h))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var h=this.readInt(4);return new Date(Date.UTC(1980+(h>>25&127),(h>>21&15)-1,h>>16&31,h>>11&31,h>>5&63,(31&h)<<1))}},o.exports=u},9583:(o,a,l)=>{var c=l(414);function u(h){c.call(this,h)}l(8910).inherits(u,c),u.prototype.readData=function(h){this.checkOffset(h);var f=this.data.slice(this.zero+this.index,this.zero+this.index+h);return this.index+=h,f},o.exports=u},9226:(o,a,l)=>{var c=l(8542);function u(h){c.call(this,h)}l(8910).inherits(u,c),u.prototype.byteAt=function(h){return this.data.charCodeAt(this.zero+h)},u.prototype.lastIndexOfSignature=function(h){return this.data.lastIndexOf(h)-this.zero},u.prototype.readAndCheckSignature=function(h){return h===this.readData(4)},u.prototype.readData=function(h){this.checkOffset(h);var f=this.data.slice(this.zero+this.index,this.zero+this.index+h);return this.index+=h,f},o.exports=u},414:(o,a,l)=>{var c=l(2370);function u(h){c.call(this,h)}l(8910).inherits(u,c),u.prototype.readData=function(h){if(this.checkOffset(h),h===0)return new Uint8Array(0);var f=this.data.subarray(this.zero+this.index,this.zero+this.index+h);return this.index+=h,f},o.exports=u},8435:(o,a,l)=>{var c=l(8910),u=l(3790),h=l(2370),f=l(9226),p=l(9583),d=l(414);o.exports=function(m){var y=c.getTypeOf(m);return c.checkSupport(y),y!=="string"||u.uint8array?y==="nodebuffer"?new p(m):u.uint8array?new d(c.transformTo("uint8array",m)):new h(c.transformTo("array",m)):new f(m)}},1141:(o,a)=>{a.LOCAL_FILE_HEADER="PK",a.CENTRAL_FILE_HEADER="PK",a.CENTRAL_DIRECTORY_END="PK",a.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",a.ZIP64_CENTRAL_DIRECTORY_END="PK",a.DATA_DESCRIPTOR="PK\x07\b"},4293:(o,a,l)=>{var c=l(3718),u=l(8910);function h(f){c.call(this,"ConvertWorker to "+f),this.destType=f}u.inherits(h,c),h.prototype.processChunk=function(f){this.push({data:u.transformTo(this.destType,f.data),meta:f.meta})},o.exports=h},2541:(o,a,l)=>{var c=l(3718),u=l(6988);function h(){c.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}l(8910).inherits(h,c),h.prototype.processChunk=function(f){this.streamInfo.crc32=u(f.data,this.streamInfo.crc32||0),this.push(f)},o.exports=h},5977:(o,a,l)=>{var c=l(8910),u=l(3718);function h(f){u.call(this,"DataLengthProbe for "+f),this.propName=f,this.withStreamInfo(f,0)}c.inherits(h,u),h.prototype.processChunk=function(f){if(f){var p=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=p+f.data.length}u.prototype.processChunk.call(this,f)},o.exports=h},5301:(o,a,l)=>{var c=l(8910),u=l(3718);function h(f){u.call(this,"DataWorker");var p=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,f.then(function(d){p.dataIsReady=!0,p.data=d,p.max=d&&d.length||0,p.type=c.getTypeOf(d),p.isPaused||p._tickAndRepeat()},function(d){p.error(d)})}c.inherits(h,u),h.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this.data=null},h.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,c.delay(this._tickAndRepeat,[],this)),!0)},h.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(c.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},h.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var f=null,p=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":f=this.data.substring(this.index,p);break;case"uint8array":f=this.data.subarray(this.index,p);break;case"array":case"nodebuffer":f=this.data.slice(this.index,p)}return this.index=p,this.push({data:f,meta:{percent:this.max?this.index/this.max*100:0}})},o.exports=h},3718:o=>{function a(l){this.name=l||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}a.prototype={push:function(l){this.emit("data",l)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(l){this.emit("error",l)}return!0},error:function(l){return!this.isFinished&&(this.isPaused?this.generatedError=l:(this.isFinished=!0,this.emit("error",l),this.previous&&this.previous.error(l),this.cleanUp()),!0)},on:function(l,c){return this._listeners[l].push(c),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(l,c){if(this._listeners[l])for(var u=0;u<this._listeners[l].length;u++)this._listeners[l][u].call(this,c)},pipe:function(l){return l.registerPrevious(this)},registerPrevious:function(l){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=l.streamInfo,this.mergeStreamInfo(),this.previous=l;var c=this;return l.on("data",function(u){c.processChunk(u)}),l.on("end",function(){c.end()}),l.on("error",function(u){c.error(u)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;this.isPaused=!1;var l=!1;return this.generatedError&&(this.error(this.generatedError),l=!0),this.previous&&this.previous.resume(),!l},flush:function(){},processChunk:function(l){this.push(l)},withStreamInfo:function(l,c){return this.extraStreamInfo[l]=c,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var l in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,l)&&(this.streamInfo[l]=this.extraStreamInfo[l])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var l="Worker "+this.name;return this.previous?this.previous+" -> "+l:l}},o.exports=a},1285:(o,a,l)=>{var c=l(8910),u=l(4293),h=l(3718),f=l(8458),p=l(3790),d=l(8565),m=null;if(p.nodestream)try{m=l(1220)}catch{}function y(w,b,O){var v=b;switch(b){case"blob":case"arraybuffer":v="uint8array";break;case"base64":v="string"}try{this._internalType=v,this._outputType=b,this._mimeType=O,c.checkSupport(v),this._worker=w.pipe(new u(v)),w.lock()}catch(_){this._worker=new h("error"),this._worker.error(_)}}y.prototype={accumulate:function(w){return b=this,O=w,new d.Promise(function(v,_){var S=[],R=b._internalType,N=b._outputType,T=b._mimeType;b.on("data",function(C,Q){S.push(C),O&&O(Q)}).on("error",function(C){S=[],_(C)}).on("end",function(){try{var C=function(Q,I,B){switch(Q){case"blob":return c.newBlob(c.transformTo("arraybuffer",I),B);case"base64":return f.encode(I);default:return c.transformTo(Q,I)}}(N,function(Q,I){var B,k=0,j=null,ne=0;for(B=0;B<I.length;B++)ne+=I[B].length;switch(Q){case"string":return I.join("");case"array":return Array.prototype.concat.apply([],I);case"uint8array":for(j=new Uint8Array(ne),B=0;B<I.length;B++)j.set(I[B],k),k+=I[B].length;return j;case"nodebuffer":return Buffer.concat(I);default:throw new Error("concat : unsupported type '"+Q+"'")}}(R,S),T);v(C)}catch(Q){_(Q)}S=[]}).resume()});var b,O},on:function(w,b){var O=this;return w==="data"?this._worker.on(w,function(v){b.call(O,v.data,v.meta)}):this._worker.on(w,function(){c.delay(b,arguments,O)}),this},resume:function(){return c.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(w){if(c.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new m(this,{objectMode:this._outputType!=="nodebuffer"},w)}},o.exports=y},3790:(o,a,l)=>{if(a.base64=!0,a.array=!0,a.string=!0,a.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",a.nodebuffer=typeof Buffer<"u",a.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")a.blob=!1;else{var c=new ArrayBuffer(0);try{a.blob=new Blob([c],{type:"application/zip"}).size===0}catch{try{var u=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);u.append(c),a.blob=u.getBlob("application/zip").size===0}catch{a.blob=!1}}}try{a.nodestream=!!l(749).Readable}catch{a.nodestream=!1}},3600:(o,a,l)=>{for(var c=l(8910),u=l(3790),h=l(2182),f=l(3718),p=new Array(256),d=0;d<256;d++)p[d]=d>=252?6:d>=248?5:d>=240?4:d>=224?3:d>=192?2:1;function m(){f.call(this,"utf-8 decode"),this.leftOver=null}function y(){f.call(this,"utf-8 encode")}p[254]=p[254]=1,a.utf8encode=function(w){return u.nodebuffer?h.newBufferFrom(w,"utf-8"):function(b){var O,v,_,S,R,N=b.length,T=0;for(S=0;S<N;S++)(64512&(v=b.charCodeAt(S)))==55296&&S+1<N&&(64512&(_=b.charCodeAt(S+1)))==56320&&(v=65536+(v-55296<<10)+(_-56320),S++),T+=v<128?1:v<2048?2:v<65536?3:4;for(O=u.uint8array?new Uint8Array(T):new Array(T),R=0,S=0;R<T;S++)(64512&(v=b.charCodeAt(S)))==55296&&S+1<N&&(64512&(_=b.charCodeAt(S+1)))==56320&&(v=65536+(v-55296<<10)+(_-56320),S++),v<128?O[R++]=v:v<2048?(O[R++]=192|v>>>6,O[R++]=128|63&v):v<65536?(O[R++]=224|v>>>12,O[R++]=128|v>>>6&63,O[R++]=128|63&v):(O[R++]=240|v>>>18,O[R++]=128|v>>>12&63,O[R++]=128|v>>>6&63,O[R++]=128|63&v);return O}(w)},a.utf8decode=function(w){return u.nodebuffer?c.transformTo("nodebuffer",w).toString("utf-8"):function(b){var O,v,_,S,R=b.length,N=new Array(2*R);for(v=0,O=0;O<R;)if((_=b[O++])<128)N[v++]=_;else if((S=p[_])>4)N[v++]=65533,O+=S-1;else{for(_&=S===2?31:S===3?15:7;S>1&&O<R;)_=_<<6|63&b[O++],S--;S>1?N[v++]=65533:_<65536?N[v++]=_:(_-=65536,N[v++]=55296|_>>10&1023,N[v++]=56320|1023&_)}return N.length!==v&&(N.subarray?N=N.subarray(0,v):N.length=v),c.applyFromCharCode(N)}(w=c.transformTo(u.uint8array?"uint8array":"array",w))},c.inherits(m,f),m.prototype.processChunk=function(w){var b=c.transformTo(u.uint8array?"uint8array":"array",w.data);if(this.leftOver&&this.leftOver.length){if(u.uint8array){var O=b;(b=new Uint8Array(O.length+this.leftOver.length)).set(this.leftOver,0),b.set(O,this.leftOver.length)}else b=this.leftOver.concat(b);this.leftOver=null}var v=function(S,R){var N;for((R=R||S.length)>S.length&&(R=S.length),N=R-1;N>=0&&(192&S[N])==128;)N--;return N<0||N===0?R:N+p[S[N]]>R?N:R}(b),_=b;v!==b.length&&(u.uint8array?(_=b.subarray(0,v),this.leftOver=b.subarray(v,b.length)):(_=b.slice(0,v),this.leftOver=b.slice(v,b.length))),this.push({data:a.utf8decode(_),meta:w.meta})},m.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:a.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},a.Utf8DecodeWorker=m,c.inherits(y,f),y.prototype.processChunk=function(w){this.push({data:a.utf8encode(w.data),meta:w.meta})},a.Utf8EncodeWorker=y},8910:(o,a,l)=>{var c=l(3790),u=l(8458),h=l(2182),f=l(8565);function p(O){return O}function d(O,v){for(var _=0;_<O.length;++_)v[_]=255&O.charCodeAt(_);return v}l(4889),a.newBlob=function(O,v){a.checkSupport("blob");try{return new Blob([O],{type:v})}catch{try{var _=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return _.append(O),_.getBlob(v)}catch{throw new Error("Bug : can't construct the Blob.")}}};var m={stringifyByChunk:function(O,v,_){var S=[],R=0,N=O.length;if(N<=_)return String.fromCharCode.apply(null,O);for(;R<N;)v==="array"||v==="nodebuffer"?S.push(String.fromCharCode.apply(null,O.slice(R,Math.min(R+_,N)))):S.push(String.fromCharCode.apply(null,O.subarray(R,Math.min(R+_,N)))),R+=_;return S.join("")},stringifyByChar:function(O){for(var v="",_=0;_<O.length;_++)v+=String.fromCharCode(O[_]);return v},applyCanBeUsed:{uint8array:function(){try{return c.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return c.nodebuffer&&String.fromCharCode.apply(null,h.allocBuffer(1)).length===1}catch{return!1}}()}};function y(O){var v=65536,_=a.getTypeOf(O),S=!0;if(_==="uint8array"?S=m.applyCanBeUsed.uint8array:_==="nodebuffer"&&(S=m.applyCanBeUsed.nodebuffer),S)for(;v>1;)try{return m.stringifyByChunk(O,_,v)}catch{v=Math.floor(v/2)}return m.stringifyByChar(O)}function w(O,v){for(var _=0;_<O.length;_++)v[_]=O[_];return v}a.applyFromCharCode=y;var b={};b.string={string:p,array:function(O){return d(O,new Array(O.length))},arraybuffer:function(O){return b.string.uint8array(O).buffer},uint8array:function(O){return d(O,new Uint8Array(O.length))},nodebuffer:function(O){return d(O,h.allocBuffer(O.length))}},b.array={string:y,array:p,arraybuffer:function(O){return new Uint8Array(O).buffer},uint8array:function(O){return new Uint8Array(O)},nodebuffer:function(O){return h.newBufferFrom(O)}},b.arraybuffer={string:function(O){return y(new Uint8Array(O))},array:function(O){return w(new Uint8Array(O),new Array(O.byteLength))},arraybuffer:p,uint8array:function(O){return new Uint8Array(O)},nodebuffer:function(O){return h.newBufferFrom(new Uint8Array(O))}},b.uint8array={string:y,array:function(O){return w(O,new Array(O.length))},arraybuffer:function(O){return O.buffer},uint8array:p,nodebuffer:function(O){return h.newBufferFrom(O)}},b.nodebuffer={string:y,array:function(O){return w(O,new Array(O.length))},arraybuffer:function(O){return b.nodebuffer.uint8array(O).buffer},uint8array:function(O){return w(O,new Uint8Array(O.length))},nodebuffer:p},a.transformTo=function(O,v){if(v||(v=""),!O)return v;a.checkSupport(O);var _=a.getTypeOf(v);return b[_][O](v)},a.resolve=function(O){for(var v=O.split("/"),_=[],S=0;S<v.length;S++){var R=v[S];R==="."||R===""&&S!==0&&S!==v.length-1||(R===".."?_.pop():_.push(R))}return _.join("/")},a.getTypeOf=function(O){return typeof O=="string"?"string":Object.prototype.toString.call(O)==="[object Array]"?"array":c.nodebuffer&&h.isBuffer(O)?"nodebuffer":c.uint8array&&O instanceof Uint8Array?"uint8array":c.arraybuffer&&O instanceof ArrayBuffer?"arraybuffer":void 0},a.checkSupport=function(O){if(!c[O.toLowerCase()])throw new Error(O+" is not supported by this platform")},a.MAX_VALUE_16BITS=65535,a.MAX_VALUE_32BITS=-1,a.pretty=function(O){var v,_,S="";for(_=0;_<(O||"").length;_++)S+="\\x"+((v=O.charCodeAt(_))<16?"0":"")+v.toString(16).toUpperCase();return S},a.delay=function(O,v,_){setImmediate(function(){O.apply(_||null,v||[])})},a.inherits=function(O,v){var _=function(){};_.prototype=v.prototype,O.prototype=new _},a.extend=function(){var O,v,_={};for(O=0;O<arguments.length;O++)for(v in arguments[O])Object.prototype.hasOwnProperty.call(arguments[O],v)&&_[v]===void 0&&(_[v]=arguments[O][v]);return _},a.prepareContent=function(O,v,_,S,R){return f.Promise.resolve(v).then(function(N){return c.blob&&(N instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(N))!==-1)&&typeof FileReader<"u"?new f.Promise(function(T,C){var Q=new FileReader;Q.onload=function(I){T(I.target.result)},Q.onerror=function(I){C(I.target.error)},Q.readAsArrayBuffer(N)}):N}).then(function(N){var T,C=a.getTypeOf(N);return C?(C==="arraybuffer"?N=a.transformTo("uint8array",N):C==="string"&&(R?N=u.decode(N):_&&S!==!0&&(N=d(T=N,c.uint8array?new Uint8Array(T.length):new Array(T.length)))),N):f.Promise.reject(new Error("Can't read the data of '"+O+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},6624:(o,a,l)=>{var c=l(8435),u=l(8910),h=l(1141),f=l(9392),p=l(3790);function d(m){this.files=[],this.loadOptions=m}d.prototype={checkSignature:function(m){if(!this.reader.readAndCheckSignature(m)){this.reader.index-=4;var y=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+u.pretty(y)+", expected "+u.pretty(m)+")")}},isSignature:function(m,y){var w=this.reader.index;this.reader.setIndex(m);var b=this.reader.readString(4)===y;return this.reader.setIndex(w),b},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var m=this.reader.readData(this.zipCommentLength),y=p.uint8array?"uint8array":"array",w=u.transformTo(y,m);this.zipComment=this.loadOptions.decodeFileName(w)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var m,y,w,b=this.zip64EndOfCentralSize-44;0<b;)m=this.reader.readInt(2),y=this.reader.readInt(4),w=this.reader.readData(y),this.zip64ExtensibleData[m]={id:m,length:y,value:w}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var m,y;for(m=0;m<this.files.length;m++)y=this.files[m],this.reader.setIndex(y.localHeaderOffset),this.checkSignature(h.LOCAL_FILE_HEADER),y.readLocalPart(this.reader),y.handleUTF8(),y.processAttributes()},readCentralDir:function(){var m;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(h.CENTRAL_FILE_HEADER);)(m=new f({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(m);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var m=this.reader.lastIndexOfSignature(h.CENTRAL_DIRECTORY_END);if(m<0)throw this.isSignature(0,h.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(m);var y=m;if(this.checkSignature(h.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===u.MAX_VALUE_16BITS||this.diskWithCentralDirStart===u.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===u.MAX_VALUE_16BITS||this.centralDirRecords===u.MAX_VALUE_16BITS||this.centralDirSize===u.MAX_VALUE_32BITS||this.centralDirOffset===u.MAX_VALUE_32BITS){if(this.zip64=!0,(m=this.reader.lastIndexOfSignature(h.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(m),this.checkSignature(h.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,h.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(h.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(h.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var w=this.centralDirOffset+this.centralDirSize;this.zip64&&(w+=20,w+=12+this.zip64EndOfCentralSize);var b=y-w;if(b>0)this.isSignature(y,h.CENTRAL_FILE_HEADER)||(this.reader.zero=b);else if(b<0)throw new Error("Corrupted zip: missing "+Math.abs(b)+" bytes.")},prepareReader:function(m){this.reader=c(m)},load:function(m){this.prepareReader(m),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},o.exports=d},9392:(o,a,l)=>{var c=l(8435),u=l(8910),h=l(7326),f=l(6988),p=l(3600),d=l(1678),m=l(3790);function y(w,b){this.options=w,this.loadOptions=b}y.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(w){var b,O;if(w.skip(22),this.fileNameLength=w.readInt(2),O=w.readInt(2),this.fileName=w.readData(this.fileNameLength),w.skip(O),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((b=function(v){for(var _ in d)if(Object.prototype.hasOwnProperty.call(d,_)&&d[_].magic===v)return d[_];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+u.pretty(this.compressionMethod)+" unknown (inner file : "+u.transformTo("string",this.fileName)+")");this.decompressed=new h(this.compressedSize,this.uncompressedSize,this.crc32,b,w.readData(this.compressedSize))},readCentralPart:function(w){this.versionMadeBy=w.readInt(2),w.skip(2),this.bitFlag=w.readInt(2),this.compressionMethod=w.readString(2),this.date=w.readDate(),this.crc32=w.readInt(4),this.compressedSize=w.readInt(4),this.uncompressedSize=w.readInt(4);var b=w.readInt(2);if(this.extraFieldsLength=w.readInt(2),this.fileCommentLength=w.readInt(2),this.diskNumberStart=w.readInt(2),this.internalFileAttributes=w.readInt(2),this.externalFileAttributes=w.readInt(4),this.localHeaderOffset=w.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");w.skip(b),this.readExtraFields(w),this.parseZIP64ExtraField(w),this.fileComment=w.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var w=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),w===0&&(this.dosPermissions=63&this.externalFileAttributes),w===3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var w=c(this.extraFields[1].value);this.uncompressedSize===u.MAX_VALUE_32BITS&&(this.uncompressedSize=w.readInt(8)),this.compressedSize===u.MAX_VALUE_32BITS&&(this.compressedSize=w.readInt(8)),this.localHeaderOffset===u.MAX_VALUE_32BITS&&(this.localHeaderOffset=w.readInt(8)),this.diskNumberStart===u.MAX_VALUE_32BITS&&(this.diskNumberStart=w.readInt(4))}},readExtraFields:function(w){var b,O,v,_=w.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});w.index+4<_;)b=w.readInt(2),O=w.readInt(2),v=w.readData(O),this.extraFields[b]={id:b,length:O,value:v};w.setIndex(_)},handleUTF8:function(){var w=m.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=p.utf8decode(this.fileName),this.fileCommentStr=p.utf8decode(this.fileComment);else{var b=this.findExtraFieldUnicodePath();if(b!==null)this.fileNameStr=b;else{var O=u.transformTo(w,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(O)}var v=this.findExtraFieldUnicodeComment();if(v!==null)this.fileCommentStr=v;else{var _=u.transformTo(w,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(_)}}},findExtraFieldUnicodePath:function(){var w=this.extraFields[28789];if(w){var b=c(w.value);return b.readInt(1)!==1||f(this.fileName)!==b.readInt(4)?null:p.utf8decode(b.readData(w.length-5))}return null},findExtraFieldUnicodeComment:function(){var w=this.extraFields[25461];if(w){var b=c(w.value);return b.readInt(1)!==1||f(this.fileComment)!==b.readInt(4)?null:p.utf8decode(b.readData(w.length-5))}return null}},o.exports=y},6859:(o,a,l)=>{var c=l(1285),u=l(5301),h=l(3600),f=l(7326),p=l(3718),d=function(b,O,v){this.name=b,this.dir=v.dir,this.date=v.date,this.comment=v.comment,this.unixPermissions=v.unixPermissions,this.dosPermissions=v.dosPermissions,this._data=O,this._dataBinary=v.binary,this.options={compression:v.compression,compressionOptions:v.compressionOptions}};d.prototype={internalStream:function(b){var O=null,v="string";try{if(!b)throw new Error("No output type specified.");var _=(v=b.toLowerCase())==="string"||v==="text";v!=="binarystring"&&v!=="text"||(v="string"),O=this._decompressWorker();var S=!this._dataBinary;S&&!_&&(O=O.pipe(new h.Utf8EncodeWorker)),!S&&_&&(O=O.pipe(new h.Utf8DecodeWorker))}catch(R){(O=new p("error")).error(R)}return new c(O,v,"")},async:function(b,O){return this.internalStream(b).accumulate(O)},nodeStream:function(b,O){return this.internalStream(b||"nodebuffer").toNodejsStream(O)},_compressWorker:function(b,O){if(this._data instanceof f&&this._data.compression.magic===b.magic)return this._data.getCompressedWorker();var v=this._decompressWorker();return this._dataBinary||(v=v.pipe(new h.Utf8EncodeWorker)),f.createWorkerFrom(v,b,O)},_decompressWorker:function(){return this._data instanceof f?this._data.getContentWorker():this._data instanceof p?this._data:new u(this._data)}};for(var m=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],y=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},w=0;w<m.length;w++)d.prototype[m[w]]=y;o.exports=d},3389:(o,a,l)=>{var c=l(5705);function u(){}var h={},f=["REJECTED"],p=["FULFILLED"],d=["PENDING"];function m(_){if(typeof _!="function")throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,_!==u&&O(this,_)}function y(_,S,R){this.promise=_,typeof S=="function"&&(this.onFulfilled=S,this.callFulfilled=this.otherCallFulfilled),typeof R=="function"&&(this.onRejected=R,this.callRejected=this.otherCallRejected)}function w(_,S,R){c(function(){var N;try{N=S(R)}catch(T){return h.reject(_,T)}N===_?h.reject(_,new TypeError("Cannot resolve promise with itself")):h.resolve(_,N)})}function b(_){var S=_&&_.then;if(_&&(typeof _=="object"||typeof _=="function")&&typeof S=="function")return function(){S.apply(_,arguments)}}function O(_,S){var R=!1;function N(Q){R||(R=!0,h.reject(_,Q))}function T(Q){R||(R=!0,h.resolve(_,Q))}var C=v(function(){S(T,N)});C.status==="error"&&N(C.value)}function v(_,S){var R={};try{R.value=_(S),R.status="success"}catch(N){R.status="error",R.value=N}return R}o.exports=m,m.prototype.finally=function(_){if(typeof _!="function")return this;var S=this.constructor;return this.then(function(R){return S.resolve(_()).then(function(){return R})},function(R){return S.resolve(_()).then(function(){throw R})})},m.prototype.catch=function(_){return this.then(null,_)},m.prototype.then=function(_,S){if(typeof _!="function"&&this.state===p||typeof S!="function"&&this.state===f)return this;var R=new this.constructor(u);return this.state!==d?w(R,this.state===p?_:S,this.outcome):this.queue.push(new y(R,_,S)),R},y.prototype.callFulfilled=function(_){h.resolve(this.promise,_)},y.prototype.otherCallFulfilled=function(_){w(this.promise,this.onFulfilled,_)},y.prototype.callRejected=function(_){h.reject(this.promise,_)},y.prototype.otherCallRejected=function(_){w(this.promise,this.onRejected,_)},h.resolve=function(_,S){var R=v(b,S);if(R.status==="error")return h.reject(_,R.value);var N=R.value;if(N)O(_,N);else{_.state=p,_.outcome=S;for(var T=-1,C=_.queue.length;++T<C;)_.queue[T].callFulfilled(S)}return _},h.reject=function(_,S){_.state=f,_.outcome=S;for(var R=-1,N=_.queue.length;++R<N;)_.queue[R].callRejected(S);return _},m.resolve=function(_){return _ instanceof this?_:h.resolve(new this(u),_)},m.reject=function(_){var S=new this(u);return h.reject(S,_)},m.all=function(_){var S=this;if(Object.prototype.toString.call(_)!=="[object Array]")return this.reject(new TypeError("must be an array"));var R=_.length,N=!1;if(!R)return this.resolve([]);for(var T=new Array(R),C=0,Q=-1,I=new this(u);++Q<R;)B(_[Q],Q);return I;function B(k,j){S.resolve(k).then(function(ne){T[j]=ne,++C!==R||N||(N=!0,h.resolve(I,T))},function(ne){N||(N=!0,h.reject(I,ne))})}},m.race=function(_){if(Object.prototype.toString.call(_)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=_.length,R=!1;if(!S)return this.resolve([]);for(var N,T=-1,C=new this(u);++T<S;)N=_[T],this.resolve(N).then(function(Q){R||(R=!0,h.resolve(C,Q))},function(Q){R||(R=!0,h.reject(C,Q))});return C}},9591:(o,a,l)=>{var c={};(0,l(4236).assign)(c,l(4555),l(8843),l(1619)),o.exports=c},4555:(o,a,l)=>{var c=l(405),u=l(4236),h=l(9373),f=l(8898),p=l(2292),d=Object.prototype.toString;function m(w){if(!(this instanceof m))return new m(w);this.options=u.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},w||{});var b=this.options;b.raw&&b.windowBits>0?b.windowBits=-b.windowBits:b.gzip&&b.windowBits>0&&b.windowBits<16&&(b.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new p,this.strm.avail_out=0;var O=c.deflateInit2(this.strm,b.level,b.method,b.windowBits,b.memLevel,b.strategy);if(O!==0)throw new Error(f[O]);if(b.header&&c.deflateSetHeader(this.strm,b.header),b.dictionary){var v;if(v=typeof b.dictionary=="string"?h.string2buf(b.dictionary):d.call(b.dictionary)==="[object ArrayBuffer]"?new Uint8Array(b.dictionary):b.dictionary,(O=c.deflateSetDictionary(this.strm,v))!==0)throw new Error(f[O]);this._dict_set=!0}}function y(w,b){var O=new m(b);if(O.push(w,!0),O.err)throw O.msg||f[O.err];return O.result}m.prototype.push=function(w,b){var O,v,_=this.strm,S=this.options.chunkSize;if(this.ended)return!1;v=b===~~b?b:b===!0?4:0,typeof w=="string"?_.input=h.string2buf(w):d.call(w)==="[object ArrayBuffer]"?_.input=new Uint8Array(w):_.input=w,_.next_in=0,_.avail_in=_.input.length;do{if(_.avail_out===0&&(_.output=new u.Buf8(S),_.next_out=0,_.avail_out=S),(O=c.deflate(_,v))!==1&&O!==0)return this.onEnd(O),this.ended=!0,!1;_.avail_out!==0&&(_.avail_in!==0||v!==4&&v!==2)||(this.options.to==="string"?this.onData(h.buf2binstring(u.shrinkBuf(_.output,_.next_out))):this.onData(u.shrinkBuf(_.output,_.next_out)))}while((_.avail_in>0||_.avail_out===0)&&O!==1);return v===4?(O=c.deflateEnd(this.strm),this.onEnd(O),this.ended=!0,O===0):v!==2||(this.onEnd(0),_.avail_out=0,!0)},m.prototype.onData=function(w){this.chunks.push(w)},m.prototype.onEnd=function(w){w===0&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=u.flattenChunks(this.chunks)),this.chunks=[],this.err=w,this.msg=this.strm.msg},a.Deflate=m,a.deflate=y,a.deflateRaw=function(w,b){return(b=b||{}).raw=!0,y(w,b)},a.gzip=function(w,b){return(b=b||{}).gzip=!0,y(w,b)}},8843:(o,a,l)=>{var c=l(7948),u=l(4236),h=l(9373),f=l(1619),p=l(8898),d=l(2292),m=l(2401),y=Object.prototype.toString;function w(O){if(!(this instanceof w))return new w(O);this.options=u.assign({chunkSize:16384,windowBits:0,to:""},O||{});var v=this.options;v.raw&&v.windowBits>=0&&v.windowBits<16&&(v.windowBits=-v.windowBits,v.windowBits===0&&(v.windowBits=-15)),!(v.windowBits>=0&&v.windowBits<16)||O&&O.windowBits||(v.windowBits+=32),v.windowBits>15&&v.windowBits<48&&(15&v.windowBits)==0&&(v.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var _=c.inflateInit2(this.strm,v.windowBits);if(_!==f.Z_OK)throw new Error(p[_]);if(this.header=new m,c.inflateGetHeader(this.strm,this.header),v.dictionary&&(typeof v.dictionary=="string"?v.dictionary=h.string2buf(v.dictionary):y.call(v.dictionary)==="[object ArrayBuffer]"&&(v.dictionary=new Uint8Array(v.dictionary)),v.raw&&(_=c.inflateSetDictionary(this.strm,v.dictionary))!==f.Z_OK))throw new Error(p[_])}function b(O,v){var _=new w(v);if(_.push(O,!0),_.err)throw _.msg||p[_.err];return _.result}w.prototype.push=function(O,v){var _,S,R,N,T,C=this.strm,Q=this.options.chunkSize,I=this.options.dictionary,B=!1;if(this.ended)return!1;S=v===~~v?v:v===!0?f.Z_FINISH:f.Z_NO_FLUSH,typeof O=="string"?C.input=h.binstring2buf(O):y.call(O)==="[object ArrayBuffer]"?C.input=new Uint8Array(O):C.input=O,C.next_in=0,C.avail_in=C.input.length;do{if(C.avail_out===0&&(C.output=new u.Buf8(Q),C.next_out=0,C.avail_out=Q),(_=c.inflate(C,f.Z_NO_FLUSH))===f.Z_NEED_DICT&&I&&(_=c.inflateSetDictionary(this.strm,I)),_===f.Z_BUF_ERROR&&B===!0&&(_=f.Z_OK,B=!1),_!==f.Z_STREAM_END&&_!==f.Z_OK)return this.onEnd(_),this.ended=!0,!1;C.next_out&&(C.avail_out!==0&&_!==f.Z_STREAM_END&&(C.avail_in!==0||S!==f.Z_FINISH&&S!==f.Z_SYNC_FLUSH)||(this.options.to==="string"?(R=h.utf8border(C.output,C.next_out),N=C.next_out-R,T=h.buf2string(C.output,R),C.next_out=N,C.avail_out=Q-N,N&&u.arraySet(C.output,C.output,R,N,0),this.onData(T)):this.onData(u.shrinkBuf(C.output,C.next_out)))),C.avail_in===0&&C.avail_out===0&&(B=!0)}while((C.avail_in>0||C.avail_out===0)&&_!==f.Z_STREAM_END);return _===f.Z_STREAM_END&&(S=f.Z_FINISH),S===f.Z_FINISH?(_=c.inflateEnd(this.strm),this.onEnd(_),this.ended=!0,_===f.Z_OK):S!==f.Z_SYNC_FLUSH||(this.onEnd(f.Z_OK),C.avail_out=0,!0)},w.prototype.onData=function(O){this.chunks.push(O)},w.prototype.onEnd=function(O){O===f.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=u.flattenChunks(this.chunks)),this.chunks=[],this.err=O,this.msg=this.strm.msg},a.Inflate=w,a.inflate=b,a.inflateRaw=function(O,v){return(v=v||{}).raw=!0,b(O,v)},a.ungzip=b},4236:(o,a)=>{var l=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function c(f,p){return Object.prototype.hasOwnProperty.call(f,p)}a.assign=function(f){for(var p=Array.prototype.slice.call(arguments,1);p.length;){var d=p.shift();if(d){if(typeof d!="object")throw new TypeError(d+"must be non-object");for(var m in d)c(d,m)&&(f[m]=d[m])}}return f},a.shrinkBuf=function(f,p){return f.length===p?f:f.subarray?f.subarray(0,p):(f.length=p,f)};var u={arraySet:function(f,p,d,m,y){if(p.subarray&&f.subarray)f.set(p.subarray(d,d+m),y);else for(var w=0;w<m;w++)f[y+w]=p[d+w]},flattenChunks:function(f){var p,d,m,y,w,b;for(m=0,p=0,d=f.length;p<d;p++)m+=f[p].length;for(b=new Uint8Array(m),y=0,p=0,d=f.length;p<d;p++)w=f[p],b.set(w,y),y+=w.length;return b}},h={arraySet:function(f,p,d,m,y){for(var w=0;w<m;w++)f[y+w]=p[d+w]},flattenChunks:function(f){return[].concat.apply([],f)}};a.setTyped=function(f){f?(a.Buf8=Uint8Array,a.Buf16=Uint16Array,a.Buf32=Int32Array,a.assign(a,u)):(a.Buf8=Array,a.Buf16=Array,a.Buf32=Array,a.assign(a,h))},a.setTyped(l)},9373:(o,a,l)=>{var c=l(4236),u=!0,h=!0;try{String.fromCharCode.apply(null,[0])}catch{u=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{h=!1}for(var f=new c.Buf8(256),p=0;p<256;p++)f[p]=p>=252?6:p>=248?5:p>=240?4:p>=224?3:p>=192?2:1;function d(m,y){if(y<65534&&(m.subarray&&h||!m.subarray&&u))return String.fromCharCode.apply(null,c.shrinkBuf(m,y));for(var w="",b=0;b<y;b++)w+=String.fromCharCode(m[b]);return w}f[254]=f[254]=1,a.string2buf=function(m){var y,w,b,O,v,_=m.length,S=0;for(O=0;O<_;O++)(64512&(w=m.charCodeAt(O)))==55296&&O+1<_&&(64512&(b=m.charCodeAt(O+1)))==56320&&(w=65536+(w-55296<<10)+(b-56320),O++),S+=w<128?1:w<2048?2:w<65536?3:4;for(y=new c.Buf8(S),v=0,O=0;v<S;O++)(64512&(w=m.charCodeAt(O)))==55296&&O+1<_&&(64512&(b=m.charCodeAt(O+1)))==56320&&(w=65536+(w-55296<<10)+(b-56320),O++),w<128?y[v++]=w:w<2048?(y[v++]=192|w>>>6,y[v++]=128|63&w):w<65536?(y[v++]=224|w>>>12,y[v++]=128|w>>>6&63,y[v++]=128|63&w):(y[v++]=240|w>>>18,y[v++]=128|w>>>12&63,y[v++]=128|w>>>6&63,y[v++]=128|63&w);return y},a.buf2binstring=function(m){return d(m,m.length)},a.binstring2buf=function(m){for(var y=new c.Buf8(m.length),w=0,b=y.length;w<b;w++)y[w]=m.charCodeAt(w);return y},a.buf2string=function(m,y){var w,b,O,v,_=y||m.length,S=new Array(2*_);for(b=0,w=0;w<_;)if((O=m[w++])<128)S[b++]=O;else if((v=f[O])>4)S[b++]=65533,w+=v-1;else{for(O&=v===2?31:v===3?15:7;v>1&&w<_;)O=O<<6|63&m[w++],v--;v>1?S[b++]=65533:O<65536?S[b++]=O:(O-=65536,S[b++]=55296|O>>10&1023,S[b++]=56320|1023&O)}return d(S,b)},a.utf8border=function(m,y){var w;for((y=y||m.length)>m.length&&(y=m.length),w=y-1;w>=0&&(192&m[w])==128;)w--;return w<0||w===0?y:w+f[m[w]]>y?w:y}},6069:o=>{o.exports=function(a,l,c,u){for(var h=65535&a|0,f=a>>>16&65535|0,p=0;c!==0;){c-=p=c>2e3?2e3:c;do f=f+(h=h+l[u++]|0)|0;while(--p);h%=65521,f%=65521}return h|f<<16|0}},1619:o=>{o.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},2869:o=>{var a=function(){for(var l,c=[],u=0;u<256;u++){l=u;for(var h=0;h<8;h++)l=1&l?3988292384^l>>>1:l>>>1;c[u]=l}return c}();o.exports=function(l,c,u,h){var f=a,p=h+u;l^=-1;for(var d=h;d<p;d++)l=l>>>8^f[255&(l^c[d])];return-1^l}},405:(o,a,l)=>{var c,u=l(4236),h=l(342),f=l(6069),p=l(2869),d=l(8898),m=-2,y=258,w=262,b=103,O=113,v=666;function _(P,D){return P.msg=d[D],D}function S(P){return(P<<1)-(P>4?9:0)}function R(P){for(var D=P.length;--D>=0;)P[D]=0}function N(P){var D=P.state,H=D.pending;H>P.avail_out&&(H=P.avail_out),H!==0&&(u.arraySet(P.output,D.pending_buf,D.pending_out,H,P.next_out),P.next_out+=H,D.pending_out+=H,P.total_out+=H,P.avail_out-=H,D.pending-=H,D.pending===0&&(D.pending_out=0))}function T(P,D){h._tr_flush_block(P,P.block_start>=0?P.block_start:-1,P.strstart-P.block_start,D),P.block_start=P.strstart,N(P.strm)}function C(P,D){P.pending_buf[P.pending++]=D}function Q(P,D){P.pending_buf[P.pending++]=D>>>8&255,P.pending_buf[P.pending++]=255&D}function I(P,D){var H,F,se=P.max_chain_length,W=P.strstart,Y=P.prev_length,ee=P.nice_match,re=P.strstart>P.w_size-w?P.strstart-(P.w_size-w):0,ie=P.window,V=P.w_mask,E=P.prev,$=P.strstart+y,X=ie[W+Y-1],ue=ie[W+Y];P.prev_length>=P.good_match&&(se>>=2),ee>P.lookahead&&(ee=P.lookahead);do if(ie[(H=D)+Y]===ue&&ie[H+Y-1]===X&&ie[H]===ie[W]&&ie[++H]===ie[W+1]){W+=2,H++;do;while(ie[++W]===ie[++H]&&ie[++W]===ie[++H]&&ie[++W]===ie[++H]&&ie[++W]===ie[++H]&&ie[++W]===ie[++H]&&ie[++W]===ie[++H]&&ie[++W]===ie[++H]&&ie[++W]===ie[++H]&&W<$);if(F=y-($-W),W=$-y,F>Y){if(P.match_start=D,Y=F,F>=ee)break;X=ie[W+Y-1],ue=ie[W+Y]}}while((D=E[D&V])>re&&--se!=0);return Y<=P.lookahead?Y:P.lookahead}function B(P){var D,H,F,se,W,Y,ee,re,ie,V,E=P.w_size;do{if(se=P.window_size-P.lookahead-P.strstart,P.strstart>=E+(E-w)){u.arraySet(P.window,P.window,E,E,0),P.match_start-=E,P.strstart-=E,P.block_start-=E,D=H=P.hash_size;do F=P.head[--D],P.head[D]=F>=E?F-E:0;while(--H);D=H=E;do F=P.prev[--D],P.prev[D]=F>=E?F-E:0;while(--H);se+=E}if(P.strm.avail_in===0)break;if(Y=P.strm,ee=P.window,re=P.strstart+P.lookahead,ie=se,V=void 0,(V=Y.avail_in)>ie&&(V=ie),H=V===0?0:(Y.avail_in-=V,u.arraySet(ee,Y.input,Y.next_in,V,re),Y.state.wrap===1?Y.adler=f(Y.adler,ee,V,re):Y.state.wrap===2&&(Y.adler=p(Y.adler,ee,V,re)),Y.next_in+=V,Y.total_in+=V,V),P.lookahead+=H,P.lookahead+P.insert>=3)for(W=P.strstart-P.insert,P.ins_h=P.window[W],P.ins_h=(P.ins_h<<P.hash_shift^P.window[W+1])&P.hash_mask;P.insert&&(P.ins_h=(P.ins_h<<P.hash_shift^P.window[W+3-1])&P.hash_mask,P.prev[W&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=W,W++,P.insert--,!(P.lookahead+P.insert<3)););}while(P.lookahead<w&&P.strm.avail_in!==0)}function k(P,D){for(var H,F;;){if(P.lookahead<w){if(B(P),P.lookahead<w&&D===0)return 1;if(P.lookahead===0)break}if(H=0,P.lookahead>=3&&(P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+3-1])&P.hash_mask,H=P.prev[P.strstart&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=P.strstart),H!==0&&P.strstart-H<=P.w_size-w&&(P.match_length=I(P,H)),P.match_length>=3)if(F=h._tr_tally(P,P.strstart-P.match_start,P.match_length-3),P.lookahead-=P.match_length,P.match_length<=P.max_lazy_match&&P.lookahead>=3){P.match_length--;do P.strstart++,P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+3-1])&P.hash_mask,H=P.prev[P.strstart&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=P.strstart;while(--P.match_length!=0);P.strstart++}else P.strstart+=P.match_length,P.match_length=0,P.ins_h=P.window[P.strstart],P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+1])&P.hash_mask;else F=h._tr_tally(P,0,P.window[P.strstart]),P.lookahead--,P.strstart++;if(F&&(T(P,!1),P.strm.avail_out===0))return 1}return P.insert=P.strstart<2?P.strstart:2,D===4?(T(P,!0),P.strm.avail_out===0?3:4):P.last_lit&&(T(P,!1),P.strm.avail_out===0)?1:2}function j(P,D){for(var H,F,se;;){if(P.lookahead<w){if(B(P),P.lookahead<w&&D===0)return 1;if(P.lookahead===0)break}if(H=0,P.lookahead>=3&&(P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+3-1])&P.hash_mask,H=P.prev[P.strstart&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=P.strstart),P.prev_length=P.match_length,P.prev_match=P.match_start,P.match_length=2,H!==0&&P.prev_length<P.max_lazy_match&&P.strstart-H<=P.w_size-w&&(P.match_length=I(P,H),P.match_length<=5&&(P.strategy===1||P.match_length===3&&P.strstart-P.match_start>4096)&&(P.match_length=2)),P.prev_length>=3&&P.match_length<=P.prev_length){se=P.strstart+P.lookahead-3,F=h._tr_tally(P,P.strstart-1-P.prev_match,P.prev_length-3),P.lookahead-=P.prev_length-1,P.prev_length-=2;do++P.strstart<=se&&(P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+3-1])&P.hash_mask,H=P.prev[P.strstart&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=P.strstart);while(--P.prev_length!=0);if(P.match_available=0,P.match_length=2,P.strstart++,F&&(T(P,!1),P.strm.avail_out===0))return 1}else if(P.match_available){if((F=h._tr_tally(P,0,P.window[P.strstart-1]))&&T(P,!1),P.strstart++,P.lookahead--,P.strm.avail_out===0)return 1}else P.match_available=1,P.strstart++,P.lookahead--}return P.match_available&&(F=h._tr_tally(P,0,P.window[P.strstart-1]),P.match_available=0),P.insert=P.strstart<2?P.strstart:2,D===4?(T(P,!0),P.strm.avail_out===0?3:4):P.last_lit&&(T(P,!1),P.strm.avail_out===0)?1:2}function ne(P,D,H,F,se){this.good_length=P,this.max_lazy=D,this.nice_length=H,this.max_chain=F,this.func=se}function Z(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new u.Buf16(1146),this.dyn_dtree=new u.Buf16(122),this.bl_tree=new u.Buf16(78),R(this.dyn_ltree),R(this.dyn_dtree),R(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new u.Buf16(16),this.heap=new u.Buf16(573),R(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new u.Buf16(573),R(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function le(P){var D;return P&&P.state?(P.total_in=P.total_out=0,P.data_type=2,(D=P.state).pending=0,D.pending_out=0,D.wrap<0&&(D.wrap=-D.wrap),D.status=D.wrap?42:O,P.adler=D.wrap===2?0:1,D.last_flush=0,h._tr_init(D),0):_(P,m)}function oe(P){var D,H=le(P);return H===0&&((D=P.state).window_size=2*D.w_size,R(D.head),D.max_lazy_match=c[D.level].max_lazy,D.good_match=c[D.level].good_length,D.nice_match=c[D.level].nice_length,D.max_chain_length=c[D.level].max_chain,D.strstart=0,D.block_start=0,D.lookahead=0,D.insert=0,D.match_length=D.prev_length=2,D.match_available=0,D.ins_h=0),H}function pe(P,D,H,F,se,W){if(!P)return m;var Y=1;if(D===-1&&(D=6),F<0?(Y=0,F=-F):F>15&&(Y=2,F-=16),se<1||se>9||H!==8||F<8||F>15||D<0||D>9||W<0||W>4)return _(P,m);F===8&&(F=9);var ee=new Z;return P.state=ee,ee.strm=P,ee.wrap=Y,ee.gzhead=null,ee.w_bits=F,ee.w_size=1<<ee.w_bits,ee.w_mask=ee.w_size-1,ee.hash_bits=se+7,ee.hash_size=1<<ee.hash_bits,ee.hash_mask=ee.hash_size-1,ee.hash_shift=~~((ee.hash_bits+3-1)/3),ee.window=new u.Buf8(2*ee.w_size),ee.head=new u.Buf16(ee.hash_size),ee.prev=new u.Buf16(ee.w_size),ee.lit_bufsize=1<<se+6,ee.pending_buf_size=4*ee.lit_bufsize,ee.pending_buf=new u.Buf8(ee.pending_buf_size),ee.d_buf=1*ee.lit_bufsize,ee.l_buf=3*ee.lit_bufsize,ee.level=D,ee.strategy=W,ee.method=H,oe(P)}c=[new ne(0,0,0,0,function(P,D){var H=65535;for(H>P.pending_buf_size-5&&(H=P.pending_buf_size-5);;){if(P.lookahead<=1){if(B(P),P.lookahead===0&&D===0)return 1;if(P.lookahead===0)break}P.strstart+=P.lookahead,P.lookahead=0;var F=P.block_start+H;if((P.strstart===0||P.strstart>=F)&&(P.lookahead=P.strstart-F,P.strstart=F,T(P,!1),P.strm.avail_out===0)||P.strstart-P.block_start>=P.w_size-w&&(T(P,!1),P.strm.avail_out===0))return 1}return P.insert=0,D===4?(T(P,!0),P.strm.avail_out===0?3:4):(P.strstart>P.block_start&&(T(P,!1),P.strm.avail_out),1)}),new ne(4,4,8,4,k),new ne(4,5,16,8,k),new ne(4,6,32,32,k),new ne(4,4,16,16,j),new ne(8,16,32,32,j),new ne(8,16,128,128,j),new ne(8,32,128,256,j),new ne(32,128,258,1024,j),new ne(32,258,258,4096,j)],a.deflateInit=function(P,D){return pe(P,D,8,15,8,0)},a.deflateInit2=pe,a.deflateReset=oe,a.deflateResetKeep=le,a.deflateSetHeader=function(P,D){return P&&P.state?P.state.wrap!==2?m:(P.state.gzhead=D,0):m},a.deflate=function(P,D){var H,F,se,W;if(!P||!P.state||D>5||D<0)return P?_(P,m):m;if(F=P.state,!P.output||!P.input&&P.avail_in!==0||F.status===v&&D!==4)return _(P,P.avail_out===0?-5:m);if(F.strm=P,H=F.last_flush,F.last_flush=D,F.status===42)if(F.wrap===2)P.adler=0,C(F,31),C(F,139),C(F,8),F.gzhead?(C(F,(F.gzhead.text?1:0)+(F.gzhead.hcrc?2:0)+(F.gzhead.extra?4:0)+(F.gzhead.name?8:0)+(F.gzhead.comment?16:0)),C(F,255&F.gzhead.time),C(F,F.gzhead.time>>8&255),C(F,F.gzhead.time>>16&255),C(F,F.gzhead.time>>24&255),C(F,F.level===9?2:F.strategy>=2||F.level<2?4:0),C(F,255&F.gzhead.os),F.gzhead.extra&&F.gzhead.extra.length&&(C(F,255&F.gzhead.extra.length),C(F,F.gzhead.extra.length>>8&255)),F.gzhead.hcrc&&(P.adler=p(P.adler,F.pending_buf,F.pending,0)),F.gzindex=0,F.status=69):(C(F,0),C(F,0),C(F,0),C(F,0),C(F,0),C(F,F.level===9?2:F.strategy>=2||F.level<2?4:0),C(F,3),F.status=O);else{var Y=8+(F.w_bits-8<<4)<<8;Y|=(F.strategy>=2||F.level<2?0:F.level<6?1:F.level===6?2:3)<<6,F.strstart!==0&&(Y|=32),Y+=31-Y%31,F.status=O,Q(F,Y),F.strstart!==0&&(Q(F,P.adler>>>16),Q(F,65535&P.adler)),P.adler=1}if(F.status===69)if(F.gzhead.extra){for(se=F.pending;F.gzindex<(65535&F.gzhead.extra.length)&&(F.pending!==F.pending_buf_size||(F.gzhead.hcrc&&F.pending>se&&(P.adler=p(P.adler,F.pending_buf,F.pending-se,se)),N(P),se=F.pending,F.pending!==F.pending_buf_size));)C(F,255&F.gzhead.extra[F.gzindex]),F.gzindex++;F.gzhead.hcrc&&F.pending>se&&(P.adler=p(P.adler,F.pending_buf,F.pending-se,se)),F.gzindex===F.gzhead.extra.length&&(F.gzindex=0,F.status=73)}else F.status=73;if(F.status===73)if(F.gzhead.name){se=F.pending;do{if(F.pending===F.pending_buf_size&&(F.gzhead.hcrc&&F.pending>se&&(P.adler=p(P.adler,F.pending_buf,F.pending-se,se)),N(P),se=F.pending,F.pending===F.pending_buf_size)){W=1;break}W=F.gzindex<F.gzhead.name.length?255&F.gzhead.name.charCodeAt(F.gzindex++):0,C(F,W)}while(W!==0);F.gzhead.hcrc&&F.pending>se&&(P.adler=p(P.adler,F.pending_buf,F.pending-se,se)),W===0&&(F.gzindex=0,F.status=91)}else F.status=91;if(F.status===91)if(F.gzhead.comment){se=F.pending;do{if(F.pending===F.pending_buf_size&&(F.gzhead.hcrc&&F.pending>se&&(P.adler=p(P.adler,F.pending_buf,F.pending-se,se)),N(P),se=F.pending,F.pending===F.pending_buf_size)){W=1;break}W=F.gzindex<F.gzhead.comment.length?255&F.gzhead.comment.charCodeAt(F.gzindex++):0,C(F,W)}while(W!==0);F.gzhead.hcrc&&F.pending>se&&(P.adler=p(P.adler,F.pending_buf,F.pending-se,se)),W===0&&(F.status=b)}else F.status=b;if(F.status===b&&(F.gzhead.hcrc?(F.pending+2>F.pending_buf_size&&N(P),F.pending+2<=F.pending_buf_size&&(C(F,255&P.adler),C(F,P.adler>>8&255),P.adler=0,F.status=O)):F.status=O),F.pending!==0){if(N(P),P.avail_out===0)return F.last_flush=-1,0}else if(P.avail_in===0&&S(D)<=S(H)&&D!==4)return _(P,-5);if(F.status===v&&P.avail_in!==0)return _(P,-5);if(P.avail_in!==0||F.lookahead!==0||D!==0&&F.status!==v){var ee=F.strategy===2?function(re,ie){for(var V;;){if(re.lookahead===0&&(B(re),re.lookahead===0)){if(ie===0)return 1;break}if(re.match_length=0,V=h._tr_tally(re,0,re.window[re.strstart]),re.lookahead--,re.strstart++,V&&(T(re,!1),re.strm.avail_out===0))return 1}return re.insert=0,ie===4?(T(re,!0),re.strm.avail_out===0?3:4):re.last_lit&&(T(re,!1),re.strm.avail_out===0)?1:2}(F,D):F.strategy===3?function(re,ie){for(var V,E,$,X,ue=re.window;;){if(re.lookahead<=y){if(B(re),re.lookahead<=y&&ie===0)return 1;if(re.lookahead===0)break}if(re.match_length=0,re.lookahead>=3&&re.strstart>0&&(E=ue[$=re.strstart-1])===ue[++$]&&E===ue[++$]&&E===ue[++$]){X=re.strstart+y;do;while(E===ue[++$]&&E===ue[++$]&&E===ue[++$]&&E===ue[++$]&&E===ue[++$]&&E===ue[++$]&&E===ue[++$]&&E===ue[++$]&&$<X);re.match_length=y-(X-$),re.match_length>re.lookahead&&(re.match_length=re.lookahead)}if(re.match_length>=3?(V=h._tr_tally(re,1,re.match_length-3),re.lookahead-=re.match_length,re.strstart+=re.match_length,re.match_length=0):(V=h._tr_tally(re,0,re.window[re.strstart]),re.lookahead--,re.strstart++),V&&(T(re,!1),re.strm.avail_out===0))return 1}return re.insert=0,ie===4?(T(re,!0),re.strm.avail_out===0?3:4):re.last_lit&&(T(re,!1),re.strm.avail_out===0)?1:2}(F,D):c[F.level].func(F,D);if(ee!==3&&ee!==4||(F.status=v),ee===1||ee===3)return P.avail_out===0&&(F.last_flush=-1),0;if(ee===2&&(D===1?h._tr_align(F):D!==5&&(h._tr_stored_block(F,0,0,!1),D===3&&(R(F.head),F.lookahead===0&&(F.strstart=0,F.block_start=0,F.insert=0))),N(P),P.avail_out===0))return F.last_flush=-1,0}return D!==4?0:F.wrap<=0?1:(F.wrap===2?(C(F,255&P.adler),C(F,P.adler>>8&255),C(F,P.adler>>16&255),C(F,P.adler>>24&255),C(F,255&P.total_in),C(F,P.total_in>>8&255),C(F,P.total_in>>16&255),C(F,P.total_in>>24&255)):(Q(F,P.adler>>>16),Q(F,65535&P.adler)),N(P),F.wrap>0&&(F.wrap=-F.wrap),F.pending!==0?0:1)},a.deflateEnd=function(P){var D;return P&&P.state?(D=P.state.status)!==42&&D!==69&&D!==73&&D!==91&&D!==b&&D!==O&&D!==v?_(P,m):(P.state=null,D===O?_(P,-3):0):m},a.deflateSetDictionary=function(P,D){var H,F,se,W,Y,ee,re,ie,V=D.length;if(!P||!P.state||(W=(H=P.state).wrap)===2||W===1&&H.status!==42||H.lookahead)return m;for(W===1&&(P.adler=f(P.adler,D,V,0)),H.wrap=0,V>=H.w_size&&(W===0&&(R(H.head),H.strstart=0,H.block_start=0,H.insert=0),ie=new u.Buf8(H.w_size),u.arraySet(ie,D,V-H.w_size,H.w_size,0),D=ie,V=H.w_size),Y=P.avail_in,ee=P.next_in,re=P.input,P.avail_in=V,P.next_in=0,P.input=D,B(H);H.lookahead>=3;){F=H.strstart,se=H.lookahead-2;do H.ins_h=(H.ins_h<<H.hash_shift^H.window[F+3-1])&H.hash_mask,H.prev[F&H.w_mask]=H.head[H.ins_h],H.head[H.ins_h]=F,F++;while(--se);H.strstart=F,H.lookahead=2,B(H)}return H.strstart+=H.lookahead,H.block_start=H.strstart,H.insert=H.lookahead,H.lookahead=0,H.match_length=H.prev_length=2,H.match_available=0,P.next_in=ee,P.input=re,P.avail_in=Y,H.wrap=W,0},a.deflateInfo="pako deflate (from Nodeca project)"},2401:o=>{o.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},4264:o=>{o.exports=function(a,l){var c,u,h,f,p,d,m,y,w,b,O,v,_,S,R,N,T,C,Q,I,B,k,j,ne,Z;c=a.state,u=a.next_in,ne=a.input,h=u+(a.avail_in-5),f=a.next_out,Z=a.output,p=f-(l-a.avail_out),d=f+(a.avail_out-257),m=c.dmax,y=c.wsize,w=c.whave,b=c.wnext,O=c.window,v=c.hold,_=c.bits,S=c.lencode,R=c.distcode,N=(1<<c.lenbits)-1,T=(1<<c.distbits)-1;e:do{_<15&&(v+=ne[u++]<<_,_+=8,v+=ne[u++]<<_,_+=8),C=S[v&N];t:for(;;){if(v>>>=Q=C>>>24,_-=Q,(Q=C>>>16&255)==0)Z[f++]=65535&C;else{if(!(16&Q)){if((64&Q)==0){C=S[(65535&C)+(v&(1<<Q)-1)];continue t}if(32&Q){c.mode=12;break e}a.msg="invalid literal/length code",c.mode=30;break e}I=65535&C,(Q&=15)&&(_<Q&&(v+=ne[u++]<<_,_+=8),I+=v&(1<<Q)-1,v>>>=Q,_-=Q),_<15&&(v+=ne[u++]<<_,_+=8,v+=ne[u++]<<_,_+=8),C=R[v&T];n:for(;;){if(v>>>=Q=C>>>24,_-=Q,!(16&(Q=C>>>16&255))){if((64&Q)==0){C=R[(65535&C)+(v&(1<<Q)-1)];continue n}a.msg="invalid distance code",c.mode=30;break e}if(B=65535&C,_<(Q&=15)&&(v+=ne[u++]<<_,(_+=8)<Q&&(v+=ne[u++]<<_,_+=8)),(B+=v&(1<<Q)-1)>m){a.msg="invalid distance too far back",c.mode=30;break e}if(v>>>=Q,_-=Q,B>(Q=f-p)){if((Q=B-Q)>w&&c.sane){a.msg="invalid distance too far back",c.mode=30;break e}if(k=0,j=O,b===0){if(k+=y-Q,Q<I){I-=Q;do Z[f++]=O[k++];while(--Q);k=f-B,j=Z}}else if(b<Q){if(k+=y+b-Q,(Q-=b)<I){I-=Q;do Z[f++]=O[k++];while(--Q);if(k=0,b<I){I-=Q=b;do Z[f++]=O[k++];while(--Q);k=f-B,j=Z}}}else if(k+=b-Q,Q<I){I-=Q;do Z[f++]=O[k++];while(--Q);k=f-B,j=Z}for(;I>2;)Z[f++]=j[k++],Z[f++]=j[k++],Z[f++]=j[k++],I-=3;I&&(Z[f++]=j[k++],I>1&&(Z[f++]=j[k++]))}else{k=f-B;do Z[f++]=Z[k++],Z[f++]=Z[k++],Z[f++]=Z[k++],I-=3;while(I>2);I&&(Z[f++]=Z[k++],I>1&&(Z[f++]=Z[k++]))}break}}break}}while(u<h&&f<d);u-=I=_>>3,v&=(1<<(_-=I<<3))-1,a.next_in=u,a.next_out=f,a.avail_in=u<h?h-u+5:5-(u-h),a.avail_out=f<d?d-f+257:257-(f-d),c.hold=v,c.bits=_}},7948:(o,a,l)=>{var c=l(4236),u=l(6069),h=l(2869),f=l(4264),p=l(9241),d=-2,m=12,y=30;function w(I){return(I>>>24&255)+(I>>>8&65280)+((65280&I)<<8)+((255&I)<<24)}function b(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new c.Buf16(320),this.work=new c.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function O(I){var B;return I&&I.state?(B=I.state,I.total_in=I.total_out=B.total=0,I.msg="",B.wrap&&(I.adler=1&B.wrap),B.mode=1,B.last=0,B.havedict=0,B.dmax=32768,B.head=null,B.hold=0,B.bits=0,B.lencode=B.lendyn=new c.Buf32(852),B.distcode=B.distdyn=new c.Buf32(592),B.sane=1,B.back=-1,0):d}function v(I){var B;return I&&I.state?((B=I.state).wsize=0,B.whave=0,B.wnext=0,O(I)):d}function _(I,B){var k,j;return I&&I.state?(j=I.state,B<0?(k=0,B=-B):(k=1+(B>>4),B<48&&(B&=15)),B&&(B<8||B>15)?d:(j.window!==null&&j.wbits!==B&&(j.window=null),j.wrap=k,j.wbits=B,v(I))):d}function S(I,B){var k,j;return I?(j=new b,I.state=j,j.window=null,(k=_(I,B))!==0&&(I.state=null),k):d}var R,N,T=!0;function C(I){if(T){var B;for(R=new c.Buf32(512),N=new c.Buf32(32),B=0;B<144;)I.lens[B++]=8;for(;B<256;)I.lens[B++]=9;for(;B<280;)I.lens[B++]=7;for(;B<288;)I.lens[B++]=8;for(p(1,I.lens,0,288,R,0,I.work,{bits:9}),B=0;B<32;)I.lens[B++]=5;p(2,I.lens,0,32,N,0,I.work,{bits:5}),T=!1}I.lencode=R,I.lenbits=9,I.distcode=N,I.distbits=5}function Q(I,B,k,j){var ne,Z=I.state;return Z.window===null&&(Z.wsize=1<<Z.wbits,Z.wnext=0,Z.whave=0,Z.window=new c.Buf8(Z.wsize)),j>=Z.wsize?(c.arraySet(Z.window,B,k-Z.wsize,Z.wsize,0),Z.wnext=0,Z.whave=Z.wsize):((ne=Z.wsize-Z.wnext)>j&&(ne=j),c.arraySet(Z.window,B,k-j,ne,Z.wnext),(j-=ne)?(c.arraySet(Z.window,B,k-j,j,0),Z.wnext=j,Z.whave=Z.wsize):(Z.wnext+=ne,Z.wnext===Z.wsize&&(Z.wnext=0),Z.whave<Z.wsize&&(Z.whave+=ne))),0}a.inflateReset=v,a.inflateReset2=_,a.inflateResetKeep=O,a.inflateInit=function(I){return S(I,15)},a.inflateInit2=S,a.inflate=function(I,B){var k,j,ne,Z,le,oe,pe,P,D,H,F,se,W,Y,ee,re,ie,V,E,$,X,ue,ye,Re,ge=0,we=new c.Buf8(4),Ne=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!I||!I.state||!I.output||!I.input&&I.avail_in!==0)return d;(k=I.state).mode===m&&(k.mode=13),le=I.next_out,ne=I.output,pe=I.avail_out,Z=I.next_in,j=I.input,oe=I.avail_in,P=k.hold,D=k.bits,H=oe,F=pe,ue=0;e:for(;;)switch(k.mode){case 1:if(k.wrap===0){k.mode=13;break}for(;D<16;){if(oe===0)break e;oe--,P+=j[Z++]<<D,D+=8}if(2&k.wrap&&P===35615){k.check=0,we[0]=255&P,we[1]=P>>>8&255,k.check=h(k.check,we,2,0),P=0,D=0,k.mode=2;break}if(k.flags=0,k.head&&(k.head.done=!1),!(1&k.wrap)||(((255&P)<<8)+(P>>8))%31){I.msg="incorrect header check",k.mode=y;break}if((15&P)!=8){I.msg="unknown compression method",k.mode=y;break}if(D-=4,X=8+(15&(P>>>=4)),k.wbits===0)k.wbits=X;else if(X>k.wbits){I.msg="invalid window size",k.mode=y;break}k.dmax=1<<X,I.adler=k.check=1,k.mode=512&P?10:m,P=0,D=0;break;case 2:for(;D<16;){if(oe===0)break e;oe--,P+=j[Z++]<<D,D+=8}if(k.flags=P,(255&k.flags)!=8){I.msg="unknown compression method",k.mode=y;break}if(57344&k.flags){I.msg="unknown header flags set",k.mode=y;break}k.head&&(k.head.text=P>>8&1),512&k.flags&&(we[0]=255&P,we[1]=P>>>8&255,k.check=h(k.check,we,2,0)),P=0,D=0,k.mode=3;case 3:for(;D<32;){if(oe===0)break e;oe--,P+=j[Z++]<<D,D+=8}k.head&&(k.head.time=P),512&k.flags&&(we[0]=255&P,we[1]=P>>>8&255,we[2]=P>>>16&255,we[3]=P>>>24&255,k.check=h(k.check,we,4,0)),P=0,D=0,k.mode=4;case 4:for(;D<16;){if(oe===0)break e;oe--,P+=j[Z++]<<D,D+=8}k.head&&(k.head.xflags=255&P,k.head.os=P>>8),512&k.flags&&(we[0]=255&P,we[1]=P>>>8&255,k.check=h(k.check,we,2,0)),P=0,D=0,k.mode=5;case 5:if(1024&k.flags){for(;D<16;){if(oe===0)break e;oe--,P+=j[Z++]<<D,D+=8}k.length=P,k.head&&(k.head.extra_len=P),512&k.flags&&(we[0]=255&P,we[1]=P>>>8&255,k.check=h(k.check,we,2,0)),P=0,D=0}else k.head&&(k.head.extra=null);k.mode=6;case 6:if(1024&k.flags&&((se=k.length)>oe&&(se=oe),se&&(k.head&&(X=k.head.extra_len-k.length,k.head.extra||(k.head.extra=new Array(k.head.extra_len)),c.arraySet(k.head.extra,j,Z,se,X)),512&k.flags&&(k.check=h(k.check,j,se,Z)),oe-=se,Z+=se,k.length-=se),k.length))break e;k.length=0,k.mode=7;case 7:if(2048&k.flags){if(oe===0)break e;se=0;do X=j[Z+se++],k.head&&X&&k.length<65536&&(k.head.name+=String.fromCharCode(X));while(X&&se<oe);if(512&k.flags&&(k.check=h(k.check,j,se,Z)),oe-=se,Z+=se,X)break e}else k.head&&(k.head.name=null);k.length=0,k.mode=8;case 8:if(4096&k.flags){if(oe===0)break e;se=0;do X=j[Z+se++],k.head&&X&&k.length<65536&&(k.head.comment+=String.fromCharCode(X));while(X&&se<oe);if(512&k.flags&&(k.check=h(k.check,j,se,Z)),oe-=se,Z+=se,X)break e}else k.head&&(k.head.comment=null);k.mode=9;case 9:if(512&k.flags){for(;D<16;){if(oe===0)break e;oe--,P+=j[Z++]<<D,D+=8}if(P!==(65535&k.check)){I.msg="header crc mismatch",k.mode=y;break}P=0,D=0}k.head&&(k.head.hcrc=k.flags>>9&1,k.head.done=!0),I.adler=k.check=0,k.mode=m;break;case 10:for(;D<32;){if(oe===0)break e;oe--,P+=j[Z++]<<D,D+=8}I.adler=k.check=w(P),P=0,D=0,k.mode=11;case 11:if(k.havedict===0)return I.next_out=le,I.avail_out=pe,I.next_in=Z,I.avail_in=oe,k.hold=P,k.bits=D,2;I.adler=k.check=1,k.mode=m;case m:if(B===5||B===6)break e;case 13:if(k.last){P>>>=7&D,D-=7&D,k.mode=27;break}for(;D<3;){if(oe===0)break e;oe--,P+=j[Z++]<<D,D+=8}switch(k.last=1&P,D-=1,3&(P>>>=1)){case 0:k.mode=14;break;case 1:if(C(k),k.mode=20,B===6){P>>>=2,D-=2;break e}break;case 2:k.mode=17;break;case 3:I.msg="invalid block type",k.mode=y}P>>>=2,D-=2;break;case 14:for(P>>>=7&D,D-=7&D;D<32;){if(oe===0)break e;oe--,P+=j[Z++]<<D,D+=8}if((65535&P)!=(P>>>16^65535)){I.msg="invalid stored block lengths",k.mode=y;break}if(k.length=65535&P,P=0,D=0,k.mode=15,B===6)break e;case 15:k.mode=16;case 16:if(se=k.length){if(se>oe&&(se=oe),se>pe&&(se=pe),se===0)break e;c.arraySet(ne,j,Z,se,le),oe-=se,Z+=se,pe-=se,le+=se,k.length-=se;break}k.mode=m;break;case 17:for(;D<14;){if(oe===0)break e;oe--,P+=j[Z++]<<D,D+=8}if(k.nlen=257+(31&P),P>>>=5,D-=5,k.ndist=1+(31&P),P>>>=5,D-=5,k.ncode=4+(15&P),P>>>=4,D-=4,k.nlen>286||k.ndist>30){I.msg="too many length or distance symbols",k.mode=y;break}k.have=0,k.mode=18;case 18:for(;k.have<k.ncode;){for(;D<3;){if(oe===0)break e;oe--,P+=j[Z++]<<D,D+=8}k.lens[Ne[k.have++]]=7&P,P>>>=3,D-=3}for(;k.have<19;)k.lens[Ne[k.have++]]=0;if(k.lencode=k.lendyn,k.lenbits=7,ye={bits:k.lenbits},ue=p(0,k.lens,0,19,k.lencode,0,k.work,ye),k.lenbits=ye.bits,ue){I.msg="invalid code lengths set",k.mode=y;break}k.have=0,k.mode=19;case 19:for(;k.have<k.nlen+k.ndist;){for(;re=(ge=k.lencode[P&(1<<k.lenbits)-1])>>>16&255,ie=65535&ge,!((ee=ge>>>24)<=D);){if(oe===0)break e;oe--,P+=j[Z++]<<D,D+=8}if(ie<16)P>>>=ee,D-=ee,k.lens[k.have++]=ie;else{if(ie===16){for(Re=ee+2;D<Re;){if(oe===0)break e;oe--,P+=j[Z++]<<D,D+=8}if(P>>>=ee,D-=ee,k.have===0){I.msg="invalid bit length repeat",k.mode=y;break}X=k.lens[k.have-1],se=3+(3&P),P>>>=2,D-=2}else if(ie===17){for(Re=ee+3;D<Re;){if(oe===0)break e;oe--,P+=j[Z++]<<D,D+=8}D-=ee,X=0,se=3+(7&(P>>>=ee)),P>>>=3,D-=3}else{for(Re=ee+7;D<Re;){if(oe===0)break e;oe--,P+=j[Z++]<<D,D+=8}D-=ee,X=0,se=11+(127&(P>>>=ee)),P>>>=7,D-=7}if(k.have+se>k.nlen+k.ndist){I.msg="invalid bit length repeat",k.mode=y;break}for(;se--;)k.lens[k.have++]=X}}if(k.mode===y)break;if(k.lens[256]===0){I.msg="invalid code -- missing end-of-block",k.mode=y;break}if(k.lenbits=9,ye={bits:k.lenbits},ue=p(1,k.lens,0,k.nlen,k.lencode,0,k.work,ye),k.lenbits=ye.bits,ue){I.msg="invalid literal/lengths set",k.mode=y;break}if(k.distbits=6,k.distcode=k.distdyn,ye={bits:k.distbits},ue=p(2,k.lens,k.nlen,k.ndist,k.distcode,0,k.work,ye),k.distbits=ye.bits,ue){I.msg="invalid distances set",k.mode=y;break}if(k.mode=20,B===6)break e;case 20:k.mode=21;case 21:if(oe>=6&&pe>=258){I.next_out=le,I.avail_out=pe,I.next_in=Z,I.avail_in=oe,k.hold=P,k.bits=D,f(I,F),le=I.next_out,ne=I.output,pe=I.avail_out,Z=I.next_in,j=I.input,oe=I.avail_in,P=k.hold,D=k.bits,k.mode===m&&(k.back=-1);break}for(k.back=0;re=(ge=k.lencode[P&(1<<k.lenbits)-1])>>>16&255,ie=65535&ge,!((ee=ge>>>24)<=D);){if(oe===0)break e;oe--,P+=j[Z++]<<D,D+=8}if(re&&(240&re)==0){for(V=ee,E=re,$=ie;re=(ge=k.lencode[$+((P&(1<<V+E)-1)>>V)])>>>16&255,ie=65535&ge,!(V+(ee=ge>>>24)<=D);){if(oe===0)break e;oe--,P+=j[Z++]<<D,D+=8}P>>>=V,D-=V,k.back+=V}if(P>>>=ee,D-=ee,k.back+=ee,k.length=ie,re===0){k.mode=26;break}if(32&re){k.back=-1,k.mode=m;break}if(64&re){I.msg="invalid literal/length code",k.mode=y;break}k.extra=15&re,k.mode=22;case 22:if(k.extra){for(Re=k.extra;D<Re;){if(oe===0)break e;oe--,P+=j[Z++]<<D,D+=8}k.length+=P&(1<<k.extra)-1,P>>>=k.extra,D-=k.extra,k.back+=k.extra}k.was=k.length,k.mode=23;case 23:for(;re=(ge=k.distcode[P&(1<<k.distbits)-1])>>>16&255,ie=65535&ge,!((ee=ge>>>24)<=D);){if(oe===0)break e;oe--,P+=j[Z++]<<D,D+=8}if((240&re)==0){for(V=ee,E=re,$=ie;re=(ge=k.distcode[$+((P&(1<<V+E)-1)>>V)])>>>16&255,ie=65535&ge,!(V+(ee=ge>>>24)<=D);){if(oe===0)break e;oe--,P+=j[Z++]<<D,D+=8}P>>>=V,D-=V,k.back+=V}if(P>>>=ee,D-=ee,k.back+=ee,64&re){I.msg="invalid distance code",k.mode=y;break}k.offset=ie,k.extra=15&re,k.mode=24;case 24:if(k.extra){for(Re=k.extra;D<Re;){if(oe===0)break e;oe--,P+=j[Z++]<<D,D+=8}k.offset+=P&(1<<k.extra)-1,P>>>=k.extra,D-=k.extra,k.back+=k.extra}if(k.offset>k.dmax){I.msg="invalid distance too far back",k.mode=y;break}k.mode=25;case 25:if(pe===0)break e;if(se=F-pe,k.offset>se){if((se=k.offset-se)>k.whave&&k.sane){I.msg="invalid distance too far back",k.mode=y;break}se>k.wnext?(se-=k.wnext,W=k.wsize-se):W=k.wnext-se,se>k.length&&(se=k.length),Y=k.window}else Y=ne,W=le-k.offset,se=k.length;se>pe&&(se=pe),pe-=se,k.length-=se;do ne[le++]=Y[W++];while(--se);k.length===0&&(k.mode=21);break;case 26:if(pe===0)break e;ne[le++]=k.length,pe--,k.mode=21;break;case 27:if(k.wrap){for(;D<32;){if(oe===0)break e;oe--,P|=j[Z++]<<D,D+=8}if(F-=pe,I.total_out+=F,k.total+=F,F&&(I.adler=k.check=k.flags?h(k.check,ne,F,le-F):u(k.check,ne,F,le-F)),F=pe,(k.flags?P:w(P))!==k.check){I.msg="incorrect data check",k.mode=y;break}P=0,D=0}k.mode=28;case 28:if(k.wrap&&k.flags){for(;D<32;){if(oe===0)break e;oe--,P+=j[Z++]<<D,D+=8}if(P!==(4294967295&k.total)){I.msg="incorrect length check",k.mode=y;break}P=0,D=0}k.mode=29;case 29:ue=1;break e;case y:ue=-3;break e;case 31:return-4;default:return d}return I.next_out=le,I.avail_out=pe,I.next_in=Z,I.avail_in=oe,k.hold=P,k.bits=D,(k.wsize||F!==I.avail_out&&k.mode<y&&(k.mode<27||B!==4))&&Q(I,I.output,I.next_out,F-I.avail_out)?(k.mode=31,-4):(H-=I.avail_in,F-=I.avail_out,I.total_in+=H,I.total_out+=F,k.total+=F,k.wrap&&F&&(I.adler=k.check=k.flags?h(k.check,ne,F,I.next_out-F):u(k.check,ne,F,I.next_out-F)),I.data_type=k.bits+(k.last?64:0)+(k.mode===m?128:0)+(k.mode===20||k.mode===15?256:0),(H===0&&F===0||B===4)&&ue===0&&(ue=-5),ue)},a.inflateEnd=function(I){if(!I||!I.state)return d;var B=I.state;return B.window&&(B.window=null),I.state=null,0},a.inflateGetHeader=function(I,B){var k;return I&&I.state?(2&(k=I.state).wrap)==0?d:(k.head=B,B.done=!1,0):d},a.inflateSetDictionary=function(I,B){var k,j=B.length;return I&&I.state?(k=I.state).wrap!==0&&k.mode!==11?d:k.mode===11&&u(1,B,j,0)!==k.check?-3:Q(I,B,j,j)?(k.mode=31,-4):(k.havedict=1,0):d},a.inflateInfo="pako inflate (from Nodeca project)"},9241:(o,a,l)=>{var c=l(4236),u=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],h=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],f=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],p=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];o.exports=function(d,m,y,w,b,O,v,_){var S,R,N,T,C,Q,I,B,k,j=_.bits,ne=0,Z=0,le=0,oe=0,pe=0,P=0,D=0,H=0,F=0,se=0,W=null,Y=0,ee=new c.Buf16(16),re=new c.Buf16(16),ie=null,V=0;for(ne=0;ne<=15;ne++)ee[ne]=0;for(Z=0;Z<w;Z++)ee[m[y+Z]]++;for(pe=j,oe=15;oe>=1&&ee[oe]===0;oe--);if(pe>oe&&(pe=oe),oe===0)return b[O++]=20971520,b[O++]=20971520,_.bits=1,0;for(le=1;le<oe&&ee[le]===0;le++);for(pe<le&&(pe=le),H=1,ne=1;ne<=15;ne++)if(H<<=1,(H-=ee[ne])<0)return-1;if(H>0&&(d===0||oe!==1))return-1;for(re[1]=0,ne=1;ne<15;ne++)re[ne+1]=re[ne]+ee[ne];for(Z=0;Z<w;Z++)m[y+Z]!==0&&(v[re[m[y+Z]]++]=Z);if(d===0?(W=ie=v,Q=19):d===1?(W=u,Y-=257,ie=h,V-=257,Q=256):(W=f,ie=p,Q=-1),se=0,Z=0,ne=le,C=O,P=pe,D=0,N=-1,T=(F=1<<pe)-1,d===1&&F>852||d===2&&F>592)return 1;for(;;){I=ne-D,v[Z]<Q?(B=0,k=v[Z]):v[Z]>Q?(B=ie[V+v[Z]],k=W[Y+v[Z]]):(B=96,k=0),S=1<<ne-D,le=R=1<<P;do b[C+(se>>D)+(R-=S)]=I<<24|B<<16|k|0;while(R!==0);for(S=1<<ne-1;se&S;)S>>=1;if(S!==0?(se&=S-1,se+=S):se=0,Z++,--ee[ne]==0){if(ne===oe)break;ne=m[y+v[Z]]}if(ne>pe&&(se&T)!==N){for(D===0&&(D=pe),C+=le,H=1<<(P=ne-D);P+D<oe&&!((H-=ee[P+D])<=0);)P++,H<<=1;if(F+=1<<P,d===1&&F>852||d===2&&F>592)return 1;b[N=se&T]=pe<<24|P<<16|C-O|0}}return se!==0&&(b[C+se]=ne-D<<24|4194304|0),_.bits=pe,0}},8898:o=>{o.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},342:(o,a,l)=>{var c=l(4236);function u(W){for(var Y=W.length;--Y>=0;)W[Y]=0}var h=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],f=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],p=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],d=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],m=new Array(576);u(m);var y=new Array(60);u(y);var w=new Array(512);u(w);var b=new Array(256);u(b);var O=new Array(29);u(O);var v,_,S,R=new Array(30);function N(W,Y,ee,re,ie){this.static_tree=W,this.extra_bits=Y,this.extra_base=ee,this.elems=re,this.max_length=ie,this.has_stree=W&&W.length}function T(W,Y){this.dyn_tree=W,this.max_code=0,this.stat_desc=Y}function C(W){return W<256?w[W]:w[256+(W>>>7)]}function Q(W,Y){W.pending_buf[W.pending++]=255&Y,W.pending_buf[W.pending++]=Y>>>8&255}function I(W,Y,ee){W.bi_valid>16-ee?(W.bi_buf|=Y<<W.bi_valid&65535,Q(W,W.bi_buf),W.bi_buf=Y>>16-W.bi_valid,W.bi_valid+=ee-16):(W.bi_buf|=Y<<W.bi_valid&65535,W.bi_valid+=ee)}function B(W,Y,ee){I(W,ee[2*Y],ee[2*Y+1])}function k(W,Y){var ee=0;do ee|=1&W,W>>>=1,ee<<=1;while(--Y>0);return ee>>>1}function j(W,Y,ee){var re,ie,V=new Array(16),E=0;for(re=1;re<=15;re++)V[re]=E=E+ee[re-1]<<1;for(ie=0;ie<=Y;ie++){var $=W[2*ie+1];$!==0&&(W[2*ie]=k(V[$]++,$))}}function ne(W){var Y;for(Y=0;Y<286;Y++)W.dyn_ltree[2*Y]=0;for(Y=0;Y<30;Y++)W.dyn_dtree[2*Y]=0;for(Y=0;Y<19;Y++)W.bl_tree[2*Y]=0;W.dyn_ltree[512]=1,W.opt_len=W.static_len=0,W.last_lit=W.matches=0}function Z(W){W.bi_valid>8?Q(W,W.bi_buf):W.bi_valid>0&&(W.pending_buf[W.pending++]=W.bi_buf),W.bi_buf=0,W.bi_valid=0}function le(W,Y,ee,re){var ie=2*Y,V=2*ee;return W[ie]<W[V]||W[ie]===W[V]&&re[Y]<=re[ee]}function oe(W,Y,ee){for(var re=W.heap[ee],ie=ee<<1;ie<=W.heap_len&&(ie<W.heap_len&&le(Y,W.heap[ie+1],W.heap[ie],W.depth)&&ie++,!le(Y,re,W.heap[ie],W.depth));)W.heap[ee]=W.heap[ie],ee=ie,ie<<=1;W.heap[ee]=re}function pe(W,Y,ee){var re,ie,V,E,$=0;if(W.last_lit!==0)do re=W.pending_buf[W.d_buf+2*$]<<8|W.pending_buf[W.d_buf+2*$+1],ie=W.pending_buf[W.l_buf+$],$++,re===0?B(W,ie,Y):(B(W,(V=b[ie])+256+1,Y),(E=h[V])!==0&&I(W,ie-=O[V],E),B(W,V=C(--re),ee),(E=f[V])!==0&&I(W,re-=R[V],E));while($<W.last_lit);B(W,256,Y)}function P(W,Y){var ee,re,ie,V=Y.dyn_tree,E=Y.stat_desc.static_tree,$=Y.stat_desc.has_stree,X=Y.stat_desc.elems,ue=-1;for(W.heap_len=0,W.heap_max=573,ee=0;ee<X;ee++)V[2*ee]!==0?(W.heap[++W.heap_len]=ue=ee,W.depth[ee]=0):V[2*ee+1]=0;for(;W.heap_len<2;)V[2*(ie=W.heap[++W.heap_len]=ue<2?++ue:0)]=1,W.depth[ie]=0,W.opt_len--,$&&(W.static_len-=E[2*ie+1]);for(Y.max_code=ue,ee=W.heap_len>>1;ee>=1;ee--)oe(W,V,ee);ie=X;do ee=W.heap[1],W.heap[1]=W.heap[W.heap_len--],oe(W,V,1),re=W.heap[1],W.heap[--W.heap_max]=ee,W.heap[--W.heap_max]=re,V[2*ie]=V[2*ee]+V[2*re],W.depth[ie]=(W.depth[ee]>=W.depth[re]?W.depth[ee]:W.depth[re])+1,V[2*ee+1]=V[2*re+1]=ie,W.heap[1]=ie++,oe(W,V,1);while(W.heap_len>=2);W.heap[--W.heap_max]=W.heap[1],function(ye,Re){var ge,we,Ne,$e,Be,Ce,A=Re.dyn_tree,L=Re.max_code,q=Re.stat_desc.static_tree,te=Re.stat_desc.has_stree,ae=Re.stat_desc.extra_bits,ce=Re.stat_desc.extra_base,fe=Re.stat_desc.max_length,Ie=0;for($e=0;$e<=15;$e++)ye.bl_count[$e]=0;for(A[2*ye.heap[ye.heap_max]+1]=0,ge=ye.heap_max+1;ge<573;ge++)($e=A[2*A[2*(we=ye.heap[ge])+1]+1]+1)>fe&&($e=fe,Ie++),A[2*we+1]=$e,we>L||(ye.bl_count[$e]++,Be=0,we>=ce&&(Be=ae[we-ce]),Ce=A[2*we],ye.opt_len+=Ce*($e+Be),te&&(ye.static_len+=Ce*(q[2*we+1]+Be)));if(Ie!==0){do{for($e=fe-1;ye.bl_count[$e]===0;)$e--;ye.bl_count[$e]--,ye.bl_count[$e+1]+=2,ye.bl_count[fe]--,Ie-=2}while(Ie>0);for($e=fe;$e!==0;$e--)for(we=ye.bl_count[$e];we!==0;)(Ne=ye.heap[--ge])>L||(A[2*Ne+1]!==$e&&(ye.opt_len+=($e-A[2*Ne+1])*A[2*Ne],A[2*Ne+1]=$e),we--)}}(W,Y),j(V,ue,W.bl_count)}function D(W,Y,ee){var re,ie,V=-1,E=Y[1],$=0,X=7,ue=4;for(E===0&&(X=138,ue=3),Y[2*(ee+1)+1]=65535,re=0;re<=ee;re++)ie=E,E=Y[2*(re+1)+1],++$<X&&ie===E||($<ue?W.bl_tree[2*ie]+=$:ie!==0?(ie!==V&&W.bl_tree[2*ie]++,W.bl_tree[32]++):$<=10?W.bl_tree[34]++:W.bl_tree[36]++,$=0,V=ie,E===0?(X=138,ue=3):ie===E?(X=6,ue=3):(X=7,ue=4))}function H(W,Y,ee){var re,ie,V=-1,E=Y[1],$=0,X=7,ue=4;for(E===0&&(X=138,ue=3),re=0;re<=ee;re++)if(ie=E,E=Y[2*(re+1)+1],!(++$<X&&ie===E)){if($<ue)do B(W,ie,W.bl_tree);while(--$!=0);else ie!==0?(ie!==V&&(B(W,ie,W.bl_tree),$--),B(W,16,W.bl_tree),I(W,$-3,2)):$<=10?(B(W,17,W.bl_tree),I(W,$-3,3)):(B(W,18,W.bl_tree),I(W,$-11,7));$=0,V=ie,E===0?(X=138,ue=3):ie===E?(X=6,ue=3):(X=7,ue=4)}}u(R);var F=!1;function se(W,Y,ee,re){I(W,0+(re?1:0),3),function(ie,V,E,$){Z(ie),Q(ie,E),Q(ie,~E),c.arraySet(ie.pending_buf,ie.window,V,E,ie.pending),ie.pending+=E}(W,Y,ee)}a._tr_init=function(W){F||(function(){var Y,ee,re,ie,V,E=new Array(16);for(re=0,ie=0;ie<28;ie++)for(O[ie]=re,Y=0;Y<1<<h[ie];Y++)b[re++]=ie;for(b[re-1]=ie,V=0,ie=0;ie<16;ie++)for(R[ie]=V,Y=0;Y<1<<f[ie];Y++)w[V++]=ie;for(V>>=7;ie<30;ie++)for(R[ie]=V<<7,Y=0;Y<1<<f[ie]-7;Y++)w[256+V++]=ie;for(ee=0;ee<=15;ee++)E[ee]=0;for(Y=0;Y<=143;)m[2*Y+1]=8,Y++,E[8]++;for(;Y<=255;)m[2*Y+1]=9,Y++,E[9]++;for(;Y<=279;)m[2*Y+1]=7,Y++,E[7]++;for(;Y<=287;)m[2*Y+1]=8,Y++,E[8]++;for(j(m,287,E),Y=0;Y<30;Y++)y[2*Y+1]=5,y[2*Y]=k(Y,5);v=new N(m,h,257,286,15),_=new N(y,f,0,30,15),S=new N(new Array(0),p,0,19,7)}(),F=!0),W.l_desc=new T(W.dyn_ltree,v),W.d_desc=new T(W.dyn_dtree,_),W.bl_desc=new T(W.bl_tree,S),W.bi_buf=0,W.bi_valid=0,ne(W)},a._tr_stored_block=se,a._tr_flush_block=function(W,Y,ee,re){var ie,V,E=0;W.level>0?(W.strm.data_type===2&&(W.strm.data_type=function($){var X,ue=4093624447;for(X=0;X<=31;X++,ue>>>=1)if(1&ue&&$.dyn_ltree[2*X]!==0)return 0;if($.dyn_ltree[18]!==0||$.dyn_ltree[20]!==0||$.dyn_ltree[26]!==0)return 1;for(X=32;X<256;X++)if($.dyn_ltree[2*X]!==0)return 1;return 0}(W)),P(W,W.l_desc),P(W,W.d_desc),E=function($){var X;for(D($,$.dyn_ltree,$.l_desc.max_code),D($,$.dyn_dtree,$.d_desc.max_code),P($,$.bl_desc),X=18;X>=3&&$.bl_tree[2*d[X]+1]===0;X--);return $.opt_len+=3*(X+1)+5+5+4,X}(W),ie=W.opt_len+3+7>>>3,(V=W.static_len+3+7>>>3)<=ie&&(ie=V)):ie=V=ee+5,ee+4<=ie&&Y!==-1?se(W,Y,ee,re):W.strategy===4||V===ie?(I(W,2+(re?1:0),3),pe(W,m,y)):(I(W,4+(re?1:0),3),function($,X,ue,ye){var Re;for(I($,X-257,5),I($,ue-1,5),I($,ye-4,4),Re=0;Re<ye;Re++)I($,$.bl_tree[2*d[Re]+1],3);H($,$.dyn_ltree,X-1),H($,$.dyn_dtree,ue-1)}(W,W.l_desc.max_code+1,W.d_desc.max_code+1,E+1),pe(W,W.dyn_ltree,W.dyn_dtree)),ne(W),re&&Z(W)},a._tr_tally=function(W,Y,ee){return W.pending_buf[W.d_buf+2*W.last_lit]=Y>>>8&255,W.pending_buf[W.d_buf+2*W.last_lit+1]=255&Y,W.pending_buf[W.l_buf+W.last_lit]=255&ee,W.last_lit++,Y===0?W.dyn_ltree[2*ee]++:(W.matches++,Y--,W.dyn_ltree[2*(b[ee]+256+1)]++,W.dyn_dtree[2*C(Y)]++),W.last_lit===W.lit_bufsize-1},a._tr_align=function(W){I(W,2,3),B(W,256,m),function(Y){Y.bi_valid===16?(Q(Y,Y.bi_buf),Y.bi_buf=0,Y.bi_valid=0):Y.bi_valid>=8&&(Y.pending_buf[Y.pending++]=255&Y.bi_buf,Y.bi_buf>>=8,Y.bi_valid-=8)}(W)}},2292:o=>{o.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},4155:o=>{var a,l,c=o.exports={};function u(){throw new Error("setTimeout has not been defined")}function h(){throw new Error("clearTimeout has not been defined")}function f(_){if(a===setTimeout)return setTimeout(_,0);if((a===u||!a)&&setTimeout)return a=setTimeout,setTimeout(_,0);try{return a(_,0)}catch{try{return a.call(null,_,0)}catch{return a.call(this,_,0)}}}(function(){try{a=typeof setTimeout=="function"?setTimeout:u}catch{a=u}try{l=typeof clearTimeout=="function"?clearTimeout:h}catch{l=h}})();var p,d=[],m=!1,y=-1;function w(){m&&p&&(m=!1,p.length?d=p.concat(d):y=-1,d.length&&b())}function b(){if(!m){var _=f(w);m=!0;for(var S=d.length;S;){for(p=d,d=[];++y<S;)p&&p[y].run();y=-1,S=d.length}p=null,m=!1,function(R){if(l===clearTimeout)return clearTimeout(R);if((l===h||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(R);try{l(R)}catch{try{return l.call(null,R)}catch{return l.call(this,R)}}}(_)}}function O(_,S){this.fun=_,this.array=S}function v(){}c.nextTick=function(_){var S=new Array(arguments.length-1);if(arguments.length>1)for(var R=1;R<arguments.length;R++)S[R-1]=arguments[R];d.push(new O(_,S)),d.length!==1||m||f(b)},O.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=v,c.addListener=v,c.once=v,c.off=v,c.removeListener=v,c.removeAllListeners=v,c.emit=v,c.prependListener=v,c.prependOnceListener=v,c.listeners=function(_){return[]},c.binding=function(_){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(_){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},9509:(o,a,l)=>{var c=l(8764),u=c.Buffer;function h(p,d){for(var m in p)d[m]=p[m]}function f(p,d,m){return u(p,d,m)}u.from&&u.alloc&&u.allocUnsafe&&u.allocUnsafeSlow?o.exports=c:(h(c,a),a.Buffer=f),h(u,f),f.from=function(p,d,m){if(typeof p=="number")throw new TypeError("Argument must not be a number");return u(p,d,m)},f.alloc=function(p,d,m){if(typeof p!="number")throw new TypeError("Argument must be a number");var y=u(p);return d!==void 0?typeof m=="string"?y.fill(d,m):y.fill(d):y.fill(0),y},f.allocUnsafe=function(p){if(typeof p!="number")throw new TypeError("Argument must be a number");return u(p)},f.allocUnsafeSlow=function(p){if(typeof p!="number")throw new TypeError("Argument must be a number");return c.SlowBuffer(p)}},6099:(o,a,l)=>{(function(c){c.parser=function(V,E){return new f(V,E)},c.SAXParser=f,c.SAXStream=d,c.createStream=function(V,E){return new d(V,E)},c.MAX_BUFFER_LENGTH=65536;var u,h=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function f(V,E){if(!(this instanceof f))return new f(V,E);var $=this;(function(X){for(var ue=0,ye=h.length;ue<ye;ue++)X[h[ue]]=""})($),$.q=$.c="",$.bufferCheckPosition=c.MAX_BUFFER_LENGTH,$.opt=E||{},$.opt.lowercase=$.opt.lowercase||$.opt.lowercasetags,$.looseCase=$.opt.lowercase?"toLowerCase":"toUpperCase",$.tags=[],$.closed=$.closedRoot=$.sawRoot=!1,$.tag=$.error=null,$.strict=!!V,$.noscript=!(!V&&!$.opt.noscript),$.state=k.BEGIN,$.strictEntities=$.opt.strictEntities,$.ENTITIES=$.strictEntities?Object.create(c.XML_ENTITIES):Object.create(c.ENTITIES),$.attribList=[],$.opt.xmlns&&($.ns=Object.create(w)),$.trackPosition=$.opt.position!==!1,$.trackPosition&&($.position=$.line=$.column=0),ne($,"onready")}c.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(V){function E(){}return E.prototype=V,new E}),Object.keys||(Object.keys=function(V){var E=[];for(var $ in V)V.hasOwnProperty($)&&E.push($);return E}),f.prototype={end:function(){P(this)},write:function(V){var E=this;if(this.error)throw this.error;if(E.closed)return pe(E,"Cannot write after close. Assign an onready handler.");if(V===null)return P(E);typeof V=="object"&&(V=V.toString());for(var $=0,X="";X=ie(V,$++),E.c=X,X;)switch(E.trackPosition&&(E.position++,X===`
`?(E.line++,E.column=0):E.column++),E.state){case k.BEGIN:if(E.state=k.BEGIN_WHITESPACE,X==="\uFEFF")continue;re(E,X);continue;case k.BEGIN_WHITESPACE:re(E,X);continue;case k.TEXT:if(E.sawRoot&&!E.closedRoot){for(var ue=$-1;X&&X!=="<"&&X!=="&";)(X=ie(V,$++))&&E.trackPosition&&(E.position++,X===`
`?(E.line++,E.column=0):E.column++);E.textNode+=V.substring(ue,$-1)}X!=="<"||E.sawRoot&&E.closedRoot&&!E.strict?(S(X)||E.sawRoot&&!E.closedRoot||D(E,"Text data outside of root node."),X==="&"?E.state=k.TEXT_ENTITY:E.textNode+=X):(E.state=k.OPEN_WAKA,E.startTagPosition=E.position);continue;case k.SCRIPT:X==="<"?E.state=k.SCRIPT_ENDING:E.script+=X;continue;case k.SCRIPT_ENDING:X==="/"?E.state=k.CLOSE_TAG:(E.script+="<"+X,E.state=k.SCRIPT);continue;case k.OPEN_WAKA:if(X==="!")E.state=k.SGML_DECL,E.sgmlDecl="";else if(!S(X))if(T(b,X))E.state=k.OPEN_TAG,E.tagName=X;else if(X==="/")E.state=k.CLOSE_TAG,E.tagName="";else if(X==="?")E.state=k.PROC_INST,E.procInstName=E.procInstBody="";else{if(D(E,"Unencoded <"),E.startTagPosition+1<E.position){var ye=E.position-E.startTagPosition;X=new Array(ye).join(" ")+X}E.textNode+="<"+X,E.state=k.TEXT}continue;case k.SGML_DECL:(E.sgmlDecl+X).toUpperCase()==="[CDATA["?(Z(E,"onopencdata"),E.state=k.CDATA,E.sgmlDecl="",E.cdata=""):E.sgmlDecl+X==="--"?(E.state=k.COMMENT,E.comment="",E.sgmlDecl=""):(E.sgmlDecl+X).toUpperCase()==="DOCTYPE"?(E.state=k.DOCTYPE,(E.doctype||E.sawRoot)&&D(E,"Inappropriately located doctype declaration"),E.doctype="",E.sgmlDecl=""):X===">"?(Z(E,"onsgmldeclaration",E.sgmlDecl),E.sgmlDecl="",E.state=k.TEXT):(R(X)&&(E.state=k.SGML_DECL_QUOTED),E.sgmlDecl+=X);continue;case k.SGML_DECL_QUOTED:X===E.q&&(E.state=k.SGML_DECL,E.q=""),E.sgmlDecl+=X;continue;case k.DOCTYPE:X===">"?(E.state=k.TEXT,Z(E,"ondoctype",E.doctype),E.doctype=!0):(E.doctype+=X,X==="["?E.state=k.DOCTYPE_DTD:R(X)&&(E.state=k.DOCTYPE_QUOTED,E.q=X));continue;case k.DOCTYPE_QUOTED:E.doctype+=X,X===E.q&&(E.q="",E.state=k.DOCTYPE);continue;case k.DOCTYPE_DTD:E.doctype+=X,X==="]"?E.state=k.DOCTYPE:R(X)&&(E.state=k.DOCTYPE_DTD_QUOTED,E.q=X);continue;case k.DOCTYPE_DTD_QUOTED:E.doctype+=X,X===E.q&&(E.state=k.DOCTYPE_DTD,E.q="");continue;case k.COMMENT:X==="-"?E.state=k.COMMENT_ENDING:E.comment+=X;continue;case k.COMMENT_ENDING:X==="-"?(E.state=k.COMMENT_ENDED,E.comment=oe(E.opt,E.comment),E.comment&&Z(E,"oncomment",E.comment),E.comment=""):(E.comment+="-"+X,E.state=k.COMMENT);continue;case k.COMMENT_ENDED:X!==">"?(D(E,"Malformed comment"),E.comment+="--"+X,E.state=k.COMMENT):E.state=k.TEXT;continue;case k.CDATA:X==="]"?E.state=k.CDATA_ENDING:E.cdata+=X;continue;case k.CDATA_ENDING:X==="]"?E.state=k.CDATA_ENDING_2:(E.cdata+="]"+X,E.state=k.CDATA);continue;case k.CDATA_ENDING_2:X===">"?(E.cdata&&Z(E,"oncdata",E.cdata),Z(E,"onclosecdata"),E.cdata="",E.state=k.TEXT):X==="]"?E.cdata+="]":(E.cdata+="]]"+X,E.state=k.CDATA);continue;case k.PROC_INST:X==="?"?E.state=k.PROC_INST_ENDING:S(X)?E.state=k.PROC_INST_BODY:E.procInstName+=X;continue;case k.PROC_INST_BODY:if(!E.procInstBody&&S(X))continue;X==="?"?E.state=k.PROC_INST_ENDING:E.procInstBody+=X;continue;case k.PROC_INST_ENDING:X===">"?(Z(E,"onprocessinginstruction",{name:E.procInstName,body:E.procInstBody}),E.procInstName=E.procInstBody="",E.state=k.TEXT):(E.procInstBody+="?"+X,E.state=k.PROC_INST_BODY);continue;case k.OPEN_TAG:T(O,X)?E.tagName+=X:(H(E),X===">"?W(E):X==="/"?E.state=k.OPEN_TAG_SLASH:(S(X)||D(E,"Invalid character in tag name"),E.state=k.ATTRIB));continue;case k.OPEN_TAG_SLASH:X===">"?(W(E,!0),Y(E)):(D(E,"Forward-slash in opening tag not followed by >"),E.state=k.ATTRIB);continue;case k.ATTRIB:if(S(X))continue;X===">"?W(E):X==="/"?E.state=k.OPEN_TAG_SLASH:T(b,X)?(E.attribName=X,E.attribValue="",E.state=k.ATTRIB_NAME):D(E,"Invalid attribute name");continue;case k.ATTRIB_NAME:X==="="?E.state=k.ATTRIB_VALUE:X===">"?(D(E,"Attribute without value"),E.attribValue=E.attribName,se(E),W(E)):S(X)?E.state=k.ATTRIB_NAME_SAW_WHITE:T(O,X)?E.attribName+=X:D(E,"Invalid attribute name");continue;case k.ATTRIB_NAME_SAW_WHITE:if(X==="=")E.state=k.ATTRIB_VALUE;else{if(S(X))continue;D(E,"Attribute without value"),E.tag.attributes[E.attribName]="",E.attribValue="",Z(E,"onattribute",{name:E.attribName,value:""}),E.attribName="",X===">"?W(E):T(b,X)?(E.attribName=X,E.state=k.ATTRIB_NAME):(D(E,"Invalid attribute name"),E.state=k.ATTRIB)}continue;case k.ATTRIB_VALUE:if(S(X))continue;R(X)?(E.q=X,E.state=k.ATTRIB_VALUE_QUOTED):(D(E,"Unquoted attribute value"),E.state=k.ATTRIB_VALUE_UNQUOTED,E.attribValue=X);continue;case k.ATTRIB_VALUE_QUOTED:if(X!==E.q){X==="&"?E.state=k.ATTRIB_VALUE_ENTITY_Q:E.attribValue+=X;continue}se(E),E.q="",E.state=k.ATTRIB_VALUE_CLOSED;continue;case k.ATTRIB_VALUE_CLOSED:S(X)?E.state=k.ATTRIB:X===">"?W(E):X==="/"?E.state=k.OPEN_TAG_SLASH:T(b,X)?(D(E,"No whitespace between attributes"),E.attribName=X,E.attribValue="",E.state=k.ATTRIB_NAME):D(E,"Invalid attribute name");continue;case k.ATTRIB_VALUE_UNQUOTED:if(!N(X)){X==="&"?E.state=k.ATTRIB_VALUE_ENTITY_U:E.attribValue+=X;continue}se(E),X===">"?W(E):E.state=k.ATTRIB;continue;case k.CLOSE_TAG:if(E.tagName)X===">"?Y(E):T(O,X)?E.tagName+=X:E.script?(E.script+="</"+E.tagName,E.tagName="",E.state=k.SCRIPT):(S(X)||D(E,"Invalid tagname in closing tag"),E.state=k.CLOSE_TAG_SAW_WHITE);else{if(S(X))continue;C(b,X)?E.script?(E.script+="</"+X,E.state=k.SCRIPT):D(E,"Invalid tagname in closing tag."):E.tagName=X}continue;case k.CLOSE_TAG_SAW_WHITE:if(S(X))continue;X===">"?Y(E):D(E,"Invalid characters in closing tag");continue;case k.TEXT_ENTITY:case k.ATTRIB_VALUE_ENTITY_Q:case k.ATTRIB_VALUE_ENTITY_U:var Re,ge;switch(E.state){case k.TEXT_ENTITY:Re=k.TEXT,ge="textNode";break;case k.ATTRIB_VALUE_ENTITY_Q:Re=k.ATTRIB_VALUE_QUOTED,ge="attribValue";break;case k.ATTRIB_VALUE_ENTITY_U:Re=k.ATTRIB_VALUE_UNQUOTED,ge="attribValue"}X===";"?(E[ge]+=ee(E),E.entity="",E.state=Re):T(E.entity.length?_:v,X)?E.entity+=X:(D(E,"Invalid character in entity name"),E[ge]+="&"+E.entity+X,E.entity="",E.state=Re);continue;default:throw new Error(E,"Unknown state: "+E.state)}return E.position>=E.bufferCheckPosition&&function(we){for(var Ne=Math.max(c.MAX_BUFFER_LENGTH,10),$e=0,Be=0,Ce=h.length;Be<Ce;Be++){var A=we[h[Be]].length;if(A>Ne)switch(h[Be]){case"textNode":le(we);break;case"cdata":Z(we,"oncdata",we.cdata),we.cdata="";break;case"script":Z(we,"onscript",we.script),we.script="";break;default:pe(we,"Max buffer length exceeded: "+h[Be])}$e=Math.max($e,A)}var L=c.MAX_BUFFER_LENGTH-$e;we.bufferCheckPosition=L+we.position}(E),E},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var V;le(V=this),V.cdata!==""&&(Z(V,"oncdata",V.cdata),V.cdata=""),V.script!==""&&(Z(V,"onscript",V.script),V.script="")}};try{u=l(2830).Stream}catch{u=function(){}}var p=c.EVENTS.filter(function(V){return V!=="error"&&V!=="end"});function d(V,E){if(!(this instanceof d))return new d(V,E);u.apply(this),this._parser=new f(V,E),this.writable=!0,this.readable=!0;var $=this;this._parser.onend=function(){$.emit("end")},this._parser.onerror=function(X){$.emit("error",X),$._parser.error=null},this._decoder=null,p.forEach(function(X){Object.defineProperty($,"on"+X,{get:function(){return $._parser["on"+X]},set:function(ue){if(!ue)return $.removeAllListeners(X),$._parser["on"+X]=ue,ue;$.on(X,ue)},enumerable:!0,configurable:!1})})}d.prototype=Object.create(u.prototype,{constructor:{value:d}}),d.prototype.write=function(V){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(V)){if(!this._decoder){var E=l(2553).s;this._decoder=new E("utf8")}V=this._decoder.write(V)}return this._parser.write(V.toString()),this.emit("data",V),!0},d.prototype.end=function(V){return V&&V.length&&this.write(V),this._parser.end(),!0},d.prototype.on=function(V,E){var $=this;return $._parser["on"+V]||p.indexOf(V)===-1||($._parser["on"+V]=function(){var X=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);X.splice(0,0,V),$.emit.apply($,X)}),u.prototype.on.call($,V,E)};var m="http://www.w3.org/XML/1998/namespace",y="http://www.w3.org/2000/xmlns/",w={xml:m,xmlns:y},b=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,O=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,v=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,_=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function S(V){return V===" "||V===`
`||V==="\r"||V==="	"}function R(V){return V==='"'||V==="'"}function N(V){return V===">"||S(V)}function T(V,E){return V.test(E)}function C(V,E){return!T(V,E)}var Q,I,B,k=0;for(var j in c.STATE={BEGIN:k++,BEGIN_WHITESPACE:k++,TEXT:k++,TEXT_ENTITY:k++,OPEN_WAKA:k++,SGML_DECL:k++,SGML_DECL_QUOTED:k++,DOCTYPE:k++,DOCTYPE_QUOTED:k++,DOCTYPE_DTD:k++,DOCTYPE_DTD_QUOTED:k++,COMMENT_STARTING:k++,COMMENT:k++,COMMENT_ENDING:k++,COMMENT_ENDED:k++,CDATA:k++,CDATA_ENDING:k++,CDATA_ENDING_2:k++,PROC_INST:k++,PROC_INST_BODY:k++,PROC_INST_ENDING:k++,OPEN_TAG:k++,OPEN_TAG_SLASH:k++,ATTRIB:k++,ATTRIB_NAME:k++,ATTRIB_NAME_SAW_WHITE:k++,ATTRIB_VALUE:k++,ATTRIB_VALUE_QUOTED:k++,ATTRIB_VALUE_CLOSED:k++,ATTRIB_VALUE_UNQUOTED:k++,ATTRIB_VALUE_ENTITY_Q:k++,ATTRIB_VALUE_ENTITY_U:k++,CLOSE_TAG:k++,CLOSE_TAG_SAW_WHITE:k++,SCRIPT:k++,SCRIPT_ENDING:k++},c.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},c.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(c.ENTITIES).forEach(function(V){var E=c.ENTITIES[V],$=typeof E=="number"?String.fromCharCode(E):E;c.ENTITIES[V]=$}),c.STATE)c.STATE[c.STATE[j]]=j;function ne(V,E,$){V[E]&&V[E]($)}function Z(V,E,$){V.textNode&&le(V),ne(V,E,$)}function le(V){V.textNode=oe(V.opt,V.textNode),V.textNode&&ne(V,"ontext",V.textNode),V.textNode=""}function oe(V,E){return V.trim&&(E=E.trim()),V.normalize&&(E=E.replace(/\s+/g," ")),E}function pe(V,E){return le(V),V.trackPosition&&(E+=`
Line: `+V.line+`
Column: `+V.column+`
Char: `+V.c),E=new Error(E),V.error=E,ne(V,"onerror",E),V}function P(V){return V.sawRoot&&!V.closedRoot&&D(V,"Unclosed root tag"),V.state!==k.BEGIN&&V.state!==k.BEGIN_WHITESPACE&&V.state!==k.TEXT&&pe(V,"Unexpected end"),le(V),V.c="",V.closed=!0,ne(V,"onend"),f.call(V,V.strict,V.opt),V}function D(V,E){if(typeof V!="object"||!(V instanceof f))throw new Error("bad call to strictFail");V.strict&&pe(V,E)}function H(V){V.strict||(V.tagName=V.tagName[V.looseCase]());var E=V.tags[V.tags.length-1]||V,$=V.tag={name:V.tagName,attributes:{}};V.opt.xmlns&&($.ns=E.ns),V.attribList.length=0,Z(V,"onopentagstart",$)}function F(V,E){var $=V.indexOf(":")<0?["",V]:V.split(":"),X=$[0],ue=$[1];return E&&V==="xmlns"&&(X="xmlns",ue=""),{prefix:X,local:ue}}function se(V){if(V.strict||(V.attribName=V.attribName[V.looseCase]()),V.attribList.indexOf(V.attribName)!==-1||V.tag.attributes.hasOwnProperty(V.attribName))V.attribName=V.attribValue="";else{if(V.opt.xmlns){var E=F(V.attribName,!0),$=E.prefix,X=E.local;if($==="xmlns")if(X==="xml"&&V.attribValue!==m)D(V,"xml: prefix must be bound to "+m+`
Actual: `+V.attribValue);else if(X==="xmlns"&&V.attribValue!==y)D(V,"xmlns: prefix must be bound to "+y+`
Actual: `+V.attribValue);else{var ue=V.tag,ye=V.tags[V.tags.length-1]||V;ue.ns===ye.ns&&(ue.ns=Object.create(ye.ns)),ue.ns[X]=V.attribValue}V.attribList.push([V.attribName,V.attribValue])}else V.tag.attributes[V.attribName]=V.attribValue,Z(V,"onattribute",{name:V.attribName,value:V.attribValue});V.attribName=V.attribValue=""}}function W(V,E){if(V.opt.xmlns){var $=V.tag,X=F(V.tagName);$.prefix=X.prefix,$.local=X.local,$.uri=$.ns[X.prefix]||"",$.prefix&&!$.uri&&(D(V,"Unbound namespace prefix: "+JSON.stringify(V.tagName)),$.uri=X.prefix);var ue=V.tags[V.tags.length-1]||V;$.ns&&ue.ns!==$.ns&&Object.keys($.ns).forEach(function(q){Z(V,"onopennamespace",{prefix:q,uri:$.ns[q]})});for(var ye=0,Re=V.attribList.length;ye<Re;ye++){var ge=V.attribList[ye],we=ge[0],Ne=ge[1],$e=F(we,!0),Be=$e.prefix,Ce=$e.local,A=Be===""?"":$.ns[Be]||"",L={name:we,value:Ne,prefix:Be,local:Ce,uri:A};Be&&Be!=="xmlns"&&!A&&(D(V,"Unbound namespace prefix: "+JSON.stringify(Be)),L.uri=Be),V.tag.attributes[we]=L,Z(V,"onattribute",L)}V.attribList.length=0}V.tag.isSelfClosing=!!E,V.sawRoot=!0,V.tags.push(V.tag),Z(V,"onopentag",V.tag),E||(V.noscript||V.tagName.toLowerCase()!=="script"?V.state=k.TEXT:V.state=k.SCRIPT,V.tag=null,V.tagName=""),V.attribName=V.attribValue="",V.attribList.length=0}function Y(V){if(!V.tagName)return D(V,"Weird empty close tag."),V.textNode+="</>",void(V.state=k.TEXT);if(V.script){if(V.tagName!=="script")return V.script+="</"+V.tagName+">",V.tagName="",void(V.state=k.SCRIPT);Z(V,"onscript",V.script),V.script=""}var E=V.tags.length,$=V.tagName;V.strict||($=$[V.looseCase]());for(var X=$;E--&&V.tags[E].name!==X;)D(V,"Unexpected close tag");if(E<0)return D(V,"Unmatched closing tag: "+V.tagName),V.textNode+="</"+V.tagName+">",void(V.state=k.TEXT);V.tagName=$;for(var ue=V.tags.length;ue-- >E;){var ye=V.tag=V.tags.pop();V.tagName=V.tag.name,Z(V,"onclosetag",V.tagName);var Re={};for(var ge in ye.ns)Re[ge]=ye.ns[ge];var we=V.tags[V.tags.length-1]||V;V.opt.xmlns&&ye.ns!==we.ns&&Object.keys(ye.ns).forEach(function(Ne){var $e=ye.ns[Ne];Z(V,"onclosenamespace",{prefix:Ne,uri:$e})})}E===0&&(V.closedRoot=!0),V.tagName=V.attribValue=V.attribName="",V.attribList.length=0,V.state=k.TEXT}function ee(V){var E,$=V.entity,X=$.toLowerCase(),ue="";return V.ENTITIES[$]?V.ENTITIES[$]:V.ENTITIES[X]?V.ENTITIES[X]:(($=X).charAt(0)==="#"&&($.charAt(1)==="x"?($=$.slice(2),ue=(E=parseInt($,16)).toString(16)):($=$.slice(1),ue=(E=parseInt($,10)).toString(10))),$=$.replace(/^0+/,""),isNaN(E)||ue.toLowerCase()!==$?(D(V,"Invalid character entity"),"&"+V.entity+";"):String.fromCodePoint(E))}function re(V,E){E==="<"?(V.state=k.OPEN_WAKA,V.startTagPosition=V.position):S(E)||(D(V,"Non-whitespace before first tag."),V.textNode=E,V.state=k.TEXT)}function ie(V,E){var $="";return E<V.length&&($=V.charAt(E)),$}k=c.STATE,String.fromCodePoint||(Q=String.fromCharCode,I=Math.floor,B=function(){var V,E,$=16384,X=[],ue=-1,ye=arguments.length;if(!ye)return"";for(var Re="";++ue<ye;){var ge=Number(arguments[ue]);if(!isFinite(ge)||ge<0||ge>1114111||I(ge)!==ge)throw RangeError("Invalid code point: "+ge);ge<=65535?X.push(ge):(V=55296+((ge-=65536)>>10),E=ge%1024+56320,X.push(V,E)),(ue+1===ye||X.length>$)&&(Re+=Q.apply(null,X),X.length=0)}return Re},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:B,configurable:!0,writable:!0}):String.fromCodePoint=B)})(a)},4889:function(o,a,l){var c=l(4155);(function(u,h){if(!u.setImmediate){var f,p,d,m,y,w=1,b={},O=!1,v=u.document,_=Object.getPrototypeOf&&Object.getPrototypeOf(u);_=_&&_.setTimeout?_:u,{}.toString.call(u.process)==="[object process]"?f=function(N){c.nextTick(function(){R(N)})}:function(){if(u.postMessage&&!u.importScripts){var N=!0,T=u.onmessage;return u.onmessage=function(){N=!1},u.postMessage("","*"),u.onmessage=T,N}}()?(m="setImmediate$"+Math.random()+"$",y=function(N){N.source===u&&typeof N.data=="string"&&N.data.indexOf(m)===0&&R(+N.data.slice(m.length))},u.addEventListener?u.addEventListener("message",y,!1):u.attachEvent("onmessage",y),f=function(N){u.postMessage(m+N,"*")}):u.MessageChannel?((d=new MessageChannel).port1.onmessage=function(N){R(N.data)},f=function(N){d.port2.postMessage(N)}):v&&"onreadystatechange"in v.createElement("script")?(p=v.documentElement,f=function(N){var T=v.createElement("script");T.onreadystatechange=function(){R(N),T.onreadystatechange=null,p.removeChild(T),T=null},p.appendChild(T)}):f=function(N){setTimeout(R,0,N)},_.setImmediate=function(N){typeof N!="function"&&(N=new Function(""+N));for(var T=new Array(arguments.length-1),C=0;C<T.length;C++)T[C]=arguments[C+1];var Q={callback:N,args:T};return b[w]=Q,f(w),w++},_.clearImmediate=S}function S(N){delete b[N]}function R(N){if(O)setTimeout(R,0,N);else{var T=b[N];if(T){O=!0;try{(function(C){var Q=C.callback,I=C.args;switch(I.length){case 0:Q();break;case 1:Q(I[0]);break;case 2:Q(I[0],I[1]);break;case 3:Q(I[0],I[1],I[2]);break;default:Q.apply(void 0,I)}})(T)}finally{S(N),O=!1}}}}})(typeof self>"u"?l.g===void 0?this:l.g:self)},2830:(o,a,l)=>{o.exports=u;var c=l(7187).EventEmitter;function u(){c.call(this)}l(5717)(u,c),u.Readable=l(6577),u.Writable=l(323),u.Duplex=l(8656),u.Transform=l(4473),u.PassThrough=l(2366),u.finished=l(1086),u.pipeline=l(6472),u.Stream=u,u.prototype.pipe=function(h,f){var p=this;function d(_){h.writable&&h.write(_)===!1&&p.pause&&p.pause()}function m(){p.readable&&p.resume&&p.resume()}p.on("data",d),h.on("drain",m),h._isStdio||f&&f.end===!1||(p.on("end",w),p.on("close",b));var y=!1;function w(){y||(y=!0,h.end())}function b(){y||(y=!0,typeof h.destroy=="function"&&h.destroy())}function O(_){if(v(),c.listenerCount(this,"error")===0)throw _}function v(){p.removeListener("data",d),h.removeListener("drain",m),p.removeListener("end",w),p.removeListener("close",b),p.removeListener("error",O),h.removeListener("error",O),p.removeListener("end",v),p.removeListener("close",v),h.removeListener("close",v)}return p.on("error",O),h.on("error",O),p.on("end",v),p.on("close",v),h.on("close",v),h.emit("pipe",p),h}},8106:o=>{var a={};function l(u,h,f){f||(f=Error);var p=function(d){var m,y;function w(b,O,v){return d.call(this,function(_,S,R){return typeof h=="string"?h:h(_,S,R)}(b,O,v))||this}return y=d,(m=w).prototype=Object.create(y.prototype),m.prototype.constructor=m,m.__proto__=y,w}(f);p.prototype.name=f.name,p.prototype.code=u,a[u]=p}function c(u,h){if(Array.isArray(u)){var f=u.length;return u=u.map(function(p){return String(p)}),f>2?"one of ".concat(h," ").concat(u.slice(0,f-1).join(", "),", or ")+u[f-1]:f===2?"one of ".concat(h," ").concat(u[0]," or ").concat(u[1]):"of ".concat(h," ").concat(u[0])}return"of ".concat(h," ").concat(String(u))}l("ERR_INVALID_OPT_VALUE",function(u,h){return'The value "'+h+'" is invalid for option "'+u+'"'},TypeError),l("ERR_INVALID_ARG_TYPE",function(u,h,f){var p,d,m,y,w;if(typeof h=="string"&&(d="not ",h.substr(0,d.length)===d)?(p="must not be",h=h.replace(/^not /,"")):p="must be",function(O,v,_){return(_===void 0||_>O.length)&&(_=O.length),O.substring(_-v.length,_)===v}(u," argument"))m="The ".concat(u," ").concat(p," ").concat(c(h,"type"));else{var b=(typeof w!="number"&&(w=0),w+1>(y=u).length||y.indexOf(".",w)===-1?"argument":"property");m='The "'.concat(u,'" ').concat(b," ").concat(p," ").concat(c(h,"type"))}return m+". Received type ".concat(typeof f)},TypeError),l("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),l("ERR_METHOD_NOT_IMPLEMENTED",function(u){return"The "+u+" method is not implemented"}),l("ERR_STREAM_PREMATURE_CLOSE","Premature close"),l("ERR_STREAM_DESTROYED",function(u){return"Cannot call "+u+" after a stream was destroyed"}),l("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),l("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),l("ERR_STREAM_WRITE_AFTER_END","write after end"),l("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),l("ERR_UNKNOWN_ENCODING",function(u){return"Unknown encoding: "+u},TypeError),l("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),o.exports.q=a},8656:(o,a,l)=>{var c=l(4155),u=Object.keys||function(O){var v=[];for(var _ in O)v.push(_);return v};o.exports=y;var h=l(6577),f=l(323);l(5717)(y,h);for(var p=u(f.prototype),d=0;d<p.length;d++){var m=p[d];y.prototype[m]||(y.prototype[m]=f.prototype[m])}function y(O){if(!(this instanceof y))return new y(O);h.call(this,O),f.call(this,O),this.allowHalfOpen=!0,O&&(O.readable===!1&&(this.readable=!1),O.writable===!1&&(this.writable=!1),O.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",w)))}function w(){this._writableState.ended||c.nextTick(b,this)}function b(O){O.end()}Object.defineProperty(y.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(y.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(y.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(y.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(O){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=O,this._writableState.destroyed=O)}})},2366:(o,a,l)=>{o.exports=u;var c=l(4473);function u(h){if(!(this instanceof u))return new u(h);c.call(this,h)}l(5717)(u,c),u.prototype._transform=function(h,f,p){p(null,h)}},6577:(o,a,l)=>{var c,u=l(4155);o.exports=j,j.ReadableState=k,l(7187).EventEmitter;var h,f=function(E,$){return E.listeners($).length},p=l(3194),d=l(8764).Buffer,m=l.g.Uint8Array||function(){},y=l(5575);h=y&&y.debuglog?y.debuglog("stream"):function(){};var w,b,O,v=l(9686),_=l(1029),S=l(94).getHighWaterMark,R=l(8106).q,N=R.ERR_INVALID_ARG_TYPE,T=R.ERR_STREAM_PUSH_AFTER_EOF,C=R.ERR_METHOD_NOT_IMPLEMENTED,Q=R.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;l(5717)(j,p);var I=_.errorOrDestroy,B=["error","close","destroy","pause","resume"];function k(E,$,X){c=c||l(8656),E=E||{},typeof X!="boolean"&&(X=$ instanceof c),this.objectMode=!!E.objectMode,X&&(this.objectMode=this.objectMode||!!E.readableObjectMode),this.highWaterMark=S(this,E,"readableHighWaterMark",X),this.buffer=new v,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=E.emitClose!==!1,this.autoDestroy=!!E.autoDestroy,this.destroyed=!1,this.defaultEncoding=E.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,E.encoding&&(w||(w=l(2553).s),this.decoder=new w(E.encoding),this.encoding=E.encoding)}function j(E){if(c=c||l(8656),!(this instanceof j))return new j(E);var $=this instanceof c;this._readableState=new k(E,this,$),this.readable=!0,E&&(typeof E.read=="function"&&(this._read=E.read),typeof E.destroy=="function"&&(this._destroy=E.destroy)),p.call(this)}function ne(E,$,X,ue,ye){h("readableAddChunk",$);var Re,ge=E._readableState;if($===null)ge.reading=!1,function(we,Ne){if(h("onEofChunk"),!Ne.ended){if(Ne.decoder){var $e=Ne.decoder.end();$e&&$e.length&&(Ne.buffer.push($e),Ne.length+=Ne.objectMode?1:$e.length)}Ne.ended=!0,Ne.sync?pe(we):(Ne.needReadable=!1,Ne.emittedReadable||(Ne.emittedReadable=!0,P(we)))}}(E,ge);else if(ye||(Re=function(we,Ne){var $e,Be;return Be=Ne,d.isBuffer(Be)||Be instanceof m||typeof Ne=="string"||Ne===void 0||we.objectMode||($e=new N("chunk",["string","Buffer","Uint8Array"],Ne)),$e}(ge,$)),Re)I(E,Re);else if(ge.objectMode||$&&$.length>0)if(typeof $=="string"||ge.objectMode||Object.getPrototypeOf($)===d.prototype||($=function(we){return d.from(we)}($)),ue)ge.endEmitted?I(E,new Q):Z(E,ge,$,!0);else if(ge.ended)I(E,new T);else{if(ge.destroyed)return!1;ge.reading=!1,ge.decoder&&!X?($=ge.decoder.write($),ge.objectMode||$.length!==0?Z(E,ge,$,!1):D(E,ge)):Z(E,ge,$,!1)}else ue||(ge.reading=!1,D(E,ge));return!ge.ended&&(ge.length<ge.highWaterMark||ge.length===0)}function Z(E,$,X,ue){$.flowing&&$.length===0&&!$.sync?($.awaitDrain=0,E.emit("data",X)):($.length+=$.objectMode?1:X.length,ue?$.buffer.unshift(X):$.buffer.push(X),$.needReadable&&pe(E)),D(E,$)}Object.defineProperty(j.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(E){this._readableState&&(this._readableState.destroyed=E)}}),j.prototype.destroy=_.destroy,j.prototype._undestroy=_.undestroy,j.prototype._destroy=function(E,$){$(E)},j.prototype.push=function(E,$){var X,ue=this._readableState;return ue.objectMode?X=!0:typeof E=="string"&&(($=$||ue.defaultEncoding)!==ue.encoding&&(E=d.from(E,$),$=""),X=!0),ne(this,E,$,!1,X)},j.prototype.unshift=function(E){return ne(this,E,null,!0,!1)},j.prototype.isPaused=function(){return this._readableState.flowing===!1},j.prototype.setEncoding=function(E){w||(w=l(2553).s);var $=new w(E);this._readableState.decoder=$,this._readableState.encoding=this._readableState.decoder.encoding;for(var X=this._readableState.buffer.head,ue="";X!==null;)ue+=$.write(X.data),X=X.next;return this._readableState.buffer.clear(),ue!==""&&this._readableState.buffer.push(ue),this._readableState.length=ue.length,this};var le=1073741824;function oe(E,$){return E<=0||$.length===0&&$.ended?0:$.objectMode?1:E!=E?$.flowing&&$.length?$.buffer.head.data.length:$.length:(E>$.highWaterMark&&($.highWaterMark=function(X){return X>=le?X=le:(X--,X|=X>>>1,X|=X>>>2,X|=X>>>4,X|=X>>>8,X|=X>>>16,X++),X}(E)),E<=$.length?E:$.ended?$.length:($.needReadable=!0,0))}function pe(E){var $=E._readableState;h("emitReadable",$.needReadable,$.emittedReadable),$.needReadable=!1,$.emittedReadable||(h("emitReadable",$.flowing),$.emittedReadable=!0,u.nextTick(P,E))}function P(E){var $=E._readableState;h("emitReadable_",$.destroyed,$.length,$.ended),$.destroyed||!$.length&&!$.ended||(E.emit("readable"),$.emittedReadable=!1),$.needReadable=!$.flowing&&!$.ended&&$.length<=$.highWaterMark,Y(E)}function D(E,$){$.readingMore||($.readingMore=!0,u.nextTick(H,E,$))}function H(E,$){for(;!$.reading&&!$.ended&&($.length<$.highWaterMark||$.flowing&&$.length===0);){var X=$.length;if(h("maybeReadMore read 0"),E.read(0),X===$.length)break}$.readingMore=!1}function F(E){var $=E._readableState;$.readableListening=E.listenerCount("readable")>0,$.resumeScheduled&&!$.paused?$.flowing=!0:E.listenerCount("data")>0&&E.resume()}function se(E){h("readable nexttick read 0"),E.read(0)}function W(E,$){h("resume",$.reading),$.reading||E.read(0),$.resumeScheduled=!1,E.emit("resume"),Y(E),$.flowing&&!$.reading&&E.read(0)}function Y(E){var $=E._readableState;for(h("flow",$.flowing);$.flowing&&E.read()!==null;);}function ee(E,$){return $.length===0?null:($.objectMode?X=$.buffer.shift():!E||E>=$.length?(X=$.decoder?$.buffer.join(""):$.buffer.length===1?$.buffer.first():$.buffer.concat($.length),$.buffer.clear()):X=$.buffer.consume(E,$.decoder),X);var X}function re(E){var $=E._readableState;h("endReadable",$.endEmitted),$.endEmitted||($.ended=!0,u.nextTick(ie,$,E))}function ie(E,$){if(h("endReadableNT",E.endEmitted,E.length),!E.endEmitted&&E.length===0&&(E.endEmitted=!0,$.readable=!1,$.emit("end"),E.autoDestroy)){var X=$._writableState;(!X||X.autoDestroy&&X.finished)&&$.destroy()}}function V(E,$){for(var X=0,ue=E.length;X<ue;X++)if(E[X]===$)return X;return-1}j.prototype.read=function(E){h("read",E),E=parseInt(E,10);var $=this._readableState,X=E;if(E!==0&&($.emittedReadable=!1),E===0&&$.needReadable&&(($.highWaterMark!==0?$.length>=$.highWaterMark:$.length>0)||$.ended))return h("read: emitReadable",$.length,$.ended),$.length===0&&$.ended?re(this):pe(this),null;if((E=oe(E,$))===0&&$.ended)return $.length===0&&re(this),null;var ue,ye=$.needReadable;return h("need readable",ye),($.length===0||$.length-E<$.highWaterMark)&&h("length less than watermark",ye=!0),$.ended||$.reading?h("reading or ended",ye=!1):ye&&(h("do read"),$.reading=!0,$.sync=!0,$.length===0&&($.needReadable=!0),this._read($.highWaterMark),$.sync=!1,$.reading||(E=oe(X,$))),(ue=E>0?ee(E,$):null)===null?($.needReadable=$.length<=$.highWaterMark,E=0):($.length-=E,$.awaitDrain=0),$.length===0&&($.ended||($.needReadable=!0),X!==E&&$.ended&&re(this)),ue!==null&&this.emit("data",ue),ue},j.prototype._read=function(E){I(this,new C("_read()"))},j.prototype.pipe=function(E,$){var X=this,ue=this._readableState;switch(ue.pipesCount){case 0:ue.pipes=E;break;case 1:ue.pipes=[ue.pipes,E];break;default:ue.pipes.push(E)}ue.pipesCount+=1,h("pipe count=%d opts=%j",ue.pipesCount,$);var ye=$&&$.end===!1||E===u.stdout||E===u.stderr?A:Re;function Re(){h("onend"),E.end()}ue.endEmitted?u.nextTick(ye):X.once("end",ye),E.on("unpipe",function L(q,te){h("onunpipe"),q===X&&te&&te.hasUnpiped===!1&&(te.hasUnpiped=!0,h("cleanup"),E.removeListener("close",Be),E.removeListener("finish",Ce),E.removeListener("drain",ge),E.removeListener("error",$e),E.removeListener("unpipe",L),X.removeListener("end",Re),X.removeListener("end",A),X.removeListener("data",Ne),we=!0,!ue.awaitDrain||E._writableState&&!E._writableState.needDrain||ge())});var ge=function(L){return function(){var q=L._readableState;h("pipeOnDrain",q.awaitDrain),q.awaitDrain&&q.awaitDrain--,q.awaitDrain===0&&f(L,"data")&&(q.flowing=!0,Y(L))}}(X);E.on("drain",ge);var we=!1;function Ne(L){h("ondata");var q=E.write(L);h("dest.write",q),q===!1&&((ue.pipesCount===1&&ue.pipes===E||ue.pipesCount>1&&V(ue.pipes,E)!==-1)&&!we&&(h("false write response, pause",ue.awaitDrain),ue.awaitDrain++),X.pause())}function $e(L){h("onerror",L),A(),E.removeListener("error",$e),f(E,"error")===0&&I(E,L)}function Be(){E.removeListener("finish",Ce),A()}function Ce(){h("onfinish"),E.removeListener("close",Be),A()}function A(){h("unpipe"),X.unpipe(E)}return X.on("data",Ne),function(L,q,te){if(typeof L.prependListener=="function")return L.prependListener(q,te);L._events&&L._events.error?Array.isArray(L._events.error)?L._events.error.unshift(te):L._events.error=[te,L._events.error]:L.on(q,te)}(E,"error",$e),E.once("close",Be),E.once("finish",Ce),E.emit("pipe",X),ue.flowing||(h("pipe resume"),X.resume()),E},j.prototype.unpipe=function(E){var $=this._readableState,X={hasUnpiped:!1};if($.pipesCount===0)return this;if($.pipesCount===1)return E&&E!==$.pipes||(E||(E=$.pipes),$.pipes=null,$.pipesCount=0,$.flowing=!1,E&&E.emit("unpipe",this,X)),this;if(!E){var ue=$.pipes,ye=$.pipesCount;$.pipes=null,$.pipesCount=0,$.flowing=!1;for(var Re=0;Re<ye;Re++)ue[Re].emit("unpipe",this,{hasUnpiped:!1});return this}var ge=V($.pipes,E);return ge===-1||($.pipes.splice(ge,1),$.pipesCount-=1,$.pipesCount===1&&($.pipes=$.pipes[0]),E.emit("unpipe",this,X)),this},j.prototype.on=function(E,$){var X=p.prototype.on.call(this,E,$),ue=this._readableState;return E==="data"?(ue.readableListening=this.listenerCount("readable")>0,ue.flowing!==!1&&this.resume()):E==="readable"&&(ue.endEmitted||ue.readableListening||(ue.readableListening=ue.needReadable=!0,ue.flowing=!1,ue.emittedReadable=!1,h("on readable",ue.length,ue.reading),ue.length?pe(this):ue.reading||u.nextTick(se,this))),X},j.prototype.addListener=j.prototype.on,j.prototype.removeListener=function(E,$){var X=p.prototype.removeListener.call(this,E,$);return E==="readable"&&u.nextTick(F,this),X},j.prototype.removeAllListeners=function(E){var $=p.prototype.removeAllListeners.apply(this,arguments);return E!=="readable"&&E!==void 0||u.nextTick(F,this),$},j.prototype.resume=function(){var E=this._readableState;return E.flowing||(h("resume"),E.flowing=!E.readableListening,function($,X){X.resumeScheduled||(X.resumeScheduled=!0,u.nextTick(W,$,X))}(this,E)),E.paused=!1,this},j.prototype.pause=function(){return h("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(h("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},j.prototype.wrap=function(E){var $=this,X=this._readableState,ue=!1;for(var ye in E.on("end",function(){if(h("wrapped end"),X.decoder&&!X.ended){var ge=X.decoder.end();ge&&ge.length&&$.push(ge)}$.push(null)}),E.on("data",function(ge){h("wrapped data"),X.decoder&&(ge=X.decoder.write(ge)),X.objectMode&&ge==null||(X.objectMode||ge&&ge.length)&&($.push(ge)||(ue=!0,E.pause()))}),E)this[ye]===void 0&&typeof E[ye]=="function"&&(this[ye]=function(ge){return function(){return E[ge].apply(E,arguments)}}(ye));for(var Re=0;Re<B.length;Re++)E.on(B[Re],this.emit.bind(this,B[Re]));return this._read=function(ge){h("wrapped _read",ge),ue&&(ue=!1,E.resume())},this},typeof Symbol=="function"&&(j.prototype[Symbol.asyncIterator]=function(){return b===void 0&&(b=l(828)),b(this)}),Object.defineProperty(j.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(j.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(j.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(E){this._readableState&&(this._readableState.flowing=E)}}),j._fromList=ee,Object.defineProperty(j.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(j.from=function(E,$){return O===void 0&&(O=l(1265)),O(j,E,$)})},4473:(o,a,l)=>{o.exports=y;var c=l(8106).q,u=c.ERR_METHOD_NOT_IMPLEMENTED,h=c.ERR_MULTIPLE_CALLBACK,f=c.ERR_TRANSFORM_ALREADY_TRANSFORMING,p=c.ERR_TRANSFORM_WITH_LENGTH_0,d=l(8656);function m(O,v){var _=this._transformState;_.transforming=!1;var S=_.writecb;if(S===null)return this.emit("error",new h);_.writechunk=null,_.writecb=null,v!=null&&this.push(v),S(O);var R=this._readableState;R.reading=!1,(R.needReadable||R.length<R.highWaterMark)&&this._read(R.highWaterMark)}function y(O){if(!(this instanceof y))return new y(O);d.call(this,O),this._transformState={afterTransform:m.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,O&&(typeof O.transform=="function"&&(this._transform=O.transform),typeof O.flush=="function"&&(this._flush=O.flush)),this.on("prefinish",w)}function w(){var O=this;typeof this._flush!="function"||this._readableState.destroyed?b(this,null,null):this._flush(function(v,_){b(O,v,_)})}function b(O,v,_){if(v)return O.emit("error",v);if(_!=null&&O.push(_),O._writableState.length)throw new p;if(O._transformState.transforming)throw new f;return O.push(null)}l(5717)(y,d),y.prototype.push=function(O,v){return this._transformState.needTransform=!1,d.prototype.push.call(this,O,v)},y.prototype._transform=function(O,v,_){_(new u("_transform()"))},y.prototype._write=function(O,v,_){var S=this._transformState;if(S.writecb=_,S.writechunk=O,S.writeencoding=v,!S.transforming){var R=this._readableState;(S.needTransform||R.needReadable||R.length<R.highWaterMark)&&this._read(R.highWaterMark)}},y.prototype._read=function(O){var v=this._transformState;v.writechunk===null||v.transforming?v.needTransform=!0:(v.transforming=!0,this._transform(v.writechunk,v.writeencoding,v.afterTransform))},y.prototype._destroy=function(O,v){d.prototype._destroy.call(this,O,function(_){v(_)})}},323:(o,a,l)=>{var c,u=l(4155);function h(D){var H=this;this.next=null,this.entry=null,this.finish=function(){(function(F,se,W){var Y=F.entry;for(F.entry=null;Y;){var ee=Y.callback;se.pendingcb--,ee(void 0),Y=Y.next}se.corkedRequestsFree.next=F})(H,D)}}o.exports=j,j.WritableState=k;var f,p={deprecate:l(4927)},d=l(3194),m=l(8764).Buffer,y=l.g.Uint8Array||function(){},w=l(1029),b=l(94).getHighWaterMark,O=l(8106).q,v=O.ERR_INVALID_ARG_TYPE,_=O.ERR_METHOD_NOT_IMPLEMENTED,S=O.ERR_MULTIPLE_CALLBACK,R=O.ERR_STREAM_CANNOT_PIPE,N=O.ERR_STREAM_DESTROYED,T=O.ERR_STREAM_NULL_VALUES,C=O.ERR_STREAM_WRITE_AFTER_END,Q=O.ERR_UNKNOWN_ENCODING,I=w.errorOrDestroy;function B(){}function k(D,H,F){c=c||l(8656),D=D||{},typeof F!="boolean"&&(F=H instanceof c),this.objectMode=!!D.objectMode,F&&(this.objectMode=this.objectMode||!!D.writableObjectMode),this.highWaterMark=b(this,D,"writableHighWaterMark",F),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var se=D.decodeStrings===!1;this.decodeStrings=!se,this.defaultEncoding=D.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(W){(function(Y,ee){var re=Y._writableState,ie=re.sync,V=re.writecb;if(typeof V!="function")throw new S;if(function($){$.writing=!1,$.writecb=null,$.length-=$.writelen,$.writelen=0}(re),ee)(function($,X,ue,ye,Re){--X.pendingcb,ue?(u.nextTick(Re,ye),u.nextTick(P,$,X),$._writableState.errorEmitted=!0,I($,ye)):(Re(ye),$._writableState.errorEmitted=!0,I($,ye),P($,X))})(Y,re,ie,ee,V);else{var E=oe(re)||Y.destroyed;E||re.corked||re.bufferProcessing||!re.bufferedRequest||le(Y,re),ie?u.nextTick(Z,Y,re,E,V):Z(Y,re,E,V)}})(H,W)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=D.emitClose!==!1,this.autoDestroy=!!D.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new h(this)}function j(D){var H=this instanceof(c=c||l(8656));if(!H&&!f.call(j,this))return new j(D);this._writableState=new k(D,this,H),this.writable=!0,D&&(typeof D.write=="function"&&(this._write=D.write),typeof D.writev=="function"&&(this._writev=D.writev),typeof D.destroy=="function"&&(this._destroy=D.destroy),typeof D.final=="function"&&(this._final=D.final)),d.call(this)}function ne(D,H,F,se,W,Y,ee){H.writelen=se,H.writecb=ee,H.writing=!0,H.sync=!0,H.destroyed?H.onwrite(new N("write")):F?D._writev(W,H.onwrite):D._write(W,Y,H.onwrite),H.sync=!1}function Z(D,H,F,se){F||function(W,Y){Y.length===0&&Y.needDrain&&(Y.needDrain=!1,W.emit("drain"))}(D,H),H.pendingcb--,se(),P(D,H)}function le(D,H){H.bufferProcessing=!0;var F=H.bufferedRequest;if(D._writev&&F&&F.next){var se=H.bufferedRequestCount,W=new Array(se),Y=H.corkedRequestsFree;Y.entry=F;for(var ee=0,re=!0;F;)W[ee]=F,F.isBuf||(re=!1),F=F.next,ee+=1;W.allBuffers=re,ne(D,H,!0,H.length,W,"",Y.finish),H.pendingcb++,H.lastBufferedRequest=null,Y.next?(H.corkedRequestsFree=Y.next,Y.next=null):H.corkedRequestsFree=new h(H),H.bufferedRequestCount=0}else{for(;F;){var ie=F.chunk,V=F.encoding,E=F.callback;if(ne(D,H,!1,H.objectMode?1:ie.length,ie,V,E),F=F.next,H.bufferedRequestCount--,H.writing)break}F===null&&(H.lastBufferedRequest=null)}H.bufferedRequest=F,H.bufferProcessing=!1}function oe(D){return D.ending&&D.length===0&&D.bufferedRequest===null&&!D.finished&&!D.writing}function pe(D,H){D._final(function(F){H.pendingcb--,F&&I(D,F),H.prefinished=!0,D.emit("prefinish"),P(D,H)})}function P(D,H){var F=oe(H);if(F&&(function(W,Y){Y.prefinished||Y.finalCalled||(typeof W._final!="function"||Y.destroyed?(Y.prefinished=!0,W.emit("prefinish")):(Y.pendingcb++,Y.finalCalled=!0,u.nextTick(pe,W,Y)))}(D,H),H.pendingcb===0&&(H.finished=!0,D.emit("finish"),H.autoDestroy))){var se=D._readableState;(!se||se.autoDestroy&&se.endEmitted)&&D.destroy()}return F}l(5717)(j,d),k.prototype.getBuffer=function(){for(var D=this.bufferedRequest,H=[];D;)H.push(D),D=D.next;return H},function(){try{Object.defineProperty(k.prototype,"buffer",{get:p.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(f=Function.prototype[Symbol.hasInstance],Object.defineProperty(j,Symbol.hasInstance,{value:function(D){return!!f.call(this,D)||this===j&&D&&D._writableState instanceof k}})):f=function(D){return D instanceof this},j.prototype.pipe=function(){I(this,new R)},j.prototype.write=function(D,H,F){var se,W=this._writableState,Y=!1,ee=!W.objectMode&&(se=D,m.isBuffer(se)||se instanceof y);return ee&&!m.isBuffer(D)&&(D=function(re){return m.from(re)}(D)),typeof H=="function"&&(F=H,H=null),ee?H="buffer":H||(H=W.defaultEncoding),typeof F!="function"&&(F=B),W.ending?function(re,ie){var V=new C;I(re,V),u.nextTick(ie,V)}(this,F):(ee||function(re,ie,V,E){var $;return V===null?$=new T:typeof V=="string"||ie.objectMode||($=new v("chunk",["string","Buffer"],V)),!$||(I(re,$),u.nextTick(E,$),!1)}(this,W,D,F))&&(W.pendingcb++,Y=function(re,ie,V,E,$,X){if(!V){var ue=function(we,Ne,$e){return we.objectMode||we.decodeStrings===!1||typeof Ne!="string"||(Ne=m.from(Ne,$e)),Ne}(ie,E,$);E!==ue&&(V=!0,$="buffer",E=ue)}var ye=ie.objectMode?1:E.length;ie.length+=ye;var Re=ie.length<ie.highWaterMark;if(Re||(ie.needDrain=!0),ie.writing||ie.corked){var ge=ie.lastBufferedRequest;ie.lastBufferedRequest={chunk:E,encoding:$,isBuf:V,callback:X,next:null},ge?ge.next=ie.lastBufferedRequest:ie.bufferedRequest=ie.lastBufferedRequest,ie.bufferedRequestCount+=1}else ne(re,ie,!1,ye,E,$,X);return Re}(this,W,ee,D,H,F)),Y},j.prototype.cork=function(){this._writableState.corked++},j.prototype.uncork=function(){var D=this._writableState;D.corked&&(D.corked--,D.writing||D.corked||D.bufferProcessing||!D.bufferedRequest||le(this,D))},j.prototype.setDefaultEncoding=function(D){if(typeof D=="string"&&(D=D.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((D+"").toLowerCase())>-1))throw new Q(D);return this._writableState.defaultEncoding=D,this},Object.defineProperty(j.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(j.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),j.prototype._write=function(D,H,F){F(new _("_write()"))},j.prototype._writev=null,j.prototype.end=function(D,H,F){var se=this._writableState;return typeof D=="function"?(F=D,D=null,H=null):typeof H=="function"&&(F=H,H=null),D!=null&&this.write(D,H),se.corked&&(se.corked=1,this.uncork()),se.ending||function(W,Y,ee){Y.ending=!0,P(W,Y),ee&&(Y.finished?u.nextTick(ee):W.once("finish",ee)),Y.ended=!0,W.writable=!1}(this,se,F),this},Object.defineProperty(j.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(j.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(D){this._writableState&&(this._writableState.destroyed=D)}}),j.prototype.destroy=w.destroy,j.prototype._undestroy=w.undestroy,j.prototype._destroy=function(D,H){H(D)}},828:(o,a,l)=>{var c,u=l(4155);function h(T,C,Q){return C in T?Object.defineProperty(T,C,{value:Q,enumerable:!0,configurable:!0,writable:!0}):T[C]=Q,T}var f=l(1086),p=Symbol("lastResolve"),d=Symbol("lastReject"),m=Symbol("error"),y=Symbol("ended"),w=Symbol("lastPromise"),b=Symbol("handlePromise"),O=Symbol("stream");function v(T,C){return{value:T,done:C}}function _(T){var C=T[p];if(C!==null){var Q=T[O].read();Q!==null&&(T[w]=null,T[p]=null,T[d]=null,C(v(Q,!1)))}}function S(T){u.nextTick(_,T)}var R=Object.getPrototypeOf(function(){}),N=Object.setPrototypeOf((h(c={get stream(){return this[O]},next:function(){var T=this,C=this[m];if(C!==null)return Promise.reject(C);if(this[y])return Promise.resolve(v(void 0,!0));if(this[O].destroyed)return new Promise(function(k,j){u.nextTick(function(){T[m]?j(T[m]):k(v(void 0,!0))})});var Q,I=this[w];if(I)Q=new Promise(function(k,j){return function(ne,Z){k.then(function(){j[y]?ne(v(void 0,!0)):j[b](ne,Z)},Z)}}(I,this));else{var B=this[O].read();if(B!==null)return Promise.resolve(v(B,!1));Q=new Promise(this[b])}return this[w]=Q,Q}},Symbol.asyncIterator,function(){return this}),h(c,"return",function(){var T=this;return new Promise(function(C,Q){T[O].destroy(null,function(I){I?Q(I):C(v(void 0,!0))})})}),c),R);o.exports=function(T){var C,Q=Object.create(N,(h(C={},O,{value:T,writable:!0}),h(C,p,{value:null,writable:!0}),h(C,d,{value:null,writable:!0}),h(C,m,{value:null,writable:!0}),h(C,y,{value:T._readableState.endEmitted,writable:!0}),h(C,b,{value:function(I,B){var k=Q[O].read();k?(Q[w]=null,Q[p]=null,Q[d]=null,I(v(k,!1))):(Q[p]=I,Q[d]=B)},writable:!0}),C));return Q[w]=null,f(T,function(I){if(I&&I.code!=="ERR_STREAM_PREMATURE_CLOSE"){var B=Q[d];return B!==null&&(Q[w]=null,Q[p]=null,Q[d]=null,B(I)),void(Q[m]=I)}var k=Q[p];k!==null&&(Q[w]=null,Q[p]=null,Q[d]=null,k(v(void 0,!0))),Q[y]=!0}),T.on("readable",S.bind(null,Q)),Q}},9686:(o,a,l)=>{function c(m,y){var w=Object.keys(m);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(m);y&&(b=b.filter(function(O){return Object.getOwnPropertyDescriptor(m,O).enumerable})),w.push.apply(w,b)}return w}function u(m,y,w){return y in m?Object.defineProperty(m,y,{value:w,enumerable:!0,configurable:!0,writable:!0}):m[y]=w,m}function h(m,y){for(var w=0;w<y.length;w++){var b=y[w];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(m,b.key,b)}}var f=l(8764).Buffer,p=l(5575).inspect,d=p&&p.custom||"inspect";o.exports=function(){function m(){(function(b,O){if(!(b instanceof O))throw new TypeError("Cannot call a class as a function")})(this,m),this.head=null,this.tail=null,this.length=0}var y,w;return y=m,w=[{key:"push",value:function(b){var O={data:b,next:null};this.length>0?this.tail.next=O:this.head=O,this.tail=O,++this.length}},{key:"unshift",value:function(b){var O={data:b,next:this.head};this.length===0&&(this.tail=O),this.head=O,++this.length}},{key:"shift",value:function(){if(this.length!==0){var b=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,b}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(b){if(this.length===0)return"";for(var O=this.head,v=""+O.data;O=O.next;)v+=b+O.data;return v}},{key:"concat",value:function(b){if(this.length===0)return f.alloc(0);for(var O,v,_,S=f.allocUnsafe(b>>>0),R=this.head,N=0;R;)O=R.data,v=S,_=N,f.prototype.copy.call(O,v,_),N+=R.data.length,R=R.next;return S}},{key:"consume",value:function(b,O){var v;return b<this.head.data.length?(v=this.head.data.slice(0,b),this.head.data=this.head.data.slice(b)):v=b===this.head.data.length?this.shift():O?this._getString(b):this._getBuffer(b),v}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(b){var O=this.head,v=1,_=O.data;for(b-=_.length;O=O.next;){var S=O.data,R=b>S.length?S.length:b;if(R===S.length?_+=S:_+=S.slice(0,b),(b-=R)==0){R===S.length?(++v,O.next?this.head=O.next:this.head=this.tail=null):(this.head=O,O.data=S.slice(R));break}++v}return this.length-=v,_}},{key:"_getBuffer",value:function(b){var O=f.allocUnsafe(b),v=this.head,_=1;for(v.data.copy(O),b-=v.data.length;v=v.next;){var S=v.data,R=b>S.length?S.length:b;if(S.copy(O,O.length-b,0,R),(b-=R)==0){R===S.length?(++_,v.next?this.head=v.next:this.head=this.tail=null):(this.head=v,v.data=S.slice(R));break}++_}return this.length-=_,O}},{key:d,value:function(b,O){return p(this,function(v){for(var _=1;_<arguments.length;_++){var S=arguments[_]!=null?arguments[_]:{};_%2?c(Object(S),!0).forEach(function(R){u(v,R,S[R])}):Object.getOwnPropertyDescriptors?Object.defineProperties(v,Object.getOwnPropertyDescriptors(S)):c(Object(S)).forEach(function(R){Object.defineProperty(v,R,Object.getOwnPropertyDescriptor(S,R))})}return v}({},O,{depth:0,customInspect:!1}))}}],w&&h(y.prototype,w),m}()},1029:(o,a,l)=>{var c=l(4155);function u(p,d){f(p,d),h(p)}function h(p){p._writableState&&!p._writableState.emitClose||p._readableState&&!p._readableState.emitClose||p.emit("close")}function f(p,d){p.emit("error",d)}o.exports={destroy:function(p,d){var m=this,y=this._readableState&&this._readableState.destroyed,w=this._writableState&&this._writableState.destroyed;return y||w?(d?d(p):p&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,c.nextTick(f,this,p)):c.nextTick(f,this,p)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(p||null,function(b){!d&&b?m._writableState?m._writableState.errorEmitted?c.nextTick(h,m):(m._writableState.errorEmitted=!0,c.nextTick(u,m,b)):c.nextTick(u,m,b):d?(c.nextTick(h,m),d(b)):c.nextTick(h,m)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(p,d){var m=p._readableState,y=p._writableState;m&&m.autoDestroy||y&&y.autoDestroy?p.destroy(d):p.emit("error",d)}}},1086:(o,a,l)=>{var c=l(8106).q.ERR_STREAM_PREMATURE_CLOSE;function u(){}o.exports=function h(f,p,d){if(typeof p=="function")return h(f,null,p);p||(p={}),d=function(T){var C=!1;return function(){if(!C){C=!0;for(var Q=arguments.length,I=new Array(Q),B=0;B<Q;B++)I[B]=arguments[B];T.apply(this,I)}}}(d||u);var m=p.readable||p.readable!==!1&&f.readable,y=p.writable||p.writable!==!1&&f.writable,w=function(){f.writable||O()},b=f._writableState&&f._writableState.finished,O=function(){y=!1,b=!0,m||d.call(f)},v=f._readableState&&f._readableState.endEmitted,_=function(){m=!1,v=!0,y||d.call(f)},S=function(T){d.call(f,T)},R=function(){var T;return m&&!v?(f._readableState&&f._readableState.ended||(T=new c),d.call(f,T)):y&&!b?(f._writableState&&f._writableState.ended||(T=new c),d.call(f,T)):void 0},N=function(){f.req.on("finish",O)};return function(T){return T.setHeader&&typeof T.abort=="function"}(f)?(f.on("complete",O),f.on("abort",R),f.req?N():f.on("request",N)):y&&!f._writableState&&(f.on("end",w),f.on("close",w)),f.on("end",_),f.on("finish",O),p.error!==!1&&f.on("error",S),f.on("close",R),function(){f.removeListener("complete",O),f.removeListener("abort",R),f.removeListener("request",N),f.req&&f.req.removeListener("finish",O),f.removeListener("end",w),f.removeListener("close",w),f.removeListener("finish",O),f.removeListener("end",_),f.removeListener("error",S),f.removeListener("close",R)}}},1265:o=>{o.exports=function(){throw new Error("Readable.from is not available in the browser")}},6472:(o,a,l)=>{var c,u=l(8106).q,h=u.ERR_MISSING_ARGS,f=u.ERR_STREAM_DESTROYED;function p(b){if(b)throw b}function d(b,O,v,_){_=function(N){var T=!1;return function(){T||(T=!0,N.apply(void 0,arguments))}}(_);var S=!1;b.on("close",function(){S=!0}),c===void 0&&(c=l(1086)),c(b,{readable:O,writable:v},function(N){if(N)return _(N);S=!0,_()});var R=!1;return function(N){if(!S&&!R)return R=!0,function(T){return T.setHeader&&typeof T.abort=="function"}(b)?b.abort():typeof b.destroy=="function"?b.destroy():void _(N||new f("pipe"))}}function m(b){b()}function y(b,O){return b.pipe(O)}function w(b){return b.length?typeof b[b.length-1]!="function"?p:b.pop():p}o.exports=function(){for(var b=arguments.length,O=new Array(b),v=0;v<b;v++)O[v]=arguments[v];var _,S=w(O);if(Array.isArray(O[0])&&(O=O[0]),O.length<2)throw new h("streams");var R=O.map(function(N,T){var C=T<O.length-1;return d(N,C,T>0,function(Q){_||(_=Q),Q&&R.forEach(m),C||(R.forEach(m),S(_))})});return O.reduce(y)}},94:(o,a,l)=>{var c=l(8106).q.ERR_INVALID_OPT_VALUE;o.exports={getHighWaterMark:function(u,h,f,p){var d=function(m,y,w){return m.highWaterMark!=null?m.highWaterMark:y?m[w]:null}(h,p,f);if(d!=null){if(!isFinite(d)||Math.floor(d)!==d||d<0)throw new c(p?f:"highWaterMark",d);return Math.floor(d)}return u.objectMode?16:16384}}},3194:(o,a,l)=>{o.exports=l(7187).EventEmitter},2553:(o,a,l)=>{var c=l(9509).Buffer,u=c.isEncoding||function(v){switch((v=""+v)&&v.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function h(v){var _;switch(this.encoding=function(S){var R=function(N){if(!N)return"utf8";for(var T;;)switch(N){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return N;default:if(T)return;N=(""+N).toLowerCase(),T=!0}}(S);if(typeof R!="string"&&(c.isEncoding===u||!u(S)))throw new Error("Unknown encoding: "+S);return R||S}(v),this.encoding){case"utf16le":this.text=d,this.end=m,_=4;break;case"utf8":this.fillLast=p,_=4;break;case"base64":this.text=y,this.end=w,_=3;break;default:return this.write=b,void(this.end=O)}this.lastNeed=0,this.lastTotal=0,this.lastChar=c.allocUnsafe(_)}function f(v){return v<=127?0:v>>5==6?2:v>>4==14?3:v>>3==30?4:v>>6==2?-1:-2}function p(v){var _=this.lastTotal-this.lastNeed,S=function(R,N,T){if((192&N[0])!=128)return R.lastNeed=0,"\uFFFD";if(R.lastNeed>1&&N.length>1){if((192&N[1])!=128)return R.lastNeed=1,"\uFFFD";if(R.lastNeed>2&&N.length>2&&(192&N[2])!=128)return R.lastNeed=2,"\uFFFD"}}(this,v);return S!==void 0?S:this.lastNeed<=v.length?(v.copy(this.lastChar,_,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(v.copy(this.lastChar,_,0,v.length),void(this.lastNeed-=v.length))}function d(v,_){if((v.length-_)%2==0){var S=v.toString("utf16le",_);if(S){var R=S.charCodeAt(S.length-1);if(R>=55296&&R<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=v[v.length-2],this.lastChar[1]=v[v.length-1],S.slice(0,-1)}return S}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=v[v.length-1],v.toString("utf16le",_,v.length-1)}function m(v){var _=v&&v.length?this.write(v):"";if(this.lastNeed){var S=this.lastTotal-this.lastNeed;return _+this.lastChar.toString("utf16le",0,S)}return _}function y(v,_){var S=(v.length-_)%3;return S===0?v.toString("base64",_):(this.lastNeed=3-S,this.lastTotal=3,S===1?this.lastChar[0]=v[v.length-1]:(this.lastChar[0]=v[v.length-2],this.lastChar[1]=v[v.length-1]),v.toString("base64",_,v.length-S))}function w(v){var _=v&&v.length?this.write(v):"";return this.lastNeed?_+this.lastChar.toString("base64",0,3-this.lastNeed):_}function b(v){return v.toString(this.encoding)}function O(v){return v&&v.length?this.write(v):""}a.s=h,h.prototype.write=function(v){if(v.length===0)return"";var _,S;if(this.lastNeed){if((_=this.fillLast(v))===void 0)return"";S=this.lastNeed,this.lastNeed=0}else S=0;return S<v.length?_?_+this.text(v,S):this.text(v,S):_||""},h.prototype.end=function(v){var _=v&&v.length?this.write(v):"";return this.lastNeed?_+"\uFFFD":_},h.prototype.text=function(v,_){var S=function(N,T,C){var Q=T.length-1;if(Q<C)return 0;var I=f(T[Q]);return I>=0?(I>0&&(N.lastNeed=I-1),I):--Q<C||I===-2?0:(I=f(T[Q]))>=0?(I>0&&(N.lastNeed=I-2),I):--Q<C||I===-2?0:(I=f(T[Q]))>=0?(I>0&&(I===2?I=0:N.lastNeed=I-3),I):0}(this,v,_);if(!this.lastNeed)return v.toString("utf8",_);this.lastTotal=S;var R=v.length-(S-this.lastNeed);return v.copy(this.lastChar,0,R),v.toString("utf8",_,R)},h.prototype.fillLast=function(v){if(this.lastNeed<=v.length)return v.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);v.copy(this.lastChar,this.lastTotal-this.lastNeed,0,v.length),this.lastNeed-=v.length}},5457:(o,a,l)=>{l.d(a,{vw:()=>h,rq:()=>u,EL:()=>p,NY:()=>f});let c=0;const u=d=>Math.floor(d/25.4*72*20),h=d=>Math.floor(72*d*20),f=()=>++c,p=()=>((d=21)=>{let m="",y=d;for(;y--;)m+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[64*Math.random()|0];return m})().toLowerCase()},5575:(o,a,l)=>{l.r(a),l.d(a,{convertInchesToTwip:()=>c.vw,convertMillimetersToTwip:()=>c.rq,dateTimeValue:()=>u.sF,decimalNumber:()=>u.vH,eighthPointMeasureValue:()=>u.LV,hexColorValue:()=>u.dg,hpsMeasureValue:()=>u.KR,longHexNumber:()=>u.mA,measurementOrPercentValue:()=>u.aB,percentageValue:()=>u.wp,pointMeasureValue:()=>u.gg,positiveUniversalMeasureValue:()=>u._p,shortHexNumber:()=>u.G0,signedHpsMeasureValue:()=>u.Rg,signedTwipsMeasureValue:()=>u.xb,twipsMeasureValue:()=>u.Jd,uCharHexNumber:()=>u.xD,uniqueId:()=>c.EL,uniqueNumericId:()=>c.NY,universalMeasureValue:()=>u.KC,unsignedDecimalNumber:()=>u.f$});var c=l(5457),u=l(6595)},6595:(o,a,l)=>{l.d(a,{G0:()=>p,Jd:()=>S,KC:()=>m,KR:()=>v,LV:()=>T,Rg:()=>_,_p:()=>w,aB:()=>N,dg:()=>b,f$:()=>u,gg:()=>C,mA:()=>f,sF:()=>Q,vH:()=>c,wp:()=>R,xD:()=>d,xb:()=>O});const c=I=>{if(isNaN(I))throw new Error(`Invalid value '${I}' specified. Must be an integer.`);return Math.floor(I)},u=I=>{const B=c(I);if(B<0)throw new Error(`Invalid value '${I}' specified. Must be a positive integer.`);return B},h=(I,B)=>{const k=2*B;if(I.length!==k||isNaN(Number(`0x${I}`)))throw new Error(`Invalid hex value '${I}'. Expected ${k} digit hex value`);return I},f=I=>h(I,4),p=I=>h(I,2),d=I=>h(I,1),m=I=>{const B=I.slice(-2);if(!y.includes(B))throw new Error(`Invalid unit '${B}' specified. Valid units are ${y.join(", ")}`);const k=I.substring(0,I.length-2);if(isNaN(Number(k)))throw new Error(`Invalid value '${k}' specified. Expected a valid number.`);return`${Number(k)}${B}`},y=["mm","cm","in","pt","pc","pi"],w=I=>{const B=m(I);if(parseFloat(B)<0)throw new Error(`Invalid value '${B}' specified. Expected a positive number.`);return B},b=I=>{if(I==="auto")return I;const B=I.charAt(0)==="#"?I.substring(1):I;return h(B,3)},O=I=>typeof I=="string"?m(I):c(I),v=I=>typeof I=="string"?w(I):u(I),_=I=>typeof I=="string"?m(I):c(I),S=I=>typeof I=="string"?w(I):u(I),R=I=>{if(I.slice(-1)!=="%")throw new Error(`Invalid value '${I}'. Expected percentage value (eg '55%')`);const B=I.substring(0,I.length-1);if(isNaN(Number(B)))throw new Error(`Invalid value '${B}' specified. Expected a valid number.`);return`${Number(B)}%`},N=I=>typeof I=="number"?c(I):I.slice(-1)==="%"?R(I):m(I),T=u,C=u,Q=I=>I.toISOString()},4927:(o,a,l)=>{function c(u){try{if(!l.g.localStorage)return!1}catch{return!1}var h=l.g.localStorage[u];return h!=null&&String(h).toLowerCase()==="true"}o.exports=function(u,h){if(c("noDeprecation"))return u;var f=!1;return function(){if(!f){if(c("throwDeprecation"))throw new Error(h);c("traceDeprecation")?console.trace(h):console.warn(h),f=!0}return u.apply(this,arguments)}}},9881:o=>{o.exports={isArray:function(a){return Array.isArray?Array.isArray(a):Object.prototype.toString.call(a)==="[object Array]"}}},7888:(o,a,l)=>{var c=l(1229),u=l(1388),h=l(6501),f=l(4673);o.exports={xml2js:c,xml2json:u,js2xml:h,json2xml:f}},6501:(o,a,l)=>{var c,u,h=l(4740),f=l(9881).isArray;function p(T,C,Q){return(!Q&&T.spaces?`
`:"")+Array(C+1).join(T.spaces)}function d(T,C,Q){if(C.ignoreAttributes)return"";"attributesFn"in C&&(T=C.attributesFn(T,u,c));var I,B,k,j,ne=[];for(I in T)T.hasOwnProperty(I)&&T[I]!==null&&T[I]!==void 0&&(j=C.noQuotesForNativeAttributes&&typeof T[I]!="string"?"":'"',B=(B=""+T[I]).replace(/"/g,"&quot;"),k="attributeNameFn"in C?C.attributeNameFn(I,B,u,c):I,ne.push(C.spaces&&C.indentAttributes?p(C,Q+1,!1):" "),ne.push(k+"="+j+("attributeValueFn"in C?C.attributeValueFn(B,I,u,c):B)+j));return T&&Object.keys(T).length&&C.spaces&&C.indentAttributes&&ne.push(p(C,Q,!1)),ne.join("")}function m(T,C,Q){return c=T,u="xml",C.ignoreDeclaration?"":"<?xml"+d(T[C.attributesKey],C,Q)+"?>"}function y(T,C,Q){if(C.ignoreInstruction)return"";var I;for(I in T)if(T.hasOwnProperty(I))break;var B="instructionNameFn"in C?C.instructionNameFn(I,T[I],u,c):I;if(typeof T[I]=="object")return c=T,u=B,"<?"+B+d(T[I][C.attributesKey],C,Q)+"?>";var k=T[I]?T[I]:"";return"instructionFn"in C&&(k=C.instructionFn(k,I,u,c)),"<?"+B+(k?" "+k:"")+"?>"}function w(T,C){return C.ignoreComment?"":"<!--"+("commentFn"in C?C.commentFn(T,u,c):T)+"-->"}function b(T,C){return C.ignoreCdata?"":"<![CDATA["+("cdataFn"in C?C.cdataFn(T,u,c):T.replace("]]>","]]]]><![CDATA[>"))+"]]>"}function O(T,C){return C.ignoreDoctype?"":"<!DOCTYPE "+("doctypeFn"in C?C.doctypeFn(T,u,c):T)+">"}function v(T,C){return C.ignoreText?"":(T=(T=(T=""+T).replace(/&amp;/g,"&")).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),"textFn"in C?C.textFn(T,u,c):T)}function _(T,C,Q,I){return T.reduce(function(B,k){var j=p(C,Q,I&&!B);switch(k.type){case"element":return B+j+function(Z,le,oe){c=Z,u=Z.name;var pe=[],P="elementNameFn"in le?le.elementNameFn(Z.name,Z):Z.name;pe.push("<"+P),Z[le.attributesKey]&&pe.push(d(Z[le.attributesKey],le,oe));var D=Z[le.elementsKey]&&Z[le.elementsKey].length||Z[le.attributesKey]&&Z[le.attributesKey]["xml:space"]==="preserve";return D||(D="fullTagEmptyElementFn"in le?le.fullTagEmptyElementFn(Z.name,Z):le.fullTagEmptyElement),D?(pe.push(">"),Z[le.elementsKey]&&Z[le.elementsKey].length&&(pe.push(_(Z[le.elementsKey],le,oe+1)),c=Z,u=Z.name),pe.push(le.spaces&&function(H,F){var se;if(H.elements&&H.elements.length)for(se=0;se<H.elements.length;++se)switch(H.elements[se][F.typeKey]){case"text":if(F.indentText)return!0;break;case"cdata":if(F.indentCdata)return!0;break;case"instruction":if(F.indentInstruction)return!0;break;default:return!0}return!1}(Z,le)?`
`+Array(oe+1).join(le.spaces):""),pe.push("</"+P+">")):pe.push("/>"),pe.join("")}(k,C,Q);case"comment":return B+j+w(k[C.commentKey],C);case"doctype":return B+j+O(k[C.doctypeKey],C);case"cdata":return B+(C.indentCdata?j:"")+b(k[C.cdataKey],C);case"text":return B+(C.indentText?j:"")+v(k[C.textKey],C);case"instruction":var ne={};return ne[k[C.nameKey]]=k[C.attributesKey]?k:k[C.instructionKey],B+(C.indentInstruction?j:"")+y(ne,C,Q)}},"")}function S(T,C,Q){var I;for(I in T)if(T.hasOwnProperty(I))switch(I){case C.parentKey:case C.attributesKey:break;case C.textKey:if(C.indentText||Q)return!0;break;case C.cdataKey:if(C.indentCdata||Q)return!0;break;case C.instructionKey:if(C.indentInstruction||Q)return!0;break;case C.doctypeKey:case C.commentKey:default:return!0}return!1}function R(T,C,Q,I,B){c=T,u=C;var k="elementNameFn"in Q?Q.elementNameFn(C,T):C;if(T==null||T==="")return"fullTagEmptyElementFn"in Q&&Q.fullTagEmptyElementFn(C,T)||Q.fullTagEmptyElement?"<"+k+"></"+k+">":"<"+k+"/>";var j=[];if(C){if(j.push("<"+k),typeof T!="object")return j.push(">"+v(T,Q)+"</"+k+">"),j.join("");T[Q.attributesKey]&&j.push(d(T[Q.attributesKey],Q,I));var ne=S(T,Q,!0)||T[Q.attributesKey]&&T[Q.attributesKey]["xml:space"]==="preserve";if(ne||(ne="fullTagEmptyElementFn"in Q?Q.fullTagEmptyElementFn(C,T):Q.fullTagEmptyElement),!ne)return j.push("/>"),j.join("");j.push(">")}return j.push(N(T,Q,I+1,!1)),c=T,u=C,C&&j.push((B?p(Q,I,!1):"")+"</"+k+">"),j.join("")}function N(T,C,Q,I){var B,k,j,ne=[];for(k in T)if(T.hasOwnProperty(k))for(j=f(T[k])?T[k]:[T[k]],B=0;B<j.length;++B){switch(k){case C.declarationKey:ne.push(m(j[B],C,Q));break;case C.instructionKey:ne.push((C.indentInstruction?p(C,Q,I):"")+y(j[B],C,Q));break;case C.attributesKey:case C.parentKey:break;case C.textKey:ne.push((C.indentText?p(C,Q,I):"")+v(j[B],C));break;case C.cdataKey:ne.push((C.indentCdata?p(C,Q,I):"")+b(j[B],C));break;case C.doctypeKey:ne.push(p(C,Q,I)+O(j[B],C));break;case C.commentKey:ne.push(p(C,Q,I)+w(j[B],C));break;default:ne.push(p(C,Q,I)+R(j[B],k,C,Q,S(j[B],C)))}I=I&&!ne.length}return ne.join("")}o.exports=function(T,C){C=function(I){var B=h.copyOptions(I);return h.ensureFlagExists("ignoreDeclaration",B),h.ensureFlagExists("ignoreInstruction",B),h.ensureFlagExists("ignoreAttributes",B),h.ensureFlagExists("ignoreText",B),h.ensureFlagExists("ignoreComment",B),h.ensureFlagExists("ignoreCdata",B),h.ensureFlagExists("ignoreDoctype",B),h.ensureFlagExists("compact",B),h.ensureFlagExists("indentText",B),h.ensureFlagExists("indentCdata",B),h.ensureFlagExists("indentAttributes",B),h.ensureFlagExists("indentInstruction",B),h.ensureFlagExists("fullTagEmptyElement",B),h.ensureFlagExists("noQuotesForNativeAttributes",B),h.ensureSpacesExists(B),typeof B.spaces=="number"&&(B.spaces=Array(B.spaces+1).join(" ")),h.ensureKeyExists("declaration",B),h.ensureKeyExists("instruction",B),h.ensureKeyExists("attributes",B),h.ensureKeyExists("text",B),h.ensureKeyExists("comment",B),h.ensureKeyExists("cdata",B),h.ensureKeyExists("doctype",B),h.ensureKeyExists("type",B),h.ensureKeyExists("name",B),h.ensureKeyExists("elements",B),h.checkFnExists("doctype",B),h.checkFnExists("instruction",B),h.checkFnExists("cdata",B),h.checkFnExists("comment",B),h.checkFnExists("text",B),h.checkFnExists("instructionName",B),h.checkFnExists("elementName",B),h.checkFnExists("attributeName",B),h.checkFnExists("attributeValue",B),h.checkFnExists("attributes",B),h.checkFnExists("fullTagEmptyElement",B),B}(C);var Q=[];return c=T,u="_root_",C.compact?Q.push(N(T,C,0,!0)):(T[C.declarationKey]&&Q.push(m(T[C.declarationKey],C,0)),T[C.elementsKey]&&T[C.elementsKey].length&&Q.push(_(T[C.elementsKey],C,0,!Q.length))),Q.join("")}},4673:(o,a,l)=>{var c=l(6501);o.exports=function(u,h){u instanceof Buffer&&(u=u.toString());var f=null;if(typeof u=="string")try{f=JSON.parse(u)}catch{throw new Error("The JSON structure is invalid")}else f=u;return c(f,h)}},4740:(o,a,l)=>{var c=l(9881).isArray;o.exports={copyOptions:function(u){var h,f={};for(h in u)u.hasOwnProperty(h)&&(f[h]=u[h]);return f},ensureFlagExists:function(u,h){u in h&&typeof h[u]=="boolean"||(h[u]=!1)},ensureSpacesExists:function(u){(!("spaces"in u)||typeof u.spaces!="number"&&typeof u.spaces!="string")&&(u.spaces=0)},ensureAlwaysArrayExists:function(u){"alwaysArray"in u&&(typeof u.alwaysArray=="boolean"||c(u.alwaysArray))||(u.alwaysArray=!1)},ensureKeyExists:function(u,h){u+"Key"in h&&typeof h[u+"Key"]=="string"||(h[u+"Key"]=h.compact?"_"+u:u)},checkFnExists:function(u,h){return u+"Fn"in h}}},1229:(o,a,l)=>{var c,u,h=l(6099),f=l(4740),p=l(9881).isArray;function d(T){var C=Number(T);if(!isNaN(C))return C;var Q=T.toLowerCase();return Q==="true"||Q!=="false"&&T}function m(T,C){var Q;if(c.compact){if(!u[c[T+"Key"]]&&(p(c.alwaysArray)?c.alwaysArray.indexOf(c[T+"Key"])!==-1:c.alwaysArray)&&(u[c[T+"Key"]]=[]),u[c[T+"Key"]]&&!p(u[c[T+"Key"]])&&(u[c[T+"Key"]]=[u[c[T+"Key"]]]),T+"Fn"in c&&typeof C=="string"&&(C=c[T+"Fn"](C,u)),T==="instruction"&&("instructionFn"in c||"instructionNameFn"in c)){for(Q in C)if(C.hasOwnProperty(Q))if("instructionFn"in c)C[Q]=c.instructionFn(C[Q],Q,u);else{var I=C[Q];delete C[Q],C[c.instructionNameFn(Q,I,u)]=I}}p(u[c[T+"Key"]])?u[c[T+"Key"]].push(C):u[c[T+"Key"]]=C}else{u[c.elementsKey]||(u[c.elementsKey]=[]);var B={};if(B[c.typeKey]=T,T==="instruction"){for(Q in C)if(C.hasOwnProperty(Q))break;B[c.nameKey]="instructionNameFn"in c?c.instructionNameFn(Q,C,u):Q,c.instructionHasAttributes?(B[c.attributesKey]=C[Q][c.attributesKey],"instructionFn"in c&&(B[c.attributesKey]=c.instructionFn(B[c.attributesKey],Q,u))):("instructionFn"in c&&(C[Q]=c.instructionFn(C[Q],Q,u)),B[c.instructionKey]=C[Q])}else T+"Fn"in c&&(C=c[T+"Fn"](C,u)),B[c[T+"Key"]]=C;c.addParent&&(B[c.parentKey]=u),u[c.elementsKey].push(B)}}function y(T){var C;if("attributesFn"in c&&T&&(T=c.attributesFn(T,u)),(c.trim||"attributeValueFn"in c||"attributeNameFn"in c||c.nativeTypeAttributes)&&T){for(C in T)if(T.hasOwnProperty(C)&&(c.trim&&(T[C]=T[C].trim()),c.nativeTypeAttributes&&(T[C]=d(T[C])),"attributeValueFn"in c&&(T[C]=c.attributeValueFn(T[C],C,u)),"attributeNameFn"in c)){var Q=T[C];delete T[C],T[c.attributeNameFn(C,T[C],u)]=Q}}return T}function w(T){var C={};if(T.body&&(T.name.toLowerCase()==="xml"||c.instructionHasAttributes)){for(var Q,I=/([\w:-]+)\s*=\s*(?:"([^"]*)"|'([^']*)'|(\w+))\s*/g;(Q=I.exec(T.body))!==null;)C[Q[1]]=Q[2]||Q[3]||Q[4];C=y(C)}if(T.name.toLowerCase()==="xml"){if(c.ignoreDeclaration)return;u[c.declarationKey]={},Object.keys(C).length&&(u[c.declarationKey][c.attributesKey]=C),c.addParent&&(u[c.declarationKey][c.parentKey]=u)}else{if(c.ignoreInstruction)return;c.trim&&(T.body=T.body.trim());var B={};c.instructionHasAttributes&&Object.keys(C).length?(B[T.name]={},B[T.name][c.attributesKey]=C):B[T.name]=T.body,m("instruction",B)}}function b(T,C){var Q;if(typeof T=="object"&&(C=T.attributes,T=T.name),C=y(C),"elementNameFn"in c&&(T=c.elementNameFn(T,u)),c.compact){var I;if(Q={},!c.ignoreAttributes&&C&&Object.keys(C).length)for(I in Q[c.attributesKey]={},C)C.hasOwnProperty(I)&&(Q[c.attributesKey][I]=C[I]);!(T in u)&&(p(c.alwaysArray)?c.alwaysArray.indexOf(T)!==-1:c.alwaysArray)&&(u[T]=[]),u[T]&&!p(u[T])&&(u[T]=[u[T]]),p(u[T])?u[T].push(Q):u[T]=Q}else u[c.elementsKey]||(u[c.elementsKey]=[]),(Q={})[c.typeKey]="element",Q[c.nameKey]=T,!c.ignoreAttributes&&C&&Object.keys(C).length&&(Q[c.attributesKey]=C),c.alwaysChildren&&(Q[c.elementsKey]=[]),u[c.elementsKey].push(Q);Q[c.parentKey]=u,u=Q}function O(T){c.ignoreText||(T.trim()||c.captureSpacesBetweenElements)&&(c.trim&&(T=T.trim()),c.nativeType&&(T=d(T)),c.sanitize&&(T=T.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),m("text",T))}function v(T){c.ignoreComment||(c.trim&&(T=T.trim()),m("comment",T))}function _(T){var C=u[c.parentKey];c.addParent||delete u[c.parentKey],u=C}function S(T){c.ignoreCdata||(c.trim&&(T=T.trim()),m("cdata",T))}function R(T){c.ignoreDoctype||(T=T.replace(/^ /,""),c.trim&&(T=T.trim()),m("doctype",T))}function N(T){T.note=T}o.exports=function(T,C){var Q=h.parser(!0,{}),I={};if(u=I,c=function(k){return c=f.copyOptions(k),f.ensureFlagExists("ignoreDeclaration",c),f.ensureFlagExists("ignoreInstruction",c),f.ensureFlagExists("ignoreAttributes",c),f.ensureFlagExists("ignoreText",c),f.ensureFlagExists("ignoreComment",c),f.ensureFlagExists("ignoreCdata",c),f.ensureFlagExists("ignoreDoctype",c),f.ensureFlagExists("compact",c),f.ensureFlagExists("alwaysChildren",c),f.ensureFlagExists("addParent",c),f.ensureFlagExists("trim",c),f.ensureFlagExists("nativeType",c),f.ensureFlagExists("nativeTypeAttributes",c),f.ensureFlagExists("sanitize",c),f.ensureFlagExists("instructionHasAttributes",c),f.ensureFlagExists("captureSpacesBetweenElements",c),f.ensureAlwaysArrayExists(c),f.ensureKeyExists("declaration",c),f.ensureKeyExists("instruction",c),f.ensureKeyExists("attributes",c),f.ensureKeyExists("text",c),f.ensureKeyExists("comment",c),f.ensureKeyExists("cdata",c),f.ensureKeyExists("doctype",c),f.ensureKeyExists("type",c),f.ensureKeyExists("name",c),f.ensureKeyExists("elements",c),f.ensureKeyExists("parent",c),f.checkFnExists("doctype",c),f.checkFnExists("instruction",c),f.checkFnExists("cdata",c),f.checkFnExists("comment",c),f.checkFnExists("text",c),f.checkFnExists("instructionName",c),f.checkFnExists("elementName",c),f.checkFnExists("attributeName",c),f.checkFnExists("attributeValue",c),f.checkFnExists("attributes",c),c}(C),Q.opt={strictEntities:!0},Q.onopentag=b,Q.ontext=O,Q.oncomment=v,Q.onclosetag=_,Q.onerror=N,Q.oncdata=S,Q.ondoctype=R,Q.onprocessinginstruction=w,Q.write(T).close(),I[c.elementsKey]){var B=I[c.elementsKey];delete I[c.elementsKey],I[c.elementsKey]=B,delete I.text}return I}},1388:(o,a,l)=>{var c=l(4740),u=l(1229);o.exports=function(h,f){var p,d,m;return p=function(y){var w=c.copyOptions(y);return c.ensureSpacesExists(w),w}(f),d=u(h,p),m="compact"in p&&p.compact?"_parent":"parent",("addParent"in p&&p.addParent?JSON.stringify(d,function(y,w){return y===m?"_":w},p.spaces):JSON.stringify(d,null,p.spaces)).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}},255:o=>{var a={"&":"&amp;",'"':"&quot;","'":"&apos;","<":"&lt;",">":"&gt;"};o.exports=function(l){return l&&l.replace?l.replace(/([&"<>'])/g,function(c,u){return a[u]}):l}},3479:(o,a,l)=>{var c=l(4155),u=l(255),h=l(2830).Stream;function f(d,m,y){y=y||0;var w,b,O=(w=m,new Array(y||0).join(w||"")),v=d;if(typeof d=="object"&&(v=d[b=Object.keys(d)[0]])&&v._elem)return v._elem.name=b,v._elem.icount=y,v._elem.indent=m,v._elem.indents=O,v._elem.interrupt=v,v._elem;var _,S=[],R=[];function N(T){Object.keys(T).forEach(function(C){S.push(function(Q,I){return Q+'="'+u(I)+'"'}(C,T[C]))})}switch(typeof v){case"object":if(v===null)break;v._attr&&N(v._attr),v._cdata&&R.push(("<![CDATA["+v._cdata).replace(/\]\]>/g,"]]]]><![CDATA[>")+"]]>"),v.forEach&&(_=!1,R.push(""),v.forEach(function(T){typeof T=="object"?Object.keys(T)[0]=="_attr"?N(T._attr):R.push(f(T,m,y+1)):(R.pop(),_=!0,R.push(u(T)))}),_||R.push(""));break;default:R.push(u(v))}return{name:b,interrupt:!1,attributes:S,content:R,icount:y,indents:O,indent:m}}function p(d,m,y){if(typeof m!="object")return d(!1,m);var w=m.interrupt?1:m.content.length;function b(){for(;m.content.length;){var v=m.content.shift();if(v!==void 0){if(O(v))return;p(d,v)}}d(!1,(w>1?m.indents:"")+(m.name?"</"+m.name+">":"")+(m.indent&&!y?`
`:"")),y&&y()}function O(v){return!!v.interrupt&&(v.interrupt.append=d,v.interrupt.end=b,v.interrupt=!1,d(!0),!0)}if(d(!1,m.indents+(m.name?"<"+m.name:"")+(m.attributes.length?" "+m.attributes.join(" "):"")+(w?m.name?">":"":m.name?"/>":"")+(m.indent&&w>1?`
`:"")),!w)return d(!1,m.indent?`
`:"");O(m)||b()}o.exports=function(d,m){typeof m!="object"&&(m={indent:m});var y,w,b=m.stream?new h:null,O="",v=!1,_=m.indent?m.indent===!0?"    ":m.indent:"",S=!0;function R(Q){S?c.nextTick(Q):Q()}function N(Q,I){if(I!==void 0&&(O+=I),Q&&!v&&(b=b||new h,v=!0),Q&&v){var B=O;R(function(){b.emit("data",B)}),O=""}}function T(Q,I){p(N,f(Q,_,_?1:0),I)}function C(){if(b){var Q=O;R(function(){b.emit("data",Q),b.emit("end"),b.readable=!1,b.emit("close")})}}return R(function(){S=!1}),m.declaration&&(w={version:"1.0",encoding:(y=m.declaration).encoding||"UTF-8"},y.standalone&&(w.standalone=y.standalone),T({"?xml":{_attr:w}}),O=O.replace("/>","?>")),d&&d.forEach?d.forEach(function(Q,I){var B;I+1===d.length&&(B=C),T(Q,B)}):T(d,C),b?(b.readable=!0,b):O},o.exports.element=o.exports.Element=function(){var d=Array.prototype.slice.call(arguments),m={_elem:f(d),push:function(y){if(!this.append)throw new Error("not assigned to a parent!");var w=this,b=this._elem.indent;p(this.append,f(y,b,this._elem.icount+(b?1:0)),function(){w.append(!0)})},close:function(y){y!==void 0&&this.push(y),this.end&&this.end()}};return m}}},r={};function i(o){var a=r[o];if(a!==void 0)return a.exports;var l=r[o]={exports:{}};return t[o].call(l.exports,l,l.exports,i),l.exports}i.d=(o,a)=>{for(var l in a)i.o(a,l)&&!i.o(o,l)&&Object.defineProperty(o,l,{enumerable:!0,get:a[l]})},i.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),i.o=(o,a)=>Object.prototype.hasOwnProperty.call(o,a),i.r=o=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})};var s={};return(()=>{i.r(s),i.d(s,{AbstractNumbering:()=>Op,Alignment:()=>D,AlignmentAttributes:()=>P,AlignmentType:()=>O,Attributes:()=>h,BaseEmphasisMark:()=>$e,BaseXmlComponent:()=>o,Body:()=>Eb,Bookmark:()=>ib,BookmarkEnd:()=>ob,BookmarkStart:()=>sb,Border:()=>se,BorderElement:()=>H,BorderStyle:()=>v,Column:()=>RR,ColumnAttributes:()=>Cb,ColumnBreak:()=>OR,Columns:()=>ub,ColumnsAttributes:()=>cb,Comment:()=>Z0,CommentRangeEnd:()=>pR,CommentRangeStart:()=>dR,CommentReference:()=>mR,Comments:()=>G0,ConcreteHyperlink:()=>Zd,ConcreteNumbering:()=>yp,DeletedTextRun:()=>VQ,DocGridAttributes:()=>hb,Document:()=>mv,DocumentAttributes:()=>To,DocumentBackground:()=>Pb,DocumentBackgroundAttributes:()=>Ab,DocumentDefaults:()=>fv,DocumentGrid:()=>fb,DocumentGridType:()=>$d,DotEmphasisMark:()=>Ce,Drawing:()=>z0,DropCapType:()=>Yd,EMPTY_OBJECT:()=>a,EmphasisMark:()=>Be,EmphasisMarkType:()=>Q,ExternalHyperlink:()=>rb,File:()=>mv,FootNoteReferenceRunAttributes:()=>gv,FootNotes:()=>iv,Footer:()=>DQ,FooterWrapper:()=>hp,FootnoteReference:()=>Ov,FootnoteReferenceRun:()=>MQ,FrameAnchorType:()=>Kd,FrameProperties:()=>Qb,FramePropertiesAttributes:()=>Ib,FrameWrap:()=>Jd,GridSpan:()=>Hb,Header:()=>LQ,HeaderFooterReference:()=>eu,HeaderFooterReferenceType:()=>_i,HeaderFooterType:()=>Xa,HeaderWrapper:()=>dp,HeadingLevel:()=>ko,HeightRule:()=>up,HorizontalPosition:()=>M0,HorizontalPositionAlign:()=>S,HorizontalPositionRelativeFrom:()=>zi,HpsMeasureElement:()=>ne,HyperlinkType:()=>Dd,IgnoreIfEmptyXmlComponent:()=>c,ImageRun:()=>sR,ImportDotx:()=>HQ,ImportedRootElementAttributes:()=>y,ImportedXmlComponent:()=>m,Indent:()=>ee,InitializableXmlComponent:()=>b,InsertedTextRun:()=>$Q,InternalHyperlink:()=>SR,LeaderType:()=>wi,Level:()=>sv,LevelBase:()=>gp,LevelForOverride:()=>eQ,LevelFormat:()=>gr,LevelOverride:()=>ov,LevelSuffix:()=>mp,LineNumberAttributes:()=>db,LineNumberRestartFormat:()=>Bd,LineNumberType:()=>pb,LineRuleType:()=>zr,Math:()=>DR,MathAccentCharacter:()=>Db,MathAngledBrackets:()=>uI,MathBase:()=>er,MathCurlyBrackets:()=>cI,MathDegree:()=>Vb,MathDenominator:()=>Nb,MathFraction:()=>BR,MathFunction:()=>nI,MathFunctionName:()=>jb,MathFunctionProperties:()=>qb,MathIntegral:()=>zR,MathLimitLocation:()=>Mb,MathNAryProperties:()=>ep,MathNumerator:()=>Lb,MathPreSubSuperScript:()=>YR,MathPreSubSuperScriptProperties:()=>Ub,MathRadical:()=>tI,MathRadicalProperties:()=>Wb,MathRoundBrackets:()=>aI,MathRun:()=>$R,MathSquareBrackets:()=>lI,MathSubScript:()=>ZR,MathSubScriptElement:()=>Eo,MathSubScriptProperties:()=>Bb,MathSubSuperScript:()=>GR,MathSubSuperScriptProperties:()=>Fb,MathSum:()=>XR,MathSuperScript:()=>HR,MathSuperScriptElement:()=>Co,MathSuperScriptProperties:()=>$b,Media:()=>pp,NumberFormat:()=>N,NumberProperties:()=>Hd,NumberValueElement:()=>le,Numbering:()=>av,OnOffElement:()=>j,OutlineLevel:()=>ab,OverlapType:()=>lp,Packer:()=>bv,PageBorderDisplay:()=>Fd,PageBorderOffsetFrom:()=>Ud,PageBorderZOrder:()=>Vd,PageBorders:()=>gb,PageBreak:()=>gR,PageBreakBefore:()=>K0,PageMargin:()=>yb,PageMarginAttributes:()=>Ob,PageNumber:()=>B,PageNumberSeparator:()=>Wd,PageNumberType:()=>vb,PageNumberTypeAttributes:()=>bb,PageOrientation:()=>za,PageReference:()=>CR,PageSize:()=>_b,PageSizeAttributes:()=>wb,PageTextDirection:()=>xb,PageTextDirectionType:()=>jd,Paragraph:()=>xi,ParagraphProperties:()=>$s,ParagraphPropertiesDefaults:()=>uv,PrettifyType:()=>vp,RelativeHorizontalPosition:()=>op,RelativeVerticalPosition:()=>ap,Run:()=>cn,RunFonts:()=>ce,RunProperties:()=>Ze,RunPropertiesChange:()=>Et,RunPropertiesDefaults:()=>hv,SectionProperties:()=>Tb,SectionType:()=>qd,SectionTypeAttributes:()=>Sb,SequentialIdentifier:()=>aR,Shading:()=>we,ShadingType:()=>C,SimpleField:()=>H0,SimpleMailMergeField:()=>uR,SimplePos:()=>N0,SpaceType:()=>T,Spacing:()=>J0,StringContainer:()=>pe,StringEnumValueElement:()=>oe,StringValueElement:()=>Z,Style:()=>Ha,StyleForCharacter:()=>Ka,StyleForParagraph:()=>Ya,StyleLevel:()=>NQ,Styles:()=>su,SymbolRun:()=>Kc,TDirection:()=>Zb,Tab:()=>lR,TabAttributes:()=>tb,TabStop:()=>eb,TabStopItem:()=>nb,TabStopPosition:()=>Yt,TabStopType:()=>Cn,Table:()=>vI,TableAnchorType:()=>sp,TableBorders:()=>ip,TableCell:()=>rp,TableCellBorders:()=>zb,TableFloatOptionsAttributes:()=>Gb,TableFloatProperties:()=>Yb,TableLayout:()=>Kb,TableLayoutType:()=>cp,TableOfContents:()=>QQ,TableProperties:()=>Jb,TableRow:()=>wI,TableRowHeight:()=>tv,TableRowHeightAttributes:()=>ev,TableRowProperties:()=>nv,TableWidthElement:()=>Gi,TextDirection:()=>tp,TextRun:()=>bi,TextWrappingSide:()=>vi,TextWrappingType:()=>Jn,ThematicBreak:()=>W,Type:()=>kb,Underline:()=>vt,UnderlineType:()=>I,VerticalAlign:()=>Md,VerticalAlignAttributes:()=>lb,VerticalAlignElement:()=>Gd,VerticalMerge:()=>np,VerticalMergeType:()=>Ga,VerticalPosition:()=>$0,VerticalPositionAlign:()=>R,VerticalPositionRelativeFrom:()=>Ms,WORKAROUND:()=>AQ,WORKAROUND2:()=>zI,WORKAROUND3:()=>w,WORKAROUND4:()=>KR,WidthType:()=>Ao,WrapNone:()=>Xd,WrapSquare:()=>F0,WrapTight:()=>U0,WrapTopAndBottom:()=>V0,XmlAttributeComponent:()=>u,XmlComponent:()=>l,convertInchesToTwip:()=>qt.convertInchesToTwip,convertMillimetersToTwip:()=>qt.convertMillimetersToTwip,convertToXmlComponent:()=>p,dateTimeValue:()=>qt.dateTimeValue,decimalNumber:()=>qt.decimalNumber,eighthPointMeasureValue:()=>qt.eighthPointMeasureValue,hexColorValue:()=>qt.hexColorValue,hpsMeasureValue:()=>qt.hpsMeasureValue,longHexNumber:()=>qt.longHexNumber,measurementOrPercentValue:()=>qt.measurementOrPercentValue,percentageValue:()=>qt.percentageValue,pointMeasureValue:()=>qt.pointMeasureValue,positiveUniversalMeasureValue:()=>qt.positiveUniversalMeasureValue,sectionMarginDefaults:()=>Zi,sectionPageSizeDefaults:()=>tu,shortHexNumber:()=>qt.shortHexNumber,signedHpsMeasureValue:()=>qt.signedHpsMeasureValue,signedTwipsMeasureValue:()=>qt.signedTwipsMeasureValue,twipsMeasureValue:()=>qt.twipsMeasureValue,uCharHexNumber:()=>qt.uCharHexNumber,uniqueId:()=>qt.uniqueId,uniqueNumericId:()=>qt.uniqueNumericId,universalMeasureValue:()=>qt.universalMeasureValue,unsignedDecimalNumber:()=>qt.unsignedDecimalNumber});class o{constructor(g){this.rootKey=g}}const a=Object.seal({});class l extends o{constructor(g){super(g),this.root=new Array}prepForXml(g){var M;const K=this.root.map(de=>de instanceof o?de.prepForXml(g):de).filter(de=>de!==void 0);return{[this.rootKey]:K.length?K.length===1&&((M=K[0])===null||M===void 0?void 0:M._attr)?K[0]:K:a}}addChildElement(g){return this.root.push(g),this}}class c extends l{prepForXml(g){const M=super.prepForXml(g);if(M&&(typeof M[this.rootKey]!="object"||Object.keys(M[this.rootKey]).length))return M}}class u extends o{constructor(g){super("_attr"),this.root=g}prepForXml(g){const M={};return Object.keys(this.root).forEach(K=>{const de=this.root[K];if(de!==void 0){const me=this.xmlKeys&&this.xmlKeys[K]||K;M[me]=de}}),{_attr:M}}}class h extends u{constructor(){super(...arguments),this.xmlKeys={val:"w:val",color:"w:color",fill:"w:fill",space:"w:space",sz:"w:sz",type:"w:type",rsidR:"w:rsidR",rsidRPr:"w:rsidRPr",rsidSect:"w:rsidSect",w:"w:w",h:"w:h",top:"w:top",right:"w:right",bottom:"w:bottom",left:"w:left",header:"w:header",footer:"w:footer",gutter:"w:gutter",linePitch:"w:linePitch",pos:"w:pos"}}}var f=i(7888);const p=x=>{switch(x.type){case void 0:case"element":const g=new m(x.name,x.attributes),M=x.elements||[];for(const K of M){const de=p(K);de!==void 0&&g.push(de)}return g;case"text":return x.text;default:return}};class d extends u{}class m extends l{static fromXmlString(g){const M=(0,f.xml2js)(g,{compact:!1});return p(M)}constructor(g,M){super(g),M&&this.root.push(new d(M))}push(g){this.root.push(g)}}class y extends l{constructor(g){super(""),this._attr=g}prepForXml(g){return{_attr:this._attr}}}const w="";class b extends l{constructor(g,M){super(g),M&&(this.root=M.root)}}var O,v,_,S,R,N,T,C,Q,I,B,k=i(6595);class j extends l{constructor(g,M=!0){super(g),M!==!0&&this.root.push(new h({val:M}))}}class ne extends l{constructor(g,M){super(g),this.root.push(new h({val:(0,k.KR)(M)}))}}class Z extends l{constructor(g,M){super(g),this.root.push(new h({val:M}))}}class le extends l{constructor(g,M){super(g),this.root.push(new h({val:M}))}}class oe extends l{constructor(g,M){super(g),this.root.push(new h({val:M}))}}class pe extends l{constructor(g,M){super(g),this.root.push(M)}}(function(x){x.START="start",x.END="end",x.CENTER="center",x.BOTH="both",x.JUSTIFIED="both",x.DISTRIBUTE="distribute",x.LEFT="left",x.RIGHT="right"})(O||(O={}));class P extends u{constructor(){super(...arguments),this.xmlKeys={val:"w:val"}}}class D extends l{constructor(g){super("w:jc"),this.root.push(new P({val:g}))}}class H extends l{constructor(g,{color:M,size:K,space:de,style:me}){super(g),this.root.push(new F({style:me,color:M===void 0?void 0:(0,k.dg)(M),size:K===void 0?void 0:(0,k.LV)(K),space:de===void 0?void 0:(0,k.gg)(de)}))}}class F extends u{constructor(){super(...arguments),this.xmlKeys={style:"w:val",color:"w:color",size:"w:sz",space:"w:space"}}}(function(x){x.SINGLE="single",x.DASH_DOT_STROKED="dashDotStroked",x.DASHED="dashed",x.DASH_SMALL_GAP="dashSmallGap",x.DOT_DASH="dotDash",x.DOT_DOT_DASH="dotDotDash",x.DOTTED="dotted",x.DOUBLE="double",x.DOUBLE_WAVE="doubleWave",x.INSET="inset",x.NIL="nil",x.NONE="none",x.OUTSET="outset",x.THICK="thick",x.THICK_THIN_LARGE_GAP="thickThinLargeGap",x.THICK_THIN_MEDIUM_GAP="thickThinMediumGap",x.THICK_THIN_SMALL_GAP="thickThinSmallGap",x.THIN_THICK_LARGE_GAP="thinThickLargeGap",x.THIN_THICK_MEDIUM_GAP="thinThickMediumGap",x.THIN_THICK_SMALL_GAP="thinThickSmallGap",x.THIN_THICK_THIN_LARGE_GAP="thinThickThinLargeGap",x.THIN_THICK_THIN_MEDIUM_GAP="thinThickThinMediumGap",x.THIN_THICK_THIN_SMALL_GAP="thinThickThinSmallGap",x.THREE_D_EMBOSS="threeDEmboss",x.THREE_D_ENGRAVE="threeDEngrave",x.TRIPLE="triple",x.WAVE="wave"})(v||(v={}));class se extends c{constructor(g){super("w:pBdr"),g.top&&this.root.push(new H("w:top",g.top)),g.bottom&&this.root.push(new H("w:bottom",g.bottom)),g.left&&this.root.push(new H("w:left",g.left)),g.right&&this.root.push(new H("w:right",g.right))}}class W extends l{constructor(){super("w:pBdr");const g=new H("w:bottom",{color:"auto",space:1,style:v.SINGLE,size:6});this.root.push(g)}}class Y extends u{constructor(){super(...arguments),this.xmlKeys={start:"w:start",end:"w:end",left:"w:left",right:"w:right",hanging:"w:hanging",firstLine:"w:firstLine"}}}class ee extends l{constructor({start:g,end:M,left:K,right:de,hanging:me,firstLine:Qe}){super("w:ind"),this.root.push(new Y({start:g===void 0?void 0:(0,k.xb)(g),end:M===void 0?void 0:(0,k.xb)(M),left:K===void 0?void 0:(0,k.xb)(K),right:de===void 0?void 0:(0,k.xb)(de),hanging:me===void 0?void 0:(0,k.Jd)(me),firstLine:Qe===void 0?void 0:(0,k.Jd)(Qe)}))}}class re extends l{constructor(){super("w:br")}}(function(x){x.BEGIN="begin",x.END="end",x.SEPARATE="separate"})(_||(_={}));class ie extends u{constructor(){super(...arguments),this.xmlKeys={type:"w:fldCharType",dirty:"w:dirty"}}}class V extends l{constructor(g){super("w:fldChar"),this.root.push(new ie({type:_.BEGIN,dirty:g}))}}class E extends l{constructor(g){super("w:fldChar"),this.root.push(new ie({type:_.SEPARATE,dirty:g}))}}class $ extends l{constructor(g){super("w:fldChar"),this.root.push(new ie({type:_.END,dirty:g}))}}(function(x){x.CENTER="center",x.INSIDE="inside",x.LEFT="left",x.OUTSIDE="outside",x.RIGHT="right"})(S||(S={})),function(x){x.BOTTOM="bottom",x.CENTER="center",x.INSIDE="inside",x.OUTSIDE="outside",x.TOP="top"}(R||(R={})),function(x){x.DECIMAL="decimal",x.UPPER_ROMAN="upperRoman",x.LOWER_ROMAN="lowerRoman",x.UPPER_LETTER="upperLetter",x.LOWER_LETTER="lowerLetter",x.ORDINAL="ordinal",x.CARDINAL_TEXT="cardinalText",x.ORDINAL_TEXT="ordinalText",x.HEX="hex",x.CHICAGO="chicago",x.IDEOGRAPH_DIGITAL="ideographDigital",x.JAPANESE_COUNTING="japaneseCounting",x.AIUEO="aiueo",x.IROHA="iroha",x.DECIMAL_FULL_WIDTH="decimalFullWidth",x.DECIMAL_HALF_WIDTH="decimalHalfWidth",x.JAPANESE_LEGAL="japaneseLegal",x.JAPANESE_DIGITAL_TEN_THOUSAND="japaneseDigitalTenThousand",x.DECIMAL_ENCLOSED_CIRCLE="decimalEnclosedCircle",x.DECIMAL_FULL_WIDTH_2="decimalFullWidth2",x.AIUEO_FULL_WIDTH="aiueoFullWidth",x.IROHA_FULL_WIDTH="irohaFullWidth",x.DECIMAL_ZERO="decimalZero",x.BULLET="bullet",x.GANADA="ganada",x.CHOSUNG="chosung",x.DECIMAL_ENCLOSED_FULL_STOP="decimalEnclosedFullstop",x.DECIMAL_ENCLOSED_PAREN="decimalEnclosedParen",x.DECIMAL_ENCLOSED_CIRCLE_CHINESE="decimalEnclosedCircleChinese",x.IDEOGRAPH_ENCLOSED_CIRCLE="ideographEnclosedCircle",x.IDEOGRAPH_TRADITIONAL="ideographTraditional",x.IDEOGRAPH_ZODIAC="ideographZodiac",x.IDEOGRAPH_ZODIAC_TRADITIONAL="ideographZodiacTraditional",x.TAIWANESE_COUNTING="taiwaneseCounting",x.IDEOGRAPH_LEGAL_TRADITIONAL="ideographLegalTraditional",x.TAIWANESE_COUNTING_THOUSAND="taiwaneseCountingThousand",x.TAIWANESE_DIGITAL="taiwaneseDigital",x.CHINESE_COUNTING="chineseCounting",x.CHINESE_LEGAL_SIMPLIFIED="chineseLegalSimplified",x.CHINESE_COUNTING_TEN_THOUSAND="chineseCountingThousand",x.KOREAN_DIGITAL="koreanDigital",x.KOREAN_COUNTING="koreanCounting",x.KOREAN_LEGAL="koreanLegal",x.KOREAN_DIGITAL_2="koreanDigital2",x.VIETNAMESE_COUNTING="vietnameseCounting",x.RUSSIAN_LOWER="russianLower",x.RUSSIAN_UPPER="russianUpper",x.NONE="none",x.NUMBER_IN_DASH="numberInDash",x.HEBREW_1="hebrew1",x.HEBREW_2="hebrew2",x.ARABIC_ALPHA="arabicAlpha",x.ARABIC_ABJAD="arabicAbjad",x.HINDI_VOWELS="hindiVowels",x.HINDI_CONSONANTS="hindiConsonants",x.HINDI_NUMBERS="hindiNumbers",x.HINDI_COUNTING="hindiCounting",x.THAI_LETTERS="thaiLetters",x.THAI_NUMBERS="thaiNumbers",x.THAI_COUNTING="thaiCounting",x.BAHT_TEXT="bahtText",x.DOLLAR_TEXT="dollarText"}(N||(N={})),function(x){x.DEFAULT="default",x.PRESERVE="preserve"}(T||(T={}));class X extends u{constructor(){super(...arguments),this.xmlKeys={space:"xml:space"}}}class ue extends l{constructor(){super("w:instrText"),this.root.push(new X({space:T.PRESERVE})),this.root.push("PAGE")}}class ye extends l{constructor(){super("w:instrText"),this.root.push(new X({space:T.PRESERVE})),this.root.push("NUMPAGES")}}class Re extends l{constructor(){super("w:instrText"),this.root.push(new X({space:T.PRESERVE})),this.root.push("SECTIONPAGES")}}class ge extends u{constructor(){super(...arguments),this.xmlKeys={fill:"w:fill",color:"w:color",type:"w:val"}}}class we extends l{constructor({fill:g,color:M,type:K}){super("w:shd"),this.root.push(new ge({fill:g===void 0?void 0:(0,k.dg)(g),color:M===void 0?void 0:(0,k.dg)(M),type:K}))}}(function(x){x.CLEAR="clear",x.DIAGONAL_CROSS="diagCross",x.DIAGONAL_STRIPE="diagStripe",x.HORIZONTAL_CROSS="horzCross",x.HORIZONTAL_STRIPE="horzStripe",x.NIL="nil",x.PERCENT_5="pct5",x.PERCENT_10="pct10",x.PERCENT_12="pct12",x.PERCENT_15="pct15",x.PERCENT_20="pct20",x.PERCENT_25="pct25",x.PERCENT_30="pct30",x.PERCENT_35="pct35",x.PERCENT_37="pct37",x.PERCENT_40="pct40",x.PERCENT_45="pct45",x.PERCENT_50="pct50",x.PERCENT_55="pct55",x.PERCENT_60="pct60",x.PERCENT_62="pct62",x.PERCENT_65="pct65",x.PERCENT_70="pct70",x.PERCENT_75="pct75",x.PERCENT_80="pct80",x.PERCENT_85="pct85",x.PERCENT_87="pct87",x.PERCENT_90="pct90",x.PERCENT_95="pct95",x.REVERSE_DIAGONAL_STRIPE="reverseDiagStripe",x.SOLID="solid",x.THIN_DIAGONAL_CROSS="thinDiagCross",x.THIN_DIAGONAL_STRIPE="thinDiagStripe",x.THIN_HORIZONTAL_CROSS="thinHorzCross",x.THIN_REVERSE_DIAGONAL_STRIPE="thinReverseDiagStripe",x.THIN_VERTICAL_STRIPE="thinVertStripe",x.VERTICAL_STRIPE="vertStripe"})(C||(C={}));class Ne extends u{constructor(){super(...arguments),this.xmlKeys={id:"w:id",author:"w:author",date:"w:date"}}}(function(x){x.DOT="dot"})(Q||(Q={}));class $e extends l{constructor(g){super("w:em"),this.root.push(new h({val:g}))}}class Be extends $e{constructor(g=Q.DOT){super(g)}}class Ce extends $e{constructor(){super(Q.DOT)}}class A extends l{constructor(g){super("w:spacing"),this.root.push(new h({val:(0,k.xb)(g)}))}}class L extends l{constructor(g){super("w:color"),this.root.push(new h({val:(0,k.dg)(g)}))}}class q extends l{constructor(g){super("w:highlight"),this.root.push(new h({val:g}))}}class te extends l{constructor(g){super("w:highlightCs"),this.root.push(new h({val:g}))}}class ae extends u{constructor(){super(...arguments),this.xmlKeys={ascii:"w:ascii",cs:"w:cs",eastAsia:"w:eastAsia",hAnsi:"w:hAnsi",hint:"w:hint"}}}class ce extends l{constructor(g,M){if(super("w:rFonts"),typeof g=="string"){const K=g;this.root.push(new ae({ascii:K,cs:K,eastAsia:K,hAnsi:K,hint:M}))}else{const K=g;this.root.push(new ae(K))}}}class fe extends l{constructor(g){super("w:vertAlign"),this.root.push(new h({val:g}))}}class Ie extends fe{constructor(){super("superscript")}}class at extends fe{constructor(){super("subscript")}}(function(x){x.SINGLE="single",x.WORDS="words",x.DOUBLE="double",x.THICK="thick",x.DOTTED="dotted",x.DOTTEDHEAVY="dottedHeavy",x.DASH="dash",x.DASHEDHEAVY="dashedHeavy",x.DASHLONG="dashLong",x.DASHLONGHEAVY="dashLongHeavy",x.DOTDASH="dotDash",x.DASHDOTHEAVY="dashDotHeavy",x.DOTDOTDASH="dotDotDash",x.DASHDOTDOTHEAVY="dashDotDotHeavy",x.WAVE="wave",x.WAVYHEAVY="wavyHeavy",x.WAVYDOUBLE="wavyDouble"})(I||(I={}));class vt extends l{constructor(g=I.SINGLE,M){super("w:u"),this.root.push(new h({val:g,color:M===void 0?void 0:(0,k.dg)(M)}))}}class Ze extends c{constructor(g){var M,K;if(super("w:rPr"),!g)return;g.bold!==void 0&&this.push(new j("w:b",g.bold)),(g.boldComplexScript===void 0&&g.bold!==void 0||g.boldComplexScript)&&this.push(new j("w:bCs",(M=g.boldComplexScript)!==null&&M!==void 0?M:g.bold)),g.italics!==void 0&&this.push(new j("w:i",g.italics)),(g.italicsComplexScript===void 0&&g.italics!==void 0||g.italicsComplexScript)&&this.push(new j("w:iCs",(K=g.italicsComplexScript)!==null&&K!==void 0?K:g.italics)),g.underline&&this.push(new vt(g.underline.type,g.underline.color)),g.emphasisMark&&this.push(new Be(g.emphasisMark.type)),g.color&&this.push(new L(g.color)),g.size!==void 0&&this.push(new ne("w:sz",g.size));const de=g.sizeComplexScript===void 0||g.sizeComplexScript===!0?g.size:g.sizeComplexScript;de&&this.push(new ne("w:szCs",de)),g.rightToLeft!==void 0&&this.push(new j("w:rtl",g.rightToLeft)),g.smallCaps!==void 0?this.push(new j("w:smallCaps",g.smallCaps)):g.allCaps!==void 0&&this.push(new j("w:caps",g.allCaps)),g.strike!==void 0&&this.push(new j("w:strike",g.strike)),g.doubleStrike!==void 0&&this.push(new j("w:dstrike",g.doubleStrike)),g.subScript&&this.push(new at),g.superScript&&this.push(new Ie),g.style&&this.push(new Z("w:rStyle",g.style)),g.font&&(typeof g.font=="string"?this.push(new ce(g.font)):"name"in g.font?this.push(new ce(g.font.name,g.font.hint)):this.push(new ce(g.font))),g.highlight&&this.push(new q(g.highlight));const me=g.highlightComplexScript===void 0||g.highlightComplexScript===!0?g.highlight:g.highlightComplexScript;me&&this.push(new te(me)),g.characterSpacing&&this.push(new A(g.characterSpacing)),g.emboss!==void 0&&this.push(new j("w:emboss",g.emboss)),g.imprint!==void 0&&this.push(new j("w:imprint",g.imprint)),g.shading&&this.push(new we(g.shading)),g.revision&&this.push(new Et(g.revision)),g.border&&this.push(new H("w:bdr",g.border)),g.vanish&&this.push(new j("w:vanish",g.vanish)),g.specVanish&&this.push(new j("w:specVanish",g.vanish)),g.scale!==void 0&&this.push(new le("w:w",g.scale))}push(g){this.root.push(g)}}class Et extends l{constructor(g){super("w:rPrChange"),this.root.push(new Ne({id:g.id,author:g.author,date:g.date})),this.addChildElement(new Ze(g))}}class yi extends l{constructor(g){super("w:t"),this.root.push(new X({space:T.PRESERVE})),this.root.push(g)}}(function(x){x.CURRENT="CURRENT",x.TOTAL_PAGES="TOTAL_PAGES",x.TOTAL_PAGES_IN_SECTION="TOTAL_PAGES_IN_SECTION"})(B||(B={}));class cn extends l{constructor(g){if(super("w:r"),this.properties=new Ze(g),this.root.push(this.properties),g.break)for(let M=0;M<g.break;M++)this.root.push(new re);if(g.children)for(const M of g.children)if(typeof M!="string")this.root.push(M);else switch(M){case B.CURRENT:this.root.push(new V),this.root.push(new ue),this.root.push(new E),this.root.push(new $);break;case B.TOTAL_PAGES:this.root.push(new V),this.root.push(new ye),this.root.push(new E),this.root.push(new $);break;case B.TOTAL_PAGES_IN_SECTION:this.root.push(new V),this.root.push(new Re),this.root.push(new E),this.root.push(new $);break;default:this.root.push(new yi(M))}else g.text&&this.root.push(new yi(g.text))}}class bi extends cn{constructor(g){if(typeof g=="string")return super({}),this.root.push(new yi(g)),this;super(g)}}class So extends u{constructor(){super(...arguments),this.xmlKeys={char:"w:char",symbolfont:"w:font"}}}class Rr extends l{constructor(g="",M="Wingdings"){super("w:sym"),this.root.push(new So({char:g,symbolfont:M}))}}class Kc extends cn{constructor(g){if(typeof g=="string")return super({}),void this.root.push(new Rr(g));super(g),this.root.push(new Rr(g.char,g.symbolfont))}}var zi,Ms,Jn,vi,Hi,zr,ko,Cn,wi,Yt,Jc,Dd,Md,_i,Xa,$d,Bd,Fd,Ud,Vd,Wd,za,jd,qd,Ht=i(5457);(function(x){x.CHARACTER="character",x.COLUMN="column",x.INSIDE_MARGIN="insideMargin",x.LEFT_MARGIN="leftMargin",x.MARGIN="margin",x.OUTSIDE_MARGIN="outsideMargin",x.PAGE="page",x.RIGHT_MARGIN="rightMargin"})(zi||(zi={})),function(x){x.BOTTOM_MARGIN="bottomMargin",x.INSIDE_MARGIN="insideMargin",x.LINE="line",x.MARGIN="margin",x.OUTSIDE_MARGIN="outsideMargin",x.PAGE="page",x.PARAGRAPH="paragraph",x.TOP_MARGIN="topMargin"}(Ms||(Ms={}));class gP extends u{constructor(){super(...arguments),this.xmlKeys={x:"x",y:"y"}}}class N0 extends l{constructor(){super("wp:simplePos"),this.root.push(new gP({x:0,y:0}))}}class L0 extends l{constructor(g){super("wp:align"),this.root.push(g)}}class D0 extends l{constructor(g){super("wp:posOffset"),this.root.push(g.toString())}}class OP extends u{constructor(){super(...arguments),this.xmlKeys={relativeFrom:"relativeFrom"}}}class M0 extends l{constructor(g){if(super("wp:positionH"),this.root.push(new OP({relativeFrom:g.relative||zi.PAGE})),g.align)this.root.push(new L0(g.align));else{if(g.offset===void 0)throw new Error("There is no configuration provided for floating position (Align or offset)");this.root.push(new D0(g.offset))}}}class yP extends u{constructor(){super(...arguments),this.xmlKeys={relativeFrom:"relativeFrom"}}}class $0 extends l{constructor(g){if(super("wp:positionV"),this.root.push(new yP({relativeFrom:g.relative||Ms.PAGE})),g.align)this.root.push(new L0(g.align));else{if(g.offset===void 0)throw new Error("There is no configuration provided for floating position (Align or offset)");this.root.push(new D0(g.offset))}}}class bP extends u{constructor(){super(...arguments),this.xmlKeys={uri:"uri"}}}class vP extends u{constructor(){super(...arguments),this.xmlKeys={embed:"r:embed",cstate:"cstate"}}}class wP extends l{constructor(g){super("a:blip"),this.root.push(new vP({embed:`rId{${g.fileName}}`,cstate:"none"}))}}class _P extends l{constructor(){super("a:srcRect")}}class xP extends l{constructor(){super("a:fillRect")}}class SP extends l{constructor(){super("a:stretch"),this.root.push(new xP)}}class kP extends l{constructor(g){super("pic:blipFill"),this.root.push(new wP(g)),this.root.push(new _P),this.root.push(new SP)}}class TP extends u{constructor(){super(...arguments),this.xmlKeys={noChangeAspect:"noChangeAspect",noChangeArrowheads:"noChangeArrowheads"}}}class EP extends l{constructor(){super("a:picLocks"),this.root.push(new TP({noChangeAspect:1,noChangeArrowheads:1}))}}class CP extends l{constructor(){super("pic:cNvPicPr"),this.root.push(new EP)}}class AP extends u{constructor(){super(...arguments),this.xmlKeys={id:"id",name:"name",descr:"descr"}}}class PP extends l{constructor(){super("pic:cNvPr"),this.root.push(new AP({id:0,name:"",descr:""}))}}class RP extends l{constructor(){super("pic:nvPicPr"),this.root.push(new PP),this.root.push(new CP)}}class IP extends u{constructor(){super(...arguments),this.xmlKeys={xmlns:"xmlns:pic"}}}class QP extends u{constructor(){super(...arguments),this.xmlKeys={cx:"cx",cy:"cy"}}}class NP extends l{constructor(g,M){super("a:ext"),this.attributes=new QP({cx:g,cy:M}),this.root.push(this.attributes)}}class LP extends u{constructor(){super(...arguments),this.xmlKeys={x:"x",y:"y"}}}class DP extends l{constructor(){super("a:off"),this.root.push(new LP({x:0,y:0}))}}class MP extends u{constructor(){super(...arguments),this.xmlKeys={flipVertical:"flipV",flipHorizontal:"flipH",rotation:"rot"}}}class $P extends l{constructor(g){var M,K;super("a:xfrm"),this.root.push(new MP({flipVertical:(M=g.flip)===null||M===void 0?void 0:M.vertical,flipHorizontal:(K=g.flip)===null||K===void 0?void 0:K.horizontal,rotation:g.rotation})),this.extents=new NP(g.emus.x,g.emus.y),this.root.push(new DP),this.root.push(this.extents)}}class BP extends l{constructor(){super("a:avLst")}}class FP extends u{constructor(){super(...arguments),this.xmlKeys={prst:"prst"}}}class UP extends l{constructor(){super("a:prstGeom"),this.root.push(new FP({prst:"rect"})),this.root.push(new BP)}}class VP extends u{constructor(){super(...arguments),this.xmlKeys={bwMode:"bwMode"}}}class WP extends l{constructor(g){super("pic:spPr"),this.root.push(new VP({bwMode:"auto"})),this.form=new $P(g),this.root.push(this.form),this.root.push(new UP)}}class jP extends l{constructor(g,M){super("pic:pic"),this.root.push(new IP({xmlns:"http://schemas.openxmlformats.org/drawingml/2006/picture"})),this.root.push(new RP),this.root.push(new kP(g)),this.root.push(new WP(M))}}class qP extends l{constructor(g,M){super("a:graphicData"),this.root.push(new bP({uri:"http://schemas.openxmlformats.org/drawingml/2006/picture"})),this.pic=new jP(g,M),this.root.push(this.pic)}}class XP extends u{constructor(){super(...arguments),this.xmlKeys={a:"xmlns:a"}}}class B0 extends l{constructor(g,M){super("a:graphic"),this.root.push(new XP({a:"http://schemas.openxmlformats.org/drawingml/2006/main"})),this.data=new qP(g,M),this.root.push(this.data)}}(function(x){x[x.NONE=0]="NONE",x[x.SQUARE=1]="SQUARE",x[x.TIGHT=2]="TIGHT",x[x.TOP_AND_BOTTOM=3]="TOP_AND_BOTTOM"})(Jn||(Jn={})),function(x){x.BOTH_SIDES="bothSides",x.LEFT="left",x.RIGHT="right",x.LARGEST="largest"}(vi||(vi={}));class Xd extends l{constructor(){super("wp:wrapNone")}}class zP extends u{constructor(){super(...arguments),this.xmlKeys={distT:"distT",distB:"distB",distL:"distL",distR:"distR",wrapText:"wrapText"}}}class F0 extends l{constructor(g,M={top:0,bottom:0,left:0,right:0}){super("wp:wrapSquare"),this.root.push(new zP({wrapText:g.side||vi.BOTH_SIDES,distT:M.top,distB:M.bottom,distL:M.left,distR:M.right}))}}class HP extends u{constructor(){super(...arguments),this.xmlKeys={distT:"distT",distB:"distB"}}}class U0 extends l{constructor(g={top:0,bottom:0}){super("wp:wrapTight"),this.root.push(new HP({distT:g.top,distB:g.bottom}))}}class ZP extends u{constructor(){super(...arguments),this.xmlKeys={distT:"distT",distB:"distB"}}}class V0 extends l{constructor(g={top:0,bottom:0}){super("wp:wrapTopAndBottom"),this.root.push(new ZP({distT:g.top,distB:g.bottom}))}}class GP extends u{constructor(){super(...arguments),this.xmlKeys={id:"id",name:"name",description:"descr",title:"title"}}}class W0 extends l{constructor({name:g,description:M,title:K}={name:"",description:"",title:""}){super("wp:docPr"),this.root.push(new GP({id:(0,Ht.NY)(),name:g,description:M,title:K}))}}class YP extends u{constructor(){super(...arguments),this.xmlKeys={b:"b",l:"l",r:"r",t:"t"}}}class j0 extends l{constructor(){super("wp:effectExtent"),this.root.push(new YP({b:0,l:0,r:0,t:0}))}}class KP extends u{constructor(){super(...arguments),this.xmlKeys={cx:"cx",cy:"cy"}}}class q0 extends l{constructor(g,M){super("wp:extent"),this.attributes=new KP({cx:g,cy:M}),this.root.push(this.attributes)}}class JP extends u{constructor(){super(...arguments),this.xmlKeys={xmlns:"xmlns:a",noChangeAspect:"noChangeAspect"}}}class eR extends l{constructor(){super("a:graphicFrameLocks"),this.root.push(new JP({xmlns:"http://schemas.openxmlformats.org/drawingml/2006/main",noChangeAspect:1}))}}class X0 extends l{constructor(){super("wp:cNvGraphicFramePr"),this.root.push(new eR)}}class tR extends u{constructor(){super(...arguments),this.xmlKeys={distT:"distT",distB:"distB",distL:"distL",distR:"distR",allowOverlap:"allowOverlap",behindDoc:"behindDoc",layoutInCell:"layoutInCell",locked:"locked",relativeHeight:"relativeHeight",simplePos:"simplePos"}}}class nR extends l{constructor(g,M,K){super("wp:anchor");const de=Object.assign({allowOverlap:!0,behindDocument:!1,lockAnchor:!1,layoutInCell:!0,verticalPosition:{},horizontalPosition:{}},K.floating);if(this.root.push(new tR({distT:de.margins&&de.margins.top||0,distB:de.margins&&de.margins.bottom||0,distL:de.margins&&de.margins.left||0,distR:de.margins&&de.margins.right||0,simplePos:"0",allowOverlap:de.allowOverlap===!0?"1":"0",behindDoc:de.behindDocument===!0?"1":"0",locked:de.lockAnchor===!0?"1":"0",layoutInCell:de.layoutInCell===!0?"1":"0",relativeHeight:de.zIndex?de.zIndex:M.emus.y})),this.root.push(new N0),this.root.push(new M0(de.horizontalPosition)),this.root.push(new $0(de.verticalPosition)),this.root.push(new q0(M.emus.x,M.emus.y)),this.root.push(new j0),K.floating!==void 0&&K.floating.wrap!==void 0)switch(K.floating.wrap.type){case Jn.SQUARE:this.root.push(new F0(K.floating.wrap,K.floating.margins));break;case Jn.TIGHT:this.root.push(new U0(K.floating.margins));break;case Jn.TOP_AND_BOTTOM:this.root.push(new V0(K.floating.margins));break;case Jn.NONE:default:this.root.push(new Xd)}else this.root.push(new Xd);this.root.push(new W0(K.docProperties)),this.root.push(new X0),this.root.push(new B0(g,M))}}class rR extends u{constructor(){super(...arguments),this.xmlKeys={distT:"distT",distB:"distB",distL:"distL",distR:"distR"}}}class iR extends l{constructor({mediaData:g,transform:M,docProperties:K}){super("wp:inline"),this.root.push(new rR({distT:0,distB:0,distL:0,distR:0})),this.extent=new q0(M.emus.x,M.emus.y),this.graphic=new B0(g,M),this.root.push(this.extent),this.root.push(new j0),this.root.push(new W0(K)),this.root.push(new X0),this.root.push(this.graphic)}}class z0 extends l{constructor(g,M={}){super("w:drawing"),M.floating?this.root.push(new nR(g,g.transformation,M)):(this.inline=new iR({mediaData:g,transform:g.transformation,docProperties:M.docProperties}),this.root.push(this.inline))}}class sR extends cn{constructor(g){super({}),this.key=`${(0,Ht.EL)()}.png`;const M=typeof g.data=="string"?this.convertDataURIToBinary(g.data):g.data;this.imageData={stream:M,fileName:this.key,transformation:{pixels:{x:Math.round(g.transformation.width),y:Math.round(g.transformation.height)},emus:{x:Math.round(9525*g.transformation.width),y:Math.round(9525*g.transformation.height)},flip:g.transformation.flip,rotation:g.transformation.rotation?6e4*g.transformation.rotation:void 0}};const K=new z0(this.imageData,{floating:g.floating,docProperties:g.altText});this.root.push(K)}prepForXml(g){return g.file.Media.addImage(this.key,this.imageData),super.prepForXml(g)}convertDataURIToBinary(g){if(typeof atob=="function"){const M=";base64,",K=g.indexOf(M),de=K===-1?0:K+M.length;return new Uint8Array(atob(g.substring(de)).split("").map(me=>me.charCodeAt(0)))}return new(i(8764)).Buffer(g,"base64")}}class oR extends l{constructor(g){super("w:instrText"),this.root.push(new X({space:T.PRESERVE})),this.root.push(`SEQ ${g}`)}}class aR extends cn{constructor(g){super({}),this.root.push(new V(!0)),this.root.push(new oR(g)),this.root.push(new E),this.root.push(new $)}}class lR extends l{constructor(){super("w:tab")}}class cR extends u{constructor(){super(...arguments),this.xmlKeys={instr:"w:instr"}}}class H0 extends l{constructor(g,M){super("w:fldSimple"),this.root.push(new cR({instr:g})),M!==void 0&&this.root.push(new bi(M))}}class uR extends H0{constructor(g){super(` MERGEFIELD ${g} `,`\xAB${g}\xBB`)}}class hR extends u{constructor(){super(...arguments),this.xmlKeys={id:"w:id",initials:"w:initials",author:"w:author",date:"w:date"}}}class zd extends u{constructor(){super(...arguments),this.xmlKeys={id:"w:id"}}}class fR extends u{constructor(){super(...arguments),this.xmlKeys={"xmlns:cx":"xmlns:cx","xmlns:cx1":"xmlns:cx1","xmlns:cx2":"xmlns:cx2","xmlns:cx3":"xmlns:cx3","xmlns:cx4":"xmlns:cx4","xmlns:cx5":"xmlns:cx5","xmlns:cx6":"xmlns:cx6","xmlns:cx7":"xmlns:cx7","xmlns:cx8":"xmlns:cx8","xmlns:mc":"xmlns:mc","xmlns:aink":"xmlns:aink","xmlns:am3d":"xmlns:am3d","xmlns:o":"xmlns:o","xmlns:r":"xmlns:r","xmlns:m":"xmlns:m","xmlns:v":"xmlns:v","xmlns:wp14":"xmlns:wp14","xmlns:wp":"xmlns:wp","xmlns:w10":"xmlns:w10","xmlns:w":"xmlns:w","xmlns:w14":"xmlns:w14","xmlns:w15":"xmlns:w15","xmlns:w16cex":"xmlns:w16cex","xmlns:w16cid":"xmlns:w16cid","xmlns:w16":"xmlns:w16","xmlns:w16sdtdh":"xmlns:w16sdtdh","xmlns:w16se":"xmlns:w16se","xmlns:wpg":"xmlns:wpg","xmlns:wpi":"xmlns:wpi","xmlns:wne":"xmlns:wne","xmlns:wps":"xmlns:wps"}}}class dR extends l{constructor(g){super("w:commentRangeStart"),this.root.push(new zd({id:g}))}}class pR extends l{constructor(g){super("w:commentRangeEnd"),this.root.push(new zd({id:g}))}}class mR extends l{constructor(g){super("w:commentReference"),this.root.push(new zd({id:g}))}}class Z0 extends l{constructor({id:g,initials:M,author:K,date:de=new Date,text:me}){super("w:comment"),this.root.push(new hR({id:g,initials:M,author:K,date:de.toISOString()})),this.root.push(new xi({children:[new bi(me)]}))}}class G0 extends l{constructor({children:g}){super("w:comments"),this.root.push(new fR({"xmlns:cx":"http://schemas.microsoft.com/office/drawing/2014/chartex","xmlns:cx1":"http://schemas.microsoft.com/office/drawing/2015/9/8/chartex","xmlns:cx2":"http://schemas.microsoft.com/office/drawing/2015/10/21/chartex","xmlns:cx3":"http://schemas.microsoft.com/office/drawing/2016/5/9/chartex","xmlns:cx4":"http://schemas.microsoft.com/office/drawing/2016/5/10/chartex","xmlns:cx5":"http://schemas.microsoft.com/office/drawing/2016/5/11/chartex","xmlns:cx6":"http://schemas.microsoft.com/office/drawing/2016/5/12/chartex","xmlns:cx7":"http://schemas.microsoft.com/office/drawing/2016/5/13/chartex","xmlns:cx8":"http://schemas.microsoft.com/office/drawing/2016/5/14/chartex","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","xmlns:aink":"http://schemas.microsoft.com/office/drawing/2016/ink","xmlns:am3d":"http://schemas.microsoft.com/office/drawing/2017/model3d","xmlns:o":"urn:schemas-microsoft-com:office:office","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","xmlns:m":"http://schemas.openxmlformats.org/officeDocument/2006/math","xmlns:v":"urn:schemas-microsoft-com:vml","xmlns:wp14":"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing","xmlns:wp":"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing","xmlns:w10":"urn:schemas-microsoft-com:office:word","xmlns:w":"http://schemas.openxmlformats.org/wordprocessingml/2006/main","xmlns:w14":"http://schemas.microsoft.com/office/word/2010/wordml","xmlns:w15":"http://schemas.microsoft.com/office/word/2012/wordml","xmlns:w16cex":"http://schemas.microsoft.com/office/word/2018/wordml/cex","xmlns:w16cid":"http://schemas.microsoft.com/office/word/2016/wordml/cid","xmlns:w16":"http://schemas.microsoft.com/office/word/2018/wordml","xmlns:w16sdtdh":"http://schemas.microsoft.com/office/word/2020/wordml/sdtdatahash","xmlns:w16se":"http://schemas.microsoft.com/office/word/2015/wordml/symex","xmlns:wpg":"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup","xmlns:wpi":"http://schemas.microsoft.com/office/word/2010/wordprocessingInk","xmlns:wne":"http://schemas.microsoft.com/office/word/2006/wordml","xmlns:wps":"http://schemas.microsoft.com/office/word/2010/wordprocessingShape"}));for(const M of g)this.root.push(new Z0(M))}}(function(x){x.COLUMN="column",x.PAGE="page"})(Hi||(Hi={}));class Y0 extends l{constructor(g){super("w:br"),this.root.push(new h({type:g}))}}class gR extends cn{constructor(){super({}),this.root.push(new Y0(Hi.PAGE))}}class OR extends cn{constructor(){super({}),this.root.push(new Y0(Hi.COLUMN))}}class K0 extends l{constructor(){super("w:pageBreakBefore")}}(function(x){x.AT_LEAST="atLeast",x.EXACTLY="exactly",x.AUTO="auto"})(zr||(zr={}));class yR extends u{constructor(){super(...arguments),this.xmlKeys={after:"w:after",before:"w:before",line:"w:line",lineRule:"w:lineRule"}}}class J0 extends l{constructor(g){super("w:spacing"),this.root.push(new yR(g))}}(function(x){x.HEADING_1="Heading1",x.HEADING_2="Heading2",x.HEADING_3="Heading3",x.HEADING_4="Heading4",x.HEADING_5="Heading5",x.HEADING_6="Heading6",x.TITLE="Title"})(ko||(ko={}));class Ha extends l{constructor(g){super("w:pStyle"),this.root.push(new h({val:g}))}}class eb extends l{constructor(g){super("w:tabs");for(const M of g)this.root.push(new nb(M))}}(function(x){x.LEFT="left",x.RIGHT="right",x.CENTER="center",x.BAR="bar",x.CLEAR="clear",x.DECIMAL="decimal",x.END="end",x.NUM="num",x.START="start"})(Cn||(Cn={})),function(x){x.DOT="dot",x.HYPHEN="hyphen",x.MIDDLE_DOT="middleDot",x.NONE="none",x.UNDERSCORE="underscore"}(wi||(wi={})),function(x){x[x.MAX=9026]="MAX"}(Yt||(Yt={}));class tb extends u{constructor(){super(...arguments),this.xmlKeys={val:"w:val",pos:"w:pos",leader:"w:leader"}}}class nb extends l{constructor({type:g,position:M,leader:K}){super("w:tab"),this.root.push(new tb({val:g,pos:M,leader:K}))}}class Hd extends l{constructor(g,M){super("w:numPr"),this.root.push(new bR(M)),this.root.push(new vR(g))}}class bR extends l{constructor(g){if(super("w:ilvl"),g>9)throw new Error("Level cannot be greater than 9. Read more here: https://answers.microsoft.com/en-us/msoffice/forum/all/does-word-support-more-than-9-list-levels/d130fdcd-1781-446d-8c84-c6c79124e4d7");this.root.push(new h({val:g}))}}class vR extends l{constructor(g){super("w:numId"),this.root.push(new h({val:typeof g=="string"?`{${g}}`:g}))}}class wR extends u{constructor(){super(...arguments),this.xmlKeys={id:"Id",type:"Type",target:"Target",targetMode:"TargetMode"}}}(function(x){x.EXTERNAL="External"})(Jc||(Jc={}));class _R extends l{constructor(g,M,K,de){super("Relationship"),this.root.push(new wR({id:g,type:M,target:K,targetMode:de}))}}class xR extends u{constructor(){super(...arguments),this.xmlKeys={id:"r:id",history:"w:history",anchor:"w:anchor"}}}(function(x){x.INTERNAL="INTERNAL",x.EXTERNAL="EXTERNAL"})(Dd||(Dd={}));class Zd extends l{constructor(g,M,K){super("w:hyperlink"),this.linkId=M;const de={history:1,anchor:K||void 0,id:K?void 0:`rId${this.linkId}`},me=new xR(de);this.root.push(me),g.forEach(Qe=>{this.root.push(Qe)})}}class SR extends Zd{constructor(g){super(g.children,(0,Ht.EL)(),g.anchor)}}class rb extends l{constructor(g){super("w:externalHyperlink"),this.options=g}}class kR extends u{constructor(){super(...arguments),this.xmlKeys={id:"w:id",name:"w:name"}}}class TR extends u{constructor(){super(...arguments),this.xmlKeys={id:"w:id"}}}class ib{constructor(g){const M=(0,Ht.NY)();this.start=new sb(g.id,M),this.children=g.children,this.end=new ob(M)}}class sb extends l{constructor(g,M){super("w:bookmarkStart");const K=new kR({name:g,id:M});this.root.push(K)}}class ob extends l{constructor(g){super("w:bookmarkEnd");const M=new TR({id:g});this.root.push(M)}}class ab extends l{constructor(g){super("w:outlineLvl"),this.level=g,this.root.push(new h({val:g}))}}class ER extends l{constructor(g,M={}){super("w:instrText"),this.root.push(new X({space:T.PRESERVE}));let K=`PAGEREF ${g}`;M.hyperlink&&(K=`${K} \\h`),M.useRelativePosition&&(K=`${K} \\p`),this.root.push(K)}}class CR extends cn{constructor(g,M={}){super({children:[new V(!0),new ER(g,M),new $]})}}(function(x){x.BOTTOM="bottom",x.CENTER="center",x.TOP="top"})(Md||(Md={}));class lb extends u{constructor(){super(...arguments),this.xmlKeys={verticalAlign:"w:val"}}}class Gd extends l{constructor(g){super("w:vAlign"),this.root.push(new lb({verticalAlign:g}))}}(function(x){x.DEFAULT="default",x.FIRST="first",x.EVEN="even"})(_i||(_i={}));class AR extends u{constructor(){super(...arguments),this.xmlKeys={type:"w:type",id:"r:id"}}}(function(x){x.HEADER="w:headerReference",x.FOOTER="w:footerReference"})(Xa||(Xa={}));class eu extends l{constructor(g,M){super(g),this.root.push(new AR({type:M.type||_i.DEFAULT,id:`rId${M.id}`}))}}class cb extends u{constructor(){super(...arguments),this.xmlKeys={space:"w:space",count:"w:num",separate:"w:sep",equalWidth:"w:equalWidth"}}}class ub extends l{constructor({space:g,count:M,separate:K,equalWidth:de,children:me}){super("w:cols"),this.root.push(new cb({space:g===void 0?void 0:(0,k.Jd)(g),count:M===void 0?void 0:(0,k.vH)(M),separate:K,equalWidth:de})),!de&&me&&me.forEach(Qe=>this.addChildElement(Qe))}}(function(x){x.DEFAULT="default",x.LINES="lines",x.LINES_AND_CHARS="linesAndChars",x.SNAP_TO_CHARS="snapToChars"})($d||($d={}));class hb extends u{constructor(){super(...arguments),this.xmlKeys={type:"w:type",linePitch:"w:linePitch",charSpace:"w:charSpace"}}}class fb extends l{constructor(g,M,K){super("w:docGrid"),this.root.push(new hb({type:K,linePitch:(0,k.vH)(g),charSpace:M?(0,k.vH)(M):void 0}))}}(function(x){x.NEW_PAGE="newPage",x.NEW_SECTION="newSection",x.CONTINUOUS="continuous"})(Bd||(Bd={}));class db extends u{constructor(){super(...arguments),this.xmlKeys={countBy:"w:countBy",start:"w:start",restart:"w:restart",distance:"w:distance"}}}class pb extends l{constructor({countBy:g,start:M,restart:K,distance:de}){super("w:lnNumType"),this.root.push(new db({countBy:g===void 0?void 0:(0,k.vH)(g),start:M===void 0?void 0:(0,k.vH)(M),restart:K,distance:de===void 0?void 0:(0,k.Jd)(de)}))}}(function(x){x.ALL_PAGES="allPages",x.FIRST_PAGE="firstPage",x.NOT_FIRST_PAGE="notFirstPage"})(Fd||(Fd={})),function(x){x.PAGE="page",x.TEXT="text"}(Ud||(Ud={})),function(x){x.BACK="back",x.FRONT="front"}(Vd||(Vd={}));class mb extends u{constructor(){super(...arguments),this.xmlKeys={display:"w:display",offsetFrom:"w:offsetFrom",zOrder:"w:zOrder"}}}class gb extends c{constructor(g){super("w:pgBorders"),g&&(g.pageBorders?this.root.push(new mb({display:g.pageBorders.display,offsetFrom:g.pageBorders.offsetFrom,zOrder:g.pageBorders.zOrder})):this.root.push(new mb({})),g.pageBorderTop&&this.root.push(new H("w:top",g.pageBorderTop)),g.pageBorderLeft&&this.root.push(new H("w:left",g.pageBorderLeft)),g.pageBorderBottom&&this.root.push(new H("w:bottom",g.pageBorderBottom)),g.pageBorderRight&&this.root.push(new H("w:right",g.pageBorderRight)))}}class Ob extends u{constructor(){super(...arguments),this.xmlKeys={top:"w:top",right:"w:right",bottom:"w:bottom",left:"w:left",header:"w:header",footer:"w:footer",gutter:"w:gutter"}}}class yb extends l{constructor(g,M,K,de,me,Qe,ze){super("w:pgMar"),this.root.push(new Ob({top:(0,k.xb)(g),right:(0,k.Jd)(M),bottom:(0,k.xb)(K),left:(0,k.Jd)(de),header:(0,k.Jd)(me),footer:(0,k.Jd)(Qe),gutter:(0,k.Jd)(ze)}))}}(function(x){x.HYPHEN="hyphen",x.PERIOD="period",x.COLON="colon",x.EM_DASH="emDash",x.EN_DASH="endash"})(Wd||(Wd={}));class bb extends u{constructor(){super(...arguments),this.xmlKeys={start:"w:start",formatType:"w:fmt",separator:"w:chapSep"}}}class vb extends l{constructor({start:g,formatType:M,separator:K}){super("w:pgNumType"),this.root.push(new bb({start:g===void 0?void 0:(0,k.vH)(g),formatType:M,separator:K}))}}(function(x){x.PORTRAIT="portrait",x.LANDSCAPE="landscape"})(za||(za={}));class wb extends u{constructor(){super(...arguments),this.xmlKeys={width:"w:w",height:"w:h",orientation:"w:orient"}}}class _b extends l{constructor(g,M,K){super("w:pgSz");const de=K===za.LANDSCAPE,me=(0,k.Jd)(g),Qe=(0,k.Jd)(M);this.root.push(new wb({width:de?Qe:me,height:de?me:Qe,orientation:K}))}}(function(x){x.LEFT_TO_RIGHT_TOP_TO_BOTTOM="lrTb",x.TOP_TO_BOTTOM_RIGHT_TO_LEFT="tbRl"})(jd||(jd={}));class PR extends u{constructor(){super(...arguments),this.xmlKeys={val:"w:val"}}}class xb extends l{constructor(g){super("w:textDirection"),this.root.push(new PR({val:g}))}}(function(x){x.NEXT_PAGE="nextPage",x.NEXT_COLUMN="nextColumn",x.CONTINUOUS="continuous",x.EVEN_PAGE="evenPage",x.ODD_PAGE="oddPage"})(qd||(qd={}));class Sb extends u{constructor(){super(...arguments),this.xmlKeys={val:"w:val"}}}class kb extends l{constructor(g){super("w:type"),this.root.push(new Sb({val:g}))}}const Zi={TOP:"1in",RIGHT:"1in",BOTTOM:"1in",LEFT:"1in",HEADER:708,FOOTER:708,GUTTER:0},tu={WIDTH:11906,HEIGHT:16838,ORIENTATION:za.PORTRAIT};class Tb extends l{constructor({page:{size:{width:g=tu.WIDTH,height:M=tu.HEIGHT,orientation:K=tu.ORIENTATION}={},margin:{top:de=Zi.TOP,right:me=Zi.RIGHT,bottom:Qe=Zi.BOTTOM,left:ze=Zi.LEFT,header:nt=Zi.HEADER,footer:Fe=Zi.FOOTER,gutter:Ye=Zi.GUTTER}={},pageNumbers:Jt={},borders:Pt,textDirection:An}={},grid:{linePitch:Hr=360,charSpace:Pn,type:Si}={},headerWrapperGroup:ZQ={},footerWrapperGroup:GQ={},lineNumbers:vv,titlePage:wv,verticalAlign:_v,column:xv,type:Sv}={}){super("w:sectPr"),this.addHeaderFooterGroup(Xa.HEADER,ZQ),this.addHeaderFooterGroup(Xa.FOOTER,GQ),Sv&&this.root.push(new kb(Sv)),this.root.push(new _b(g,M,K)),this.root.push(new yb(de,me,Qe,ze,nt,Fe,Ye)),Pt&&this.root.push(new gb(Pt)),vv&&this.root.push(new pb(vv)),this.root.push(new vb(Jt)),xv&&this.root.push(new ub(xv)),_v&&this.root.push(new Gd(_v)),wv!==void 0&&this.root.push(new j("w:titlePg",wv)),An&&this.root.push(new xb(An)),this.root.push(new fb(Hr,Pn,Si))}addHeaderFooterGroup(g,M){M.default&&this.root.push(new eu(g,{type:_i.DEFAULT,id:M.default.View.ReferenceId})),M.first&&this.root.push(new eu(g,{type:_i.FIRST,id:M.first.View.ReferenceId})),M.even&&this.root.push(new eu(g,{type:_i.EVEN,id:M.even.View.ReferenceId}))}}class Eb extends l{constructor(){super("w:body"),this.sections=[]}addSection(g){const M=this.sections.pop();this.root.push(this.createSectionParagraph(M)),this.sections.push(new Tb(g))}prepForXml(g){return this.sections.length===1&&(this.root.splice(0,1),this.root.push(this.sections.pop())),super.prepForXml(g)}push(g){this.root.push(g)}createSectionParagraph(g){const M=new xi({}),K=new $s({});return K.push(g),M.addChildElement(K),M}}class Cb extends u{constructor(){super(...arguments),this.xmlKeys={width:"w:w",space:"w:space"}}}class RR extends l{constructor({width:g,space:M}){super("w:col"),this.root.push(new Cb({width:(0,k.Jd)(g),space:M===void 0?void 0:(0,k.Jd)(M)}))}}class To extends u{constructor(){super(...arguments),this.xmlKeys={wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",Ignorable:"mc:Ignorable",cp:"xmlns:cp",dc:"xmlns:dc",dcterms:"xmlns:dcterms",dcmitype:"xmlns:dcmitype",xsi:"xmlns:xsi",type:"xsi:type",cx:"xmlns:cx",cx1:"xmlns:cx1",cx2:"xmlns:cx2",cx3:"xmlns:cx3",cx4:"xmlns:cx4",cx5:"xmlns:cx5",cx6:"xmlns:cx6",cx7:"xmlns:cx7",cx8:"xmlns:cx8",aink:"xmlns:aink",am3d:"xmlns:am3d",w16cex:"xmlns:w16cex",w16cid:"xmlns:w16cid",w16:"xmlns:w16",w16sdtdh:"xmlns:w16sdtdh",w16se:"xmlns:w16se"}}}class Ab extends u{constructor(){super(...arguments),this.xmlKeys={color:"w:color",themeColor:"w:themeColor",themeShade:"w:themeShade",themeTint:"w:themeTint"}}}class Pb extends l{constructor(g){super("w:background"),this.root.push(new Ab({color:g.color===void 0?void 0:(0,k.dg)(g.color),themeColor:g.themeColor,themeShade:g.themeShade===void 0?void 0:(0,k.xD)(g.themeShade),themeTint:g.themeTint===void 0?void 0:(0,k.xD)(g.themeTint)}))}}class IR extends l{constructor(g){super("w:document"),this.root.push(new To({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",cx:"http://schemas.microsoft.com/office/drawing/2014/chartex",cx1:"http://schemas.microsoft.com/office/drawing/2015/9/8/chartex",cx2:"http://schemas.microsoft.com/office/drawing/2015/10/21/chartex",cx3:"http://schemas.microsoft.com/office/drawing/2016/5/9/chartex",cx4:"http://schemas.microsoft.com/office/drawing/2016/5/10/chartex",cx5:"http://schemas.microsoft.com/office/drawing/2016/5/11/chartex",cx6:"http://schemas.microsoft.com/office/drawing/2016/5/12/chartex",cx7:"http://schemas.microsoft.com/office/drawing/2016/5/13/chartex",cx8:"http://schemas.microsoft.com/office/drawing/2016/5/14/chartex",aink:"http://schemas.microsoft.com/office/drawing/2016/ink",am3d:"http://schemas.microsoft.com/office/drawing/2017/model3d",w16cex:"http://schemas.microsoft.com/office/word/2018/wordml/cex",w16cid:"http://schemas.microsoft.com/office/word/2016/wordml/cid",w16:"http://schemas.microsoft.com/office/word/2018/wordml",w16sdtdh:"http://schemas.microsoft.com/office/word/2020/wordml/sdtdatahash",w16se:"http://schemas.microsoft.com/office/word/2015/wordml/symex",Ignorable:"w14 w15 wp14"})),this.body=new Eb,this.root.push(new Pb(g.background)),this.root.push(this.body)}add(g){return this.body.push(g),this}get Body(){return this.body}}class QR extends u{constructor(){super(...arguments),this.xmlKeys={xmlns:"xmlns"}}}class Za extends l{constructor(){super("Relationships"),this.root.push(new QR({xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"}))}addRelationship(g){this.root.push(g)}createRelationship(g,M,K,de){const me=new _R(`rId${g}`,M,K,de);return this.addRelationship(me),me}get RelationshipCount(){return this.root.length-1}}class Rb{constructor(g){this.document=new IR(g),this.relationships=new Za}get View(){return this.document}get Relationships(){return this.relationships}}class NR extends u{constructor(){super(...arguments),this.xmlKeys={val:"w:val"}}}class LR extends l{constructor(){super("w:wordWrap"),this.root.push(new NR({val:0}))}}var Yd,Kd,Jd;(function(x){x.NONE="none",x.DROP="drop",x.MARGIN="margin"})(Yd||(Yd={})),function(x){x.MARGIN="margin",x.PAGE="page",x.TEXT="text"}(Kd||(Kd={})),function(x){x.AROUND="around",x.AUTO="auto",x.NONE="none",x.NOT_BESIDE="notBeside",x.THROUGH="through",x.TIGHT="tight"}(Jd||(Jd={}));class Ib extends u{constructor(){super(...arguments),this.xmlKeys={anchorLock:"w:anchorLock",dropCap:"w:dropCap",width:"w:w",height:"w:h",x:"w:x",y:"w:y",anchorHorizontal:"w:hAnchor",anchorVertical:"w:vAnchor",spaceHorizontal:"w:hSpace",spaceVertical:"w:vSpace",rule:"w:hRule",alignmentX:"w:xAlign",alignmentY:"w:yAlign",lines:"w:lines",wrap:"w:wrap"}}}class Qb extends l{constructor(g){var M,K;super("w:framePr"),this.root.push(new Ib({anchorLock:g.anchorLock,dropCap:g.dropCap,width:g.width,height:g.height,x:g.position?g.position.x:void 0,y:g.position?g.position.y:void 0,anchorHorizontal:g.anchor.horizontal,anchorVertical:g.anchor.vertical,spaceHorizontal:(M=g.space)===null||M===void 0?void 0:M.horizontal,spaceVertical:(K=g.space)===null||K===void 0?void 0:K.vertical,rule:g.rule,alignmentX:g.alignment?g.alignment.x:void 0,alignmentY:g.alignment?g.alignment.y:void 0,lines:g.lines,wrap:g.wrap}))}}class $s extends c{constructor(g){var M,K;if(super("w:pPr"),this.numberingReferences=[],!g)return this;g.heading&&this.push(new Ha(g.heading)),g.bullet&&this.push(new Ha("ListParagraph")),g.numbering&&(g.style||g.heading||g.numbering.custom||this.push(new Ha("ListParagraph"))),g.style&&this.push(new Ha(g.style)),g.keepNext!==void 0&&this.push(new j("w:keepNext",g.keepNext)),g.keepLines!==void 0&&this.push(new j("w:keepLines",g.keepLines)),g.pageBreakBefore&&this.push(new K0),g.frame&&this.push(new Qb(g.frame)),g.widowControl!==void 0&&this.push(new j("w:widowControl",g.widowControl)),g.bullet&&this.push(new Hd(1,g.bullet.level)),g.numbering&&(this.numberingReferences.push({reference:g.numbering.reference,instance:(M=g.numbering.instance)!==null&&M!==void 0?M:0}),this.push(new Hd(`${g.numbering.reference}-${(K=g.numbering.instance)!==null&&K!==void 0?K:0}`,g.numbering.level))),g.border&&this.push(new se(g.border)),g.thematicBreak&&this.push(new W),g.shading&&this.push(new we(g.shading)),g.wordWrap&&this.push(new LR);const de=[...g.rightTabStop?[{type:Cn.RIGHT,position:g.rightTabStop}]:[],...g.tabStops?g.tabStops:[],...g.leftTabStop?[{type:Cn.LEFT,position:g.leftTabStop}]:[]];de.length>0&&this.push(new eb(de)),g.bidirectional!==void 0&&this.push(new j("w:bidi",g.bidirectional)),g.spacing&&this.push(new J0(g.spacing)),g.indent&&this.push(new ee(g.indent)),g.contextualSpacing!==void 0&&this.push(new j("w:contextualSpacing",g.contextualSpacing)),g.alignment&&this.push(new D(g.alignment)),g.outlineLevel!==void 0&&this.push(new ab(g.outlineLevel)),g.suppressLineNumbers!==void 0&&this.push(new j("w:suppressLineNumbers",g.suppressLineNumbers))}push(g){this.root.push(g)}prepForXml(g){if(g.viewWrapper instanceof Rb)for(const M of this.numberingReferences)g.file.Numbering.createConcreteNumberingInstance(M.reference,M.instance);return super.prepForXml(g)}}class xi extends l{constructor(g){if(super("w:p"),typeof g=="string")return this.properties=new $s({}),this.root.push(this.properties),this.root.push(new bi(g)),this;if(this.properties=new $s(g),this.root.push(this.properties),g.text&&this.root.push(new bi(g.text)),g.children)for(const M of g.children)if(M instanceof ib){this.root.push(M.start);for(const K of M.children)this.root.push(K);this.root.push(M.end)}else this.root.push(M)}prepForXml(g){for(const M of this.root)if(M instanceof rb){const K=this.root.indexOf(M),de=new Zd(M.options.children,(0,Ht.EL)());g.viewWrapper.Relationships.createRelationship(de.linkId,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",M.options.link,Jc.EXTERNAL),this.root[K]=de}return super.prepForXml(g)}addRunToFront(g){return this.root.splice(1,0,g),this}}class DR extends l{constructor(g){super("m:oMath");for(const M of g.children)this.root.push(M)}}class MR extends l{constructor(g){super("m:t"),this.root.push(g)}}class $R extends l{constructor(g){super("m:r"),this.root.push(new MR(g))}}class Nb extends l{constructor(g){super("m:den");for(const M of g)this.root.push(M)}}class Lb extends l{constructor(g){super("m:num");for(const M of g)this.root.push(M)}}class BR extends l{constructor(g){super("m:f"),this.root.push(new Lb(g.numerator)),this.root.push(new Nb(g.denominator))}}class FR extends u{constructor(){super(...arguments),this.xmlKeys={accent:"m:val"}}}class Db extends l{constructor(g){super("m:chr"),this.root.push(new FR({accent:g}))}}class er extends l{constructor(g){super("m:e");for(const M of g)this.root.push(M)}}class UR extends u{constructor(){super(...arguments),this.xmlKeys={value:"m:val"}}}class Mb extends l{constructor(){super("m:limLoc"),this.root.push(new UR({value:"undOvr"}))}}class VR extends u{constructor(){super(...arguments),this.xmlKeys={hide:"m:val"}}}class WR extends l{constructor(){super("m:subHide"),this.root.push(new VR({hide:1}))}}class jR extends u{constructor(){super(...arguments),this.xmlKeys={hide:"m:val"}}}class qR extends l{constructor(){super("m:supHide"),this.root.push(new jR({hide:1}))}}class ep extends l{constructor(g,M,K){super("m:naryPr"),g&&this.root.push(new Db(g)),this.root.push(new Mb),M||this.root.push(new qR),K||this.root.push(new WR)}}class Eo extends l{constructor(g){super("m:sub");for(const M of g)this.root.push(M)}}class Co extends l{constructor(g){super("m:sup");for(const M of g)this.root.push(M)}}class XR extends l{constructor(g){super("m:nary"),this.root.push(new ep("\u2211",!!g.superScript,!!g.subScript)),g.subScript&&this.root.push(new Eo(g.subScript)),g.superScript&&this.root.push(new Co(g.superScript)),this.root.push(new er(g.children))}}class zR extends l{constructor(g){super("m:nary"),this.root.push(new ep("",!!g.superScript,!!g.subScript)),g.subScript&&this.root.push(new Eo(g.subScript)),g.superScript&&this.root.push(new Co(g.superScript)),this.root.push(new er(g.children))}}class $b extends l{constructor(){super("m:sSupPr")}}class HR extends l{constructor(g){super("m:sSup"),this.root.push(new $b),this.root.push(new er(g.children)),this.root.push(new Co(g.superScript))}}class Bb extends l{constructor(){super("m:sSubPr")}}class ZR extends l{constructor(g){super("m:sSub"),this.root.push(new Bb),this.root.push(new er(g.children)),this.root.push(new Eo(g.subScript))}}class Fb extends l{constructor(){super("m:sSubSupPr")}}class GR extends l{constructor(g){super("m:sSubSup"),this.root.push(new Fb),this.root.push(new er(g.children)),this.root.push(new Eo(g.subScript)),this.root.push(new Co(g.superScript))}}class Ub extends l{constructor(){super("m:sPrePr")}}class YR extends l{constructor(g){super("m:sPre"),this.root.push(new Ub),this.root.push(new er(g.children)),this.root.push(new Eo(g.subScript)),this.root.push(new Co(g.superScript))}}const KR="";class Vb extends l{constructor(g){if(super("m:deg"),g)for(const M of g)this.root.push(M)}}class JR extends u{constructor(){super(...arguments),this.xmlKeys={hide:"m:val"}}}class eI extends l{constructor(){super("m:degHide"),this.root.push(new JR({hide:1}))}}class Wb extends l{constructor(g){super("m:radPr"),g||this.root.push(new eI)}}class tI extends l{constructor(g){super("m:rad"),this.root.push(new Wb(!!g.degree)),this.root.push(new Vb(g.degree)),this.root.push(new er(g.children))}}class jb extends l{constructor(g){super("m:fName");for(const M of g)this.root.push(M)}}class qb extends l{constructor(){super("m:funcPr")}}class nI extends l{constructor(g){super("m:func"),this.root.push(new qb),this.root.push(new jb(g.name)),this.root.push(new er(g.children))}}class rI extends u{constructor(){super(...arguments),this.xmlKeys={character:"m:val"}}}class iI extends l{constructor(g){super("m:begChr"),this.root.push(new rI({character:g}))}}class sI extends u{constructor(){super(...arguments),this.xmlKeys={character:"m:val"}}}class oI extends l{constructor(g){super("m:endChr"),this.root.push(new sI({character:g}))}}class nu extends l{constructor(g){super("m:dPr"),g&&(this.root.push(new iI(g.beginningCharacter)),this.root.push(new oI(g.endingCharacter)))}}class aI extends l{constructor(g){super("m:d"),this.root.push(new nu),this.root.push(new er(g.children))}}class lI extends l{constructor(g){super("m:d"),this.root.push(new nu({beginningCharacter:"[",endingCharacter:"]"})),this.root.push(new er(g.children))}}class cI extends l{constructor(g){super("m:d"),this.root.push(new nu({beginningCharacter:"{",endingCharacter:"}"})),this.root.push(new er(g.children))}}class uI extends l{constructor(g){super("m:d"),this.root.push(new nu({beginningCharacter:"\u2329",endingCharacter:"\u232A"})),this.root.push(new er(g.children))}}class hI extends l{constructor(g){super("w:tblGrid");for(const M of g)this.root.push(new dI(M))}}class fI extends u{constructor(){super(...arguments),this.xmlKeys={w:"w:w"}}}class dI extends l{constructor(g){super("w:gridCol"),g!==void 0&&this.root.push(new fI({w:(0,k.Jd)(g)}))}}var Ao,ru,Ga,tp;(function(x){x.AUTO="auto",x.DXA="dxa",x.NIL="nil",x.PERCENTAGE="pct"})(Ao||(Ao={}));class pI extends u{constructor(){super(...arguments),this.xmlKeys={type:"w:type",size:"w:w"}}}class Gi extends l{constructor(g,{type:M=Ao.AUTO,size:K}){super(g);let de=K;M===Ao.PERCENTAGE&&typeof K=="number"&&(de=`${K}%`),this.root.push(new pI({type:M,size:(0,k.aB)(de)}))}}(function(x){x.TABLE="w:tblCellMar",x.TABLE_CELL="w:tcMar"})(ru||(ru={}));class Xb extends c{constructor(g,{marginUnitType:M=Ao.DXA,top:K,left:de,bottom:me,right:Qe}){super(g),K!==void 0&&this.root.push(new Gi("w:top",{type:M,size:K})),de!==void 0&&this.root.push(new Gi("w:left",{type:M,size:de})),me!==void 0&&this.root.push(new Gi("w:bottom",{type:M,size:me})),Qe!==void 0&&this.root.push(new Gi("w:right",{type:M,size:Qe}))}}class zb extends c{constructor(g){super("w:tcBorders"),g.top&&this.root.push(new H("w:top",g.top)),g.start&&this.root.push(new H("w:start",g.start)),g.left&&this.root.push(new H("w:left",g.left)),g.bottom&&this.root.push(new H("w:bottom",g.bottom)),g.end&&this.root.push(new H("w:end",g.end)),g.right&&this.root.push(new H("w:right",g.right))}}class mI extends u{constructor(){super(...arguments),this.xmlKeys={val:"w:val"}}}class Hb extends l{constructor(g){super("w:gridSpan"),this.root.push(new mI({val:(0,k.vH)(g)}))}}(function(x){x.CONTINUE="continue",x.RESTART="restart"})(Ga||(Ga={}));class gI extends u{constructor(){super(...arguments),this.xmlKeys={val:"w:val"}}}class np extends l{constructor(g){super("w:vMerge"),this.root.push(new gI({val:g}))}}(function(x){x.BOTTOM_TO_TOP_LEFT_TO_RIGHT="btLr",x.LEFT_TO_RIGHT_TOP_TO_BOTTOM="lrTb",x.TOP_TO_BOTTOM_RIGHT_TO_LEFT="tbRl"})(tp||(tp={}));class OI extends u{constructor(){super(...arguments),this.xmlKeys={val:"w:val"}}}class Zb extends l{constructor(g){super("w:textDirection"),this.root.push(new OI({val:g}))}}class yI extends c{constructor(g){super("w:tcPr"),g.width&&this.root.push(new Gi("w:tcW",g.width)),g.columnSpan&&this.root.push(new Hb(g.columnSpan)),g.verticalMerge?this.root.push(new np(g.verticalMerge)):g.rowSpan&&g.rowSpan>1&&this.root.push(new np(Ga.RESTART)),g.borders&&this.root.push(new zb(g.borders)),g.shading&&this.root.push(new we(g.shading)),g.margins&&this.root.push(new Xb(ru.TABLE_CELL,g.margins)),g.textDirection&&this.root.push(new Zb(g.textDirection)),g.verticalAlign&&this.root.push(new Gd(g.verticalAlign))}}class rp extends l{constructor(g){super("w:tc"),this.options=g,this.root.push(new yI(g));for(const M of g.children)this.root.push(M)}prepForXml(g){return this.root[this.root.length-1]instanceof xi||this.root.push(new xi({})),super.prepForXml(g)}}const Po={style:v.NONE,size:0,color:"auto"},Ro={style:v.SINGLE,size:4,color:"auto"};class ip extends l{constructor(g){super("w:tblBorders"),g.top?this.root.push(new H("w:top",g.top)):this.root.push(new H("w:top",Ro)),g.left?this.root.push(new H("w:left",g.left)):this.root.push(new H("w:left",Ro)),g.bottom?this.root.push(new H("w:bottom",g.bottom)):this.root.push(new H("w:bottom",Ro)),g.right?this.root.push(new H("w:right",g.right)):this.root.push(new H("w:right",Ro)),g.insideHorizontal?this.root.push(new H("w:insideH",g.insideHorizontal)):this.root.push(new H("w:insideH",Ro)),g.insideVertical?this.root.push(new H("w:insideV",g.insideVertical)):this.root.push(new H("w:insideV",Ro))}}ip.NONE={top:Po,bottom:Po,left:Po,right:Po,insideHorizontal:Po,insideVertical:Po};var sp,op,ap,lp,cp,up,iu;(function(x){x.MARGIN="margin",x.PAGE="page",x.TEXT="text"})(sp||(sp={})),function(x){x.CENTER="center",x.INSIDE="inside",x.LEFT="left",x.OUTSIDE="outside",x.RIGHT="right"}(op||(op={})),function(x){x.CENTER="center",x.INSIDE="inside",x.BOTTOM="bottom",x.OUTSIDE="outside",x.INLINE="inline",x.TOP="top"}(ap||(ap={})),function(x){x.NEVER="never",x.OVERLAP="overlap"}(lp||(lp={}));class Gb extends u{constructor(){super(...arguments),this.xmlKeys={horizontalAnchor:"w:horzAnchor",verticalAnchor:"w:vertAnchor",absoluteHorizontalPosition:"w:tblpX",relativeHorizontalPosition:"w:tblpXSpec",absoluteVerticalPosition:"w:tblpY",relativeVerticalPosition:"w:tblpYSpec",bottomFromText:"w:bottomFromText",topFromText:"w:topFromText",leftFromText:"w:leftFromText",rightFromText:"w:rightFromText"}}}class Yb extends l{constructor(g){var{leftFromText:M,rightFromText:K,topFromText:de,bottomFromText:me,absoluteHorizontalPosition:Qe,absoluteVerticalPosition:ze}=g,nt=function(Fe,Ye){var Jt={};for(var Pt in Fe)Object.prototype.hasOwnProperty.call(Fe,Pt)&&Ye.indexOf(Pt)<0&&(Jt[Pt]=Fe[Pt]);if(Fe!=null&&typeof Object.getOwnPropertySymbols=="function"){var An=0;for(Pt=Object.getOwnPropertySymbols(Fe);An<Pt.length;An++)Ye.indexOf(Pt[An])<0&&Object.prototype.propertyIsEnumerable.call(Fe,Pt[An])&&(Jt[Pt[An]]=Fe[Pt[An]])}return Jt}(g,["leftFromText","rightFromText","topFromText","bottomFromText","absoluteHorizontalPosition","absoluteVerticalPosition"]);super("w:tblpPr"),this.root.push(new Gb(Object.assign({leftFromText:M===void 0?void 0:(0,k.Jd)(M),rightFromText:K===void 0?void 0:(0,k.Jd)(K),topFromText:de===void 0?void 0:(0,k.Jd)(de),bottomFromText:me===void 0?void 0:(0,k.Jd)(me),absoluteHorizontalPosition:Qe===void 0?void 0:(0,k.xb)(Qe),absoluteVerticalPosition:ze===void 0?void 0:(0,k.xb)(ze)},nt))),nt.overlap&&this.root.push(new oe("w:tblOverlap",nt.overlap))}}(function(x){x.AUTOFIT="autofit",x.FIXED="fixed"})(cp||(cp={}));class bI extends u{constructor(){super(...arguments),this.xmlKeys={type:"w:type"}}}class Kb extends l{constructor(g){super("w:tblLayout"),this.root.push(new bI({type:g}))}}class Jb extends c{constructor(g){super("w:tblPr"),g.style&&this.root.push(new Z("w:tblStyle",g.style)),g.float&&this.root.push(new Yb(g.float)),g.visuallyRightToLeft!==void 0&&this.root.push(new j("w:bidiVisual",g.visuallyRightToLeft)),g.width&&this.root.push(new Gi("w:tblW",g.width)),g.alignment&&this.root.push(new D(g.alignment)),g.indent&&this.root.push(new Gi("w:tblInd",g.indent)),g.borders&&this.root.push(new ip(g.borders)),g.shading&&this.root.push(new we(g.shading)),g.layout&&this.root.push(new Kb(g.layout)),g.cellMargin&&this.root.push(new Xb(ru.TABLE,g.cellMargin))}}class vI extends l{constructor({rows:g,width:M,columnWidths:K=Array(Math.max(...g.map(Pt=>Pt.CellCount))).fill(100),margins:de,indent:me,float:Qe,layout:ze,style:nt,borders:Fe,alignment:Ye,visuallyRightToLeft:Jt}){super("w:tbl"),this.root.push(new Jb({borders:Fe!=null?Fe:{},width:M!=null?M:{size:100},indent:me,float:Qe,layout:ze,style:nt,alignment:Ye,cellMargin:de,visuallyRightToLeft:Jt})),this.root.push(new hI(K));for(const Pt of g)this.root.push(Pt);g.forEach((Pt,An)=>{if(An===g.length-1)return;let Hr=0;Pt.cells.forEach(Pn=>{if(Pn.options.rowSpan&&Pn.options.rowSpan>1){const Si=new rp({rowSpan:Pn.options.rowSpan-1,columnSpan:Pn.options.columnSpan,borders:Pn.options.borders,children:[],verticalMerge:Ga.CONTINUE});g[An+1].addCellToColumnIndex(Si,Hr)}Hr+=Pn.options.columnSpan||1})})}}(function(x){x.AUTO="auto",x.ATLEAST="atLeast",x.EXACT="exact"})(up||(up={}));class ev extends u{constructor(){super(...arguments),this.xmlKeys={value:"w:val",rule:"w:hRule"}}}class tv extends l{constructor(g,M){super("w:trHeight"),this.root.push(new ev({value:(0,k.Jd)(g),rule:M}))}}class nv extends c{constructor(g){super("w:trPr"),g.cantSplit!==void 0&&this.root.push(new j("w:cantSplit",g.cantSplit)),g.tableHeader!==void 0&&this.root.push(new j("w:tblHeader",g.tableHeader)),g.height&&this.root.push(new tv(g.height.value,g.height.rule))}}class wI extends l{constructor(g){super("w:tr"),this.options=g,this.root.push(new nv(g));for(const M of g.children)this.root.push(M)}get CellCount(){return this.options.children.length}get cells(){return this.root.filter(g=>g instanceof rp)}addCellToIndex(g,M){this.root.splice(M+1,0,g)}addCellToColumnIndex(g,M){const K=this.columnIndexToRootIndex(M,!0);this.addCellToIndex(g,K-1)}rootIndexToColumnIndex(g){if(g<1||g>=this.root.length)throw new Error("cell 'rootIndex' should between 1 to "+(this.root.length-1));let M=0;for(let K=1;K<g;K++)M+=this.root[K].options.columnSpan||1;return M}columnIndexToRootIndex(g,M=!1){if(g<0)throw new Error("cell 'columnIndex' should not less than zero");let K=0,de=1;for(;K<=g;){if(de>=this.root.length){if(M)return this.root.length;throw new Error("cell 'columnIndex' should not great than "+(K-1))}const me=this.root[de];de+=1,K+=me&&me.options.columnSpan||1}return de-1}}class _I extends u{constructor(){super(...arguments),this.xmlKeys={xmlns:"xmlns",vt:"xmlns:vt"}}}class xI extends l{constructor(){super("Properties"),this.root.push(new _I({xmlns:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"}))}}class SI extends u{constructor(){super(...arguments),this.xmlKeys={xmlns:"xmlns"}}}class kI extends u{constructor(){super(...arguments),this.xmlKeys={contentType:"ContentType",extension:"Extension"}}}class Bs extends l{constructor(g,M){super("Default"),this.root.push(new kI({contentType:g,extension:M}))}}class TI extends u{constructor(){super(...arguments),this.xmlKeys={contentType:"ContentType",partName:"PartName"}}}class Ir extends l{constructor(g,M){super("Override"),this.root.push(new TI({contentType:g,partName:M}))}}class EI extends l{constructor(){super("Types"),this.root.push(new SI({xmlns:"http://schemas.openxmlformats.org/package/2006/content-types"})),this.root.push(new Bs("image/png","png")),this.root.push(new Bs("image/jpeg","jpeg")),this.root.push(new Bs("image/jpeg","jpg")),this.root.push(new Bs("image/bmp","bmp")),this.root.push(new Bs("image/gif","gif")),this.root.push(new Bs("application/vnd.openxmlformats-package.relationships+xml","rels")),this.root.push(new Bs("application/xml","xml")),this.root.push(new Ir("application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml","/word/document.xml")),this.root.push(new Ir("application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml","/word/styles.xml")),this.root.push(new Ir("application/vnd.openxmlformats-package.core-properties+xml","/docProps/core.xml")),this.root.push(new Ir("application/vnd.openxmlformats-officedocument.custom-properties+xml","/docProps/custom.xml")),this.root.push(new Ir("application/vnd.openxmlformats-officedocument.extended-properties+xml","/docProps/app.xml")),this.root.push(new Ir("application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml","/word/numbering.xml")),this.root.push(new Ir("application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml","/word/footnotes.xml")),this.root.push(new Ir("application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml","/word/settings.xml")),this.root.push(new Ir("application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml","/word/comments.xml"))}addFooter(g){this.root.push(new Ir("application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml",`/word/footer${g}.xml`))}addHeader(g){this.root.push(new Ir("application/vnd.openxmlformats-officedocument.wordprocessingml.header+xml",`/word/header${g}.xml`))}}class CI extends l{constructor(g){super("cp:coreProperties"),this.root.push(new To({cp:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",xsi:"http://www.w3.org/2001/XMLSchema-instance"})),g.title&&this.root.push(new pe("dc:title",g.title)),g.subject&&this.root.push(new pe("dc:subject",g.subject)),g.creator&&this.root.push(new pe("dc:creator",g.creator)),g.keywords&&this.root.push(new pe("cp:keywords",g.keywords)),g.description&&this.root.push(new pe("dc:description",g.description)),g.lastModifiedBy&&this.root.push(new pe("cp:lastModifiedBy",g.lastModifiedBy)),g.revision&&this.root.push(new pe("cp:revision",String(g.revision))),this.root.push(new rv("dcterms:created")),this.root.push(new rv("dcterms:modified"))}}class rv extends l{constructor(g){super(g),this.root.push(new To({type:"dcterms:W3CDTF"})),this.root.push((0,k.sF)(new Date))}}class AI extends u{constructor(){super(...arguments),this.xmlKeys={xmlns:"xmlns",vt:"xmlns:vt"}}}class PI extends u{constructor(){super(...arguments),this.xmlKeys={fmtid:"fmtid",pid:"pid",name:"name"}}}class RI extends l{constructor(g,M){super("property"),this.root.push(new PI({fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:g.toString(),name:M.name})),this.root.push(new II(M.value))}}class II extends l{constructor(g){super("vt:lpwstr"),this.root.push(g)}}class QI extends l{constructor(g){super("Properties"),this.properties=[],this.root.push(new AI({xmlns:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"})),this.nextId=2;for(const M of g)this.addCustomProperty(M)}prepForXml(g){return this.properties.forEach(M=>this.root.push(M)),super.prepForXml(g)}addCustomProperty(g){this.properties.push(new RI(this.nextId++,g))}}class NI extends u{constructor(){super(...arguments),this.xmlKeys={wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",cp:"xmlns:cp",dc:"xmlns:dc",dcterms:"xmlns:dcterms",dcmitype:"xmlns:dcmitype",xsi:"xmlns:xsi",type:"xsi:type"}}}class LI extends b{constructor(g,M){super("w:ftr",M),this.refId=g,M||this.root.push(new NI({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape"}))}get ReferenceId(){return this.refId}add(g){this.root.push(g)}}class hp{constructor(g,M,K){this.media=g,this.footer=new LI(M,K),this.relationships=new Za}add(g){this.footer.add(g)}addChildElement(g){this.footer.addChildElement(g)}get View(){return this.footer}get Relationships(){return this.relationships}get Media(){return this.media}}class DI extends u{constructor(){super(...arguments),this.xmlKeys={type:"w:type",id:"w:id"}}}class MI extends l{constructor(){super("w:footnoteRef")}}class $I extends cn{constructor(){super({style:"FootnoteReference"}),this.root.push(new MI)}}(function(x){x.SEPERATOR="separator",x.CONTINUATION_SEPERATOR="continuationSeparator"})(iu||(iu={}));class fp extends l{constructor(g){super("w:footnote"),this.root.push(new DI({type:g.type,id:g.id}));for(let M=0;M<g.children.length;M++){const K=g.children[M];M===0&&K.addRunToFront(new $I),this.root.push(K)}}}class BI extends l{constructor(){super("w:continuationSeparator")}}class FI extends cn{constructor(){super({}),this.root.push(new BI)}}class UI extends l{constructor(){super("w:separator")}}class VI extends cn{constructor(){super({}),this.root.push(new UI)}}class WI extends u{constructor(){super(...arguments),this.xmlKeys={wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",Ignorable:"mc:Ignorable"}}}class iv extends l{constructor(){super("w:footnotes"),this.root.push(new WI({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",Ignorable:"w14 w15 wp14"}));const g=new fp({id:-1,type:iu.SEPERATOR,children:[new xi({spacing:{after:0,line:240,lineRule:zr.AUTO},children:[new VI]})]});this.root.push(g);const M=new fp({id:0,type:iu.CONTINUATION_SEPERATOR,children:[new xi({spacing:{after:0,line:240,lineRule:zr.AUTO},children:[new FI]})]});this.root.push(M)}createFootNote(g,M){const K=new fp({id:g,children:M});this.root.push(K)}}class jI{constructor(){this.footnotess=new iv,this.relationships=new Za}get View(){return this.footnotess}get Relationships(){return this.relationships}}class qI extends u{constructor(){super(...arguments),this.xmlKeys={wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",cp:"xmlns:cp",dc:"xmlns:dc",dcterms:"xmlns:dcterms",dcmitype:"xmlns:dcmitype",xsi:"xmlns:xsi",type:"xsi:type",cx:"xmlns:cx",cx1:"xmlns:cx1",cx2:"xmlns:cx2",cx3:"xmlns:cx3",cx4:"xmlns:cx4",cx5:"xmlns:cx5",cx6:"xmlns:cx6",cx7:"xmlns:cx7",cx8:"xmlns:cx8",w16cid:"xmlns:w16cid",w16se:"xmlns:w16se"}}}class XI extends b{constructor(g,M){super("w:hdr",M),this.refId=g,M||this.root.push(new qI({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",cx:"http://schemas.microsoft.com/office/drawing/2014/chartex",cx1:"http://schemas.microsoft.com/office/drawing/2015/9/8/chartex",cx2:"http://schemas.microsoft.com/office/drawing/2015/10/21/chartex",cx3:"http://schemas.microsoft.com/office/drawing/2016/5/9/chartex",cx4:"http://schemas.microsoft.com/office/drawing/2016/5/10/chartex",cx5:"http://schemas.microsoft.com/office/drawing/2016/5/11/chartex",cx6:"http://schemas.microsoft.com/office/drawing/2016/5/12/chartex",cx7:"http://schemas.microsoft.com/office/drawing/2016/5/13/chartex",cx8:"http://schemas.microsoft.com/office/drawing/2016/5/14/chartex",w16cid:"http://schemas.microsoft.com/office/word/2016/wordml/cid",w16se:"http://schemas.microsoft.com/office/word/2015/wordml/symex"}))}get ReferenceId(){return this.refId}add(g){this.root.push(g)}}class dp{constructor(g,M,K){this.media=g,this.header=new XI(M,K),this.relationships=new Za}add(g){return this.header.add(g),this}addChildElement(g){this.header.addChildElement(g)}get View(){return this.header}get Relationships(){return this.relationships}get Media(){return this.media}}class pp{constructor(){this.map=new Map}addMedia(g,M){const K=`${(0,Ht.EL)()}.png`,de={stream:typeof g=="string"?this.convertDataURIToBinary(g):g,fileName:K,transformation:{pixels:{x:Math.round(M.width),y:Math.round(M.height)},emus:{x:Math.round(9525*M.width),y:Math.round(9525*M.height)},flip:M.flip,rotation:M.rotation?6e4*M.rotation:void 0}};return this.map.set(K,de),de}addImage(g,M){this.map.set(g,M)}get Array(){return Array.from(this.map.values())}convertDataURIToBinary(g){const M=";base64,",K=g.indexOf(M)+M.length;return typeof atob=="function"?new Uint8Array(atob(g.substring(K)).split("").map(de=>de.charCodeAt(0))):new(i(8764)).Buffer(g,"base64")}}const zI="";var gr,mp;(function(x){x.BULLET="bullet",x.CARDINAL_TEXT="cardinalText",x.CHICAGO="chicago",x.DECIMAL="decimal",x.DECIMAL_ENCLOSED_CIRCLE="decimalEnclosedCircle",x.DECIMAL_ENCLOSED_FULLSTOP="decimalEnclosedFullstop",x.DECIMAL_ENCLOSED_PARENTHESES="decimalEnclosedParen",x.DECIMAL_ZERO="decimalZero",x.LOWER_LETTER="lowerLetter",x.LOWER_ROMAN="lowerRoman",x.NONE="none",x.ORDINAL_TEXT="ordinalText",x.UPPER_LETTER="upperLetter",x.UPPER_ROMAN="upperRoman"})(gr||(gr={}));class HI extends u{constructor(){super(...arguments),this.xmlKeys={ilvl:"w:ilvl",tentative:"w15:tentative"}}}class ZI extends l{constructor(g){super("w:numFmt"),this.root.push(new h({val:g}))}}class GI extends l{constructor(g){super("w:lvlText"),this.root.push(new h({val:g}))}}class YI extends l{constructor(g){super("w:lvlJc"),this.root.push(new h({val:g}))}}(function(x){x.NOTHING="nothing",x.SPACE="space",x.TAB="tab"})(mp||(mp={}));class KI extends l{constructor(g){super("w:suff"),this.root.push(new h({val:g}))}}class JI extends l{constructor(){super("w:isLgl")}}class gp extends l{constructor({level:g,format:M,text:K,alignment:de=O.START,start:me=1,style:Qe,suffix:ze,isLegalNumberingStyle:nt}){if(super("w:lvl"),this.root.push(new le("w:start",(0,k.vH)(me))),M&&this.root.push(new ZI(M)),ze&&this.root.push(new KI(ze)),nt&&this.root.push(new JI),K&&this.root.push(new GI(K)),this.root.push(new YI(de)),this.paragraphProperties=new $s(Qe&&Qe.paragraph),this.runProperties=new Ze(Qe&&Qe.run),this.root.push(this.paragraphProperties),this.root.push(this.runProperties),g>9)throw new Error("Level cannot be greater than 9. Read more here: https://answers.microsoft.com/en-us/msoffice/forum/all/does-word-support-more-than-9-list-levels/d130fdcd-1781-446d-8c84-c6c79124e4d7");this.root.push(new HI({ilvl:(0,k.vH)(g),tentative:1}))}}class sv extends gp{}class eQ extends gp{}class tQ extends l{constructor(g){super("w:multiLevelType"),this.root.push(new h({val:g}))}}class nQ extends u{constructor(){super(...arguments),this.xmlKeys={abstractNumId:"w:abstractNumId",restartNumberingAfterBreak:"w15:restartNumberingAfterBreak"}}}class Op extends l{constructor(g,M){super("w:abstractNum"),this.root.push(new nQ({abstractNumId:(0,k.vH)(g),restartNumberingAfterBreak:0})),this.root.push(new tQ("hybridMultilevel")),this.id=g;for(const K of M)this.root.push(new sv(K))}}class rQ extends l{constructor(g){super("w:abstractNumId"),this.root.push(new h({val:g}))}}class iQ extends u{constructor(){super(...arguments),this.xmlKeys={numId:"w:numId"}}}class yp extends l{constructor(g){super("w:num"),this.numId=g.numId,this.reference=g.reference,this.instance=g.instance,this.root.push(new iQ({numId:(0,k.vH)(g.numId)})),this.root.push(new rQ((0,k.vH)(g.abstractNumId))),g.overrideLevel&&this.root.push(new ov(g.overrideLevel.num,g.overrideLevel.start))}}class sQ extends u{constructor(){super(...arguments),this.xmlKeys={ilvl:"w:ilvl"}}}class ov extends l{constructor(g,M){super("w:lvlOverride"),this.root.push(new sQ({ilvl:g})),M!==void 0&&this.root.push(new aQ(M))}}class oQ extends u{constructor(){super(...arguments),this.xmlKeys={val:"w:val"}}}class aQ extends l{constructor(g){super("w:startOverride"),this.root.push(new oQ({val:g}))}}class av extends l{constructor(g){super("w:numbering"),this.abstractNumberingMap=new Map,this.concreteNumberingMap=new Map,this.referenceConfigMap=new Map,this.root.push(new To({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",Ignorable:"w14 w15 wp14"}));const M=new Op((0,Ht.NY)(),[{level:0,format:gr.BULLET,text:"\u25CF",alignment:O.LEFT,style:{paragraph:{indent:{left:(0,Ht.vw)(.5),hanging:(0,Ht.vw)(.25)}}}},{level:1,format:gr.BULLET,text:"\u25CB",alignment:O.LEFT,style:{paragraph:{indent:{left:(0,Ht.vw)(1),hanging:(0,Ht.vw)(.25)}}}},{level:2,format:gr.BULLET,text:"\u25A0",alignment:O.LEFT,style:{paragraph:{indent:{left:2160,hanging:(0,Ht.vw)(.25)}}}},{level:3,format:gr.BULLET,text:"\u25CF",alignment:O.LEFT,style:{paragraph:{indent:{left:2880,hanging:(0,Ht.vw)(.25)}}}},{level:4,format:gr.BULLET,text:"\u25CB",alignment:O.LEFT,style:{paragraph:{indent:{left:3600,hanging:(0,Ht.vw)(.25)}}}},{level:5,format:gr.BULLET,text:"\u25A0",alignment:O.LEFT,style:{paragraph:{indent:{left:4320,hanging:(0,Ht.vw)(.25)}}}},{level:6,format:gr.BULLET,text:"\u25CF",alignment:O.LEFT,style:{paragraph:{indent:{left:5040,hanging:(0,Ht.vw)(.25)}}}},{level:7,format:gr.BULLET,text:"\u25CF",alignment:O.LEFT,style:{paragraph:{indent:{left:5760,hanging:(0,Ht.vw)(.25)}}}},{level:8,format:gr.BULLET,text:"\u25CF",alignment:O.LEFT,style:{paragraph:{indent:{left:6480,hanging:(0,Ht.vw)(.25)}}}}]);this.concreteNumberingMap.set("default-bullet-numbering",new yp({numId:1,abstractNumId:M.id,reference:"default-bullet-numbering",instance:0,overrideLevel:{num:0,start:1}})),this.abstractNumberingMap.set("default-bullet-numbering",M);for(const K of g.config)this.abstractNumberingMap.set(K.reference,new Op((0,Ht.NY)(),K.levels)),this.referenceConfigMap.set(K.reference,K.levels)}prepForXml(g){for(const M of this.abstractNumberingMap.values())this.root.push(M);for(const M of this.concreteNumberingMap.values())this.root.push(M);return super.prepForXml(g)}createConcreteNumberingInstance(g,M){const K=this.abstractNumberingMap.get(g);if(!K)return;const de=`${g}-${M}`;if(this.concreteNumberingMap.has(de))return;const me=this.referenceConfigMap.get(g),Qe=me&&me[0].start,ze={numId:(0,Ht.NY)(),abstractNumId:K.id,reference:g,instance:M,overrideLevel:Qe&&Number.isInteger(Qe)?{num:0,start:Qe}:{num:0,start:1}};this.concreteNumberingMap.set(de,new yp(ze))}get ConcreteNumbering(){return Array.from(this.concreteNumberingMap.values())}get ReferenceConfig(){return Array.from(this.referenceConfigMap.values())}}class lQ extends u{constructor(){super(...arguments),this.xmlKeys={version:"w:val",name:"w:name",uri:"w:uri"}}}class cQ extends l{constructor(g){super("w:compatSetting"),this.root.push(new lQ({version:g,uri:"http://schemas.microsoft.com/office/word",name:"compatibilityMode"}))}}class uQ extends l{constructor(g){super("w:compat"),g.version&&this.root.push(new cQ(g.version)),g.useSingleBorderforContiguousCells&&this.root.push(new j("w:useSingleBorderforContiguousCells",g.useSingleBorderforContiguousCells)),g.wordPerfectJustification&&this.root.push(new j("w:wpJustification",g.wordPerfectJustification)),g.noTabStopForHangingIndent&&this.root.push(new j("w:noTabHangInd",g.noTabStopForHangingIndent)),g.noLeading&&this.root.push(new j("w:noLeading",g.noLeading)),g.spaceForUnderline&&this.root.push(new j("w:spaceForUL",g.spaceForUnderline)),g.noColumnBalance&&this.root.push(new j("w:noColumnBalance",g.noColumnBalance)),g.balanceSingleByteDoubleByteWidth&&this.root.push(new j("w:balanceSingleByteDoubleByteWidth",g.balanceSingleByteDoubleByteWidth)),g.noExtraLineSpacing&&this.root.push(new j("w:noExtraLineSpacing",g.noExtraLineSpacing)),g.doNotLeaveBackslashAlone&&this.root.push(new j("w:doNotLeaveBackslashAlone",g.doNotLeaveBackslashAlone)),g.underlineTrailingSpaces&&this.root.push(new j("w:ulTrailSpace",g.underlineTrailingSpaces)),g.doNotExpandShiftReturn&&this.root.push(new j("w:doNotExpandShiftReturn",g.doNotExpandShiftReturn)),g.spacingInWholePoints&&this.root.push(new j("w:spacingInWholePoints",g.spacingInWholePoints)),g.lineWrapLikeWord6&&this.root.push(new j("w:lineWrapLikeWord6",g.lineWrapLikeWord6)),g.printBodyTextBeforeHeader&&this.root.push(new j("w:printBodyTextBeforeHeader",g.printBodyTextBeforeHeader)),g.printColorsBlack&&this.root.push(new j("w:printColBlack",g.printColorsBlack)),g.spaceWidth&&this.root.push(new j("w:wpSpaceWidth",g.spaceWidth)),g.showBreaksInFrames&&this.root.push(new j("w:showBreaksInFrames",g.showBreaksInFrames)),g.subFontBySize&&this.root.push(new j("w:subFontBySize",g.subFontBySize)),g.suppressBottomSpacing&&this.root.push(new j("w:suppressBottomSpacing",g.suppressBottomSpacing)),g.suppressTopSpacing&&this.root.push(new j("w:suppressTopSpacing",g.suppressTopSpacing)),g.suppressSpacingAtTopOfPage&&this.root.push(new j("w:suppressSpacingAtTopOfPage",g.suppressSpacingAtTopOfPage)),g.suppressTopSpacingWP&&this.root.push(new j("w:suppressTopSpacingWP",g.suppressTopSpacingWP)),g.suppressSpBfAfterPgBrk&&this.root.push(new j("w:suppressSpBfAfterPgBrk",g.suppressSpBfAfterPgBrk)),g.swapBordersFacingPages&&this.root.push(new j("w:swapBordersFacingPages",g.swapBordersFacingPages)),g.convertMailMergeEsc&&this.root.push(new j("w:convMailMergeEsc",g.convertMailMergeEsc)),g.truncateFontHeightsLikeWP6&&this.root.push(new j("w:truncateFontHeightsLikeWP6",g.truncateFontHeightsLikeWP6)),g.macWordSmallCaps&&this.root.push(new j("w:mwSmallCaps",g.macWordSmallCaps)),g.usePrinterMetrics&&this.root.push(new j("w:usePrinterMetrics",g.usePrinterMetrics)),g.doNotSuppressParagraphBorders&&this.root.push(new j("w:doNotSuppressParagraphBorders",g.doNotSuppressParagraphBorders)),g.wrapTrailSpaces&&this.root.push(new j("w:wrapTrailSpaces",g.wrapTrailSpaces)),g.footnoteLayoutLikeWW8&&this.root.push(new j("w:footnoteLayoutLikeWW8",g.footnoteLayoutLikeWW8)),g.shapeLayoutLikeWW8&&this.root.push(new j("w:shapeLayoutLikeWW8",g.shapeLayoutLikeWW8)),g.alignTablesRowByRow&&this.root.push(new j("w:alignTablesRowByRow",g.alignTablesRowByRow)),g.forgetLastTabAlignment&&this.root.push(new j("w:forgetLastTabAlignment",g.forgetLastTabAlignment)),g.adjustLineHeightInTable&&this.root.push(new j("w:adjustLineHeightInTable",g.adjustLineHeightInTable)),g.autoSpaceLikeWord95&&this.root.push(new j("w:autoSpaceLikeWord95",g.autoSpaceLikeWord95)),g.noSpaceRaiseLower&&this.root.push(new j("w:noSpaceRaiseLower",g.noSpaceRaiseLower)),g.doNotUseHTMLParagraphAutoSpacing&&this.root.push(new j("w:doNotUseHTMLParagraphAutoSpacing",g.doNotUseHTMLParagraphAutoSpacing)),g.layoutRawTableWidth&&this.root.push(new j("w:layoutRawTableWidth",g.layoutRawTableWidth)),g.layoutTableRowsApart&&this.root.push(new j("w:layoutTableRowsApart",g.layoutTableRowsApart)),g.useWord97LineBreakRules&&this.root.push(new j("w:useWord97LineBreakRules",g.useWord97LineBreakRules)),g.doNotBreakWrappedTables&&this.root.push(new j("w:doNotBreakWrappedTables",g.doNotBreakWrappedTables)),g.doNotSnapToGridInCell&&this.root.push(new j("w:doNotSnapToGridInCell",g.doNotSnapToGridInCell)),g.selectFieldWithFirstOrLastCharacter&&this.root.push(new j("w:selectFldWithFirstOrLastChar",g.selectFieldWithFirstOrLastCharacter)),g.applyBreakingRules&&this.root.push(new j("w:applyBreakingRules",g.applyBreakingRules)),g.doNotWrapTextWithPunctuation&&this.root.push(new j("w:doNotWrapTextWithPunct",g.doNotWrapTextWithPunctuation)),g.doNotUseEastAsianBreakRules&&this.root.push(new j("w:doNotUseEastAsianBreakRules",g.doNotUseEastAsianBreakRules)),g.useWord2002TableStyleRules&&this.root.push(new j("w:useWord2002TableStyleRules",g.useWord2002TableStyleRules)),g.growAutofit&&this.root.push(new j("w:growAutofit",g.growAutofit)),g.useFELayout&&this.root.push(new j("w:useFELayout",g.useFELayout)),g.useNormalStyleForList&&this.root.push(new j("w:useNormalStyleForList",g.useNormalStyleForList)),g.doNotUseIndentAsNumberingTabStop&&this.root.push(new j("w:doNotUseIndentAsNumberingTabStop",g.doNotUseIndentAsNumberingTabStop)),g.useAlternateEastAsianLineBreakRules&&this.root.push(new j("w:useAltKinsokuLineBreakRules",g.useAlternateEastAsianLineBreakRules)),g.allowSpaceOfSameStyleInTable&&this.root.push(new j("w:allowSpaceOfSameStyleInTable",g.allowSpaceOfSameStyleInTable)),g.doNotSuppressIndentation&&this.root.push(new j("w:doNotSuppressIndentation",g.doNotSuppressIndentation)),g.doNotAutofitConstrainedTables&&this.root.push(new j("w:doNotAutofitConstrainedTables",g.doNotAutofitConstrainedTables)),g.autofitToFirstFixedWidthCell&&this.root.push(new j("w:autofitToFirstFixedWidthCell",g.autofitToFirstFixedWidthCell)),g.underlineTabInNumberingList&&this.root.push(new j("w:underlineTabInNumList",g.underlineTabInNumberingList)),g.displayHangulFixedWidth&&this.root.push(new j("w:displayHangulFixedWidth",g.displayHangulFixedWidth)),g.splitPgBreakAndParaMark&&this.root.push(new j("w:splitPgBreakAndParaMark",g.splitPgBreakAndParaMark)),g.doNotVerticallyAlignCellWithSp&&this.root.push(new j("w:doNotVertAlignCellWithSp",g.doNotVerticallyAlignCellWithSp)),g.doNotBreakConstrainedForcedTable&&this.root.push(new j("w:doNotBreakConstrainedForcedTable",g.doNotBreakConstrainedForcedTable)),g.ignoreVerticalAlignmentInTextboxes&&this.root.push(new j("w:doNotVertAlignInTxbx",g.ignoreVerticalAlignmentInTextboxes)),g.useAnsiKerningPairs&&this.root.push(new j("w:useAnsiKerningPairs",g.useAnsiKerningPairs)),g.cachedColumnBalance&&this.root.push(new j("w:cachedColBalance",g.cachedColumnBalance))}}class hQ extends u{constructor(){super(...arguments),this.xmlKeys={wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",Ignorable:"mc:Ignorable"}}}class fQ extends l{constructor(g){var M,K,de,me;super("w:settings"),this.root.push(new hQ({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",Ignorable:"w14 w15 wp14"})),this.root.push(new j("w:displayBackgroundShape",!0)),g.trackRevisions!==void 0&&this.root.push(new j("w:trackRevisions",g.trackRevisions)),g.evenAndOddHeaders!==void 0&&this.root.push(new j("w:evenAndOddHeaders",g.evenAndOddHeaders)),g.updateFields!==void 0&&this.root.push(new j("w:updateFields",g.updateFields)),this.root.push(new uQ(Object.assign(Object.assign({},(M=g.compatibility)!==null&&M!==void 0?M:{}),{version:(me=(de=(K=g.compatibility)===null||K===void 0?void 0:K.version)!==null&&de!==void 0?de:g.compatibilityModeVersion)!==null&&me!==void 0?me:15})))}}class lv extends u{constructor(){super(...arguments),this.xmlKeys={val:"w:val"}}}class dQ extends l{constructor(g){super("w:name"),this.root.push(new lv({val:g}))}}class pQ extends l{constructor(g){super("w:uiPriority"),this.root.push(new lv({val:(0,k.vH)(g)}))}}class mQ extends u{constructor(){super(...arguments),this.xmlKeys={type:"w:type",styleId:"w:styleId",default:"w:default",customStyle:"w:customStyle"}}}class cv extends l{constructor(g,M){super("w:style"),this.root.push(new mQ(g)),M.name&&this.root.push(new dQ(M.name)),M.basedOn&&this.root.push(new Z("w:basedOn",M.basedOn)),M.next&&this.root.push(new Z("w:next",M.next)),M.link&&this.root.push(new Z("w:link",M.link)),M.uiPriority!==void 0&&this.root.push(new pQ(M.uiPriority)),M.semiHidden!==void 0&&this.root.push(new j("w:semiHidden",M.semiHidden)),M.unhideWhenUsed!==void 0&&this.root.push(new j("w:unhideWhenUsed",M.unhideWhenUsed)),M.quickFormat!==void 0&&this.root.push(new j("w:qFormat",M.quickFormat))}}class Ya extends cv{constructor(g){super({type:"paragraph",styleId:g.id},g),this.paragraphProperties=new $s(g.paragraph),this.runProperties=new Ze(g.run),this.root.push(this.paragraphProperties),this.root.push(this.runProperties)}}class Ka extends cv{constructor(g){super({type:"character",styleId:g.id},Object.assign({uiPriority:99,unhideWhenUsed:!0},g)),this.runProperties=new Ze(g.run),this.root.push(this.runProperties)}}class Yi extends Ya{constructor(g){super(Object.assign(Object.assign({},g),{basedOn:"Normal",next:"Normal",quickFormat:!0}))}}class gQ extends Yi{constructor(g){super(Object.assign(Object.assign({},g),{id:"Title",name:"Title"}))}}class OQ extends Yi{constructor(g){super(Object.assign(Object.assign({},g),{id:"Heading1",name:"Heading 1"}))}}class yQ extends Yi{constructor(g){super(Object.assign(Object.assign({},g),{id:"Heading2",name:"Heading 2"}))}}class bQ extends Yi{constructor(g){super(Object.assign(Object.assign({},g),{id:"Heading3",name:"Heading 3"}))}}class vQ extends Yi{constructor(g){super(Object.assign(Object.assign({},g),{id:"Heading4",name:"Heading 4"}))}}class wQ extends Yi{constructor(g){super(Object.assign(Object.assign({},g),{id:"Heading5",name:"Heading 5"}))}}class _Q extends Yi{constructor(g){super(Object.assign(Object.assign({},g),{id:"Heading6",name:"Heading 6"}))}}class xQ extends Yi{constructor(g){super(Object.assign(Object.assign({},g),{id:"Strong",name:"Strong"}))}}class SQ extends Ya{constructor(g){super(Object.assign(Object.assign({},g),{id:"ListParagraph",name:"List Paragraph",basedOn:"Normal",quickFormat:!0}))}}class kQ extends Ya{constructor(g){super(Object.assign(Object.assign({},g),{id:"FootnoteText",name:"footnote text",link:"FootnoteTextChar",basedOn:"Normal",uiPriority:99,semiHidden:!0,unhideWhenUsed:!0,paragraph:{spacing:{after:0,line:240,lineRule:zr.AUTO}},run:{size:20}}))}}class TQ extends Ka{constructor(g){super(Object.assign(Object.assign({},g),{id:"FootnoteReference",name:"footnote reference",basedOn:"DefaultParagraphFont",semiHidden:!0,run:{superScript:!0}}))}}class EQ extends Ka{constructor(g){super(Object.assign(Object.assign({},g),{id:"FootnoteTextChar",name:"Footnote Text Char",basedOn:"DefaultParagraphFont",link:"FootnoteText",semiHidden:!0,run:{size:20}}))}}class CQ extends Ka{constructor(g){super(Object.assign(Object.assign({},g),{id:"Hyperlink",name:"Hyperlink",basedOn:"DefaultParagraphFont",run:{color:"0563C1",underline:{type:I.SINGLE}}}))}}class su extends l{constructor(g){if(super("w:styles"),g.initialStyles&&this.root.push(g.initialStyles),g.importedStyles)for(const M of g.importedStyles)this.root.push(M);if(g.paragraphStyles)for(const M of g.paragraphStyles)this.root.push(new Ya(M));if(g.characterStyles)for(const M of g.characterStyles)this.root.push(new Ka(M))}}class uv extends l{constructor(g){super("w:pPrDefault"),this.root.push(new $s(g))}}class hv extends l{constructor(g){super("w:rPrDefault"),this.root.push(new Ze(g))}}class fv extends l{constructor(g){super("w:docDefaults"),this.runPropertiesDefaults=new hv(g.run),this.paragraphPropertiesDefaults=new uv(g.paragraph),this.root.push(this.runPropertiesDefaults),this.root.push(this.paragraphPropertiesDefaults)}}class dv{newInstance(g){const M=(0,f.xml2js)(g,{compact:!1});let K;for(const me of M.elements||[])me.name==="w:styles"&&(K=me);if(K===void 0)throw new Error("can not find styles element");const de=K.elements||[];return new su({initialStyles:new y(K.attributes),importedStyles:de.map(me=>p(me))})}}class pv{newInstance(g={}){var M;return{initialStyles:new To({mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",Ignorable:"w14 w15"}),importedStyles:[new fv((M=g.document)!==null&&M!==void 0?M:{}),new gQ(Object.assign({run:{size:56}},g.title)),new OQ(Object.assign({run:{color:"2E74B5",size:32}},g.heading1)),new yQ(Object.assign({run:{color:"2E74B5",size:26}},g.heading2)),new bQ(Object.assign({run:{color:"1F4D78",size:24}},g.heading3)),new vQ(Object.assign({run:{color:"2E74B5",italics:!0}},g.heading4)),new wQ(Object.assign({run:{color:"2E74B5"}},g.heading5)),new _Q(Object.assign({run:{color:"1F4D78"}},g.heading6)),new xQ(Object.assign({run:{bold:!0}},g.strong)),new SQ(g.listParagraph||{}),new CQ(g.hyperlink||{}),new TQ(g.footnoteReference||{}),new kQ(g.footnoteText||{}),new EQ(g.footnoteTextChar||{})]}}}class mv{constructor(g,M={}){var K,de,me,Qe,ze,nt,Fe;if(this.currentRelationshipId=1,this.headers=[],this.footers=[],this.coreProperties=new CI(Object.assign(Object.assign({},g),{creator:(K=g.creator)!==null&&K!==void 0?K:"Un-named",revision:(de=g.revision)!==null&&de!==void 0?de:1,lastModifiedBy:(me=g.lastModifiedBy)!==null&&me!==void 0?me:"Un-named"})),this.numbering=new av(g.numbering?g.numbering:{config:[]}),this.comments=new G0((Qe=g.comments)!==null&&Qe!==void 0?Qe:{children:[]}),this.fileRelationships=new Za,this.customProperties=new QI((ze=g.customProperties)!==null&&ze!==void 0?ze:[]),this.appProperties=new xI,this.footnotesWrapper=new jI,this.contentTypes=new EI,this.documentWrapper=new Rb({background:g.background||{}}),this.settings=new fQ({compatibilityModeVersion:g.compatabilityModeVersion,compatibility:g.compatibility,evenAndOddHeaders:!!g.evenAndOddHeaderAndFooters,trackRevisions:(nt=g.features)===null||nt===void 0?void 0:nt.trackRevisions,updateFields:(Fe=g.features)===null||Fe===void 0?void 0:Fe.updateFields}),this.media=M.template&&M.template.media?M.template.media:new pp,M.template&&(this.currentRelationshipId=M.template.currentRelationshipId+1),M.template&&g.externalStyles)throw Error("can not use both template and external styles");if(M.template&&M.template.styles){const Ye=new dv;this.styles=Ye.newInstance(M.template.styles)}else if(g.externalStyles){const Ye=new dv;this.styles=Ye.newInstance(g.externalStyles)}else if(g.styles){const Ye=new pv().newInstance(g.styles.default);this.styles=new su(Object.assign(Object.assign({},Ye),g.styles))}else{const Ye=new pv;this.styles=new su(Ye.newInstance())}if(this.addDefaultRelationships(),M.template&&M.template.headers)for(const Ye of M.template.headers)this.addHeaderToDocument(Ye.header,Ye.type);if(M.template&&M.template.footers)for(const Ye of M.template.footers)this.addFooterToDocument(Ye.footer,Ye.type);for(const Ye of g.sections)this.addSection(Ye);if(g.footnotes)for(const Ye in g.footnotes)this.footnotesWrapper.View.createFootNote(parseFloat(Ye),g.footnotes[Ye].children)}addSection({headers:g={},footers:M={},children:K,properties:de}){this.documentWrapper.View.Body.addSection(Object.assign(Object.assign({},de),{headerWrapperGroup:{default:g.default?this.createHeader(g.default):void 0,first:g.first?this.createHeader(g.first):void 0,even:g.even?this.createHeader(g.even):void 0},footerWrapperGroup:{default:M.default?this.createFooter(M.default):void 0,first:M.first?this.createFooter(M.first):void 0,even:M.even?this.createFooter(M.even):void 0}}));for(const me of K)this.documentWrapper.View.add(me)}createHeader(g){const M=new dp(this.media,this.currentRelationshipId++);for(const K of g.options.children)M.add(K);return this.addHeaderToDocument(M),M}createFooter(g){const M=new hp(this.media,this.currentRelationshipId++);for(const K of g.options.children)M.add(K);return this.addFooterToDocument(M),M}addHeaderToDocument(g,M=_i.DEFAULT){this.headers.push({header:g,type:M}),this.documentWrapper.Relationships.createRelationship(g.View.ReferenceId,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/header",`header${this.headers.length}.xml`),this.contentTypes.addHeader(this.headers.length)}addFooterToDocument(g,M=_i.DEFAULT){this.footers.push({footer:g,type:M}),this.documentWrapper.Relationships.createRelationship(g.View.ReferenceId,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/footer",`footer${this.footers.length}.xml`),this.contentTypes.addFooter(this.footers.length)}addDefaultRelationships(){this.fileRelationships.createRelationship(1,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument","word/document.xml"),this.fileRelationships.createRelationship(2,"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties","docProps/core.xml"),this.fileRelationships.createRelationship(3,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties","docProps/app.xml"),this.fileRelationships.createRelationship(4,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties","docProps/custom.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles","styles.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/numbering","numbering.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/footnotes","footnotes.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/settings","settings.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments","comments.xml")}get Document(){return this.documentWrapper}get Styles(){return this.styles}get CoreProperties(){return this.coreProperties}get Numbering(){return this.numbering}get Media(){return this.media}get FileRelationships(){return this.fileRelationships}get Headers(){return this.headers.map(g=>g.header)}get Footers(){return this.footers.map(g=>g.footer)}get ContentTypes(){return this.contentTypes}get CustomProperties(){return this.customProperties}get AppProperties(){return this.appProperties}get FootNotes(){return this.footnotesWrapper}get Settings(){return this.settings}get Comments(){return this.comments}}const AQ="";class PQ extends l{constructor(g={}){super("w:instrText"),this.properties=g,this.root.push(new X({space:T.PRESERVE}));let M="TOC";this.properties.captionLabel&&(M=`${M} \\a "${this.properties.captionLabel}"`),this.properties.entriesFromBookmark&&(M=`${M} \\b "${this.properties.entriesFromBookmark}"`),this.properties.captionLabelIncludingNumbers&&(M=`${M} \\c "${this.properties.captionLabelIncludingNumbers}"`),this.properties.sequenceAndPageNumbersSeparator&&(M=`${M} \\d "${this.properties.sequenceAndPageNumbersSeparator}"`),this.properties.tcFieldIdentifier&&(M=`${M} \\f "${this.properties.tcFieldIdentifier}"`),this.properties.hyperlink&&(M=`${M} \\h`),this.properties.tcFieldLevelRange&&(M=`${M} \\l "${this.properties.tcFieldLevelRange}"`),this.properties.pageNumbersEntryLevelsRange&&(M=`${M} \\n "${this.properties.pageNumbersEntryLevelsRange}"`),this.properties.headingStyleRange&&(M=`${M} \\o "${this.properties.headingStyleRange}"`),this.properties.entryAndPageNumberSeparator&&(M=`${M} \\p "${this.properties.entryAndPageNumberSeparator}"`),this.properties.seqFieldIdentifierForPrefix&&(M=`${M} \\s "${this.properties.seqFieldIdentifierForPrefix}"`),this.properties.stylesWithLevels&&this.properties.stylesWithLevels.length&&(M=`${M} \\t "${this.properties.stylesWithLevels.map(K=>`${K.styleName},${K.level}`).join(",")}"`),this.properties.useAppliedParagraphOutlineLevel&&(M=`${M} \\u`),this.properties.preserveTabInEntries&&(M=`${M} \\w`),this.properties.preserveNewLineInEntries&&(M=`${M} \\x`),this.properties.hideTabAndPageNumbersInWebView&&(M=`${M} \\z`),this.root.push(M)}}class RQ extends l{constructor(){super("w:sdtContent")}}class IQ extends l{constructor(g){super("w:sdtPr"),this.root.push(new Z("w:alias",g))}}class QQ extends l{constructor(g="Table of Contents",M){super("w:sdt"),this.root.push(new IQ(g));const K=new RQ,de=new xi({children:[new cn({children:[new V(!0),new PQ(M),new E]})]});K.addChildElement(de);const me=new xi({children:[new cn({children:[new $]})]});K.addChildElement(me),this.root.push(K)}}class NQ{constructor(g,M){this.styleName=g,this.level=M}}class LQ{constructor(g={children:[]}){this.options=g}}class DQ{constructor(g={children:[]}){this.options=g}}class gv extends u{constructor(){super(...arguments),this.xmlKeys={id:"w:id"}}}class Ov extends l{constructor(g){super("w:footnoteReference"),this.root.push(new gv({id:g}))}}class MQ extends cn{constructor(g){super({style:"FootnoteReference"}),this.root.push(new Ov(g))}}class $Q extends l{constructor(g){super("w:ins"),this.root.push(new Ne({id:g.id,author:g.author,date:g.date})),this.addChildElement(new bi(g))}}class BQ extends l{constructor(){super("w:delInstrText"),this.root.push(new X({space:T.PRESERVE})),this.root.push("PAGE")}}class FQ extends l{constructor(){super("w:delInstrText"),this.root.push(new X({space:T.PRESERVE})),this.root.push("NUMPAGES")}}class UQ extends l{constructor(){super("w:delInstrText"),this.root.push(new X({space:T.PRESERVE})),this.root.push("SECTIONPAGES")}}class yv extends l{constructor(g){super("w:delText"),this.root.push(new X({space:T.PRESERVE})),this.root.push(g)}}class VQ extends l{constructor(g){super("w:del"),this.root.push(new Ne({id:g.id,author:g.author,date:g.date})),this.deletedTextRunWrapper=new WQ(g),this.addChildElement(this.deletedTextRunWrapper)}}class WQ extends l{constructor(g){if(super("w:r"),this.root.push(new Ze(g)),g.children)for(const M of g.children)if(typeof M!="string")this.root.push(M);else switch(M){case B.CURRENT:this.root.push(new V),this.root.push(new BQ),this.root.push(new E),this.root.push(new $);break;case B.TOTAL_PAGES:this.root.push(new V),this.root.push(new FQ),this.root.push(new E),this.root.push(new $);break;case B.TOTAL_PAGES_IN_SECTION:this.root.push(new V),this.root.push(new UQ),this.root.push(new E),this.root.push(new $);break;default:this.root.push(new yv(M))}else g.text&&this.root.push(new yv(g.text));if(g.break)for(let M=0;M<g.break;M++)this.root.splice(1,0,new re)}}var bp=i(6085),Kt=i(3479);class jQ{format(g,M={}){const K=g.prepForXml(M);if(K)return K;throw Error("XMLComponent did not format correctly")}}class qQ{replace(g,M,K){let de=g;return M.forEach((me,Qe)=>{de=de.replace(new RegExp(`{${me.fileName}}`,"g"),(K+Qe).toString())}),de}getMediaData(g,M){return M.Array.filter(K=>g.search(`{${K.fileName}}`)>0)}}class XQ{replace(g,M){let K=g;for(const de of M)K=K.replace(new RegExp(`{${de.reference}-${de.instance}}`,"g"),de.numId.toString());return K}}var vp,ou=function(x,g,M,K){return new(M||(M=Promise))(function(de,me){function Qe(Fe){try{nt(K.next(Fe))}catch(Ye){me(Ye)}}function ze(Fe){try{nt(K.throw(Fe))}catch(Ye){me(Ye)}}function nt(Fe){var Ye;Fe.done?de(Fe.value):(Ye=Fe.value,Ye instanceof M?Ye:new M(function(Jt){Jt(Ye)})).then(Qe,ze)}nt((K=K.apply(x,g||[])).next())})};(function(x){x.NONE="",x.WITH_2_BLANKS="  ",x.WITH_4_BLANKS="    ",x.WITH_TAB="	"})(vp||(vp={}));class bv{static toString(g,M){return ou(this,void 0,void 0,function*(){return yield this.compiler.compile(g,M).generateAsync({type:"string",mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",compression:"DEFLATE"})})}static toBuffer(g,M){return ou(this,void 0,void 0,function*(){return yield this.compiler.compile(g,M).generateAsync({type:"nodebuffer",mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",compression:"DEFLATE"})})}static toBase64String(g,M){return ou(this,void 0,void 0,function*(){return yield this.compiler.compile(g,M).generateAsync({type:"base64",mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",compression:"DEFLATE"})})}static toBlob(g,M){return ou(this,void 0,void 0,function*(){return yield this.compiler.compile(g,M).generateAsync({type:"blob",mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",compression:"DEFLATE"})})}static toStream(g,M){return this.compiler.compile(g,M).generateNodeStream({type:"nodebuffer",streamFiles:!0,mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",compression:"DEFLATE"})}}bv.compiler=new class{constructor(){this.formatter=new jQ,this.imageReplacer=new qQ,this.numberingReplacer=new XQ}compile(x,g){const M=new bp,K=this.xmlifyFile(x,g),de=new Map(Object.entries(K));for(const[,me]of de)if(Array.isArray(me))for(const Qe of me)M.file(Qe.path,Qe.data);else M.file(me.path,me.data);for(const me of x.Media.Array){const Qe=me.stream;M.file(`word/media/${me.fileName}`,Qe)}return M}xmlifyFile(x,g){const M=x.Document.Relationships.RelationshipCount+1,K=Kt(this.formatter.format(x.Document.View,{viewWrapper:x.Document,file:x}),{indent:g,declaration:{standalone:"yes",encoding:"UTF-8"}}),de=this.imageReplacer.getMediaData(K,x.Media);return{Relationships:{data:(()=>(de.forEach((me,Qe)=>{x.Document.Relationships.createRelationship(M+Qe,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",`media/${me.fileName}`)}),Kt(this.formatter.format(x.Document.Relationships,{viewWrapper:x.Document,file:x}),{indent:g,declaration:{encoding:"UTF-8"}})))(),path:"word/_rels/document.xml.rels"},Document:{data:(()=>{const me=this.imageReplacer.replace(K,de,M);return this.numberingReplacer.replace(me,x.Numbering.ConcreteNumbering)})(),path:"word/document.xml"},Styles:{data:(()=>{const me=Kt(this.formatter.format(x.Styles,{viewWrapper:x.Document,file:x}),{indent:g,declaration:{standalone:"yes",encoding:"UTF-8"}});return this.numberingReplacer.replace(me,x.Numbering.ConcreteNumbering)})(),path:"word/styles.xml"},Properties:{data:Kt(this.formatter.format(x.CoreProperties,{viewWrapper:x.Document,file:x}),{indent:g,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"docProps/core.xml"},Numbering:{data:Kt(this.formatter.format(x.Numbering,{viewWrapper:x.Document,file:x}),{indent:g,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"word/numbering.xml"},FileRelationships:{data:Kt(this.formatter.format(x.FileRelationships,{viewWrapper:x.Document,file:x}),{indent:g,declaration:{encoding:"UTF-8"}}),path:"_rels/.rels"},HeaderRelationships:x.Headers.map((me,Qe)=>{const ze=Kt(this.formatter.format(me.View,{viewWrapper:me,file:x}),{indent:g,declaration:{encoding:"UTF-8"}});return this.imageReplacer.getMediaData(ze,x.Media).forEach((nt,Fe)=>{me.Relationships.createRelationship(Fe,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",`media/${nt.fileName}`)}),{data:Kt(this.formatter.format(me.Relationships,{viewWrapper:me,file:x}),{indent:g,declaration:{encoding:"UTF-8"}}),path:`word/_rels/header${Qe+1}.xml.rels`}}),FooterRelationships:x.Footers.map((me,Qe)=>{const ze=Kt(this.formatter.format(me.View,{viewWrapper:me,file:x}),{indent:g,declaration:{encoding:"UTF-8"}});return this.imageReplacer.getMediaData(ze,x.Media).forEach((nt,Fe)=>{me.Relationships.createRelationship(Fe,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",`media/${nt.fileName}`)}),{data:Kt(this.formatter.format(me.Relationships,{viewWrapper:me,file:x}),{indent:g,declaration:{encoding:"UTF-8"}}),path:`word/_rels/footer${Qe+1}.xml.rels`}}),Headers:x.Headers.map((me,Qe)=>{const ze=Kt(this.formatter.format(me.View,{viewWrapper:me,file:x}),{indent:g,declaration:{encoding:"UTF-8"}}),nt=this.imageReplacer.getMediaData(ze,x.Media),Fe=this.imageReplacer.replace(ze,nt,0);return{data:this.numberingReplacer.replace(Fe,x.Numbering.ConcreteNumbering),path:`word/header${Qe+1}.xml`}}),Footers:x.Footers.map((me,Qe)=>{const ze=Kt(this.formatter.format(me.View,{viewWrapper:me,file:x}),{indent:g,declaration:{encoding:"UTF-8"}}),nt=this.imageReplacer.getMediaData(ze,x.Media),Fe=this.imageReplacer.replace(ze,nt,0);return{data:this.numberingReplacer.replace(Fe,x.Numbering.ConcreteNumbering),path:`word/footer${Qe+1}.xml`}}),ContentTypes:{data:Kt(this.formatter.format(x.ContentTypes,{viewWrapper:x.Document,file:x}),{indent:g,declaration:{encoding:"UTF-8"}}),path:"[Content_Types].xml"},CustomProperties:{data:Kt(this.formatter.format(x.CustomProperties,{viewWrapper:x.Document,file:x}),{indent:g,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"docProps/custom.xml"},AppProperties:{data:Kt(this.formatter.format(x.AppProperties,{viewWrapper:x.Document,file:x}),{indent:g,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"docProps/app.xml"},FootNotes:{data:Kt(this.formatter.format(x.FootNotes.View,{viewWrapper:x.FootNotes,file:x}),{indent:g,declaration:{encoding:"UTF-8"}}),path:"word/footnotes.xml"},FootNotesRelationships:{data:Kt(this.formatter.format(x.FootNotes.Relationships,{viewWrapper:x.FootNotes,file:x}),{indent:g,declaration:{encoding:"UTF-8"}}),path:"word/_rels/footnotes.xml.rels"},Settings:{data:Kt(this.formatter.format(x.Settings,{viewWrapper:x.Document,file:x}),{indent:g,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"word/settings.xml"},Comments:{data:Kt(this.formatter.format(x.Comments,{viewWrapper:x.Document,file:x}),{indent:g,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"word/comments.xml"}}}};var Io=function(x,g,M,K){return new(M||(M=Promise))(function(de,me){function Qe(Fe){try{nt(K.next(Fe))}catch(Ye){me(Ye)}}function ze(Fe){try{nt(K.throw(Fe))}catch(Ye){me(Ye)}}function nt(Fe){var Ye;Fe.done?de(Fe.value):(Ye=Fe.value,Ye instanceof M?Ye:new M(function(Jt){Jt(Ye)})).then(Qe,ze)}nt((K=K.apply(x,g||[])).next())})};const zQ={"http://schemas.openxmlformats.org/officeDocument/2006/relationships/header":"header","http://schemas.openxmlformats.org/officeDocument/2006/relationships/footer":"footer","http://schemas.openxmlformats.org/officeDocument/2006/relationships/image":"image","http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink":"hyperlink"};var au;(function(x){x.HEADER="header",x.FOOTER="footer",x.IMAGE="image",x.HYPERLINK="hyperlink"})(au||(au={}));class HQ{extract(g){return Io(this,void 0,void 0,function*(){const M=yield bp.loadAsync(g),K=yield M.files["word/document.xml"].async("text"),de=yield M.files["word/_rels/document.xml.rels"].async("text"),me=this.extractDocumentRefs(K),Qe=this.findReferenceFiles(de),ze=new pp;return{headers:yield this.createHeaders(M,me,Qe,ze,0),footers:yield this.createFooters(M,me,Qe,ze,me.headers.length),currentRelationshipId:me.footers.length+me.headers.length,styles:yield M.files["word/styles.xml"].async("text"),titlePageIsDefined:this.checkIfTitlePageIsDefined(K),media:ze}})}createFooters(g,M,K,de,me){return Io(this,void 0,void 0,function*(){const Qe=M.footers.map((ze,nt)=>Io(this,void 0,void 0,function*(){const Fe=K.find(Pn=>Pn.id===ze.id);if(Fe===null||!Fe)throw new Error(`Can not find target file for id ${ze.id}`);const Ye=yield g.files[`word/${Fe.target}`].async("text"),Jt=(0,f.xml2js)(Ye,{compact:!1,captureSpacesBetweenElements:!0});if(!Jt.elements)return;const Pt=Jt.elements.reduce((Pn,Si)=>Si.name==="w:ftr"?Si:Pn),An=p(Pt),Hr=new hp(de,me+nt,An);return yield this.addRelationshipToWrapper(Fe,g,Hr,de),{type:ze.type,footer:Hr}})).filter(ze=>!!ze);return Promise.all(Qe)})}createHeaders(g,M,K,de,me){return Io(this,void 0,void 0,function*(){const Qe=M.headers.map((ze,nt)=>Io(this,void 0,void 0,function*(){const Fe=K.find(Pn=>Pn.id===ze.id);if(Fe===null||!Fe)throw new Error(`Can not find target file for id ${ze.id}`);const Ye=yield g.files[`word/${Fe.target}`].async("text"),Jt=(0,f.xml2js)(Ye,{compact:!1,captureSpacesBetweenElements:!0});if(!Jt.elements)return;const Pt=Jt.elements.reduce((Pn,Si)=>Si.name==="w:hdr"?Si:Pn),An=p(Pt),Hr=new dp(de,me+nt,An);return yield this.addRelationshipToWrapper(Fe,g,Hr,de),{type:ze.type,header:Hr}})).filter(ze=>!!ze);return Promise.all(Qe)})}addRelationshipToWrapper(g,M,K,de){return Io(this,void 0,void 0,function*(){const me=M.files[`word/_rels/${g.target}.rels`];if(!me)return;const Qe=yield me.async("text"),ze=this.findReferenceFiles(Qe).filter(Fe=>Fe.type===au.IMAGE),nt=this.findReferenceFiles(Qe).filter(Fe=>Fe.type===au.HYPERLINK);for(const Fe of ze){const Ye=bp.support.arraybuffer?"arraybuffer":"nodebuffer",Jt=yield M.files[`word/${Fe.target}`].async(Ye),Pt=de.addMedia(Jt,{width:100,height:100});K.Relationships.createRelationship(Fe.id,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",`media/${Pt.fileName}`)}for(const Fe of nt)K.Relationships.createRelationship(Fe.id,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",Fe.target,Jc.EXTERNAL)})}findReferenceFiles(g){const M=(0,f.xml2js)(g,{compact:!0});return(Array.isArray(M.Relationships.Relationship)?M.Relationships.Relationship:[M.Relationships.Relationship]).map(K=>{if(K._attributes===void 0)throw Error("relationship element has no attributes");return{id:this.parseRefId(K._attributes.Id),type:zQ[K._attributes.Type],target:K._attributes.Target}}).filter(K=>K.type!==null)}extractDocumentRefs(g){const M=(0,f.xml2js)(g,{compact:!0})["w:document"]["w:body"]["w:sectPr"],K=M["w:headerReference"];let de;de=K===void 0?[]:Array.isArray(K)?K:[K];const me=de.map(nt=>{if(nt._attributes===void 0)throw Error("header reference element has no attributes");return{type:nt._attributes["w:type"],id:this.parseRefId(nt._attributes["r:id"])}}),Qe=M["w:footerReference"];let ze;return ze=Qe===void 0?[]:Array.isArray(Qe)?Qe:[Qe],{headers:me,footers:ze.map(nt=>{if(nt._attributes===void 0)throw Error("footer reference element has no attributes");return{type:nt._attributes["w:type"],id:this.parseRefId(nt._attributes["r:id"])}})}}checkIfTitlePageIsDefined(g){return(0,f.xml2js)(g,{compact:!0})["w:document"]["w:body"]["w:sectPr"]["w:titlePg"]!==void 0}parseRefId(g){const M=/^rId(\d+)$/.exec(g);if(M===null)throw new Error("Invalid ref id");return parseInt(M[1],10)}}var qt=i(5575)})(),s})())})(pk);const tr=fN(pk.exports),sM="application/vnd.openxmlformats-officedocument.wordprocessingml.document",oM="docx",ew=n=>{for(var e,t=[],r=document.createTreeWalker(n,NodeFilter.SHOW_TEXT);e=r.nextNode();)t.push(e);return t},mk=["<b>","</b>","<i>","</i>","<u>","</u>"],gk=()=>({html:n=>mk.includes(n.trim().toLowerCase())?n.trim().toLowerCase():so(n),paragraph:n=>`${n}`,strong:n=>`<b>${n}</b>`,em:n=>`<i>${n}</i>`,codespan:()=>"",code:()=>"",link:()=>""}),aM=(n,e,t)=>({html:r=>mk.includes(r.trim().toLowerCase())?r.trim().toLowerCase():so(r),paragraph:r=>`<p>${r}</p>`,strong:r=>`<b>${r}</b>`,em:r=>`<i>${r}</i>`,codespan:r=>"",code:(r,i)=>"",link:(r,i,s)=>{const o=r.replace("#","").trim(),a=e.renameAnchor({key:o,book:n}),l=n.chapters.has(o)?n.chapters.get(o):null;return`<mage-link to="${a}">${ci(e.renameLink({book:n,text:s.trim(),chapter:l,title:l?l.title:null,key:o,currentChapter:t}),gk())}</mage-link>`}}),lM=n=>{const e=mi(n),t=Wf(e.properties),r=[];e.properties.title;for(let[s,o]of e.chapters){const a=t.titleStyle=="inline";//!isNumber(key)
const{text:l}=o,c=t.renameAnchor({key:s,book:e}),u=t.renameTitle({book:e,chapter:o,key:s,title:o.title?o.title.trim():""}),h=document.createElement("p");h.innerHTML=ci(u,gk())||"";const f=[];ew(h).forEach(w=>{let b=!1,O=!1,v=!1,_=w.parentNode;for(;_.tagName!=="P";){const S=_.tagName;S==="B"&&(b=!0),S==="I"&&(O=!0),S==="U"&&(v=!0),_=_.parentNode}f.push(new tr.TextRun({bold:b,italics:O,underline:v,text:w.nodeValue}))});const p=new tr.Bookmark({id:`${c}`,children:f}),d=document.createElement("div");d.innerHTML=XO(ci(l,aM(e,t,o)).replaceAll("<br>","</p><p>")||"<p></p>");const m=[];a||m.push(new tr.Paragraph({children:[p],alignment:"center",heading:tr.HeadingLevel.HEADING_3})),d.childNodes.forEach((w,b)=>{const O=[];ew(w).forEach(_=>{let S=!1,R=!1,N=!1,T=_.parentNode;for(;T.tagName!=="P";){const C=T.tagName;if(C==="MAGE-LINK"){const Q=T.getAttribute("to");O.push(new tr.InternalHyperlink({children:[new tr.TextRun({bold:S,italics:R,text:_.nodeValue,style:"Hyperlink",underline:N?null:{type:null,color:"#000000"}})],anchor:`${Q}`}));return}C==="B"&&(S=!0),C==="I"&&(R=!0),C==="U"&&(N=!0),T=T.parentNode}O.push(new tr.TextRun({bold:S,italics:R,underline:N,text:_.nodeValue}))});let v="both";m.push(new tr.Paragraph({children:[...a&&b===0?[p,new tr.TextRun({text:" "})]:[],...O],alignment:v}))}),m.push(new tr.Paragraph({children:[new tr.TextRun("")]})),r.push(...m)}const i=new tr.Document({styles:{paragraphStyles:[{id:"Normal",name:"Normal",next:"Normal",quickFormat:!1,run:{size:Math.floor(Number(t.textFont.size.replace("pt",""))*2),font:t.textFont.family},paragraph:{spacing:{line:Math.floor(Number(t.textFont.spacing.replace("%",""))*2.4)}}},{id:"Heading3",name:"Heading 3",basedOn:"Normal",next:"Normal",quickFormat:!0,run:{size:Math.floor(Number(t.titleFont.size.replace("pt",""))*2),font:t.titleFont.family,bold:!1},paragraph:{spacing:{line:Math.floor(Number(t.titleFont.spacing.replace("%",""))*2.4)}}}]},sections:[{headers:{default:null},properties:{page:{size:{width:t.page.width+"cm",height:t.page.height+"cm"},margin:{top:t.page.margins[0]+"cm",right:t.page.margins[1]+"cm",bottom:t.page.margins[2]+"cm",left:t.page.margins[3]+"cm"}}},children:r}]});return{encodedBook:"",mimetype:sM,extension:oM,blob:tr.Packer.toBlob(i)}},cM={encode:lM},Ok="text/html",uM="html",hM=(n,e,t,r,i)=>`<!DOCTYPE html>
<html>
<head>
  <meta charset='utf-8'>
  <meta name='viewport' content='width=device-width,initial-scale=1'>
  <meta name="author" content="${e}">


  <title>${n}</title>
  <style>
    body { margin: 30px calc(37vw - 100px); }
    body, html { font-family: ${i.textFont.family}; font-size: ${i.textFont.size};}
    h1 { text-align: center;}
    .text { margin-bottom: 5rem; text-align: justify;}
    .text > div.space  { margin: 6px 0; line-height: ${i.textFont.spacing};  }
    h2 { 
      page-break-before: always; page-break-after: never; padding-top: 1rem;
      font-family: ${i.titleFont.family}; font-size: ${i.titleFont.size}; line-height: ${i.titleFont.spacing};  
    }
  </style>
</head>
<body>
<p style="display:none">
${t}
</p>

<h1>${n}</h1>
${r}
</body>
</html>`,tw=(n,e,t)=>({html:r=>r,paragraph:r=>`${r}<br><div class="space"></div>
`,strong:r=>`<b>${r}</b>`,em:r=>`<i>${r}</i>`,codespan:()=>"",code:()=>"",br:()=>'<br><div class="space"></div>',link:(r,i,s)=>{const o=r.replace("#","").trim(),a=e.renameAnchor({key:o,book:n}),l=n.chapters.has(o)?n.chapters.get(o):null;return`<a href="#${a}">${e.renameLink({book:n,text:s.trim(),chapter:l,title:l?l.title:null,key:o,currentChapter:t})}</a>`}}),fM=n=>{const e=mi(n),t=Wf(e.properties);let r="",i="";for(const[a,l]of e.chapters){const{text:c}=l,u=t.renameAnchor({key:a,book:e}),h=t.renameTitle({book:e,chapter:l,key:a,title:l.title?l.title.trim():""});r+=`  <a href="#${u}">${h}</a>
`,t.titleStyle=="inline"?i+=`
<div class="text" for="${u}"><span class="chapter title" id="${u}">${h}</span>
${ci(c,tw(e,t)).trim()||""}
<div><br></div><div><br></div></div>
`:(i+=`

<h2 class="chapter title" id="${u}">${h}</h2>
`,i+=`
<div class="text" for="${u}">
${ci(c,tw(e,t)).trim()||""}
<div><br></div><div><br></div></div>
`)}const s=document.createElement("p");return s.innerHTML=i,i=s.innerHTML,{encodedBook:hM(e.properties.title,e.properties.author,r,i,t),mimetype:Ok,extension:uM}},dM={encode:fM,mimetype:Ok},pM=`<!DOCTYPE html>
<html>
<head>
	<meta charset='utf-8'>
	<meta name='viewport' content='width=device-width,initial-scale=1'>
	<title>Gamebook app</title>
  <meta name="theme-color" content="rgb(47, 99, 255)">
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/material-design-iconic-font/2.2.0/css/material-design-iconic-font.min.css">
  <link rel="stylesheet" href="https://librogamesland.github.io/magebook/template/mageapp.css">
</head>
<body style="--theme-color: rgb(47, 99, 255)">

  <div id="app" v-cloak>
    <mageapp-main></mageapp-main>
  </div>

  <script src="https://unpkg.com/vue@3"><\/script>
  <script src="https://lucafabbian.github.io/finaldialog/dist/finaldialog.js"><\/script>
  <script src="https://librogamesland.github.io/magebook/template/mageapp.js"><\/script>
  <script>window.$magebook = %%MAGEBOOK%%<\/script>
  <script>
    const { createApp } = Vue

    const app = createApp()
    app.use(MageApp.plugin)
    app.mount('#app')
  <\/script>

</body>
</html>`,mM=(n,e,t)=>({html:r=>r,paragraph:r=>`${r}<br><div class="space"></div>
`,strong:r=>`<b>${r}</b>`,em:r=>`<i>${r}</i>`,codespan:r=>{const i=ck(r).trim();return i.trim().startsWith("<")&&i.trim().endsWith(">")?i:""},code:(r,i)=>i.trim()=="html"?r:"",br:()=>'<br><div class="space"></div>',link:(r,i,s)=>{const o=r.replace("#","").trim(),a=e.renameAnchor({key:o,book:n}),l=n.chapters.has(o)?n.chapters.get(o):null;return`<a href="#${a}">${e.renameLink({book:n,text:s.trim(),chapter:l,title:l?l.title:null,key:o,currentChapter:t})}</a>`}}),gM=n=>{const e=mi(n),t=Wf(e.properties),r={properties:e.properties,toc:[],titles:{},chapters:{}};for(const[a,l]of e.chapters){r.toc.push(a);const{text:c,title:u}=l;u&&(r.titles[a]=u);const h=document.createElement("p");h.innerHTML=ci(c,mM(e,t)).trim()||"",r.chapters[a]=h.innerHTML}let i=pM;const s=e.titlePage.indexOf("\n```template");if(s>0){const a=s+12,l=e.titlePage.indexOf("\n```",a);i=e.titlePage.substring(a,l).trim()}return{encodedBook:i.replace("%%MAGEBOOK%%",JSON.stringify(r,null,2)),mimetype:t.advancedFormat[0],extension:t.advancedFormat[1]}},OM={encode:gM};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.
Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.
THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ht=function(){return ht=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},ht.apply(this,arguments)};function Fm(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||Array.prototype.slice.call(e))}var Qt=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Gt=Object.keys,Ln=Array.isArray;typeof Promise<"u"&&!Qt.Promise&&(Qt.Promise=Promise);function zn(n,e){return typeof e!="object"||Gt(e).forEach(function(t){n[t]=e[t]}),n}var Fl=Object.getPrototypeOf,yM={}.hasOwnProperty;function ur(n,e){return yM.call(n,e)}function aa(n,e){typeof e=="function"&&(e=e(Fl(n))),(typeof Reflect>"u"?Gt:Reflect.ownKeys)(e).forEach(function(t){Wi(n,t,e[t])})}var yk=Object.defineProperty;function Wi(n,e,t,r){yk(n,e,zn(t&&ur(t,"get")&&typeof t.get=="function"?{get:t.get,set:t.set,configurable:!0}:{value:t,configurable:!0,writable:!0},r))}function Ia(n){return{from:function(e){return n.prototype=Object.create(e.prototype),Wi(n.prototype,"constructor",n),{extend:aa.bind(null,n.prototype)}}}}var bM=Object.getOwnPropertyDescriptor;function zO(n,e){var t=bM(n,e),r;return t||(r=Fl(n))&&zO(r,e)}var vM=[].slice;function jf(n,e,t){return vM.call(n,e,t)}function bk(n,e){return e(n)}function yl(n){if(!n)throw new Error("Assertion Failed")}function vk(n){Qt.setImmediate?setImmediate(n):setTimeout(n,0)}function wk(n,e){return n.reduce(function(t,r,i){var s=e(r,i);return s&&(t[s[0]]=s[1]),t},{})}function wM(n,e,t){try{n.apply(null,t)}catch(r){e&&e(r)}}function Di(n,e){if(ur(n,e))return n[e];if(!e)return n;if(typeof e!="string"){for(var t=[],r=0,i=e.length;r<i;++r){var s=Di(n,e[r]);t.push(s)}return t}var o=e.indexOf(".");if(o!==-1){var a=n[e.substr(0,o)];return a===void 0?void 0:Di(a,e.substr(o+1))}}function Fr(n,e,t){if(!(!n||e===void 0)&&!("isFrozen"in Object&&Object.isFrozen(n)))if(typeof e!="string"&&"length"in e){yl(typeof t!="string"&&"length"in t);for(var r=0,i=e.length;r<i;++r)Fr(n,e[r],t[r])}else{var s=e.indexOf(".");if(s!==-1){var o=e.substr(0,s),a=e.substr(s+1);if(a==="")t===void 0?Ln(n)&&!isNaN(parseInt(o))?n.splice(o,1):delete n[o]:n[o]=t;else{var l=n[o];(!l||!ur(n,o))&&(l=n[o]={}),Fr(l,a,t)}}else t===void 0?Ln(n)&&!isNaN(parseInt(e))?n.splice(e,1):delete n[e]:n[e]=t}}function _M(n,e){typeof e=="string"?Fr(n,e,void 0):"length"in e&&[].map.call(e,function(t){Fr(n,t,void 0)})}function _k(n){var e={};for(var t in n)ur(n,t)&&(e[t]=n[t]);return e}var xM=[].concat;function xk(n){return xM.apply([],n)}var Sk="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(xk([8,16,32,64].map(function(n){return["Int","Uint","Float"].map(function(e){return e+n+"Array"})}))).filter(function(n){return Qt[n]}),SM=Sk.map(function(n){return Qt[n]});wk(Sk,function(n){return[n,!0]});var es=null;function Ac(n){es=typeof WeakMap<"u"&&new WeakMap;var e=Um(n);return es=null,e}function Um(n){if(!n||typeof n!="object")return n;var e=es&&es.get(n);if(e)return e;if(Ln(n)){e=[],es&&es.set(n,e);for(var t=0,r=n.length;t<r;++t)e.push(Um(n[t]))}else if(SM.indexOf(n.constructor)>=0)e=n;else{var i=Fl(n);e=i===Object.prototype?{}:Object.create(i),es&&es.set(n,e);for(var s in n)ur(n,s)&&(e[s]=Um(n[s]))}return e}var kM={}.toString;function Vm(n){return kM.call(n).slice(8,-1)}var Wm=typeof Symbol<"u"?Symbol.iterator:"@@iterator",TM=typeof Wm=="symbol"?function(n){var e;return n!=null&&(e=n[Wm])&&e.apply(n)}:function(){return null},Bo={};function Pi(n){var e,t,r,i;if(arguments.length===1){if(Ln(n))return n.slice();if(this===Bo&&typeof n=="string")return[n];if(i=TM(n)){for(t=[];r=i.next(),!r.done;)t.push(r.value);return t}if(n==null)return[n];if(e=n.length,typeof e=="number"){for(t=new Array(e);e--;)t[e]=n[e];return t}return[n]}for(e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return t}var HO=typeof Symbol<"u"?function(n){return n[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},gi=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function kk(n,e){gi=n,Tk=e}var Tk=function(){return!0},EM=!new Error("").stack;function Oo(){if(EM)try{throw Oo.arguments,new Error}catch(n){return n}return new Error}function jm(n,e){var t=n.stack;return t?(e=e||0,t.indexOf(n.name)===0&&(e+=(n.name+n.message).split(`
`).length),t.split(`
`).slice(e).filter(Tk).map(function(r){return`
`+r}).join("")):""}var CM=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],Ek=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],ZO=CM.concat(Ek),AM={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Qa(n,e){this._e=Oo(),this.name=n,this.message=e}Ia(Qa).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+jm(this._e,2))}},toString:function(){return this.name+": "+this.message}});function Ck(n,e){return n+". Errors: "+Object.keys(e).map(function(t){return e[t].toString()}).filter(function(t,r,i){return i.indexOf(t)===r}).join(`
`)}function Th(n,e,t,r){this._e=Oo(),this.failures=e,this.failedKeys=r,this.successCount=t,this.message=Ck(n,e)}Ia(Th).from(Qa);function kl(n,e){this._e=Oo(),this.name="BulkError",this.failures=Object.keys(e).map(function(t){return e[t]}),this.failuresByPos=e,this.message=Ck(n,e)}Ia(kl).from(Qa);var GO=ZO.reduce(function(n,e){return n[e]=e+"Error",n},{}),PM=Qa,Je=ZO.reduce(function(n,e){var t=e+"Error";function r(i,s){this._e=Oo(),this.name=t,i?typeof i=="string"?(this.message=""+i+(s?`
 `+s:""),this.inner=s||null):typeof i=="object"&&(this.message=i.name+" "+i.message,this.inner=i):(this.message=AM[e]||t,this.inner=null)}return Ia(r).from(PM),n[e]=r,n},{});Je.Syntax=SyntaxError;Je.Type=TypeError;Je.Range=RangeError;var nw=Ek.reduce(function(n,e){return n[e+"Error"]=Je[e],n},{});function RM(n,e){if(!n||n instanceof Qa||n instanceof TypeError||n instanceof SyntaxError||!n.name||!nw[n.name])return n;var t=new nw[n.name](e||n.message,n);return"stack"in n&&Wi(t,"stack",{get:function(){return this.inner.stack}}),t}var qf=ZO.reduce(function(n,e){return["Syntax","Type","Range"].indexOf(e)===-1&&(n[e+"Error"]=Je[e]),n},{});qf.ModifyError=Th;qf.DexieError=Qa;qf.BulkError=kl;function kt(){}function Pc(n){return n}function IM(n,e){return n==null||n===Pc?e:function(t){return e(n(t))}}function oo(n,e){return function(){n.apply(this,arguments),e.apply(this,arguments)}}function QM(n,e){return n===kt?e:function(){var t=n.apply(this,arguments);t!==void 0&&(arguments[0]=t);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var s=e.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?oo(r,this.onsuccess):r),i&&(this.onerror=this.onerror?oo(i,this.onerror):i),s!==void 0?s:t}}function NM(n,e){return n===kt?e:function(){n.apply(this,arguments);var t=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),t&&(this.onsuccess=this.onsuccess?oo(t,this.onsuccess):t),r&&(this.onerror=this.onerror?oo(r,this.onerror):r)}}function LM(n,e){return n===kt?e:function(t){var r=n.apply(this,arguments);zn(t,r);var i=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var o=e.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?oo(i,this.onsuccess):i),s&&(this.onerror=this.onerror?oo(s,this.onerror):s),r===void 0?o===void 0?void 0:o:zn(r,o)}}function DM(n,e){return n===kt?e:function(){return e.apply(this,arguments)===!1?!1:n.apply(this,arguments)}}function YO(n,e){return n===kt?e:function(){var t=n.apply(this,arguments);if(t&&typeof t.then=="function"){for(var r=this,i=arguments.length,s=new Array(i);i--;)s[i]=arguments[i];return t.then(function(){return e.apply(r,s)})}return e.apply(this,arguments)}}var Ul={},MM=100,$M=20,Ak=100,KO=typeof Promise>"u"?[]:function(){var n=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[n,Fl(n),n];var e=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[e,Fl(e),n]}(),qm=KO[0],Eh=KO[1],Xm=KO[2],Pk=Eh&&Eh.then,Ju=qm&&qm.constructor,JO=!!Xm,zm=!1,BM=Xm?function(){Xm.then(mu)}:Qt.setImmediate?setImmediate.bind(null,mu):Qt.MutationObserver?function(){var n=document.createElement("div");new MutationObserver(function(){mu(),n=null}).observe(n,{attributes:!0}),n.setAttribute("i","1")}:function(){setTimeout(mu,0)},Vl=function(n,e){bl.push([n,e]),Ch&&(BM(),Ch=!1)},Hm=!0,Ch=!0,eo=[],eh=[],Zm=null,Gm=Pc,qo={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:sw,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(function(n){try{sw(n[0],n[1])}catch{}})}},qe=qo,bl=[],to=0,th=[];function Le(n){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=kt,this._lib=!1;var e=this._PSD=qe;if(gi&&(this._stackHolder=Oo(),this._prev=null,this._numPrev=0),typeof n!="function"){if(n!==Ul)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&Km(this,this._value);return}this._state=null,this._value=null,++e.ref,Ik(this,n)}var Ym={get:function(){var n=qe,e=Ah;function t(r,i){var s=this,o=!n.global&&(n!==qe||e!==Ah),a=o&&!ji(),l=new Le(function(c,u){ey(s,new Rk(Rh(r,n,o,a),Rh(i,n,o,a),c,u,n))});return gi&&Lk(l,this),l}return t.prototype=Ul,t},set:function(n){Wi(this,"then",n&&n.prototype===Ul?Ym:{get:function(){return n},set:Ym.set})}};aa(Le.prototype,{then:Ym,_then:function(n,e){ey(this,new Rk(null,null,n,e,qe))},catch:function(n){if(arguments.length===1)return this.then(null,n);var e=arguments[0],t=arguments[1];return typeof e=="function"?this.then(null,function(r){return r instanceof e?t(r):nh(r)}):this.then(null,function(r){return r&&r.name===e?t(r):nh(r)})},finally:function(n){return this.then(function(e){return n(),e},function(e){return n(),nh(e)})},stack:{get:function(){if(this._stack)return this._stack;try{zm=!0;var n=Nk(this,[],$M),e=n.join(`
From previous: `);return this._state!==null&&(this._stack=e),e}finally{zm=!1}}},timeout:function(n,e){var t=this;return n<1/0?new Le(function(r,i){var s=setTimeout(function(){return i(new Je.Timeout(e))},n);t.then(r,i).finally(clearTimeout.bind(null,s))}):this}});typeof Symbol<"u"&&Symbol.toStringTag&&Wi(Le.prototype,Symbol.toStringTag,"Dexie.Promise");qo.env=Dk();function Rk(n,e,t,r,i){this.onFulfilled=typeof n=="function"?n:null,this.onRejected=typeof e=="function"?e:null,this.resolve=t,this.reject=r,this.psd=i}aa(Le,{all:function(){var n=Pi.apply(null,arguments).map(Ph);return new Le(function(e,t){n.length===0&&e([]);var r=n.length;n.forEach(function(i,s){return Le.resolve(i).then(function(o){n[s]=o,--r||e(n)},t)})})},resolve:function(n){if(n instanceof Le)return n;if(n&&typeof n.then=="function")return new Le(function(t,r){n.then(t,r)});var e=new Le(Ul,!0,n);return Lk(e,Zm),e},reject:nh,race:function(){var n=Pi.apply(null,arguments).map(Ph);return new Le(function(e,t){n.map(function(r){return Le.resolve(r).then(e,t)})})},PSD:{get:function(){return qe},set:function(n){return qe=n}},totalEchoes:{get:function(){return Ah}},newPSD:vs,usePSD:La,scheduler:{get:function(){return Vl},set:function(n){Vl=n}},rejectionMapper:{get:function(){return Gm},set:function(n){Gm=n}},follow:function(n,e){return new Le(function(t,r){return vs(function(i,s){var o=qe;o.unhandleds=[],o.onunhandled=s,o.finalize=oo(function(){var a=this;UM(function(){a.unhandleds.length===0?i():s(a.unhandleds[0])})},o.finalize),n()},e,t,r)})}});Ju&&(Ju.allSettled&&Wi(Le,"allSettled",function(){var n=Pi.apply(null,arguments).map(Ph);return new Le(function(e){n.length===0&&e([]);var t=n.length,r=new Array(t);n.forEach(function(i,s){return Le.resolve(i).then(function(o){return r[s]={status:"fulfilled",value:o}},function(o){return r[s]={status:"rejected",reason:o}}).then(function(){return--t||e(r)})})})}),Ju.any&&typeof AggregateError<"u"&&Wi(Le,"any",function(){var n=Pi.apply(null,arguments).map(Ph);return new Le(function(e,t){n.length===0&&t(new AggregateError([]));var r=n.length,i=new Array(r);n.forEach(function(s,o){return Le.resolve(s).then(function(a){return e(a)},function(a){i[o]=a,--r||t(new AggregateError(i))})})})}));function Ik(n,e){try{e(function(t){if(n._state===null){if(t===n)throw new TypeError("A promise cannot be resolved with itself.");var r=n._lib&&Rc();t&&typeof t.then=="function"?Ik(n,function(i,s){t instanceof Le?t._then(i,s):t.then(i,s)}):(n._state=!0,n._value=t,Qk(n)),r&&Ic()}},Km.bind(null,n))}catch(t){Km(n,t)}}function Km(n,e){if(eh.push(e),n._state===null){var t=n._lib&&Rc();e=Gm(e),n._state=!1,n._value=e,gi&&e!==null&&typeof e=="object"&&!e._promise&&wM(function(){var r=zO(e,"stack");e._promise=n,Wi(e,"stack",{get:function(){return zm?r&&(r.get?r.get.apply(e):r.value):n.stack}})}),VM(n),Qk(n),t&&Ic()}}function Qk(n){var e=n._listeners;n._listeners=[];for(var t=0,r=e.length;t<r;++t)ey(n,e[t]);var i=n._PSD;--i.ref||i.finalize(),to===0&&(++to,Vl(function(){--to===0&&ty()},[]))}function ey(n,e){if(n._state===null){n._listeners.push(e);return}var t=n._state?e.onFulfilled:e.onRejected;if(t===null)return(n._state?e.resolve:e.reject)(n._value);++e.psd.ref,++to,Vl(FM,[t,n,e])}function FM(n,e,t){try{Zm=e;var r,i=e._value;e._state?r=n(i):(eh.length&&(eh=[]),r=n(i),eh.indexOf(i)===-1&&WM(e)),t.resolve(r)}catch(s){t.reject(s)}finally{Zm=null,--to===0&&ty(),--t.psd.ref||t.psd.finalize()}}function Nk(n,e,t){if(e.length===t)return e;var r="";if(n._state===!1){var i=n._value,s,o;i!=null?(s=i.name||"Error",o=i.message||i,r=jm(i,0)):(s=i,o=""),e.push(s+(o?": "+o:"")+r)}return gi&&(r=jm(n._stackHolder,2),r&&e.indexOf(r)===-1&&e.push(r),n._prev&&Nk(n._prev,e,t)),e}function Lk(n,e){var t=e?e._numPrev+1:0;t<MM&&(n._prev=e,n._numPrev=t)}function mu(){Rc()&&Ic()}function Rc(){var n=Hm;return Hm=!1,Ch=!1,n}function Ic(){var n,e,t;do for(;bl.length>0;)for(n=bl,bl=[],t=n.length,e=0;e<t;++e){var r=n[e];r[0].apply(null,r[1])}while(bl.length>0);Hm=!0,Ch=!0}function ty(){var n=eo;eo=[],n.forEach(function(r){r._PSD.onunhandled.call(null,r._value,r)});for(var e=th.slice(0),t=e.length;t;)e[--t]()}function UM(n){function e(){n(),th.splice(th.indexOf(e),1)}th.push(e),++to,Vl(function(){--to===0&&ty()},[])}function VM(n){eo.some(function(e){return e._value===n._value})||eo.push(n)}function WM(n){for(var e=eo.length;e;)if(eo[--e]._value===n._value){eo.splice(e,1);return}}function nh(n){return new Le(Ul,!1,n)}function Dt(n,e){var t=qe;return function(){var r=Rc(),i=qe;try{return ws(t,!0),n.apply(this,arguments)}catch(s){e&&e(s)}finally{ws(i,!1),r&&Ic()}}}var Qn={awaits:0,echoes:0,id:0},jM=0,rh=[],Cp=0,Ah=0,qM=0;function vs(n,e,t,r){var i=qe,s=Object.create(i);s.parent=i,s.ref=0,s.global=!1,s.id=++qM;var o=qo.env;s.env=JO?{Promise:Le,PromiseProp:{value:Le,configurable:!0,writable:!0},all:Le.all,race:Le.race,allSettled:Le.allSettled,any:Le.any,resolve:Le.resolve,reject:Le.reject,nthen:rw(o.nthen,s),gthen:rw(o.gthen,s)}:{},e&&zn(s,e),++i.ref,s.finalize=function(){--this.parent.ref||this.parent.finalize()};var a=La(s,n,t,r);return s.ref===0&&s.finalize(),a}function Na(){return Qn.id||(Qn.id=++jM),++Qn.awaits,Qn.echoes+=Ak,Qn.id}function ji(){return Qn.awaits?(--Qn.awaits===0&&(Qn.id=0),Qn.echoes=Qn.awaits*Ak,!0):!1}(""+Pk).indexOf("[native code]")===-1&&(Na=ji=kt);function Ph(n){return Qn.echoes&&n&&n.constructor===Ju?(Na(),n.then(function(e){return ji(),e},function(e){return ji(),sn(e)})):n}function XM(n){++Ah,(!Qn.echoes||--Qn.echoes===0)&&(Qn.echoes=Qn.id=0),rh.push(qe),ws(n,!0)}function zM(){var n=rh[rh.length-1];rh.pop(),ws(n,!1)}function ws(n,e){var t=qe;if((e?Qn.echoes&&(!Cp++||n!==qe):Cp&&(!--Cp||n!==qe))&&Mk(e?XM.bind(null,n):zM),n!==qe&&(qe=n,t===qo&&(qo.env=Dk()),JO)){var r=qo.env.Promise,i=n.env;Eh.then=i.nthen,r.prototype.then=i.gthen,(t.global||n.global)&&(Object.defineProperty(Qt,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function Dk(){var n=Qt.Promise;return JO?{Promise:n,PromiseProp:Object.getOwnPropertyDescriptor(Qt,"Promise"),all:n.all,race:n.race,allSettled:n.allSettled,any:n.any,resolve:n.resolve,reject:n.reject,nthen:Eh.then,gthen:n.prototype.then}:{}}function La(n,e,t,r,i){var s=qe;try{return ws(n,!0),e(t,r,i)}finally{ws(s,!1)}}function Mk(n){Pk.call(qm,n)}function Rh(n,e,t,r){return typeof n!="function"?n:function(){var i=qe;t&&Na(),ws(e,!0);try{return n.apply(this,arguments)}finally{ws(i,!1),r&&Mk(ji)}}}function rw(n,e){return function(t,r){return n.call(this,Rh(t,e),Rh(r,e))}}var iw="unhandledrejection";function sw(n,e){var t;try{t=e.onuncatched(n)}catch{}if(t!==!1)try{var r,i={promise:e,reason:n};if(Qt.document&&document.createEvent?(r=document.createEvent("Event"),r.initEvent(iw,!0,!0),zn(r,i)):Qt.CustomEvent&&(r=new CustomEvent(iw,{detail:i}),zn(r,i)),r&&Qt.dispatchEvent&&(dispatchEvent(r),!Qt.PromiseRejectionEvent&&Qt.onunhandledrejection))try{Qt.onunhandledrejection(r)}catch{}gi&&r&&!r.defaultPrevented&&console.warn("Unhandled rejection: "+(n.stack||n))}catch{}}var sn=Le.reject;function Jm(n,e,t,r){if(!n.idbdb||!n._state.openComplete&&!qe.letThrough&&!n._vip){if(n._state.openComplete)return sn(new Je.DatabaseClosed(n._state.dbOpenError));if(!n._state.isBeingOpened){if(!n._options.autoOpen)return sn(new Je.DatabaseClosed);n.open().catch(kt)}return n._state.dbReadyPromise.then(function(){return Jm(n,e,t,r)})}else{var i=n._createTransaction(e,t,n._dbSchema);try{i.create(),n._state.PR1398_maxLoop=3}catch(s){return s.name===GO.InvalidState&&n.isOpen()&&--n._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),n._close(),n.open().then(function(){return Jm(n,e,t,r)})):sn(s)}return i._promise(e,function(s,o){return vs(function(){return qe.trans=i,r(s,o,i)})}).then(function(s){return i._completion.then(function(){return s})})}}var ow="3.2.2",Gs=String.fromCharCode(65535),eg=-1/0,ki="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",$k="String expected.",Tl=[],Xf=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),HM=Xf,ZM=Xf,Bk=function(n){return!/(dexie\.js|dexie\.min\.js)/.test(n)},zf="__dbnames",Ap="readonly",Pp="readwrite";function ao(n,e){return n?e?function(){return n.apply(this,arguments)&&e.apply(this,arguments)}:n:e}var Fk={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function gu(n){return typeof n=="string"&&!/\./.test(n)?function(e){return e[n]===void 0&&n in e&&(e=Ac(e),delete e[n]),e}:function(e){return e}}var GM=function(){function n(){}return n.prototype._trans=function(e,t,r){var i=this._tx||qe.trans,s=this.name;function o(l,c,u){if(!u.schema[s])throw new Je.NotFound("Table "+s+" not part of transaction");return t(u.idbtrans,u)}var a=Rc();try{return i&&i.db===this.db?i===qe.trans?i._promise(e,o,r):vs(function(){return i._promise(e,o,r)},{trans:i,transless:qe.transless||qe}):Jm(this.db,e,[this.name],o)}finally{a&&Ic()}},n.prototype.get=function(e,t){var r=this;return e&&e.constructor===Object?this.where(e).first(t):this._trans("readonly",function(i){return r.core.get({trans:i,key:e}).then(function(s){return r.hook.reading.fire(s)})}).then(t)},n.prototype.where=function(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(Ln(e))return new this.db.WhereClause(this,"["+e.join("+")+"]");var t=Gt(e);if(t.length===1)return this.where(t[0]).equals(e[t[0]]);var r=this.schema.indexes.concat(this.schema.primKey).filter(function(u){return u.compound&&t.every(function(h){return u.keyPath.indexOf(h)>=0})&&u.keyPath.every(function(h){return t.indexOf(h)>=0})})[0];if(r&&this.db._maxKey!==Gs)return this.where(r.name).equals(r.keyPath.map(function(u){return e[u]}));!r&&gi&&console.warn("The query "+JSON.stringify(e)+" on "+this.name+" would benefit of a "+("compound index ["+t.join("+")+"]"));var i=this.schema.idxByName,s=this.db._deps.indexedDB;function o(u,h){try{return s.cmp(u,h)===0}catch{return!1}}var a=t.reduce(function(u,h){var f=u[0],p=u[1],d=i[h],m=e[h];return[f||d,f||!d?ao(p,d&&d.multi?function(y){var w=Di(y,h);return Ln(w)&&w.some(function(b){return o(m,b)})}:function(y){return o(m,Di(y,h))}):p]},[null,null]),l=a[0],c=a[1];return l?this.where(l.name).equals(e[l.keyPath]).filter(c):r?this.filter(c):this.where(t).equals("")},n.prototype.filter=function(e){return this.toCollection().and(e)},n.prototype.count=function(e){return this.toCollection().count(e)},n.prototype.offset=function(e){return this.toCollection().offset(e)},n.prototype.limit=function(e){return this.toCollection().limit(e)},n.prototype.each=function(e){return this.toCollection().each(e)},n.prototype.toArray=function(e){return this.toCollection().toArray(e)},n.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},n.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,Ln(e)?"["+e.join("+")+"]":e))},n.prototype.reverse=function(){return this.toCollection().reverse()},n.prototype.mapToClass=function(e){this.schema.mappedClass=e;var t=function(r){if(!r)return r;var i=Object.create(e.prototype);for(var s in r)if(ur(r,s))try{i[s]=r[s]}catch{}return i};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=t,this.hook("reading",t),e},n.prototype.defineClass=function(){function e(t){zn(this,t)}return this.mapToClass(e)},n.prototype.add=function(e,t){var r=this,i=this.schema.primKey,s=i.auto,o=i.keyPath,a=e;return o&&s&&(a=gu(o)(e)),this._trans("readwrite",function(l){return r.core.mutate({trans:l,type:"add",keys:t!=null?[t]:null,values:[a]})}).then(function(l){return l.numFailures?Le.reject(l.failures[0]):l.lastResult}).then(function(l){if(o)try{Fr(e,o,l)}catch{}return l})},n.prototype.update=function(e,t){if(typeof e=="object"&&!Ln(e)){var r=Di(e,this.schema.primKey.keyPath);if(r===void 0)return sn(new Je.InvalidArgument("Given object does not contain its primary key"));try{typeof t!="function"?Gt(t).forEach(function(i){Fr(e,i,t[i])}):t(e,{value:e,primKey:r})}catch{}return this.where(":id").equals(r).modify(t)}else return this.where(":id").equals(e).modify(t)},n.prototype.put=function(e,t){var r=this,i=this.schema.primKey,s=i.auto,o=i.keyPath,a=e;return o&&s&&(a=gu(o)(e)),this._trans("readwrite",function(l){return r.core.mutate({trans:l,type:"put",values:[a],keys:t!=null?[t]:null})}).then(function(l){return l.numFailures?Le.reject(l.failures[0]):l.lastResult}).then(function(l){if(o)try{Fr(e,o,l)}catch{}return l})},n.prototype.delete=function(e){var t=this;return this._trans("readwrite",function(r){return t.core.mutate({trans:r,type:"delete",keys:[e]})}).then(function(r){return r.numFailures?Le.reject(r.failures[0]):void 0})},n.prototype.clear=function(){var e=this;return this._trans("readwrite",function(t){return e.core.mutate({trans:t,type:"deleteRange",range:Fk})}).then(function(t){return t.numFailures?Le.reject(t.failures[0]):void 0})},n.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",function(r){return t.core.getMany({keys:e,trans:r}).then(function(i){return i.map(function(s){return t.hook.reading.fire(s)})})})},n.prototype.bulkAdd=function(e,t,r){var i=this,s=Array.isArray(t)?t:void 0;r=r||(s?void 0:t);var o=r?r.allKeys:void 0;return this._trans("readwrite",function(a){var l=i.schema.primKey,c=l.auto,u=l.keyPath;if(u&&s)throw new Je.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(s&&s.length!==e.length)throw new Je.InvalidArgument("Arguments objects and keys must have the same length");var h=e.length,f=u&&c?e.map(gu(u)):e;return i.core.mutate({trans:a,type:"add",keys:s,values:f,wantResults:o}).then(function(p){var d=p.numFailures,m=p.results,y=p.lastResult,w=p.failures,b=o?m:y;if(d===0)return b;throw new kl(i.name+".bulkAdd(): "+d+" of "+h+" operations failed",w)})})},n.prototype.bulkPut=function(e,t,r){var i=this,s=Array.isArray(t)?t:void 0;r=r||(s?void 0:t);var o=r?r.allKeys:void 0;return this._trans("readwrite",function(a){var l=i.schema.primKey,c=l.auto,u=l.keyPath;if(u&&s)throw new Je.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(s&&s.length!==e.length)throw new Je.InvalidArgument("Arguments objects and keys must have the same length");var h=e.length,f=u&&c?e.map(gu(u)):e;return i.core.mutate({trans:a,type:"put",keys:s,values:f,wantResults:o}).then(function(p){var d=p.numFailures,m=p.results,y=p.lastResult,w=p.failures,b=o?m:y;if(d===0)return b;throw new kl(i.name+".bulkPut(): "+d+" of "+h+" operations failed",w)})})},n.prototype.bulkDelete=function(e){var t=this,r=e.length;return this._trans("readwrite",function(i){return t.core.mutate({trans:i,type:"delete",keys:e})}).then(function(i){var s=i.numFailures,o=i.lastResult,a=i.failures;if(s===0)return o;throw new kl(t.name+".bulkDelete(): "+s+" of "+r+" operations failed",a)})},n}();function Qc(n){var e={},t=function(a,l){if(l){for(var c=arguments.length,u=new Array(c-1);--c;)u[c-1]=arguments[c];return e[a].subscribe.apply(null,u),n}else if(typeof a=="string")return e[a]};t.addEventType=s;for(var r=1,i=arguments.length;r<i;++r)s(arguments[r]);return t;function s(a,l,c){if(typeof a=="object")return o(a);l||(l=DM),c||(c=kt);var u={subscribers:[],fire:c,subscribe:function(h){u.subscribers.indexOf(h)===-1&&(u.subscribers.push(h),u.fire=l(u.fire,h))},unsubscribe:function(h){u.subscribers=u.subscribers.filter(function(f){return f!==h}),u.fire=u.subscribers.reduce(l,c)}};return e[a]=t[a]=u,u}function o(a){Gt(a).forEach(function(l){var c=a[l];if(Ln(c))s(l,a[l][0],a[l][1]);else if(c==="asap")var u=s(l,Pc,function(){for(var f=arguments.length,p=new Array(f);f--;)p[f]=arguments[f];u.subscribers.forEach(function(d){vk(function(){d.apply(null,p)})})});else throw new Je.InvalidArgument("Invalid event config")})}}function Nc(n,e){return Ia(e).from({prototype:n}),e}function YM(n){return Nc(GM.prototype,function(t,r,i){this.db=n,this._tx=i,this.name=t,this.schema=r,this.hook=n._allTables[t]?n._allTables[t].hook:Qc(null,{creating:[QM,kt],reading:[IM,Pc],updating:[LM,kt],deleting:[NM,kt]})})}function No(n,e){return!(n.filter||n.algorithm||n.or)&&(e?n.justLimit:!n.replayFilter)}function Rp(n,e){n.filter=ao(n.filter,e)}function Ip(n,e,t){var r=n.replayFilter;n.replayFilter=r?function(){return ao(r(),e())}:e,n.justLimit=t&&!r}function KM(n,e){n.isMatch=ao(n.isMatch,e)}function ih(n,e){if(n.isPrimKey)return e.primaryKey;var t=e.getIndexByKeyPath(n.index);if(!t)throw new Je.Schema("KeyPath "+n.index+" on object store "+e.name+" is not indexed");return t}function aw(n,e,t){var r=ih(n,e.schema);return e.openCursor({trans:t,values:!n.keysOnly,reverse:n.dir==="prev",unique:!!n.unique,query:{index:r,range:n.range}})}function Ou(n,e,t,r){var i=n.replayFilter?ao(n.filter,n.replayFilter()):n.filter;if(n.or){var s={},o=function(a,l,c){if(!i||i(l,c,function(f){return l.stop(f)},function(f){return l.fail(f)})){var u=l.primaryKey,h=""+u;h==="[object ArrayBuffer]"&&(h=""+new Uint8Array(u)),ur(s,h)||(s[h]=!0,e(a,l,c))}};return Promise.all([n.or._iterate(o,t),lw(aw(n,r,t),n.algorithm,o,!n.keysOnly&&n.valueMapper)])}else return lw(aw(n,r,t),ao(n.algorithm,i),e,!n.keysOnly&&n.valueMapper)}function lw(n,e,t,r){var i=r?function(o,a,l){return t(r(o),a,l)}:t,s=Dt(i);return n.then(function(o){if(o)return o.start(function(){var a=function(){return o.continue()};(!e||e(o,function(l){return a=l},function(l){o.stop(l),a=kt},function(l){o.fail(l),a=kt}))&&s(o.value,o,function(l){return a=l}),a()})})}function Un(n,e){try{var t=cw(n),r=cw(e);if(t!==r)return t==="Array"?1:r==="Array"?-1:t==="binary"?1:r==="binary"?-1:t==="string"?1:r==="string"?-1:t==="Date"?1:r!=="Date"?NaN:-1;switch(t){case"number":case"Date":case"string":return n>e?1:n<e?-1:0;case"binary":return e$(uw(n),uw(e));case"Array":return JM(n,e)}}catch{}return NaN}function JM(n,e){for(var t=n.length,r=e.length,i=t<r?t:r,s=0;s<i;++s){var o=Un(n[s],e[s]);if(o!==0)return o}return t===r?0:t<r?-1:1}function e$(n,e){for(var t=n.length,r=e.length,i=t<r?t:r,s=0;s<i;++s)if(n[s]!==e[s])return n[s]<e[s]?-1:1;return t===r?0:t<r?-1:1}function cw(n){var e=typeof n;if(e!=="object")return e;if(ArrayBuffer.isView(n))return"binary";var t=Vm(n);return t==="ArrayBuffer"?"binary":t}function uw(n){return n instanceof Uint8Array?n:ArrayBuffer.isView(n)?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):new Uint8Array(n)}var t$=function(){function n(){}return n.prototype._read=function(e,t){var r=this._ctx;return r.error?r.table._trans(null,sn.bind(null,r.error)):r.table._trans("readonly",e).then(t)},n.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,sn.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},n.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=ao(t.algorithm,e)},n.prototype._iterate=function(e,t){return Ou(this._ctx,e,t,this._ctx.table.core)},n.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return e&&zn(r,e),t._ctx=r,t},n.prototype.raw=function(){return this._ctx.valueMapper=null,this},n.prototype.each=function(e){var t=this._ctx;return this._read(function(r){return Ou(t,e,r,t.table.core)})},n.prototype.count=function(e){var t=this;return this._read(function(r){var i=t._ctx,s=i.table.core;if(No(i,!0))return s.count({trans:r,query:{index:ih(i,s.schema),range:i.range}}).then(function(a){return Math.min(a,i.limit)});var o=0;return Ou(i,function(){return++o,!1},r,s).then(function(){return o})}).then(e)},n.prototype.sortBy=function(e,t){var r=e.split(".").reverse(),i=r[0],s=r.length-1;function o(c,u){return u?o(c[r[u]],u-1):c[i]}var a=this._ctx.dir==="next"?1:-1;function l(c,u){var h=o(c,s),f=o(u,s);return h<f?-a:h>f?a:0}return this.toArray(function(c){return c.sort(l)}).then(t)},n.prototype.toArray=function(e){var t=this;return this._read(function(r){var i=t._ctx;if(i.dir==="next"&&No(i,!0)&&i.limit>0){var s=i.valueMapper,o=ih(i,i.table.core.schema);return i.table.core.query({trans:r,limit:i.limit,values:!0,query:{index:o,range:i.range}}).then(function(l){var c=l.result;return s?c.map(s):c})}else{var a=[];return Ou(i,function(l){return a.push(l)},r,i.table.core).then(function(){return a})}},e)},n.prototype.offset=function(e){var t=this._ctx;return e<=0?this:(t.offset+=e,No(t)?Ip(t,function(){var r=e;return function(i,s){return r===0?!0:r===1?(--r,!1):(s(function(){i.advance(r),r=0}),!1)}}):Ip(t,function(){var r=e;return function(){return--r<0}}),this)},n.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),Ip(this._ctx,function(){var t=e;return function(r,i,s){return--t<=0&&i(s),t>=0}},!0),this},n.prototype.until=function(e,t){return Rp(this._ctx,function(r,i,s){return e(r.value)?(i(s),t):!0}),this},n.prototype.first=function(e){return this.limit(1).toArray(function(t){return t[0]}).then(e)},n.prototype.last=function(e){return this.reverse().first(e)},n.prototype.filter=function(e){return Rp(this._ctx,function(t){return e(t.value)}),KM(this._ctx,e),this},n.prototype.and=function(e){return this.filter(e)},n.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},n.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},n.prototype.desc=function(){return this.reverse()},n.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(r,i){e(i.key,i)})},n.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},n.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(r,i){e(i.primaryKey,i)})},n.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var r=[];return this.each(function(i,s){r.push(s.key)}).then(function(){return r}).then(e)},n.prototype.primaryKeys=function(e){var t=this._ctx;if(t.dir==="next"&&No(t,!0)&&t.limit>0)return this._read(function(i){var s=ih(t,t.table.core.schema);return t.table.core.query({trans:i,values:!1,limit:t.limit,query:{index:s,range:t.range}})}).then(function(i){var s=i.result;return s}).then(e);t.keysOnly=!t.isMatch;var r=[];return this.each(function(i,s){r.push(s.primaryKey)}).then(function(){return r}).then(e)},n.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},n.prototype.firstKey=function(e){return this.limit(1).keys(function(t){return t[0]}).then(e)},n.prototype.lastKey=function(e){return this.reverse().firstKey(e)},n.prototype.distinct=function(){var e=this._ctx,t=e.index&&e.table.schema.idxByName[e.index];if(!t||!t.multi)return this;var r={};return Rp(this._ctx,function(i){var s=i.primaryKey.toString(),o=ur(r,s);return r[s]=!0,!o}),this},n.prototype.modify=function(e){var t=this,r=this._ctx;return this._write(function(i){var s;if(typeof e=="function")s=e;else{var o=Gt(e),a=o.length;s=function(w){for(var b=!1,O=0;O<a;++O){var v=o[O],_=e[v];Di(w,v)!==_&&(Fr(w,v,_),b=!0)}return b}}var l=r.table.core,c=l.schema.primaryKey,u=c.outbound,h=c.extractKey,f=t.db._options.modifyChunkSize||200,p=[],d=0,m=[],y=function(w,b){var O=b.failures,v=b.numFailures;d+=w-v;for(var _=0,S=Gt(O);_<S.length;_++){var R=S[_];p.push(O[R])}};return t.clone().primaryKeys().then(function(w){var b=function(O){var v=Math.min(f,w.length-O);return l.getMany({trans:i,keys:w.slice(O,O+v),cache:"immutable"}).then(function(_){for(var S=[],R=[],N=u?[]:null,T=[],C=0;C<v;++C){var Q=_[C],I={value:Ac(Q),primKey:w[O+C]};s.call(I,I.value,I)!==!1&&(I.value==null?T.push(w[O+C]):!u&&Un(h(Q),h(I.value))!==0?(T.push(w[O+C]),S.push(I.value)):(R.push(I.value),u&&N.push(w[O+C])))}var B=No(r)&&r.limit===1/0&&(typeof e!="function"||e===Qp)&&{index:r.index,range:r.range};return Promise.resolve(S.length>0&&l.mutate({trans:i,type:"add",values:S}).then(function(k){for(var j in k.failures)T.splice(parseInt(j),1);y(S.length,k)})).then(function(){return(R.length>0||B&&typeof e=="object")&&l.mutate({trans:i,type:"put",keys:N,values:R,criteria:B,changeSpec:typeof e!="function"&&e}).then(function(k){return y(R.length,k)})}).then(function(){return(T.length>0||B&&e===Qp)&&l.mutate({trans:i,type:"delete",keys:T,criteria:B}).then(function(k){return y(T.length,k)})}).then(function(){return w.length>O+v&&b(O+f)})})};return b(0).then(function(){if(p.length>0)throw new Th("Error modifying one or more objects",p,d,m);return w.length})})})},n.prototype.delete=function(){var e=this._ctx,t=e.range;return No(e)&&(e.isPrimKey&&!ZM||t.type===3)?this._write(function(r){var i=e.table.core.schema.primaryKey,s=t;return e.table.core.count({trans:r,query:{index:i,range:s}}).then(function(o){return e.table.core.mutate({trans:r,type:"deleteRange",range:s}).then(function(a){var l=a.failures;a.lastResult,a.results;var c=a.numFailures;if(c)throw new Th("Could not delete some values",Object.keys(l).map(function(u){return l[u]}),o-c);return o-c})})}):this.modify(Qp)},n}(),Qp=function(n,e){return e.value=null};function n$(n){return Nc(t$.prototype,function(t,r){this.db=n;var i=Fk,s=null;if(r)try{i=r()}catch(c){s=c}var o=t._ctx,a=o.table,l=a.hook.reading.fire;this._ctx={table:a,index:o.index,isPrimKey:!o.index||a.schema.primKey.keyPath&&o.index===a.schema.primKey.name,range:i,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:s,or:o.or,valueMapper:l!==Pc?l:null}})}function r$(n,e){return n<e?-1:n===e?0:1}function i$(n,e){return n>e?-1:n===e?0:1}function ir(n,e,t){var r=n instanceof Vk?new n.Collection(n):n;return r._ctx.error=t?new t(e):new TypeError(e),r}function Lo(n){return new n.Collection(n,function(){return Uk("")}).limit(0)}function s$(n){return n==="next"?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()}}function o$(n){return n==="next"?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()}}function a$(n,e,t,r,i,s){for(var o=Math.min(n.length,r.length),a=-1,l=0;l<o;++l){var c=e[l];if(c!==r[l])return i(n[l],t[l])<0?n.substr(0,l)+t[l]+t.substr(l+1):i(n[l],r[l])<0?n.substr(0,l)+r[l]+t.substr(l+1):a>=0?n.substr(0,a)+e[a]+t.substr(a+1):null;i(n[l],c)<0&&(a=l)}return o<r.length&&s==="next"?n+t.substr(n.length):o<n.length&&s==="prev"?n.substr(0,t.length):a<0?null:n.substr(0,a)+r[a]+t.substr(a+1)}function yu(n,e,t,r){var i,s,o,a,l,c,u,h=t.length;if(!t.every(function(m){return typeof m=="string"}))return ir(n,$k);function f(m){i=s$(m),s=o$(m),o=m==="next"?r$:i$;var y=t.map(function(w){return{lower:s(w),upper:i(w)}}).sort(function(w,b){return o(w.lower,b.lower)});a=y.map(function(w){return w.upper}),l=y.map(function(w){return w.lower}),c=m,u=m==="next"?"":r}f("next");var p=new n.Collection(n,function(){return Ji(a[0],l[h-1]+r)});p._ondirectionchange=function(m){f(m)};var d=0;return p._addAlgorithm(function(m,y,w){var b=m.key;if(typeof b!="string")return!1;var O=s(b);if(e(O,l,d))return!0;for(var v=null,_=d;_<h;++_){var S=a$(b,O,a[_],l[_],o,c);S===null&&v===null?d=_+1:(v===null||o(v,S)>0)&&(v=S)}return y(v!==null?function(){m.continue(v+u)}:w),!1}),p}function Ji(n,e,t,r){return{type:2,lower:n,upper:e,lowerOpen:t,upperOpen:r}}function Uk(n){return{type:1,lower:n,upper:n}}var Vk=function(){function n(){}return Object.defineProperty(n.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),n.prototype.between=function(e,t,r,i){r=r!==!1,i=i===!0;try{return this._cmp(e,t)>0||this._cmp(e,t)===0&&(r||i)&&!(r&&i)?Lo(this):new this.Collection(this,function(){return Ji(e,t,!r,!i)})}catch{return ir(this,ki)}},n.prototype.equals=function(e){return e==null?ir(this,ki):new this.Collection(this,function(){return Uk(e)})},n.prototype.above=function(e){return e==null?ir(this,ki):new this.Collection(this,function(){return Ji(e,void 0,!0)})},n.prototype.aboveOrEqual=function(e){return e==null?ir(this,ki):new this.Collection(this,function(){return Ji(e,void 0,!1)})},n.prototype.below=function(e){return e==null?ir(this,ki):new this.Collection(this,function(){return Ji(void 0,e,!1,!0)})},n.prototype.belowOrEqual=function(e){return e==null?ir(this,ki):new this.Collection(this,function(){return Ji(void 0,e)})},n.prototype.startsWith=function(e){return typeof e!="string"?ir(this,$k):this.between(e,e+Gs,!0,!0)},n.prototype.startsWithIgnoreCase=function(e){return e===""?this.startsWith(e):yu(this,function(t,r){return t.indexOf(r[0])===0},[e],Gs)},n.prototype.equalsIgnoreCase=function(e){return yu(this,function(t,r){return t===r[0]},[e],"")},n.prototype.anyOfIgnoreCase=function(){var e=Pi.apply(Bo,arguments);return e.length===0?Lo(this):yu(this,function(t,r){return r.indexOf(t)!==-1},e,"")},n.prototype.startsWithAnyOfIgnoreCase=function(){var e=Pi.apply(Bo,arguments);return e.length===0?Lo(this):yu(this,function(t,r){return r.some(function(i){return t.indexOf(i)===0})},e,Gs)},n.prototype.anyOf=function(){var e=this,t=Pi.apply(Bo,arguments),r=this._cmp;try{t.sort(r)}catch{return ir(this,ki)}if(t.length===0)return Lo(this);var i=new this.Collection(this,function(){return Ji(t[0],t[t.length-1])});i._ondirectionchange=function(o){r=o==="next"?e._ascending:e._descending,t.sort(r)};var s=0;return i._addAlgorithm(function(o,a,l){for(var c=o.key;r(c,t[s])>0;)if(++s,s===t.length)return a(l),!1;return r(c,t[s])===0?!0:(a(function(){o.continue(t[s])}),!1)}),i},n.prototype.notEqual=function(e){return this.inAnyRange([[eg,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},n.prototype.noneOf=function(){var e=Pi.apply(Bo,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return ir(this,ki)}var t=e.reduce(function(r,i){return r?r.concat([[r[r.length-1][1],i]]):[[eg,i]]},null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},n.prototype.inAnyRange=function(e,t){var r=this,i=this._cmp,s=this._ascending,o=this._descending,a=this._min,l=this._max;if(e.length===0)return Lo(this);if(!e.every(function(_){return _[0]!==void 0&&_[1]!==void 0&&s(_[0],_[1])<=0}))return ir(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Je.InvalidArgument);var c=!t||t.includeLowers!==!1,u=t&&t.includeUppers===!0;function h(_,S){for(var R=0,N=_.length;R<N;++R){var T=_[R];if(i(S[0],T[1])<0&&i(S[1],T[0])>0){T[0]=a(T[0],S[0]),T[1]=l(T[1],S[1]);break}}return R===N&&_.push(S),_}var f=s;function p(_,S){return f(_[0],S[0])}var d;try{d=e.reduce(h,[]),d.sort(p)}catch{return ir(this,ki)}var m=0,y=u?function(_){return s(_,d[m][1])>0}:function(_){return s(_,d[m][1])>=0},w=c?function(_){return o(_,d[m][0])>0}:function(_){return o(_,d[m][0])>=0};function b(_){return!y(_)&&!w(_)}var O=y,v=new this.Collection(this,function(){return Ji(d[0][0],d[d.length-1][1],!c,!u)});return v._ondirectionchange=function(_){_==="next"?(O=y,f=s):(O=w,f=o),d.sort(p)},v._addAlgorithm(function(_,S,R){for(var N=_.key;O(N);)if(++m,m===d.length)return S(R),!1;return b(N)?!0:(r._cmp(N,d[m][1])===0||r._cmp(N,d[m][0])===0||S(function(){f===s?_.continue(d[m][0]):_.continue(d[m][1])}),!1)}),v},n.prototype.startsWithAnyOf=function(){var e=Pi.apply(Bo,arguments);return e.every(function(t){return typeof t=="string"})?e.length===0?Lo(this):this.inAnyRange(e.map(function(t){return[t,t+Gs]})):ir(this,"startsWithAnyOf() only works with strings")},n}();function l$(n){return Nc(Vk.prototype,function(t,r,i){this.db=n,this._ctx={table:t,index:r===":id"?null:r,or:i};var s=n._deps.indexedDB;if(!s)throw new Je.MissingAPI;this._cmp=this._ascending=s.cmp.bind(s),this._descending=function(o,a){return s.cmp(a,o)},this._max=function(o,a){return s.cmp(o,a)>0?o:a},this._min=function(o,a){return s.cmp(o,a)<0?o:a},this._IDBKeyRange=n._deps.IDBKeyRange})}function ei(n){return Dt(function(e){return Wl(e),n(e.target.error),!1})}function Wl(n){n.stopPropagation&&n.stopPropagation(),n.preventDefault&&n.preventDefault()}var jl="storagemutated",os="x-storagemutated-1",_s=Qc(null,jl),c$=function(){function n(){}return n.prototype._lock=function(){return yl(!qe.global),++this._reculock,this._reculock===1&&!qe.global&&(qe.lockOwnerFor=this),this},n.prototype._unlock=function(){if(yl(!qe.global),--this._reculock===0)for(qe.global||(qe.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{La(e[1],e[0])}catch{}}return this},n.prototype._locked=function(){return this._reculock&&qe.lockOwnerFor!==this},n.prototype.create=function(e){var t=this;if(!this.mode)return this;var r=this.db.idbdb,i=this.db._state.dbOpenError;if(yl(!this.idbtrans),!e&&!r)switch(i&&i.name){case"DatabaseClosedError":throw new Je.DatabaseClosed(i);case"MissingAPIError":throw new Je.MissingAPI(i.message,i);default:throw new Je.OpenFailed(i)}if(!this.active)throw new Je.TransactionInactive;return yl(this._completion._state===null),e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):r.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),e.onerror=Dt(function(s){Wl(s),t._reject(e.error)}),e.onabort=Dt(function(s){Wl(s),t.active&&t._reject(new Je.Abort(e.error)),t.active=!1,t.on("abort").fire(s)}),e.oncomplete=Dt(function(){t.active=!1,t._resolve(),"mutatedParts"in e&&_s.storagemutated.fire(e.mutatedParts)}),this},n.prototype._promise=function(e,t,r){var i=this;if(e==="readwrite"&&this.mode!=="readwrite")return sn(new Je.ReadOnly("Transaction is readonly"));if(!this.active)return sn(new Je.TransactionInactive);if(this._locked())return new Le(function(o,a){i._blockedFuncs.push([function(){i._promise(e,t,r).then(o,a)},qe])});if(r)return vs(function(){var o=new Le(function(a,l){i._lock();var c=t(a,l,i);c&&c.then&&c.then(a,l)});return o.finally(function(){return i._unlock()}),o._lib=!0,o});var s=new Le(function(o,a){var l=t(o,a,i);l&&l.then&&l.then(o,a)});return s._lib=!0,s},n.prototype._root=function(){return this.parent?this.parent._root():this},n.prototype.waitFor=function(e){var t=this._root(),r=Le.resolve(e);if(t._waitingFor)t._waitingFor=t._waitingFor.then(function(){return r});else{t._waitingFor=r,t._waitingQueue=[];var i=t.idbtrans.objectStore(t.storeNames[0]);(function o(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(i.get(-1/0).onsuccess=o)})()}var s=t._waitingFor;return new Le(function(o,a){r.then(function(l){return t._waitingQueue.push(Dt(o.bind(null,l)))},function(l){return t._waitingQueue.push(Dt(a.bind(null,l)))}).finally(function(){t._waitingFor===s&&(t._waitingFor=null)})})},n.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Je.Abort))},n.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(ur(t,e))return t[e];var r=this.schema[e];if(!r)throw new Je.NotFound("Table "+e+" not part of transaction");var i=new this.db.Table(e,r,this);return i.core=this.db.core.table(e),t[e]=i,i},n}();function u$(n){return Nc(c$.prototype,function(t,r,i,s,o){var a=this;this.db=n,this.mode=t,this.storeNames=r,this.schema=i,this.chromeTransactionDurability=s,this.idbtrans=null,this.on=Qc(this,"complete","error","abort"),this.parent=o||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Le(function(l,c){a._resolve=l,a._reject=c}),this._completion.then(function(){a.active=!1,a.on.complete.fire()},function(l){var c=a.active;return a.active=!1,a.on.error.fire(l),a.parent?a.parent._reject(l):c&&a.idbtrans&&a.idbtrans.abort(),sn(l)})})}function tg(n,e,t,r,i,s,o){return{name:n,keyPath:e,unique:t,multi:r,auto:i,compound:s,src:(t&&!o?"&":"")+(r?"*":"")+(i?"++":"")+Wk(e)}}function Wk(n){return typeof n=="string"?n:n?"["+[].join.call(n,"+")+"]":""}function jk(n,e,t){return{name:n,primKey:e,indexes:t,mappedClass:null,idxByName:wk(t,function(r){return[r.name,r]})}}function h$(n){return n.length===1?n[0]:n}var ql=function(n){try{return n.only([[]]),ql=function(){return[[]]},[[]]}catch{return ql=function(){return Gs},Gs}};function ng(n){return n==null?function(){}:typeof n=="string"?f$(n):function(e){return Di(e,n)}}function f$(n){var e=n.split(".");return e.length===1?function(t){return t[n]}:function(t){return Di(t,n)}}function hw(n){return[].slice.call(n)}var d$=0;function El(n){return n==null?":id":typeof n=="string"?n:"["+n.join("+")+"]"}function p$(n,e,t){function r(h,f){var p=hw(h.objectStoreNames);return{schema:{name:h.name,tables:p.map(function(d){return f.objectStore(d)}).map(function(d){var m=d.keyPath,y=d.autoIncrement,w=Ln(m),b=m==null,O={},v={name:d.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:b,compound:w,keyPath:m,autoIncrement:y,unique:!0,extractKey:ng(m)},indexes:hw(d.indexNames).map(function(_){return d.index(_)}).map(function(_){var S=_.name,R=_.unique,N=_.multiEntry,T=_.keyPath,C=Ln(T),Q={name:S,compound:C,keyPath:T,unique:R,multiEntry:N,extractKey:ng(T)};return O[El(T)]=Q,Q}),getIndexByKeyPath:function(_){return O[El(_)]}};return O[":id"]=v.primaryKey,m!=null&&(O[El(m)]=v.primaryKey),v})},hasGetAll:p.length>0&&"getAll"in f.objectStore(p[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function i(h){if(h.type===3)return null;if(h.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var f=h.lower,p=h.upper,d=h.lowerOpen,m=h.upperOpen,y=f===void 0?p===void 0?null:e.upperBound(p,!!m):p===void 0?e.lowerBound(f,!!d):e.bound(f,p,!!d,!!m);return y}function s(h){var f=h.name;function p(y){var w=y.trans,b=y.type,O=y.keys,v=y.values,_=y.range;return new Promise(function(S,R){S=Dt(S);var N=w.objectStore(f),T=N.keyPath==null,C=b==="put"||b==="add";if(!C&&b!=="delete"&&b!=="deleteRange")throw new Error("Invalid operation type: "+b);var Q=(O||v||{length:1}).length;if(O&&v&&O.length!==v.length)throw new Error("Given keys array must have same length as given values array.");if(Q===0)return S({numFailures:0,failures:{},results:[],lastResult:void 0});var I,B=[],k=[],j=0,ne=function(D){++j,Wl(D)};if(b==="deleteRange"){if(_.type===4)return S({numFailures:j,failures:k,results:[],lastResult:void 0});_.type===3?B.push(I=N.clear()):B.push(I=N.delete(i(_)))}else{var Z=C?T?[v,O]:[v,null]:[O,null],le=Z[0],oe=Z[1];if(C)for(var pe=0;pe<Q;++pe)B.push(I=oe&&oe[pe]!==void 0?N[b](le[pe],oe[pe]):N[b](le[pe])),I.onerror=ne;else for(var pe=0;pe<Q;++pe)B.push(I=N[b](le[pe])),I.onerror=ne}var P=function(D){var H=D.target.result;B.forEach(function(F,se){return F.error!=null&&(k[se]=F.error)}),S({numFailures:j,failures:k,results:b==="delete"?O:B.map(function(F){return F.result}),lastResult:H})};I.onerror=function(D){ne(D),P(D)},I.onsuccess=P})}function d(y){var w=y.trans,b=y.values,O=y.query,v=y.reverse,_=y.unique;return new Promise(function(S,R){S=Dt(S);var N=O.index,T=O.range,C=w.objectStore(f),Q=N.isPrimaryKey?C:C.index(N.name),I=v?_?"prevunique":"prev":_?"nextunique":"next",B=b||!("openKeyCursor"in Q)?Q.openCursor(i(T),I):Q.openKeyCursor(i(T),I);B.onerror=ei(R),B.onsuccess=Dt(function(k){var j=B.result;if(!j){S(null);return}j.___id=++d$,j.done=!1;var ne=j.continue.bind(j),Z=j.continuePrimaryKey;Z&&(Z=Z.bind(j));var le=j.advance.bind(j),oe=function(){throw new Error("Cursor not started")},pe=function(){throw new Error("Cursor not stopped")};j.trans=w,j.stop=j.continue=j.continuePrimaryKey=j.advance=oe,j.fail=Dt(R),j.next=function(){var P=this,D=1;return this.start(function(){return D--?P.continue():P.stop()}).then(function(){return P})},j.start=function(P){var D=new Promise(function(F,se){F=Dt(F),B.onerror=ei(se),j.fail=se,j.stop=function(W){j.stop=j.continue=j.continuePrimaryKey=j.advance=pe,F(W)}}),H=function(){if(B.result)try{P()}catch(F){j.fail(F)}else j.done=!0,j.start=function(){throw new Error("Cursor behind last entry")},j.stop()};return B.onsuccess=Dt(function(F){B.onsuccess=H,H()}),j.continue=ne,j.continuePrimaryKey=Z,j.advance=le,H(),D},S(j)},R)})}function m(y){return function(w){return new Promise(function(b,O){b=Dt(b);var v=w.trans,_=w.values,S=w.limit,R=w.query,N=S===1/0?void 0:S,T=R.index,C=R.range,Q=v.objectStore(f),I=T.isPrimaryKey?Q:Q.index(T.name),B=i(C);if(S===0)return b({result:[]});if(y){var k=_?I.getAll(B,N):I.getAllKeys(B,N);k.onsuccess=function(le){return b({result:le.target.result})},k.onerror=ei(O)}else{var j=0,ne=_||!("openKeyCursor"in I)?I.openCursor(B):I.openKeyCursor(B),Z=[];ne.onsuccess=function(le){var oe=ne.result;if(!oe)return b({result:Z});if(Z.push(_?oe.value:oe.primaryKey),++j===S)return b({result:Z});oe.continue()},ne.onerror=ei(O)}})}}return{name:f,schema:h,mutate:p,getMany:function(y){var w=y.trans,b=y.keys;return new Promise(function(O,v){O=Dt(O);for(var _=w.objectStore(f),S=b.length,R=new Array(S),N=0,T=0,C,Q=function(j){var ne=j.target;(R[ne._pos]=ne.result)!=null,++T===N&&O(R)},I=ei(v),B=0;B<S;++B){var k=b[B];k!=null&&(C=_.get(b[B]),C._pos=B,C.onsuccess=Q,C.onerror=I,++N)}N===0&&O(R)})},get:function(y){var w=y.trans,b=y.key;return new Promise(function(O,v){O=Dt(O);var _=w.objectStore(f),S=_.get(b);S.onsuccess=function(R){return O(R.target.result)},S.onerror=ei(v)})},query:m(l),openCursor:d,count:function(y){var w=y.query,b=y.trans,O=w.index,v=w.range;return new Promise(function(_,S){var R=b.objectStore(f),N=O.isPrimaryKey?R:R.index(O.name),T=i(v),C=T?N.count(T):N.count();C.onsuccess=Dt(function(Q){return _(Q.target.result)}),C.onerror=ei(S)})}}}var o=r(n,t),a=o.schema,l=o.hasGetAll,c=a.tables.map(function(h){return s(h)}),u={};return c.forEach(function(h){return u[h.name]=h}),{stack:"dbcore",transaction:n.transaction.bind(n),table:function(h){var f=u[h];if(!f)throw new Error("Table '"+h+"' not found");return u[h]},MIN_KEY:-1/0,MAX_KEY:ql(e),schema:a}}function m$(n,e){return e.reduce(function(t,r){var i=r.create;return ht(ht({},t),i(t))},n)}function g$(n,e,t,r){var i=t.IDBKeyRange;t.indexedDB;var s=m$(p$(e,i,r),n.dbcore);return{dbcore:s}}function ny(n,e){var t=n._novip,r=e.db,i=g$(t._middlewares,r,t._deps,e);t.core=i.dbcore,t.tables.forEach(function(s){var o=s.name;t.core.schema.tables.some(function(a){return a.name===o})&&(s.core=t.core.table(o),t[o]instanceof t.Table&&(t[o].core=s.core))})}function Ih(n,e,t,r){var i=n._novip;t.forEach(function(s){var o=r[s];e.forEach(function(a){var l=zO(a,s);(!l||"value"in l&&l.value===void 0)&&(a===i.Transaction.prototype||a instanceof i.Transaction?Wi(a,s,{get:function(){return this.table(s)},set:function(c){yk(this,s,{value:c,writable:!0,configurable:!0,enumerable:!0})}}):a[s]=new i.Table(s,o))})})}function rg(n,e){var t=n._novip;e.forEach(function(r){for(var i in r)r[i]instanceof t.Table&&delete r[i]})}function O$(n,e){return n._cfg.version-e._cfg.version}function y$(n,e,t,r){var i=n._dbSchema,s=n._createTransaction("readwrite",n._storeNames,i);s.create(t),s._completion.catch(r);var o=s._reject.bind(s),a=qe.transless||qe;vs(function(){qe.trans=s,qe.transless=a,e===0?(Gt(i).forEach(function(l){ry(t,l,i[l].primKey,i[l].indexes)}),ny(n,t),Le.follow(function(){return n.on.populate.fire(s)}).catch(o)):b$(n,e,s,t).catch(o)})}function b$(n,e,t,r){var i=n._novip,s=[],o=i._versions,a=i._dbSchema=iy(i,i.idbdb,r),l=!1,c=o.filter(function(h){return h._cfg.version>=e});c.forEach(function(h){s.push(function(){var f=a,p=h._cfg.dbschema;sg(i,f,r),sg(i,p,r),a=i._dbSchema=p;var d=qk(f,p);d.add.forEach(function(v){ry(r,v[0],v[1].primKey,v[1].indexes)}),d.change.forEach(function(v){if(v.recreate)throw new Je.Upgrade("Not yet support for changing primary key");var _=r.objectStore(v.name);v.add.forEach(function(S){return ig(_,S)}),v.change.forEach(function(S){_.deleteIndex(S.name),ig(_,S)}),v.del.forEach(function(S){return _.deleteIndex(S)})});var m=h._cfg.contentUpgrade;if(m&&h._cfg.version>e){ny(i,r),t._memoizedTables={},l=!0;var y=_k(p);d.del.forEach(function(v){y[v]=f[v]}),rg(i,[i.Transaction.prototype]),Ih(i,[i.Transaction.prototype],Gt(y),y),t.schema=y;var w=HO(m);w&&Na();var b,O=Le.follow(function(){if(b=m(t),b&&w){var v=ji.bind(null,null);b.then(v,v)}});return b&&typeof b.then=="function"?Le.resolve(b):O.then(function(){return b})}}),s.push(function(f){if(!l||!HM){var p=h._cfg.dbschema;w$(p,f)}rg(i,[i.Transaction.prototype]),Ih(i,[i.Transaction.prototype],i._storeNames,i._dbSchema),t.schema=i._dbSchema})});function u(){return s.length?Le.resolve(s.shift()(t.idbtrans)).then(u):Le.resolve()}return u().then(function(){v$(a,r)})}function qk(n,e){var t={del:[],add:[],change:[]},r;for(r in n)e[r]||t.del.push(r);for(r in e){var i=n[r],s=e[r];if(!i)t.add.push([r,s]);else{var o={name:r,def:s,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(s.primKey.keyPath||"")||i.primKey.auto!==s.primKey.auto&&!Xf)o.recreate=!0,t.change.push(o);else{var a=i.idxByName,l=s.idxByName,c=void 0;for(c in a)l[c]||o.del.push(c);for(c in l){var u=a[c],h=l[c];u?u.src!==h.src&&o.change.push(h):o.add.push(h)}(o.del.length>0||o.add.length>0||o.change.length>0)&&t.change.push(o)}}}return t}function ry(n,e,t,r){var i=n.db.createObjectStore(e,t.keyPath?{keyPath:t.keyPath,autoIncrement:t.auto}:{autoIncrement:t.auto});return r.forEach(function(s){return ig(i,s)}),i}function v$(n,e){Gt(n).forEach(function(t){e.db.objectStoreNames.contains(t)||ry(e,t,n[t].primKey,n[t].indexes)})}function w$(n,e){[].slice.call(e.db.objectStoreNames).forEach(function(t){return n[t]==null&&e.db.deleteObjectStore(t)})}function ig(n,e){n.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function iy(n,e,t){var r={},i=jf(e.objectStoreNames,0);return i.forEach(function(s){for(var o=t.objectStore(s),a=o.keyPath,l=tg(Wk(a),a||"",!1,!1,!!o.autoIncrement,a&&typeof a!="string",!0),c=[],u=0;u<o.indexNames.length;++u){var h=o.index(o.indexNames[u]);a=h.keyPath;var f=tg(h.name,a,!!h.unique,!!h.multiEntry,!1,a&&typeof a!="string",!1);c.push(f)}r[s]=jk(s,l,c)}),r}function _$(n,e,t){var r=n._novip;r.verno=e.version/10;var i=r._dbSchema=iy(r,e,t);r._storeNames=jf(e.objectStoreNames,0),Ih(r,[r._allTables],Gt(i),i)}function x$(n,e){var t=iy(n,n.idbdb,e),r=qk(t,n._dbSchema);return!(r.add.length||r.change.some(function(i){return i.add.length||i.change.length}))}function sg(n,e,t){for(var r=n._novip,i=t.db.objectStoreNames,s=0;s<i.length;++s){var o=i[s],a=t.objectStore(o);r._hasGetAll="getAll"in a;for(var l=0;l<a.indexNames.length;++l){var c=a.indexNames[l],u=a.index(c).keyPath,h=typeof u=="string"?u:"["+jf(u).join("+")+"]";if(e[o]){var f=e[o].idxByName[h];f&&(f.name=c,delete e[o].idxByName[h],e[o].idxByName[c]=f)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&Qt.WorkerGlobalScope&&Qt instanceof Qt.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(r._hasGetAll=!1)}function S$(n){return n.split(",").map(function(e,t){e=e.trim();var r=e.replace(/([&*]|\+\+)/g,""),i=/^\[/.test(r)?r.match(/^\[(.*)\]$/)[1].split("+"):r;return tg(r,i||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),Ln(i),t===0)})}var k$=function(){function n(){}return n.prototype._parseStoresSpec=function(e,t){Gt(e).forEach(function(r){if(e[r]!==null){var i=S$(e[r]),s=i.shift();if(s.multi)throw new Je.Schema("Primary key cannot be multi-valued");i.forEach(function(o){if(o.auto)throw new Je.Schema("Only primary key can be marked as autoIncrement (++)");if(!o.keyPath)throw new Je.Schema("Index must have a name and cannot be an empty string")}),t[r]=jk(r,s,i)}})},n.prototype.stores=function(e){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?zn(this._cfg.storesSource,e):e;var r=t._versions,i={},s={};return r.forEach(function(o){zn(i,o._cfg.storesSource),s=o._cfg.dbschema={},o._parseStoresSpec(i,s)}),t._dbSchema=s,rg(t,[t._allTables,t,t.Transaction.prototype]),Ih(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],Gt(s),s),t._storeNames=Gt(s),this},n.prototype.upgrade=function(e){return this._cfg.contentUpgrade=YO(this._cfg.contentUpgrade||kt,e),this},n}();function T$(n){return Nc(k$.prototype,function(t){this.db=n,this._cfg={version:t,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function sy(n,e){var t=n._dbNamesDB;return t||(t=n._dbNamesDB=new cy(zf,{addons:[],indexedDB:n,IDBKeyRange:e}),t.version(1).stores({dbnames:"name"})),t.table("dbnames")}function oy(n){return n&&typeof n.databases=="function"}function E$(n){var e=n.indexedDB,t=n.IDBKeyRange;return oy(e)?Promise.resolve(e.databases()).then(function(r){return r.map(function(i){return i.name}).filter(function(i){return i!==zf})}):sy(e,t).toCollection().primaryKeys()}function C$(n,e){var t=n.indexedDB,r=n.IDBKeyRange;!oy(t)&&e!==zf&&sy(t,r).put({name:e}).catch(kt)}function A$(n,e){var t=n.indexedDB,r=n.IDBKeyRange;!oy(t)&&e!==zf&&sy(t,r).delete(e).catch(kt)}function og(n){return vs(function(){return qe.letThrough=!0,n()})}function P$(){var n=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!n||!indexedDB.databases)return Promise.resolve();var e;return new Promise(function(t){var r=function(){return indexedDB.databases().finally(t)};e=setInterval(r,100),r()}).finally(function(){return clearInterval(e)})}function R$(n){var e=n._state,t=n._deps.indexedDB;if(e.isBeingOpened||n.idbdb)return e.dbReadyPromise.then(function(){return e.dbOpenError?sn(e.dbOpenError):n});gi&&(e.openCanceller._stackHolder=Oo()),e.isBeingOpened=!0,e.dbOpenError=null,e.openComplete=!1;var r=e.openCanceller;function i(){if(e.openCanceller!==r)throw new Je.DatabaseClosed("db.open() was cancelled")}var s=e.dbReadyResolve,o=null,a=!1;return Le.race([r,(typeof navigator>"u"?Le.resolve():P$()).then(function(){return new Le(function(l,c){if(i(),!t)throw new Je.MissingAPI;var u=n.name,h=e.autoSchema?t.open(u):t.open(u,Math.round(n.verno*10));if(!h)throw new Je.MissingAPI;h.onerror=ei(c),h.onblocked=Dt(n._fireOnBlocked),h.onupgradeneeded=Dt(function(f){if(o=h.transaction,e.autoSchema&&!n._options.allowEmptyDB){h.onerror=Wl,o.abort(),h.result.close();var p=t.deleteDatabase(u);p.onsuccess=p.onerror=Dt(function(){c(new Je.NoSuchDatabase("Database "+u+" doesnt exist"))})}else{o.onerror=ei(c);var d=f.oldVersion>Math.pow(2,62)?0:f.oldVersion;a=d<1,n._novip.idbdb=h.result,y$(n,d/10,o,c)}},c),h.onsuccess=Dt(function(){o=null;var f=n._novip.idbdb=h.result,p=jf(f.objectStoreNames);if(p.length>0)try{var d=f.transaction(h$(p),"readonly");e.autoSchema?_$(n,f,d):(sg(n,n._dbSchema,d),x$(n,d)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),ny(n,d)}catch{}Tl.push(n),f.onversionchange=Dt(function(m){e.vcFired=!0,n.on("versionchange").fire(m)}),f.onclose=Dt(function(m){n.on("close").fire(m)}),a&&C$(n._deps,u),l()},c)})})]).then(function(){return i(),e.onReadyBeingFired=[],Le.resolve(og(function(){return n.on.ready.fire(n.vip)})).then(function l(){if(e.onReadyBeingFired.length>0){var c=e.onReadyBeingFired.reduce(YO,kt);return e.onReadyBeingFired=[],Le.resolve(og(function(){return c(n.vip)})).then(l)}})}).finally(function(){e.onReadyBeingFired=null,e.isBeingOpened=!1}).then(function(){return n}).catch(function(l){e.dbOpenError=l;try{o&&o.abort()}catch{}return r===e.openCanceller&&n._close(),sn(l)}).finally(function(){e.openComplete=!0,s()})}function ag(n){var e=function(o){return n.next(o)},t=function(o){return n.throw(o)},r=s(e),i=s(t);function s(o){return function(a){var l=o(a),c=l.value;return l.done?c:!c||typeof c.then!="function"?Ln(c)?Promise.all(c).then(r,i):r(c):c.then(r,i)}}return s(e)()}function I$(n,e,t){var r=arguments.length;if(r<2)throw new Je.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];t=i.pop();var s=xk(i);return[n,s,t]}function Xk(n,e,t,r,i){return Le.resolve().then(function(){var s=qe.transless||qe,o=n._createTransaction(e,t,n._dbSchema,r),a={trans:o,transless:s};if(r)o.idbtrans=r.idbtrans;else try{o.create(),n._state.PR1398_maxLoop=3}catch(h){return h.name===GO.InvalidState&&n.isOpen()&&--n._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),n._close(),n.open().then(function(){return Xk(n,e,t,null,i)})):sn(h)}var l=HO(i);l&&Na();var c,u=Le.follow(function(){if(c=i.call(o,o),c)if(l){var h=ji.bind(null,null);c.then(h,h)}else typeof c.next=="function"&&typeof c.throw=="function"&&(c=ag(c))},a);return(c&&typeof c.then=="function"?Le.resolve(c).then(function(h){return o.active?h:sn(new Je.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):u.then(function(){return c})).then(function(h){return r&&o._resolve(),o._completion.then(function(){return h})}).catch(function(h){return o._reject(h),sn(h)})})}function bu(n,e,t){for(var r=Ln(n)?n.slice():[n],i=0;i<t;++i)r.push(e);return r}function Q$(n){return ht(ht({},n),{table:function(e){var t=n.table(e),r=t.schema,i={},s=[];function o(m,y,w){var b=El(m),O=i[b]=i[b]||[],v=m==null?0:typeof m=="string"?1:m.length,_=y>0,S=ht(ht({},w),{isVirtual:_,keyTail:y,keyLength:v,extractKey:ng(m),unique:!_&&w.unique});if(O.push(S),S.isPrimaryKey||s.push(S),v>1){var R=v===2?m[0]:m.slice(0,v-1);o(R,y+1,w)}return O.sort(function(N,T){return N.keyTail-T.keyTail}),S}var a=o(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[a];for(var l=0,c=r.indexes;l<c.length;l++){var u=c[l];o(u.keyPath,0,u)}function h(m){var y=i[El(m)];return y&&y[0]}function f(m,y){return{type:m.type===1?2:m.type,lower:bu(m.lower,m.lowerOpen?n.MAX_KEY:n.MIN_KEY,y),lowerOpen:!0,upper:bu(m.upper,m.upperOpen?n.MIN_KEY:n.MAX_KEY,y),upperOpen:!0}}function p(m){var y=m.query.index;return y.isVirtual?ht(ht({},m),{query:{index:y,range:f(m.query.range,y.keyTail)}}):m}var d=ht(ht({},t),{schema:ht(ht({},r),{primaryKey:a,indexes:s,getIndexByKeyPath:h}),count:function(m){return t.count(p(m))},query:function(m){return t.query(p(m))},openCursor:function(m){var y=m.query.index,w=y.keyTail,b=y.isVirtual,O=y.keyLength;if(!b)return t.openCursor(m);function v(_){function S(N){N!=null?_.continue(bu(N,m.reverse?n.MAX_KEY:n.MIN_KEY,w)):m.unique?_.continue(_.key.slice(0,O).concat(m.reverse?n.MIN_KEY:n.MAX_KEY,w)):_.continue()}var R=Object.create(_,{continue:{value:S},continuePrimaryKey:{value:function(N,T){_.continuePrimaryKey(bu(N,n.MAX_KEY,w),T)}},primaryKey:{get:function(){return _.primaryKey}},key:{get:function(){var N=_.key;return O===1?N[0]:N.slice(0,O)}},value:{get:function(){return _.value}}});return R}return t.openCursor(p(m)).then(function(_){return _&&v(_)})}});return d}})}var N$={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:Q$};function ay(n,e,t,r){return t=t||{},r=r||"",Gt(n).forEach(function(i){if(!ur(e,i))t[r+i]=void 0;else{var s=n[i],o=e[i];if(typeof s=="object"&&typeof o=="object"&&s&&o){var a=Vm(s),l=Vm(o);a!==l?t[r+i]=e[i]:a==="Object"?ay(s,o,t,r+i+"."):s!==o&&(t[r+i]=e[i])}else s!==o&&(t[r+i]=e[i])}}),Gt(e).forEach(function(i){ur(n,i)||(t[r+i]=e[i])}),t}function L$(n,e){return e.type==="delete"?e.keys:e.keys||e.values.map(n.extractKey)}var D$={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(n){return ht(ht({},n),{table:function(e){var t=n.table(e),r=t.schema.primaryKey,i=ht(ht({},t),{mutate:function(s){var o=qe.trans,a=o.table(e).hook,l=a.deleting,c=a.creating,u=a.updating;switch(s.type){case"add":if(c.fire===kt)break;return o._promise("readwrite",function(){return h(s)},!0);case"put":if(c.fire===kt&&u.fire===kt)break;return o._promise("readwrite",function(){return h(s)},!0);case"delete":if(l.fire===kt)break;return o._promise("readwrite",function(){return h(s)},!0);case"deleteRange":if(l.fire===kt)break;return o._promise("readwrite",function(){return f(s)},!0)}return t.mutate(s);function h(d){var m=qe.trans,y=d.keys||L$(r,d);if(!y)throw new Error("Keys missing");return d=d.type==="add"||d.type==="put"?ht(ht({},d),{keys:y}):ht({},d),d.type!=="delete"&&(d.values=Fm([],d.values,!0)),d.keys&&(d.keys=Fm([],d.keys,!0)),M$(t,d,y).then(function(w){var b=y.map(function(O,v){var _=w[v],S={onerror:null,onsuccess:null};if(d.type==="delete")l.fire.call(S,O,_,m);else if(d.type==="add"||_===void 0){var R=c.fire.call(S,O,d.values[v],m);O==null&&R!=null&&(O=R,d.keys[v]=O,r.outbound||Fr(d.values[v],r.keyPath,O))}else{var N=ay(_,d.values[v]),T=u.fire.call(S,N,O,_,m);if(T){var C=d.values[v];Object.keys(T).forEach(function(Q){ur(C,Q)?C[Q]=T[Q]:Fr(C,Q,T[Q])})}}return S});return t.mutate(d).then(function(O){for(var v=O.failures,_=O.results,S=O.numFailures,R=O.lastResult,N=0;N<y.length;++N){var T=_?_[N]:y[N],C=b[N];T==null?C.onerror&&C.onerror(v[N]):C.onsuccess&&C.onsuccess(d.type==="put"&&w[N]?d.values[N]:T)}return{failures:v,results:_,numFailures:S,lastResult:R}}).catch(function(O){return b.forEach(function(v){return v.onerror&&v.onerror(O)}),Promise.reject(O)})})}function f(d){return p(d.trans,d.range,1e4)}function p(d,m,y){return t.query({trans:d,values:!1,query:{index:r,range:m},limit:y}).then(function(w){var b=w.result;return h({type:"delete",keys:b,trans:d}).then(function(O){return O.numFailures>0?Promise.reject(O.failures[0]):b.length<y?{failures:[],numFailures:0,lastResult:void 0}:p(d,ht(ht({},m),{lower:b[b.length-1],lowerOpen:!0}),y)})})}}});return i}})}};function M$(n,e,t){return e.type==="add"?Promise.resolve([]):n.getMany({trans:e.trans,keys:t,cache:"immutable"})}function zk(n,e,t){try{if(!e||e.keys.length<n.length)return null;for(var r=[],i=0,s=0;i<e.keys.length&&s<n.length;++i)Un(e.keys[i],n[s])===0&&(r.push(t?Ac(e.values[i]):e.values[i]),++s);return r.length===n.length?r:null}catch{return null}}var $$={stack:"dbcore",level:-1,create:function(n){return{table:function(e){var t=n.table(e);return ht(ht({},t),{getMany:function(r){if(!r.cache)return t.getMany(r);var i=zk(r.keys,r.trans._cache,r.cache==="clone");return i?Le.resolve(i):t.getMany(r).then(function(s){return r.trans._cache={keys:r.keys,values:r.cache==="clone"?Ac(s):s},s})},mutate:function(r){return r.type!=="add"&&(r.trans._cache=null),t.mutate(r)}})}}}},Np;function ly(n){return!("from"in n)}var Ci=function(n,e){if(this)zn(this,arguments.length?{d:1,from:n,to:arguments.length>1?e:n}:{d:0});else{var t=new Ci;return n&&"d"in n&&zn(t,n),t}};aa(Ci.prototype,(Np={add:function(n){return Qh(this,n),this},addKey:function(n){return Xl(this,n,n),this},addKeys:function(n){var e=this;return n.forEach(function(t){return Xl(e,t,t)}),this}},Np[Wm]=function(){return lg(this)},Np));function Xl(n,e,t){var r=Un(e,t);if(!isNaN(r)){if(r>0)throw RangeError();if(ly(n))return zn(n,{from:e,to:t,d:1});var i=n.l,s=n.r;if(Un(t,n.from)<0)return i?Xl(i,e,t):n.l={from:e,to:t,d:1,l:null,r:null},fw(n);if(Un(e,n.to)>0)return s?Xl(s,e,t):n.r={from:e,to:t,d:1,l:null,r:null},fw(n);Un(e,n.from)<0&&(n.from=e,n.l=null,n.d=s?s.d+1:1),Un(t,n.to)>0&&(n.to=t,n.r=null,n.d=n.l?n.l.d+1:1);var o=!n.r;i&&!n.l&&Qh(n,i),s&&o&&Qh(n,s)}}function Qh(n,e){function t(r,i){var s=i.from,o=i.to,a=i.l,l=i.r;Xl(r,s,o),a&&t(r,a),l&&t(r,l)}ly(e)||t(n,e)}function B$(n,e){var t=lg(e),r=t.next();if(r.done)return!1;for(var i=r.value,s=lg(n),o=s.next(i.from),a=o.value;!r.done&&!o.done;){if(Un(a.from,i.to)<=0&&Un(a.to,i.from)>=0)return!0;Un(i.from,a.from)<0?i=(r=t.next(a.from)).value:a=(o=s.next(i.from)).value}return!1}function lg(n){var e=ly(n)?null:{s:0,n};return{next:function(t){for(var r=arguments.length>0;e;)switch(e.s){case 0:if(e.s=1,r)for(;e.n.l&&Un(t,e.n.from)<0;)e={up:e,n:e.n.l,s:1};else for(;e.n.l;)e={up:e,n:e.n.l,s:1};case 1:if(e.s=2,!r||Un(t,e.n.to)<=0)return{value:e.n,done:!1};case 2:if(e.n.r){e.s=3,e={up:e,n:e.n.r,s:0};continue}case 3:e=e.up}return{done:!0}}}}function fw(n){var e,t,r=(((e=n.r)===null||e===void 0?void 0:e.d)||0)-(((t=n.l)===null||t===void 0?void 0:t.d)||0),i=r>1?"r":r<-1?"l":"";if(i){var s=i==="r"?"l":"r",o=ht({},n),a=n[i];n.from=a.from,n.to=a.to,n[i]=a[i],o[i]=a[s],n[s]=o,o.d=dw(o)}n.d=dw(n)}function dw(n){var e=n.r,t=n.l;return(e?t?Math.max(e.d,t.d):e.d:t?t.d:0)+1}var F$={stack:"dbcore",level:0,create:function(n){var e=n.schema.name,t=new Ci(n.MIN_KEY,n.MAX_KEY);return ht(ht({},n),{table:function(r){var i=n.table(r),s=i.schema,o=s.primaryKey,a=o.extractKey,l=o.outbound,c=ht(ht({},i),{mutate:function(f){var p=f.trans,d=p.mutatedParts||(p.mutatedParts={}),m=function(R){var N="idb://"+e+"/"+r+"/"+R;return d[N]||(d[N]=new Ci)},y=m(""),w=m(":dels"),b=f.type,O=f.type==="deleteRange"?[f.range]:f.type==="delete"?[f.keys]:f.values.length<50?[[],f.values]:[],v=O[0],_=O[1],S=f.trans._cache;return i.mutate(f).then(function(R){if(Ln(v)){b!=="delete"&&(v=R.results),y.addKeys(v);var N=zk(v,S);!N&&b!=="add"&&w.addKeys(v),(N||_)&&U$(m,s,N,_)}else if(v){var T={from:v.lower,to:v.upper};w.add(T),y.add(T)}else y.add(t),w.add(t),s.indexes.forEach(function(C){return m(C.name).add(t)});return R})}}),u=function(f){var p,d,m=f.query,y=m.index,w=m.range;return[y,new Ci((p=w.lower)!==null&&p!==void 0?p:n.MIN_KEY,(d=w.upper)!==null&&d!==void 0?d:n.MAX_KEY)]},h={get:function(f){return[o,new Ci(f.key)]},getMany:function(f){return[o,new Ci().addKeys(f.keys)]},count:u,query:u,openCursor:u};return Gt(h).forEach(function(f){c[f]=function(p){var d=qe.subscr;if(d){var m=function(S){var R="idb://"+e+"/"+r+"/"+S;return d[R]||(d[R]=new Ci)},y=m(""),w=m(":dels"),b=h[f](p),O=b[0],v=b[1];if(m(O.name||"").add(v),!O.isPrimaryKey)if(f==="count")w.add(t);else{var _=f==="query"&&l&&p.values&&i.query(ht(ht({},p),{values:!1}));return i[f].apply(this,arguments).then(function(S){if(f==="query"){if(l&&p.values)return _.then(function(C){var Q=C.result;return y.addKeys(Q),S});var R=p.values?S.result.map(a):S.result;p.values?y.addKeys(R):w.addKeys(R)}else if(f==="openCursor"){var N=S,T=p.values;return N&&Object.create(N,{key:{get:function(){return w.addKey(N.primaryKey),N.key}},primaryKey:{get:function(){var C=N.primaryKey;return w.addKey(C),C}},value:{get:function(){return T&&y.addKey(N.primaryKey),N.value}}})}return S})}}return i[f].apply(this,arguments)}}),c}})}};function U$(n,e,t,r){function i(s){var o=n(s.name||"");function a(c){return c!=null?s.extractKey(c):null}var l=function(c){return s.multiEntry&&Ln(c)?c.forEach(function(u){return o.addKey(u)}):o.addKey(c)};(t||r).forEach(function(c,u){var h=t&&a(t[u]),f=r&&a(r[u]);Un(h,f)!==0&&(h!=null&&l(h),f!=null&&l(f))})}e.indexes.forEach(i)}var cy=function(){function n(e,t){var r=this;this._middlewares={},this.verno=0;var i=n.dependencies;this._options=t=ht({addons:n.addons,autoOpen:!0,indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange},t),this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange};var s=t.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var o={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:kt,dbReadyPromise:null,cancelOpen:kt,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};o.dbReadyPromise=new Le(function(a){o.dbReadyResolve=a}),o.openCanceller=new Le(function(a,l){o.cancelOpen=l}),this._state=o,this.name=e,this.on=Qc(this,"populate","blocked","versionchange","close",{ready:[YO,kt]}),this.on.ready.subscribe=bk(this.on.ready.subscribe,function(a){return function(l,c){n.vip(function(){var u=r._state;if(u.openComplete)u.dbOpenError||Le.resolve().then(l),c&&a(l);else if(u.onReadyBeingFired)u.onReadyBeingFired.push(l),c&&a(l);else{a(l);var h=r;c||a(function f(){h.on.ready.unsubscribe(l),h.on.ready.unsubscribe(f)})}})}}),this.Collection=n$(this),this.Table=YM(this),this.Transaction=u$(this),this.Version=T$(this),this.WhereClause=l$(this),this.on("versionchange",function(a){a.newVersion>0?console.warn("Another connection wants to upgrade database '"+r.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+r.name+"'. Closing db now to resume the delete request."),r.close()}),this.on("blocked",function(a){!a.newVersion||a.newVersion<a.oldVersion?console.warn("Dexie.delete('"+r.name+"') was blocked"):console.warn("Upgrade '"+r.name+"' blocked by other connection holding version "+a.oldVersion/10)}),this._maxKey=ql(t.IDBKeyRange),this._createTransaction=function(a,l,c,u){return new r.Transaction(a,l,c,r._options.chromeTransactionDurability,u)},this._fireOnBlocked=function(a){r.on("blocked").fire(a),Tl.filter(function(l){return l.name===r.name&&l!==r&&!l._state.vcFired}).map(function(l){return l.on("versionchange").fire(a)})},this.use(N$),this.use(D$),this.use(F$),this.use($$),this.vip=Object.create(this,{_vip:{value:!0}}),s.forEach(function(a){return a(r)})}return n.prototype.version=function(e){if(isNaN(e)||e<.1)throw new Je.Type("Given version is not a positive number");if(e=Math.round(e*10)/10,this.idbdb||this._state.isBeingOpened)throw new Je.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,r=t.filter(function(i){return i._cfg.version===e})[0];return r||(r=new this.Version(e),t.push(r),t.sort(O$),r.stores({}),this._state.autoSchema=!1,r)},n.prototype._whenReady=function(e){var t=this;return this.idbdb&&(this._state.openComplete||qe.letThrough||this._vip)?e():new Le(function(r,i){if(t._state.openComplete)return i(new Je.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._options.autoOpen){i(new Je.DatabaseClosed);return}t.open().catch(kt)}t._state.dbReadyPromise.then(r,i)}).then(e)},n.prototype.use=function(e){var t=e.stack,r=e.create,i=e.level,s=e.name;s&&this.unuse({stack:t,name:s});var o=this._middlewares[t]||(this._middlewares[t]=[]);return o.push({stack:t,create:r,level:i==null?10:i,name:s}),o.sort(function(a,l){return a.level-l.level}),this},n.prototype.unuse=function(e){var t=e.stack,r=e.name,i=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(function(s){return i?s.create!==i:r?s.name!==r:!1})),this},n.prototype.open=function(){return R$(this)},n.prototype._close=function(){var e=this._state,t=Tl.indexOf(this);if(t>=0&&Tl.splice(t,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}e.dbReadyPromise=new Le(function(r){e.dbReadyResolve=r}),e.openCanceller=new Le(function(r,i){e.cancelOpen=i})},n.prototype.close=function(){this._close();var e=this._state;this._options.autoOpen=!1,e.dbOpenError=new Je.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)},n.prototype.delete=function(){var e=this,t=arguments.length>0,r=this._state;return new Le(function(i,s){var o=function(){e.close();var a=e._deps.indexedDB.deleteDatabase(e.name);a.onsuccess=Dt(function(){A$(e._deps,e.name),i()}),a.onerror=ei(s),a.onblocked=e._fireOnBlocked};if(t)throw new Je.InvalidArgument("Arguments not allowed in db.delete()");r.isBeingOpened?r.dbReadyPromise.then(o):o()})},n.prototype.backendDB=function(){return this.idbdb},n.prototype.isOpen=function(){return this.idbdb!==null},n.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"},n.prototype.hasFailed=function(){return this._state.dbOpenError!==null},n.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(n.prototype,"tables",{get:function(){var e=this;return Gt(this._allTables).map(function(t){return e._allTables[t]})},enumerable:!1,configurable:!0}),n.prototype.transaction=function(){var e=I$.apply(this,arguments);return this._transaction.apply(this,e)},n.prototype._transaction=function(e,t,r){var i=this,s=qe.trans;(!s||s.db!==this||e.indexOf("!")!==-1)&&(s=null);var o=e.indexOf("?")!==-1;e=e.replace("!","").replace("?","");var a,l;try{if(l=t.map(function(u){var h=u instanceof i.Table?u.name:u;if(typeof h!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return h}),e=="r"||e===Ap)a=Ap;else if(e=="rw"||e==Pp)a=Pp;else throw new Je.InvalidArgument("Invalid transaction mode: "+e);if(s){if(s.mode===Ap&&a===Pp)if(o)s=null;else throw new Je.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");s&&l.forEach(function(u){if(s&&s.storeNames.indexOf(u)===-1)if(o)s=null;else throw new Je.SubTransaction("Table "+u+" not included in parent transaction.")}),o&&s&&!s.active&&(s=null)}}catch(u){return s?s._promise(null,function(h,f){f(u)}):sn(u)}var c=Xk.bind(null,this,a,l,s,r);return s?s._promise(a,c,"lock"):qe.trans?La(qe.transless,function(){return i._whenReady(c)}):this._whenReady(c)},n.prototype.table=function(e){if(!ur(this._allTables,e))throw new Je.InvalidTable("Table "+e+" does not exist");return this._allTables[e]},n}(),V$=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",W$=function(){function n(e){this._subscribe=e}return n.prototype.subscribe=function(e,t,r){return this._subscribe(!e||typeof e=="function"?{next:e,error:t,complete:r}:e)},n.prototype[V$]=function(){return this},n}();function Hk(n,e){return Gt(e).forEach(function(t){var r=n[t]||(n[t]=new Ci);Qh(r,e[t])}),n}function j$(n){return new W$(function(e){var t=HO(n);function r(p){t&&Na();var d=function(){return vs(n,{subscr:p,trans:null})},m=qe.trans?La(qe.transless,d):d();return t&&m.then(ji,ji),m}var i=!1,s={},o={},a={get closed(){return i},unsubscribe:function(){i=!0,_s.storagemutated.unsubscribe(h)}};e.start&&e.start(a);var l=!1,c=!1;function u(){return Gt(o).some(function(p){return s[p]&&B$(s[p],o[p])})}var h=function(p){Hk(s,p),u()&&f()},f=function(){if(!(l||i)){s={};var p={},d=r(p);c||(_s(jl,h),c=!0),l=!0,Promise.resolve(d).then(function(m){l=!1,!i&&(u()?f():(s={},o=p,e.next&&e.next(m)))},function(m){l=!1,e.error&&e.error(m),a.unsubscribe()})}};return f(),a})}var cg;try{cg={indexedDB:Qt.indexedDB||Qt.mozIndexedDB||Qt.webkitIndexedDB||Qt.msIndexedDB,IDBKeyRange:Qt.IDBKeyRange||Qt.webkitIDBKeyRange}}catch{cg={indexedDB:null,IDBKeyRange:null}}var Xs=cy;aa(Xs,ht(ht({},qf),{delete:function(n){var e=new Xs(n,{addons:[]});return e.delete()},exists:function(n){return new Xs(n,{addons:[]}).open().then(function(e){return e.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(n){try{return E$(Xs.dependencies).then(n)}catch{return sn(new Je.MissingAPI)}},defineClass:function(){function n(e){zn(this,e)}return n},ignoreTransaction:function(n){return qe.trans?La(qe.transless,n):n()},vip:og,async:function(n){return function(){try{var e=ag(n.apply(this,arguments));return!e||typeof e.then!="function"?Le.resolve(e):e}catch(t){return sn(t)}}},spawn:function(n,e,t){try{var r=ag(n.apply(t,e||[]));return!r||typeof r.then!="function"?Le.resolve(r):r}catch(i){return sn(i)}},currentTransaction:{get:function(){return qe.trans||null}},waitFor:function(n,e){var t=Le.resolve(typeof n=="function"?Xs.ignoreTransaction(n):n).timeout(e||6e4);return qe.trans?qe.trans.waitFor(t):t},Promise:Le,debug:{get:function(){return gi},set:function(n){kk(n,n==="dexie"?function(){return!0}:Bk)}},derive:Ia,extend:zn,props:aa,override:bk,Events:Qc,on:_s,liveQuery:j$,extendObservabilitySet:Hk,getByKeyPath:Di,setByKeyPath:Fr,delByKeyPath:_M,shallowClone:_k,deepClone:Ac,getObjectDiff:ay,cmp:Un,asap:vk,minKey:eg,addons:[],connections:Tl,errnames:GO,dependencies:cg,semVer:ow,version:ow.split(".").map(function(n){return parseInt(n)}).reduce(function(n,e,t){return n+e/Math.pow(10,t*2)})}));Xs.maxKey=ql(Xs.dependencies.IDBKeyRange);typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(_s(jl,function(n){if(!Ni){var e;Xf?(e=document.createEvent("CustomEvent"),e.initCustomEvent(os,!0,!0,n)):e=new CustomEvent(os,{detail:n}),Ni=!0,dispatchEvent(e),Ni=!1}}),addEventListener(os,function(n){var e=n.detail;Ni||Nh(e)}));function Nh(n){var e=Ni;try{Ni=!0,_s.storagemutated.fire(n)}finally{Ni=e}}var Ni=!1;if(typeof BroadcastChannel<"u"){var pw=new BroadcastChannel(os);_s(jl,function(n){Ni||pw.postMessage(n)}),pw.onmessage=function(n){n.data&&Nh(n.data)}}else if(typeof self<"u"&&typeof navigator<"u"){_s(jl,function(n){try{Ni||(typeof localStorage<"u"&&localStorage.setItem(os,JSON.stringify({trig:Math.random(),changedParts:n})),typeof self.clients=="object"&&Fm([],self.clients.matchAll({includeUncontrolled:!0}),!0).forEach(function(e){return e.postMessage({type:os,changedParts:n})}))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",function(n){if(n.key===os){var e=JSON.parse(n.newValue);e&&Nh(e.changedParts)}});var mw=self.document&&navigator.serviceWorker;mw&&mw.addEventListener("message",q$)}function q$(n){var e=n.data;e&&e.type===os&&Nh(e.changedParts)}Le.rejectionMapper=RM;kk(gi,Bk);var Zk={},X$=n=>encodeURIComponent(n).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),Gk="%[a-f0-9]{2}",gw=new RegExp(Gk,"gi"),Ow=new RegExp("("+Gk+")+","gi");function ug(n,e){try{return decodeURIComponent(n.join(""))}catch{}if(n.length===1)return n;e=e||1;var t=n.slice(0,e),r=n.slice(e);return Array.prototype.concat.call([],ug(t),ug(r))}function z$(n){try{return decodeURIComponent(n)}catch{for(var e=n.match(gw),t=1;t<e.length;t++)n=ug(e,t).join(""),e=n.match(gw);return n}}function H$(n){for(var e={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},t=Ow.exec(n);t;){try{e[t[0]]=decodeURIComponent(t[0])}catch{var r=z$(t[0]);r!==t[0]&&(e[t[0]]=r)}t=Ow.exec(n)}e["%C2"]="\uFFFD";for(var i=Object.keys(e),s=0;s<i.length;s++){var o=i[s];n=n.replace(new RegExp(o,"g"),e[o])}return n}var Z$=function(n){if(typeof n!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof n+"`");try{return n=n.replace(/\+/g," "),decodeURIComponent(n)}catch{return H$(n)}},G$=(n,e)=>{if(!(typeof n=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[n];const t=n.indexOf(e);return t===-1?[n]:[n.slice(0,t),n.slice(t+e.length)]},Y$=function(n,e){for(var t={},r=Object.keys(n),i=Array.isArray(e),s=0;s<r.length;s++){var o=r[s],a=n[o];(i?e.indexOf(o)!==-1:e(o,a,n))&&(t[o]=a)}return t};(function(n){const e=X$,t=Z$,r=G$,i=Y$,s=b=>b==null,o=Symbol("encodeFragmentIdentifier");function a(b){switch(b.arrayFormat){case"index":return O=>(v,_)=>{const S=v.length;return _===void 0||b.skipNull&&_===null||b.skipEmptyString&&_===""?v:_===null?[...v,[u(O,b),"[",S,"]"].join("")]:[...v,[u(O,b),"[",u(S,b),"]=",u(_,b)].join("")]};case"bracket":return O=>(v,_)=>_===void 0||b.skipNull&&_===null||b.skipEmptyString&&_===""?v:_===null?[...v,[u(O,b),"[]"].join("")]:[...v,[u(O,b),"[]=",u(_,b)].join("")];case"colon-list-separator":return O=>(v,_)=>_===void 0||b.skipNull&&_===null||b.skipEmptyString&&_===""?v:_===null?[...v,[u(O,b),":list="].join("")]:[...v,[u(O,b),":list=",u(_,b)].join("")];case"comma":case"separator":case"bracket-separator":{const O=b.arrayFormat==="bracket-separator"?"[]=":"=";return v=>(_,S)=>S===void 0||b.skipNull&&S===null||b.skipEmptyString&&S===""?_:(S=S===null?"":S,_.length===0?[[u(v,b),O,u(S,b)].join("")]:[[_,u(S,b)].join(b.arrayFormatSeparator)])}default:return O=>(v,_)=>_===void 0||b.skipNull&&_===null||b.skipEmptyString&&_===""?v:_===null?[...v,u(O,b)]:[...v,[u(O,b),"=",u(_,b)].join("")]}}function l(b){let O;switch(b.arrayFormat){case"index":return(v,_,S)=>{if(O=/\[(\d*)\]$/.exec(v),v=v.replace(/\[\d*\]$/,""),!O){S[v]=_;return}S[v]===void 0&&(S[v]={}),S[v][O[1]]=_};case"bracket":return(v,_,S)=>{if(O=/(\[\])$/.exec(v),v=v.replace(/\[\]$/,""),!O){S[v]=_;return}if(S[v]===void 0){S[v]=[_];return}S[v]=[].concat(S[v],_)};case"colon-list-separator":return(v,_,S)=>{if(O=/(:list)$/.exec(v),v=v.replace(/:list$/,""),!O){S[v]=_;return}if(S[v]===void 0){S[v]=[_];return}S[v]=[].concat(S[v],_)};case"comma":case"separator":return(v,_,S)=>{const R=typeof _=="string"&&_.includes(b.arrayFormatSeparator),N=typeof _=="string"&&!R&&h(_,b).includes(b.arrayFormatSeparator);_=N?h(_,b):_;const T=R||N?_.split(b.arrayFormatSeparator).map(C=>h(C,b)):_===null?_:h(_,b);S[v]=T};case"bracket-separator":return(v,_,S)=>{const R=/(\[\])$/.test(v);if(v=v.replace(/\[\]$/,""),!R){S[v]=_&&h(_,b);return}const N=_===null?[]:_.split(b.arrayFormatSeparator).map(T=>h(T,b));if(S[v]===void 0){S[v]=N;return}S[v]=[].concat(S[v],N)};default:return(v,_,S)=>{if(S[v]===void 0){S[v]=_;return}S[v]=[].concat(S[v],_)}}}function c(b){if(typeof b!="string"||b.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function u(b,O){return O.encode?O.strict?e(b):encodeURIComponent(b):b}function h(b,O){return O.decode?t(b):b}function f(b){return Array.isArray(b)?b.sort():typeof b=="object"?f(Object.keys(b)).sort((O,v)=>Number(O)-Number(v)).map(O=>b[O]):b}function p(b){const O=b.indexOf("#");return O!==-1&&(b=b.slice(0,O)),b}function d(b){let O="";const v=b.indexOf("#");return v!==-1&&(O=b.slice(v)),O}function m(b){b=p(b);const O=b.indexOf("?");return O===-1?"":b.slice(O+1)}function y(b,O){return O.parseNumbers&&!Number.isNaN(Number(b))&&typeof b=="string"&&b.trim()!==""?b=Number(b):O.parseBooleans&&b!==null&&(b.toLowerCase()==="true"||b.toLowerCase()==="false")&&(b=b.toLowerCase()==="true"),b}function w(b,O){O=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},O),c(O.arrayFormatSeparator);const v=l(O),_=Object.create(null);if(typeof b!="string"||(b=b.trim().replace(/^[?#&]/,""),!b))return _;for(const S of b.split("&")){if(S==="")continue;let[R,N]=r(O.decode?S.replace(/\+/g," "):S,"=");N=N===void 0?null:["comma","separator","bracket-separator"].includes(O.arrayFormat)?N:h(N,O),v(h(R,O),N,_)}for(const S of Object.keys(_)){const R=_[S];if(typeof R=="object"&&R!==null)for(const N of Object.keys(R))R[N]=y(R[N],O);else _[S]=y(R,O)}return O.sort===!1?_:(O.sort===!0?Object.keys(_).sort():Object.keys(_).sort(O.sort)).reduce((S,R)=>{const N=_[R];return Boolean(N)&&typeof N=="object"&&!Array.isArray(N)?S[R]=f(N):S[R]=N,S},Object.create(null))}n.extract=m,n.parse=w,n.stringify=(b,O)=>{if(!b)return"";O=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},O),c(O.arrayFormatSeparator);const v=N=>O.skipNull&&s(b[N])||O.skipEmptyString&&b[N]==="",_=a(O),S={};for(const N of Object.keys(b))v(N)||(S[N]=b[N]);const R=Object.keys(S);return O.sort!==!1&&R.sort(O.sort),R.map(N=>{const T=b[N];return T===void 0?"":T===null?u(N,O):Array.isArray(T)?T.length===0&&O.arrayFormat==="bracket-separator"?u(N,O)+"[]":T.reduce(_(N),[]).join("&"):u(N,O)+"="+u(T,O)}).filter(N=>N.length>0).join("&")},n.parseUrl=(b,O)=>{O=Object.assign({decode:!0},O);const[v,_]=r(b,"#");return Object.assign({url:v.split("?")[0]||"",query:w(m(b),O)},O&&O.parseFragmentIdentifier&&_?{fragmentIdentifier:h(_,O)}:{})},n.stringifyUrl=(b,O)=>{O=Object.assign({encode:!0,strict:!0,[o]:!0},O);const v=p(b.url).split("?")[0]||"",_=n.extract(b.url),S=n.parse(_,{sort:!1}),R=Object.assign(S,b.query);let N=n.stringify(R,O);N&&(N=`?${N}`);let T=d(b.url);return b.fragmentIdentifier&&(T=`#${O[o]?u(b.fragmentIdentifier,O):b.fragmentIdentifier}`),`${v}${N}${T}`},n.pick=(b,O,v)=>{v=Object.assign({parseFragmentIdentifier:!0,[o]:!1},v);const{url:_,query:S,fragmentIdentifier:R}=n.parseUrl(b,v);return n.stringifyUrl({url:_,query:i(S,O),fragmentIdentifier:R},v)},n.exclude=(b,O,v)=>{const _=Array.isArray(O)?S=>!O.includes(S):(S,R)=>!O(S,R);return n.pick(b,_,v)}})(Zk);const uy=(n,e=null)=>{let t,r=e;const{subscribe:i,set:s,update:o}=$n(e),a=()=>(clearTimeout(t),s(r),r);return{subscribe:i,flush:a,get:a,set:l=>{r=l,a()},lazySet:l=>{r=l,clearTimeout(t),t=setTimeout(()=>{s(r)},n)}}},Lc=$n(!1),yt=uy(100,""),Ri={},pr=Vr(yt,n=>(Object.assign(Ri,HS(n)),Ri));class dt{constructor(){}lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,r){let i=[];return this.decompose(0,e,i,2),r.length&&r.decompose(0,r.length,i,3),this.decompose(t,this.length,i,1),ti.from(i,this.length-(t-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){let r=[];return this.decompose(e,t,r,0),ti.from(r,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),i=new Cl(this),s=new Cl(e);for(let o=t,a=t;;){if(i.next(o),s.next(o),o=0,i.lineBreak!=s.lineBreak||i.done!=s.done||i.value!=s.value)return!1;if(a+=i.value.length,i.done||a>=r)return!0}}iter(e=1){return new Cl(this,e)}iterRange(e,t=this.length){return new Yk(this,e,t)}iterLines(e,t){let r;if(e==null)r=this.iter();else{t==null&&(t=this.lines+1);let i=this.line(e).from;r=this.iterRange(i,Math.max(i,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new Kk(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?dt.empty:e.length<=32?new Xt(e):ti.from(Xt.split(e,[]))}}class Xt extends dt{constructor(e,t=K$(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,r,i){for(let s=0;;s++){let o=this.text[s],a=i+o.length;if((t?r:a)>=e)return new J$(i,a,r,o);i=a+1,r++}}decompose(e,t,r,i){let s=e<=0&&t>=this.length?this:new Xt(yw(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(i&1){let o=r.pop(),a=sh(s.text,o.text.slice(),0,s.length);if(a.length<=32)r.push(new Xt(a,o.length+s.length));else{let l=a.length>>1;r.push(new Xt(a.slice(0,l)),new Xt(a.slice(l)))}}else r.push(s)}replace(e,t,r){if(!(r instanceof Xt))return super.replace(e,t,r);let i=sh(this.text,sh(r.text,yw(this.text,0,e)),t),s=this.length+r.length-(t-e);return i.length<=32?new Xt(i,s):ti.from(Xt.split(i,[]),s)}sliceString(e,t=this.length,r=`
`){let i="";for(let s=0,o=0;s<=t&&o<this.text.length;o++){let a=this.text[o],l=s+a.length;s>e&&o&&(i+=r),e<l&&t>s&&(i+=a.slice(Math.max(0,e-s),t-s)),s=l+1}return i}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let r=[],i=-1;for(let s of e)r.push(s),i+=s.length+1,r.length==32&&(t.push(new Xt(r,i)),r=[],i=-1);return i>-1&&t.push(new Xt(r,i)),t}}class ti extends dt{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let r of e)this.lines+=r.lines}lineInner(e,t,r,i){for(let s=0;;s++){let o=this.children[s],a=i+o.length,l=r+o.lines-1;if((t?l:a)>=e)return o.lineInner(e,t,r,i);i=a+1,r=l+1}}decompose(e,t,r,i){for(let s=0,o=0;o<=t&&s<this.children.length;s++){let a=this.children[s],l=o+a.length;if(e<=l&&t>=o){let c=i&((o<=e?1:0)|(l>=t?2:0));o>=e&&l<=t&&!c?r.push(a):a.decompose(e-o,t-o,r,c)}o=l+1}}replace(e,t,r){if(r.lines<this.lines)for(let i=0,s=0;i<this.children.length;i++){let o=this.children[i],a=s+o.length;if(e>=s&&t<=a){let l=o.replace(e-s,t-s,r),c=this.lines-o.lines+l.lines;if(l.lines<c>>5-1&&l.lines>c>>5+1){let u=this.children.slice();return u[i]=l,new ti(u,this.length-(t-e)+r.length)}return super.replace(s,a,l)}s=a+1}return super.replace(e,t,r)}sliceString(e,t=this.length,r=`
`){let i="";for(let s=0,o=0;s<this.children.length&&o<=t;s++){let a=this.children[s],l=o+a.length;o>e&&s&&(i+=r),e<l&&t>o&&(i+=a.sliceString(e-o,t-o,r)),o=l+1}return i}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof ti))return 0;let r=0,[i,s,o,a]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=t,s+=t){if(i==o||s==a)return r;let l=this.children[i],c=e.children[s];if(l!=c)return r+l.scanIdentical(c,t);r+=l.length+1}}static from(e,t=e.reduce((r,i)=>r+i.length+1,-1)){let r=0;for(let p of e)r+=p.lines;if(r<32){let p=[];for(let d of e)d.flatten(p);return new Xt(p,t)}let i=Math.max(32,r>>5),s=i<<1,o=i>>1,a=[],l=0,c=-1,u=[];function h(p){let d;if(p.lines>s&&p instanceof ti)for(let m of p.children)h(m);else p.lines>o&&(l>o||!l)?(f(),a.push(p)):p instanceof Xt&&l&&(d=u[u.length-1])instanceof Xt&&p.lines+d.lines<=32?(l+=p.lines,c+=p.length+1,u[u.length-1]=new Xt(d.text.concat(p.text),d.length+1+p.length)):(l+p.lines>i&&f(),l+=p.lines,c+=p.length+1,u.push(p))}function f(){l!=0&&(a.push(u.length==1?u[0]:ti.from(u,c)),c=-1,l=u.length=0)}for(let p of e)h(p);return f(),a.length==1?a[0]:new ti(a,t)}}dt.empty=new Xt([""],0);function K$(n){let e=-1;for(let t of n)e+=t.length+1;return e}function sh(n,e,t=0,r=1e9){for(let i=0,s=0,o=!0;s<n.length&&i<=r;s++){let a=n[s],l=i+a.length;l>=t&&(l>r&&(a=a.slice(0,r-i)),i<t&&(a=a.slice(t-i)),o?(e[e.length-1]+=a,o=!1):e.push(a)),i=l+1}return e}function yw(n,e,t){return sh(n,[""],e,t)}class Cl{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof Xt?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,i=this.nodes[r],s=this.offsets[r],o=s>>1,a=i instanceof Xt?i.text.length:i.children.length;if(o==(t>0?a:0)){if(r==0)return this.done=!0,this.value="",this;t>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(t>0?0:1)){if(this.offsets[r]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof Xt){let l=i.text[o+(t<0?-1:0)];if(this.offsets[r]+=t,l.length>Math.max(0,e))return this.value=e==0?l:t>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=i.children[o+(t<0?-1:0)];e>l.length?(e-=l.length,this.offsets[r]+=t):(t<0&&this.offsets[r]--,this.nodes.push(l),this.offsets.push(t>0?1:(l instanceof Xt?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class Yk{constructor(e,t,r){this.value="",this.done=!1,this.cursor=new Cl(e,t>r?-1:1),this.pos=t>r?e.length:0,this.from=Math.min(t,r),this.to=Math.max(t,r)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let r=t<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*t,this.value=i.length<=r?i:t<0?i.slice(i.length-r):i.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class Kk{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:r,value:i}=this.inner.next(e);return t?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(dt.prototype[Symbol.iterator]=function(){return this.iter()},Cl.prototype[Symbol.iterator]=Yk.prototype[Symbol.iterator]=Kk.prototype[Symbol.iterator]=function(){return this});class J${constructor(e,t,r,i){this.from=e,this.to=t,this.number=r,this.text=i}get length(){return this.to-this.from}}let Xo="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(n=>n?parseInt(n,36):1);for(let n=1;n<Xo.length;n++)Xo[n]+=Xo[n-1];function e5(n){for(let e=1;e<Xo.length;e+=2)if(Xo[e]>n)return Xo[e-1]<=n;return!1}function bw(n){return n>=127462&&n<=127487}const vw=8205;function Wn(n,e,t=!0,r=!0){return(t?Jk:t5)(n,e,r)}function Jk(n,e,t){if(e==n.length)return e;e&&eT(n.charCodeAt(e))&&tT(n.charCodeAt(e-1))&&e--;let r=zo(n,e);for(e+=Lh(r);e<n.length;){let i=zo(n,e);if(r==vw||i==vw||t&&e5(i))e+=Lh(i),r=i;else if(bw(i)){let s=0,o=e-2;for(;o>=0&&bw(zo(n,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function t5(n,e,t){for(;e>0;){let r=Jk(n,e-2,t);if(r<e)return r;e--}return 0}function eT(n){return n>=56320&&n<57344}function tT(n){return n>=55296&&n<56320}function zo(n,e){let t=n.charCodeAt(e);if(!tT(t)||e+1==n.length)return t;let r=n.charCodeAt(e+1);return eT(r)?(t-55296<<10)+(r-56320)+65536:t}function n5(n){return n<=65535?String.fromCharCode(n):(n-=65536,String.fromCharCode((n>>10)+55296,(n&1023)+56320))}function Lh(n){return n<65536?1:2}const hg=/\r\n?|\n/;var Vn=function(n){return n[n.Simple=0]="Simple",n[n.TrackDel=1]="TrackDel",n[n.TrackBefore=2]="TrackBefore",n[n.TrackAfter=3]="TrackAfter",n}(Vn||(Vn={}));class oi{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let r=this.sections[t+1];e+=r<0?this.sections[t]:r}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,r=0,i=0;t<this.sections.length;){let s=this.sections[t++],o=this.sections[t++];o<0?(e(r,i,s),i+=s):i+=o,r+=s}}iterChangedRanges(e,t=!1){fg(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let r=this.sections[t++],i=this.sections[t++];i<0?e.push(r,i):e.push(i,r)}return new oi(e)}composeDesc(e){return this.empty?e:e.empty?this:nT(this,e)}mapDesc(e,t=!1){return e.empty?this:dg(this,e,t)}mapPos(e,t=-1,r=Vn.Simple){let i=0,s=0;for(let o=0;o<this.sections.length;){let a=this.sections[o++],l=this.sections[o++],c=i+a;if(l<0){if(c>e)return s+(e-i);s+=a}else{if(r!=Vn.Simple&&c>=e&&(r==Vn.TrackDel&&i<e&&c>e||r==Vn.TrackBefore&&i<e||r==Vn.TrackAfter&&c>e))return null;if(c>e||c==e&&t<0&&!a)return e==i||t<0?s:s+l;s+=l}i=c}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return s}touchesRange(e,t=e){for(let r=0,i=0;r<this.sections.length&&i<=t;){let s=this.sections[r++],o=this.sections[r++],a=i+s;if(o>=0&&i<=t&&a>=e)return i<e&&a>t?"cover":!0;i=a}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let r=this.sections[t++],i=this.sections[t++];e+=(e?" ":"")+r+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new oi(e)}static create(e){return new oi(e)}}class en extends oi{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return fg(this,(t,r,i,s,o)=>e=e.replace(i,i+(r-t),o),!1),e}mapDesc(e,t=!1){return dg(this,e,t,!0)}invert(e){let t=this.sections.slice(),r=[];for(let i=0,s=0;i<t.length;i+=2){let o=t[i],a=t[i+1];if(a>=0){t[i]=a,t[i+1]=o;let l=i>>1;for(;r.length<l;)r.push(dt.empty);r.push(o?e.slice(s,s+o):dt.empty)}s+=o}return new en(t,r)}compose(e){return this.empty?e:e.empty?this:nT(this,e,!0)}map(e,t=!1){return e.empty?this:dg(this,e,t,!0)}iterChanges(e,t=!1){fg(this,e,t)}get desc(){return oi.create(this.sections)}filter(e){let t=[],r=[],i=[],s=new zl(this);e:for(let o=0,a=0;;){let l=o==e.length?1e9:e[o++];for(;a<l||a==l&&s.len==0;){if(s.done)break e;let u=Math.min(s.len,l-a);In(i,u,-1);let h=s.ins==-1?-1:s.off==0?s.ins:0;In(t,u,h),h>0&&as(r,t,s.text),s.forward(u),a+=u}let c=e[o++];for(;a<c;){if(s.done)break e;let u=Math.min(s.len,c-a);In(t,u,-1),In(i,u,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(u),a+=u}}return{changes:new en(t,r),filtered:oi.create(i)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let r=this.sections[t],i=this.sections[t+1];i<0?e.push(r):i==0?e.push([r]):e.push([r].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,r){let i=[],s=[],o=0,a=null;function l(u=!1){if(!u&&!i.length)return;o<t&&In(i,t-o,-1);let h=new en(i,s);a=a?a.compose(h.map(a)):h,i=[],s=[],o=0}function c(u){if(Array.isArray(u))for(let h of u)c(h);else if(u instanceof en){if(u.length!=t)throw new RangeError(`Mismatched change set length (got ${u.length}, expected ${t})`);l(),a=a?a.compose(u.map(a)):u}else{let{from:h,to:f=h,insert:p}=u;if(h>f||h<0||f>t)throw new RangeError(`Invalid change range ${h} to ${f} (in doc of length ${t})`);let d=p?typeof p=="string"?dt.of(p.split(r||hg)):p:dt.empty,m=d.length;if(h==f&&m==0)return;h<o&&l(),h>o&&In(i,h-o,-1),In(i,f-h,m),as(s,i,d),o=f}}return c(e),l(!a),a}static empty(e){return new en(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],r=[];for(let i=0;i<e.length;i++){let s=e[i];if(typeof s=="number")t.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,a)=>a&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)t.push(s[0],0);else{for(;r.length<i;)r.push(dt.empty);r[i]=dt.of(s.slice(1)),t.push(s[0],r[i].length)}}}return new en(t,r)}static createSet(e,t){return new en(e,t)}}function In(n,e,t,r=!1){if(e==0&&t<=0)return;let i=n.length-2;i>=0&&t<=0&&t==n[i+1]?n[i]+=e:e==0&&n[i]==0?n[i+1]+=t:r?(n[i]+=e,n[i+1]+=t):n.push(e,t)}function as(n,e,t){if(t.length==0)return;let r=e.length-2>>1;if(r<n.length)n[n.length-1]=n[n.length-1].append(t);else{for(;n.length<r;)n.push(dt.empty);n.push(t)}}function fg(n,e,t){let r=n.inserted;for(let i=0,s=0,o=0;o<n.sections.length;){let a=n.sections[o++],l=n.sections[o++];if(l<0)i+=a,s+=a;else{let c=i,u=s,h=dt.empty;for(;c+=a,u+=l,l&&r&&(h=h.append(r[o-2>>1])),!(t||o==n.sections.length||n.sections[o+1]<0);)a=n.sections[o++],l=n.sections[o++];e(i,c,s,u,h),i=c,s=u}}}function dg(n,e,t,r=!1){let i=[],s=r?[]:null,o=new zl(n),a=new zl(e);for(let l=-1;;)if(o.ins==-1&&a.ins==-1){let c=Math.min(o.len,a.len);In(i,c,-1),o.forward(c),a.forward(c)}else if(a.ins>=0&&(o.ins<0||l==o.i||o.off==0&&(a.len<o.len||a.len==o.len&&!t))){let c=a.len;for(In(i,a.ins,-1);c;){let u=Math.min(o.len,c);o.ins>=0&&l<o.i&&o.len<=u&&(In(i,0,o.ins),s&&as(s,i,o.text),l=o.i),o.forward(u),c-=u}a.next()}else if(o.ins>=0){let c=0,u=o.len;for(;u;)if(a.ins==-1){let h=Math.min(u,a.len);c+=h,u-=h,a.forward(h)}else if(a.ins==0&&a.len<u)u-=a.len,a.next();else break;In(i,c,l<o.i?o.ins:0),s&&l<o.i&&as(s,i,o.text),l=o.i,o.forward(o.len-u)}else{if(o.done&&a.done)return s?en.createSet(i,s):oi.create(i);throw new Error("Mismatched change set lengths")}}function nT(n,e,t=!1){let r=[],i=t?[]:null,s=new zl(n),o=new zl(e);for(let a=!1;;){if(s.done&&o.done)return i?en.createSet(r,i):oi.create(r);if(s.ins==0)In(r,s.len,0,a),s.next();else if(o.len==0&&!o.done)In(r,0,o.ins,a),i&&as(i,r,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let l=Math.min(s.len2,o.len),c=r.length;if(s.ins==-1){let u=o.ins==-1?-1:o.off?0:o.ins;In(r,l,u,a),i&&u&&as(i,r,o.text)}else o.ins==-1?(In(r,s.off?0:s.len,l,a),i&&as(i,r,s.textBit(l))):(In(r,s.off?0:s.len,o.off?0:o.ins,a),i&&!o.off&&as(i,r,o.text));a=(s.ins>l||o.ins>=0&&o.len>l)&&(a||r.length>c),s.forward2(l),o.forward(l)}}}}class zl{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?dt.empty:e[t]}textBit(e){let{inserted:t}=this.set,r=this.i-2>>1;return r>=t.length&&!e?dt.empty:t[r].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class Ys{constructor(e,t,r){this.from=e,this.to=t,this.flags=r}get anchor(){return this.flags&16?this.to:this.from}get head(){return this.flags&16?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&4?-1:this.flags&8?1:0}get bidiLevel(){let e=this.flags&3;return e==3?null:e}get goalColumn(){let e=this.flags>>5;return e==33554431?void 0:e}map(e,t=-1){let r,i;return this.empty?r=i=e.mapPos(this.from,t):(r=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),r==this.from&&i==this.to?this:new Ys(r,i,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return Oe.range(e,t);let r=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return Oe.range(this.anchor,r)}eq(e){return this.anchor==e.anchor&&this.head==e.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return Oe.range(e.anchor,e.head)}static create(e,t,r){return new Ys(e,t,r)}}class Oe{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:Oe.create(this.ranges.map(r=>r.map(e,t)),this.mainIndex)}eq(e){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let t=0;t<this.ranges.length;t++)if(!this.ranges[t].eq(e.ranges[t]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new Oe([this.main],0)}addRange(e,t=!0){return Oe.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let r=this.ranges.slice();return r[t]=e,Oe.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new Oe(e.ranges.map(t=>Ys.fromJSON(t)),e.main)}static single(e,t=e){return new Oe([Oe.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let r=0,i=0;i<e.length;i++){let s=e[i];if(s.empty?s.from<=r:s.from<r)return Oe.normalized(e.slice(),t);r=s.to}return new Oe(e,t)}static cursor(e,t=0,r,i){return Ys.create(e,e,(t==0?0:t<0?4:8)|(r==null?3:Math.min(2,r))|(i!=null?i:33554431)<<5)}static range(e,t,r){let i=(r!=null?r:33554431)<<5;return t<e?Ys.create(t,e,16|i|8):Ys.create(e,t,i|(t>e?4:0))}static normalized(e,t=0){let r=e[t];e.sort((i,s)=>i.from-s.from),t=e.indexOf(r);for(let i=1;i<e.length;i++){let s=e[i],o=e[i-1];if(s.empty?s.from<=o.to:s.from<o.to){let a=o.from,l=Math.max(s.to,o.to);i<=t&&t--,e.splice(--i,2,s.anchor>s.head?Oe.range(l,a):Oe.range(a,l))}}return new Oe(e,t)}}function rT(n,e){for(let t of n.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let hy=0;class et{constructor(e,t,r,i,s){this.combine=e,this.compareInput=t,this.compare=r,this.isStatic=i,this.id=hy++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}static define(e={}){return new et(e.combine||(t=>t),e.compareInput||((t,r)=>t===r),e.compare||(e.combine?(t,r)=>t===r:fy),!!e.static,e.enables)}of(e){return new oh([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new oh(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new oh(e,this,2,t)}from(e,t){return t||(t=r=>r),this.compute([e],r=>t(r.field(e)))}}function fy(n,e){return n==e||n.length==e.length&&n.every((t,r)=>t===e[r])}class oh{constructor(e,t,r,i){this.dependencies=e,this.facet=t,this.type=r,this.value=i,this.id=hy++}dynamicSlot(e){var t;let r=this.value,i=this.facet.compareInput,s=this.id,o=e[s]>>1,a=this.type==2,l=!1,c=!1,u=[];for(let h of this.dependencies)h=="doc"?l=!0:h=="selection"?c=!0:(((t=e[h.id])!==null&&t!==void 0?t:1)&1)==0&&u.push(e[h.id]);return{create(h){return h.values[o]=r(h),1},update(h,f){if(l&&f.docChanged||c&&(f.docChanged||f.selection)||pg(h,u)){let p=r(h);if(a?!ww(p,h.values[o],i):!i(p,h.values[o]))return h.values[o]=p,1}return 0},reconfigure:(h,f)=>{let p,d=f.config.address[s];if(d!=null){let m=Mh(f,d);if(this.dependencies.every(y=>y instanceof et?f.facet(y)===h.facet(y):y instanceof Er?f.field(y,!1)==h.field(y,!1):!0)||(a?ww(p=r(h),m,i):i(p=r(h),m)))return h.values[o]=m,0}else p=r(h);return h.values[o]=p,1}}}}function ww(n,e,t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!t(n[r],e[r]))return!1;return!0}function pg(n,e){let t=!1;for(let r of e)Al(n,r)&1&&(t=!0);return t}function r5(n,e,t){let r=t.map(l=>n[l.id]),i=t.map(l=>l.type),s=r.filter(l=>!(l&1)),o=n[e.id]>>1;function a(l){let c=[];for(let u=0;u<r.length;u++){let h=Mh(l,r[u]);if(i[u]==2)for(let f of h)c.push(f);else c.push(h)}return e.combine(c)}return{create(l){for(let c of r)Al(l,c);return l.values[o]=a(l),1},update(l,c){if(!pg(l,s))return 0;let u=a(l);return e.compare(u,l.values[o])?0:(l.values[o]=u,1)},reconfigure(l,c){let u=pg(l,r),h=c.config.facets[e.id],f=c.facet(e);if(h&&!u&&fy(t,h))return l.values[o]=f,0;let p=a(l);return e.compare(p,f)?(l.values[o]=f,0):(l.values[o]=p,1)}}}const _w=et.define({static:!0});class Er{constructor(e,t,r,i,s){this.id=e,this.createF=t,this.updateF=r,this.compareF=i,this.spec=s,this.provides=void 0}static define(e){let t=new Er(hy++,e.create,e.update,e.compare||((r,i)=>r===i),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(_w).find(r=>r.field==this);return((t==null?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:r=>(r.values[t]=this.create(r),1),update:(r,i)=>{let s=r.values[t],o=this.updateF(s,i);return this.compareF(s,o)?0:(r.values[t]=o,1)},reconfigure:(r,i)=>i.config.address[this.id]!=null?(r.values[t]=i.field(this),0):(r.values[t]=this.create(r),1)}}init(e){return[this,_w.of({field:this,create:e})]}get extension(){return this}}const zs={lowest:4,low:3,default:2,high:1,highest:0};function tl(n){return e=>new iT(e,n)}const yo={highest:tl(zs.highest),high:tl(zs.high),default:tl(zs.default),low:tl(zs.low),lowest:tl(zs.lowest)};class iT{constructor(e,t){this.inner=e,this.prec=t}}class Hf{of(e){return new mg(this,e)}reconfigure(e){return Hf.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class mg{constructor(e,t){this.compartment=e,this.inner=t}}class Dh{constructor(e,t,r,i,s,o){for(this.base=e,this.compartments=t,this.dynamicSlots=r,this.address=i,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,r){let i=[],s=Object.create(null),o=new Map;for(let f of i5(e,t,o))f instanceof Er?i.push(f):(s[f.facet.id]||(s[f.facet.id]=[])).push(f);let a=Object.create(null),l=[],c=[];for(let f of i)a[f.id]=c.length<<1,c.push(p=>f.slot(p));let u=r==null?void 0:r.config.facets;for(let f in s){let p=s[f],d=p[0].facet,m=u&&u[f]||[];if(p.every(y=>y.type==0))if(a[d.id]=l.length<<1|1,fy(m,p))l.push(r.facet(d));else{let y=d.combine(p.map(w=>w.value));l.push(r&&d.compare(y,r.facet(d))?r.facet(d):y)}else{for(let y of p)y.type==0?(a[y.id]=l.length<<1|1,l.push(y.value)):(a[y.id]=c.length<<1,c.push(w=>y.dynamicSlot(w)));a[d.id]=c.length<<1,c.push(y=>r5(y,d,p))}}let h=c.map(f=>f(a));return new Dh(e,o,h,a,l,s)}}function i5(n,e,t){let r=[[],[],[],[],[]],i=new Map;function s(o,a){let l=i.get(o);if(l!=null){if(l<=a)return;let c=r[l].indexOf(o);c>-1&&r[l].splice(c,1),o instanceof mg&&t.delete(o.compartment)}if(i.set(o,a),Array.isArray(o))for(let c of o)s(c,a);else if(o instanceof mg){if(t.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let c=e.get(o.compartment)||o.inner;t.set(o.compartment,c),s(c,a)}else if(o instanceof iT)s(o.inner,o.prec);else if(o instanceof Er)r[a].push(o),o.provides&&s(o.provides,a);else if(o instanceof oh)r[a].push(o),o.facet.extensions&&s(o.facet.extensions,zs.default);else{let c=o.extension;if(!c)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(c,a)}}return s(n,zs.default),r.reduce((o,a)=>o.concat(a))}function Al(n,e){if(e&1)return 2;let t=e>>1,r=n.status[t];if(r==4)throw new Error("Cyclic dependency between fields and/or facets");if(r&2)return r;n.status[t]=4;let i=n.computeSlot(n,n.config.dynamicSlots[t]);return n.status[t]=2|i}function Mh(n,e){return e&1?n.config.staticValues[e>>1]:n.values[e>>1]}const sT=et.define(),oT=et.define({combine:n=>n.some(e=>e),static:!0}),aT=et.define({combine:n=>n.length?n[0]:void 0,static:!0}),lT=et.define(),cT=et.define(),uT=et.define(),hT=et.define({combine:n=>n.length?n[0]:!1});class qi{constructor(e,t){this.type=e,this.value=t}static define(){return new s5}}class s5{of(e){return new qi(this,e)}}class o5{constructor(e){this.map=e}of(e){return new wt(this,e)}}class wt{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new wt(this.type,t)}is(e){return this.type==e}static define(e={}){return new o5(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let r=[];for(let i of e){let s=i.map(t);s&&r.push(s)}return r}}wt.reconfigure=wt.define();wt.appendConfig=wt.define();class zt{constructor(e,t,r,i,s,o){this.startState=e,this.changes=t,this.selection=r,this.effects=i,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,r&&rT(r,t.newLength),s.some(a=>a.type==zt.time)||(this.annotations=s.concat(zt.time.of(Date.now())))}static create(e,t,r,i,s,o){return new zt(e,t,r,i,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(zt.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}zt.time=qi.define();zt.userEvent=qi.define();zt.addToHistory=qi.define();zt.remote=qi.define();function a5(n,e){let t=[];for(let r=0,i=0;;){let s,o;if(r<n.length&&(i==e.length||e[i]>=n[r]))s=n[r++],o=n[r++];else if(i<e.length)s=e[i++],o=e[i++];else return t;!t.length||t[t.length-1]<s?t.push(s,o):t[t.length-1]<o&&(t[t.length-1]=o)}}function fT(n,e,t){var r;let i,s,o;return t?(i=e.changes,s=en.empty(e.changes.length),o=n.changes.compose(e.changes)):(i=e.changes.map(n.changes),s=n.changes.mapDesc(e.changes,!0),o=n.changes.compose(i)),{changes:o,selection:e.selection?e.selection.map(s):(r=n.selection)===null||r===void 0?void 0:r.map(i),effects:wt.mapEffects(n.effects,i).concat(wt.mapEffects(e.effects,s)),annotations:n.annotations.length?n.annotations.concat(e.annotations):e.annotations,scrollIntoView:n.scrollIntoView||e.scrollIntoView}}function gg(n,e,t){let r=e.selection,i=Ho(e.annotations);return e.userEvent&&(i=i.concat(zt.userEvent.of(e.userEvent))),{changes:e.changes instanceof en?e.changes:en.of(e.changes||[],t,n.facet(aT)),selection:r&&(r instanceof Oe?r:Oe.single(r.anchor,r.head)),effects:Ho(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function dT(n,e,t){let r=gg(n,e.length?e[0]:{},n.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(t=!1);let o=!!e[s].sequential;r=fT(r,gg(n,e[s],o?r.changes.newLength:n.doc.length),o)}let i=zt.create(n,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return c5(t?l5(i):i)}function l5(n){let e=n.startState,t=!0;for(let i of e.facet(lT)){let s=i(n);if(s===!1){t=!1;break}Array.isArray(s)&&(t=t===!0?s:a5(t,s))}if(t!==!0){let i,s;if(t===!1)s=n.changes.invertedDesc,i=en.empty(e.doc.length);else{let o=n.changes.filter(t);i=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}n=zt.create(e,i,n.selection&&n.selection.map(s),wt.mapEffects(n.effects,s),n.annotations,n.scrollIntoView)}let r=e.facet(cT);for(let i=r.length-1;i>=0;i--){let s=r[i](n);s instanceof zt?n=s:Array.isArray(s)&&s.length==1&&s[0]instanceof zt?n=s[0]:n=dT(e,Ho(s),!1)}return n}function c5(n){let e=n.startState,t=e.facet(uT),r=n;for(let i=t.length-1;i>=0;i--){let s=t[i](n);s&&Object.keys(s).length&&(r=fT(r,gg(e,s,n.changes.newLength),!0))}return r==n?n:zt.create(e,n.changes,n.selection,r.effects,r.annotations,r.scrollIntoView)}const u5=[];function Ho(n){return n==null?u5:Array.isArray(n)?n:[n]}var xn=function(n){return n[n.Word=0]="Word",n[n.Space=1]="Space",n[n.Other=2]="Other",n}(xn||(xn={}));const h5=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let Og;try{Og=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function f5(n){if(Og)return Og.test(n);for(let e=0;e<n.length;e++){let t=n[e];if(/\w/.test(t)||t>"\x80"&&(t.toUpperCase()!=t.toLowerCase()||h5.test(t)))return!0}return!1}function d5(n){return e=>{if(!/\S/.test(e))return xn.Space;if(f5(e))return xn.Word;for(let t=0;t<n.length;t++)if(e.indexOf(n[t])>-1)return xn.Word;return xn.Other}}class Ot{constructor(e,t,r,i,s,o){this.config=e,this.doc=t,this.selection=r,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)Al(this,a<<1);this.computeSlot=null}field(e,t=!0){let r=this.config.address[e.id];if(r==null){if(t)throw new RangeError("Field is not present in this state");return}return Al(this,r),Mh(this,r)}update(...e){return dT(this,e,!0)}applyTransaction(e){let t=this.config,{base:r,compartments:i}=t;for(let o of e.effects)o.is(Hf.reconfigure)?(t&&(i=new Map,t.compartments.forEach((a,l)=>i.set(l,a)),t=null),i.set(o.value.compartment,o.value.extension)):o.is(wt.reconfigure)?(t=null,r=o.value):o.is(wt.appendConfig)&&(t=null,r=Ho(r).concat(o.value));let s;t?s=e.startState.values.slice():(t=Dh.resolve(r,i,this),s=new Ot(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(a,l)=>l.reconfigure(a,this),null).values),new Ot(t,e.newDoc,e.newSelection,s,(o,a)=>a.update(o,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:Oe.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,r=e(t.ranges[0]),i=this.changes(r.changes),s=[r.range],o=Ho(r.effects);for(let a=1;a<t.ranges.length;a++){let l=e(t.ranges[a]),c=this.changes(l.changes),u=c.map(i);for(let f=0;f<a;f++)s[f]=s[f].map(u);let h=i.mapDesc(c,!0);s.push(l.range.map(h)),i=i.compose(u),o=wt.mapEffects(o,u).concat(wt.mapEffects(Ho(l.effects),h))}return{changes:i,selection:Oe.create(s,t.mainIndex),effects:o}}changes(e=[]){return e instanceof en?e:en.of(e,this.doc.length,this.facet(Ot.lineSeparator))}toText(e){return dt.of(e.split(this.facet(Ot.lineSeparator)||hg))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(Al(this,t),Mh(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let i=e[r];i instanceof Er&&this.config.address[i.id]!=null&&(t[r]=i.spec.toJSON(this.field(e[r]),this))}return t}static fromJSON(e,t={},r){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(r){for(let s in r)if(Object.prototype.hasOwnProperty.call(e,s)){let o=r[s],a=e[s];i.push(o.init(l=>o.spec.fromJSON(a,l)))}}return Ot.create({doc:e.doc,selection:Oe.fromJSON(e.selection),extensions:t.extensions?i.concat([t.extensions]):i})}static create(e={}){let t=Dh.resolve(e.extensions||[],new Map),r=e.doc instanceof dt?e.doc:dt.of((e.doc||"").split(t.staticFacet(Ot.lineSeparator)||hg)),i=e.selection?e.selection instanceof Oe?e.selection:Oe.single(e.selection.anchor,e.selection.head):Oe.single(0);return rT(i,r.length),t.staticFacet(oT)||(i=i.asSingle()),new Ot(t,r,i,t.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(Ot.tabSize)}get lineBreak(){return this.facet(Ot.lineSeparator)||`
`}get readOnly(){return this.facet(hT)}phrase(e,...t){for(let r of this.facet(Ot.phrases))if(Object.prototype.hasOwnProperty.call(r,e)){e=r[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(r,i)=>{if(i=="$")return"$";let s=+(i||1);return!s||s>t.length?r:t[s-1]})),e}languageDataAt(e,t,r=-1){let i=[];for(let s of this.facet(sT))for(let o of s(this,t,r))Object.prototype.hasOwnProperty.call(o,e)&&i.push(o[e]);return i}charCategorizer(e){return d5(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:r,length:i}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-r,a=e-r;for(;o>0;){let l=Wn(t,o,!1);if(s(t.slice(l,o))!=xn.Word)break;o=l}for(;a<i;){let l=Wn(t,a);if(s(t.slice(a,l))!=xn.Word)break;a=l}return o==a?null:Oe.range(o+r,a+r)}}Ot.allowMultipleSelections=oT;Ot.tabSize=et.define({combine:n=>n.length?n[0]:4});Ot.lineSeparator=aT;Ot.readOnly=hT;Ot.phrases=et.define({compare(n,e){let t=Object.keys(n),r=Object.keys(e);return t.length==r.length&&t.every(i=>n[i]==e[i])}});Ot.languageData=sT;Ot.changeFilter=lT;Ot.transactionFilter=cT;Ot.transactionExtender=uT;Hf.reconfigure=wt.define();function Zf(n,e,t={}){let r={};for(let i of n)for(let s of Object.keys(i)){let o=i[s],a=r[s];if(a===void 0)r[s]=o;else if(!(a===o||o===void 0))if(Object.hasOwnProperty.call(t,s))r[s]=t[s](a,o);else throw new Error("Config merge conflict for field "+s)}for(let i in e)r[i]===void 0&&(r[i]=e[i]);return r}class lo{eq(e){return this==e}range(e,t=e){return Hl.create(e,t,this)}}lo.prototype.startSide=lo.prototype.endSide=0;lo.prototype.point=!1;lo.prototype.mapMode=Vn.TrackDel;class Hl{constructor(e,t,r){this.from=e,this.to=t,this.value=r}static create(e,t,r){return new Hl(e,t,r)}}function yg(n,e){return n.from-e.from||n.value.startSide-e.value.startSide}class dy{constructor(e,t,r,i){this.from=e,this.to=t,this.value=r,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,t,r,i=0){let s=r?this.to:this.from;for(let o=i,a=s.length;;){if(o==a)return o;let l=o+a>>1,c=s[l]-e||(r?this.value[l].endSide:this.value[l].startSide)-t;if(l==o)return c>=0?o:a;c>=0?a=l:o=l+1}}between(e,t,r,i){for(let s=this.findIndex(t,-1e9,!0),o=this.findIndex(r,1e9,!1,s);s<o;s++)if(i(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,t){let r=[],i=[],s=[],o=-1,a=-1;for(let l=0;l<this.value.length;l++){let c=this.value[l],u=this.from[l]+e,h=this.to[l]+e,f,p;if(u==h){let d=t.mapPos(u,c.startSide,c.mapMode);if(d==null||(f=p=d,c.startSide!=c.endSide&&(p=t.mapPos(u,c.endSide),p<f)))continue}else if(f=t.mapPos(u,c.startSide),p=t.mapPos(h,c.endSide),f>p||f==p&&c.startSide>0&&c.endSide<=0)continue;(p-f||c.endSide-c.startSide)<0||(o<0&&(o=f),c.point&&(a=Math.max(a,p-f)),r.push(c),i.push(f-o),s.push(p-o))}return{mapped:r.length?new dy(i,s,r,a):null,pos:o}}}class Zt{constructor(e,t,r,i){this.chunkPos=e,this.chunk=t,this.nextLayer=r,this.maxPoint=i}static create(e,t,r,i){return new Zt(e,t,r,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:r=!1,filterFrom:i=0,filterTo:s=this.length}=e,o=e.filter;if(t.length==0&&!o)return this;if(r&&(t=t.slice().sort(yg)),this.isEmpty)return t.length?Zt.of(t):this;let a=new pT(this,null,-1).goto(0),l=0,c=[],u=new xs;for(;a.value||l<t.length;)if(l<t.length&&(a.from-t[l].from||a.startSide-t[l].value.startSide)>=0){let h=t[l++];u.addInner(h.from,h.to,h.value)||c.push(h)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(l==t.length||this.chunkEnd(a.chunkIndex)<t[l].from)&&(!o||i>this.chunkEnd(a.chunkIndex)||s<this.chunkPos[a.chunkIndex])&&u.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!o||i>a.to||s<a.from||o(a.from,a.to,a.value))&&(u.addInner(a.from,a.to,a.value)||c.push(Hl.create(a.from,a.to,a.value))),a.next());return u.finishInner(this.nextLayer.isEmpty&&!c.length?Zt.empty:this.nextLayer.update({add:c,filter:o,filterFrom:i,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],r=[],i=-1;for(let o=0;o<this.chunk.length;o++){let a=this.chunkPos[o],l=this.chunk[o],c=e.touchesRange(a,a+l.length);if(c===!1)i=Math.max(i,l.maxPoint),t.push(l),r.push(e.mapPos(a));else if(c===!0){let{mapped:u,pos:h}=l.map(a,e);u&&(i=Math.max(i,u.maxPoint),t.push(u),r.push(h))}}let s=this.nextLayer.map(e);return t.length==0?s:new Zt(r,t,s||Zt.empty,i)}between(e,t,r){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let s=this.chunkPos[i],o=this.chunk[i];if(t>=s&&e<=s+o.length&&o.between(s,e-s,t-s,r)===!1)return}this.nextLayer.between(e,t,r)}}iter(e=0){return Zl.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return Zl.from(e).goto(t)}static compare(e,t,r,i,s=-1){let o=e.filter(h=>h.maxPoint>0||!h.isEmpty&&h.maxPoint>=s),a=t.filter(h=>h.maxPoint>0||!h.isEmpty&&h.maxPoint>=s),l=xw(o,a,r),c=new nl(o,l,s),u=new nl(a,l,s);r.iterGaps((h,f,p)=>Sw(c,h,u,f,p,i)),r.empty&&r.length==0&&Sw(c,0,u,0,0,i)}static eq(e,t,r=0,i){i==null&&(i=1e9-1);let s=e.filter(u=>!u.isEmpty&&t.indexOf(u)<0),o=t.filter(u=>!u.isEmpty&&e.indexOf(u)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let a=xw(s,o),l=new nl(s,a,0).goto(r),c=new nl(o,a,0).goto(r);for(;;){if(l.to!=c.to||!bg(l.active,c.active)||l.point&&(!c.point||!l.point.eq(c.point)))return!1;if(l.to>i)return!0;l.next(),c.next()}}static spans(e,t,r,i,s=-1){let o=new nl(e,null,s).goto(t),a=t,l=o.openStart;for(;;){let c=Math.min(o.to,r);if(o.point){let u=o.activeForPoint(o.to),h=o.pointFrom<t?u.length+1:Math.min(u.length,l);i.point(a,c,o.point,u,h,o.pointRank),l=Math.min(o.openEnd(c),u.length)}else c>a&&(i.span(a,c,o.active,l),l=o.openEnd(c));if(o.to>r)return l+(o.point&&o.to>r?1:0);a=o.to,o.next()}}static of(e,t=!1){let r=new xs;for(let i of e instanceof Hl?[e]:t?p5(e):e)r.add(i.from,i.to,i.value);return r.finish()}}Zt.empty=new Zt([],[],null,-1);function p5(n){if(n.length>1)for(let e=n[0],t=1;t<n.length;t++){let r=n[t];if(yg(e,r)>0)return n.slice().sort(yg);e=r}return n}Zt.empty.nextLayer=Zt.empty;class xs{constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}finishChunk(e){this.chunks.push(new dy(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}add(e,t,r){this.addInner(e,t,r)||(this.nextLayer||(this.nextLayer=new xs)).add(e,t,r)}addInner(e,t,r){let i=e-this.lastTo||r.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=t,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let r=t.value.length-1;return this.last=t.value[r],this.lastFrom=t.from[r]+e,this.lastTo=t.to[r]+e,!0}finish(){return this.finishInner(Zt.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=Zt.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function xw(n,e,t){let r=new Map;for(let s of n)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&r.set(s.chunk[o],s.chunkPos[o]);let i=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let a=r.get(s.chunk[o]);a!=null&&(t?t.mapPos(a):a)==s.chunkPos[o]&&!(t!=null&&t.touchesRange(a,a+s.chunk[o].length))&&i.add(s.chunk[o])}return i}class pT{constructor(e,t,r,i=0){this.layer=e,this.skip=t,this.minPoint=r,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,r){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!r||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],r=e+t.from[this.rangeIndex];if(this.from=r,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Zl{constructor(e){this.heap=e}static from(e,t=null,r=-1){let i=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=r&&i.push(new pT(o,t,r,s));return i.length==1?i[0]:new Zl(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let r of this.heap)r.goto(e,t);for(let r=this.heap.length>>1;r>=0;r--)Lp(this.heap,r);return this.next(),this}forward(e,t){for(let r of this.heap)r.forward(e,t);for(let r=this.heap.length>>1;r>=0;r--)Lp(this.heap,r);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Lp(this.heap,0)}}}function Lp(n,e){for(let t=n[e];;){let r=(e<<1)+1;if(r>=n.length)break;let i=n[r];if(r+1<n.length&&i.compare(n[r+1])>=0&&(i=n[r+1],r++),t.compare(i)<0)break;n[r]=t,n[e]=i,e=r}}class nl{constructor(e,t,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Zl.from(e,t,r)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){vu(this.active,e),vu(this.activeTo,e),vu(this.activeRank,e),this.minActive=kw(this.active,this.activeTo)}addActive(e){let t=0,{value:r,to:i,rank:s}=this.cursor;for(;t<this.activeRank.length&&this.activeRank[t]<=s;)t++;wu(this.active,t,r),wu(this.activeTo,t,i),wu(this.activeRank,t,s),e&&wu(e,t,this.cursor.from),this.minActive=kw(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let r=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),r&&vu(r,i)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(r),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(r){this.openStart=0;for(let i=r.length-1;i>=0&&r[i]<e;i--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&t.push(this.active[r]);return t.reverse()}openEnd(e){let t=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)t++;return t}}function Sw(n,e,t,r,i,s){n.goto(e),t.goto(r);let o=r+i,a=r,l=r-e;for(;;){let c=n.to+l-t.to||n.endSide-t.endSide,u=c<0?n.to+l:t.to,h=Math.min(u,o);if(n.point||t.point?n.point&&t.point&&(n.point==t.point||n.point.eq(t.point))&&bg(n.activeForPoint(n.to+l),t.activeForPoint(t.to))||s.comparePoint(a,h,n.point,t.point):h>a&&!bg(n.active,t.active)&&s.compareRange(a,h,n.active,t.active),u>o)break;a=u,c<=0&&n.next(),c>=0&&t.next()}}function bg(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!=e[t]&&!n[t].eq(e[t]))return!1;return!0}function vu(n,e){for(let t=e,r=n.length-1;t<r;t++)n[t]=n[t+1];n.pop()}function wu(n,e,t){for(let r=n.length-1;r>=e;r--)n[r+1]=n[r];n[e]=t}function kw(n,e){let t=-1,r=1e9;for(let i=0;i<e.length;i++)(e[i]-r||n[i].endSide-n[t].endSide)<0&&(t=i,r=e[i]);return t}function Gf(n,e,t=n.length){let r=0;for(let i=0;i<t;)n.charCodeAt(i)==9?(r+=e-r%e,i++):(r++,i=Wn(n,i));return r}function m5(n,e,t,r){for(let i=0,s=0;;){if(s>=e)return i;if(i==n.length)break;s+=n.charCodeAt(i)==9?t-s%t:1,i=Wn(n,i)}return r===!0?-1:n.length}const vg="\u037C",Tw=typeof Symbol>"u"?"__"+vg:Symbol.for(vg),wg=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),Ew=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Ss{constructor(e,t){this.rules=[];let{finish:r}=t||{};function i(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,a,l,c){let u=[],h=/^@(\w+)\b/.exec(o[0]),f=h&&h[1]=="keyframes";if(h&&a==null)return l.push(o[0]+";");for(let p in a){let d=a[p];if(/&/.test(p))s(p.split(/,\s*/).map(m=>o.map(y=>m.replace(/&/,y))).reduce((m,y)=>m.concat(y)),d,l);else if(d&&typeof d=="object"){if(!h)throw new RangeError("The value of a property ("+p+") should be a primitive value.");s(i(p),d,u,f)}else d!=null&&u.push(p.replace(/_.*/,"").replace(/[A-Z]/g,m=>"-"+m.toLowerCase())+": "+d+";")}(u.length||f)&&l.push((r&&!h&&!c?o.map(r):o).join(", ")+" {"+u.join(" ")+"}")}for(let o in e)s(i(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=Ew[Tw]||1;return Ew[Tw]=e+1,vg+e.toString(36)}static mount(e,t){(e[wg]||new g5(e)).mount(Array.isArray(t)?t:[t])}}let _u=null;class g5{constructor(e){if(!e.head&&e.adoptedStyleSheets&&typeof CSSStyleSheet<"u"){if(_u)return e.adoptedStyleSheets=[_u.sheet].concat(e.adoptedStyleSheets),e[wg]=_u;this.sheet=new CSSStyleSheet,e.adoptedStyleSheets=[this.sheet].concat(e.adoptedStyleSheets),_u=this}else{this.styleTag=(e.ownerDocument||e).createElement("style");let t=e.head||e;t.insertBefore(this.styleTag,t.firstChild)}this.modules=[],e[wg]=this}mount(e){let t=this.sheet,r=0,i=0;for(let s=0;s<e.length;s++){let o=e[s],a=this.modules.indexOf(o);if(a<i&&a>-1&&(this.modules.splice(a,1),i--,a=-1),a==-1){if(this.modules.splice(i++,0,o),t)for(let l=0;l<o.rules.length;l++)t.insertRule(o.rules[l],r++)}else{for(;i<a;)r+=this.modules[i++].rules.length;r+=o.rules.length,i++}}if(!t){let s="";for(let o=0;o<this.modules.length;o++)s+=this.modules[o].getRules()+`
`;this.styleTag.textContent=s}}}var ks={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Gl={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Cw=typeof navigator<"u"&&/Chrome\/(\d+)/.exec(navigator.userAgent);typeof navigator<"u"&&/Gecko\/\d+/.test(navigator.userAgent);var O5=typeof navigator<"u"&&/Mac/.test(navigator.platform),y5=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),b5=O5||Cw&&+Cw[1]<57;for(var _n=0;_n<10;_n++)ks[48+_n]=ks[96+_n]=String(_n);for(var _n=1;_n<=24;_n++)ks[_n+111]="F"+_n;for(var _n=65;_n<=90;_n++)ks[_n]=String.fromCharCode(_n+32),Gl[_n]=String.fromCharCode(_n);for(var Dp in ks)Gl.hasOwnProperty(Dp)||(Gl[Dp]=ks[Dp]);function v5(n){var e=b5&&(n.ctrlKey||n.altKey||n.metaKey)||y5&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?Gl:ks)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function $h(n){let e;return n.nodeType==11?e=n.getSelection?n:n.ownerDocument:e=n,e.getSelection()}function la(n,e){return e?n==e||n.contains(e.nodeType!=1?e.parentNode:e):!1}function w5(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function ah(n,e){if(!e.anchorNode)return!1;try{return la(n,e.anchorNode)}catch{return!1}}function Yl(n){return n.nodeType==3?ca(n,0,n.nodeValue.length).getClientRects():n.nodeType==1?n.getClientRects():[]}function Bh(n,e,t,r){return t?Aw(n,e,t,r,-1)||Aw(n,e,t,r,1):!1}function Fh(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e}function Aw(n,e,t,r,i){for(;;){if(n==t&&e==r)return!0;if(e==(i<0?0:Kl(n))){if(n.nodeName=="DIV")return!1;let s=n.parentNode;if(!s||s.nodeType!=1)return!1;e=Fh(n)+(i<0?0:1),n=s}else if(n.nodeType==1){if(n=n.childNodes[e+(i<0?-1:0)],n.nodeType==1&&n.contentEditable=="false")return!1;e=i<0?Kl(n):0}else return!1}}function Kl(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}const mT={left:0,right:0,top:0,bottom:0};function py(n,e){let t=e?n.left:n.right;return{left:t,right:t,top:n.top,bottom:n.bottom}}function _5(n){return{left:0,right:n.innerWidth,top:0,bottom:n.innerHeight}}function x5(n,e,t,r,i,s,o,a){let l=n.ownerDocument,c=l.defaultView||window;for(let u=n;u;)if(u.nodeType==1){let h,f=u==l.body;if(f)h=_5(c);else{if(u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.assignedSlot||u.parentNode;continue}let m=u.getBoundingClientRect();h={left:m.left,right:m.left+u.clientWidth,top:m.top,bottom:m.top+u.clientHeight}}let p=0,d=0;if(i=="nearest")e.top<h.top?(d=-(h.top-e.top+o),t>0&&e.bottom>h.bottom+d&&(d=e.bottom-h.bottom+d+o)):e.bottom>h.bottom&&(d=e.bottom-h.bottom+o,t<0&&e.top-d<h.top&&(d=-(h.top+d-e.top+o)));else{let m=e.bottom-e.top,y=h.bottom-h.top;d=(i=="center"&&m<=y?e.top+m/2-y/2:i=="start"||i=="center"&&t<0?e.top-o:e.bottom-y+o)-h.top}if(r=="nearest"?e.left<h.left?(p=-(h.left-e.left+s),t>0&&e.right>h.right+p&&(p=e.right-h.right+p+s)):e.right>h.right&&(p=e.right-h.right+s,t<0&&e.left<h.left+p&&(p=-(h.left+p-e.left+s))):p=(r=="center"?e.left+(e.right-e.left)/2-(h.right-h.left)/2:r=="start"==a?e.left-s:e.right-(h.right-h.left)+s)-h.left,p||d)if(f)c.scrollBy(p,d);else{let m=0,y=0;if(d){let w=u.scrollTop;u.scrollTop+=d,y=u.scrollTop-w}if(p){let w=u.scrollLeft;u.scrollLeft+=p,m=u.scrollLeft-w}e={left:e.left-m,top:e.top-y,right:e.right-m,bottom:e.bottom-y},m&&Math.abs(m-p)<1&&(r="nearest"),y&&Math.abs(y-d)<1&&(i="nearest")}if(f)break;u=u.assignedSlot||u.parentNode}else if(u.nodeType==11)u=u.host;else break}class S5{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){this.set(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)}set(e,t,r,i){this.anchorNode=e,this.anchorOffset=t,this.focusNode=r,this.focusOffset=i}}let Do=null;function gT(n){if(n.setActive)return n.setActive();if(Do)return n.focus(Do);let e=[];for(let t=n;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(n.focus(Do==null?{get preventScroll(){return Do={preventScroll:!0},!0}}:void 0),!Do){Do=!1;for(let t=0;t<e.length;){let r=e[t++],i=e[t++],s=e[t++];r.scrollTop!=i&&(r.scrollTop=i),r.scrollLeft!=s&&(r.scrollLeft=s)}}}let Pw;function ca(n,e,t=e){let r=Pw||(Pw=document.createRange());return r.setEnd(n,t),r.setStart(n,e),r}function Zo(n,e,t){let r={key:e,code:e,keyCode:t,which:t,cancelable:!0},i=new KeyboardEvent("keydown",r);i.synthetic=!0,n.dispatchEvent(i);let s=new KeyboardEvent("keyup",r);return s.synthetic=!0,n.dispatchEvent(s),i.defaultPrevented||s.defaultPrevented}function k5(n){for(;n;){if(n&&(n.nodeType==9||n.nodeType==11&&n.host))return n;n=n.assignedSlot||n.parentNode}return null}function OT(n){for(;n.attributes.length;)n.removeAttributeNode(n.attributes[0])}function T5(n,e){let t=e.focusNode,r=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=r)return!1;for(;;)if(r){if(t.nodeType!=1)return!1;let i=t.childNodes[r-1];i.contentEditable=="false"?r--:(t=i,r=Kl(t))}else{if(t==n)return!0;r=Fh(t),t=t.parentNode}}class Dn{constructor(e,t,r=!0){this.node=e,this.offset=t,this.precise=r}static before(e,t){return new Dn(e.parentNode,Fh(e),t)}static after(e,t){return new Dn(e.parentNode,Fh(e)+1,t)}}const my=[];class Nt{constructor(){this.parent=null,this.dom=null,this.dirty=2}get editorView(){if(!this.parent)throw new Error("Accessing view in orphan content view");return this.parent.editorView}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let r of this.children){if(r==e)return t;t+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}coordsAt(e,t){return null}sync(e){if(this.dirty&2){let t=this.dom,r=null,i;for(let s of this.children){if(s.dirty){if(!s.dom&&(i=r?r.nextSibling:t.firstChild)){let o=Nt.get(i);(!o||!o.parent&&o.canReuseDOM(s))&&s.reuseDOM(i)}s.sync(e),s.dirty=0}if(i=r?r.nextSibling:t.firstChild,e&&!e.written&&e.node==t&&i!=s.dom&&(e.written=!0),s.dom.parentNode==t)for(;i&&i!=s.dom;)i=Rw(i);else t.insertBefore(s.dom,i);r=s.dom}for(i=r?r.nextSibling:t.firstChild,i&&e&&e.node==t&&(e.written=!0);i;)i=Rw(i)}else if(this.dirty&1)for(let t of this.children)t.dirty&&(t.sync(e),t.dirty=0)}reuseDOM(e){}localPosFromDOM(e,t){let r;if(e==this.dom)r=this.dom.childNodes[t];else{let i=Kl(e)==0?0:t==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;i==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?i=-1:i=1),e=s}i<0?r=e:r=e.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!Nt.get(r);)r=r.nextSibling;if(!r)return this.length;for(let i=0,s=0;;i++){let o=this.children[i];if(o.dom==r)return s;s+=o.length+o.breakAfter}}domBoundsAround(e,t,r=0){let i=-1,s=-1,o=-1,a=-1;for(let l=0,c=r,u=r;l<this.children.length;l++){let h=this.children[l],f=c+h.length;if(c<e&&f>t)return h.domBoundsAround(e,t,c);if(f>=e&&i==-1&&(i=l,s=c),c>t&&h.dom.parentNode==this.dom){o=l,a=u;break}u=f,c=f+h.breakAfter}return{from:s,to:a<0?r+this.length:a,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.dirty|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.dirty|=2),t.dirty&1)return;t.dirty|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.dirty&&this.markParentsDirty(!0))}setDOM(e){this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,r=my){this.markDirty();for(let i=e;i<t;i++){let s=this.children[i];s.parent==this&&s.destroy()}this.children.splice(e,t-e,...r);for(let i=0;i<r.length;i++)r[i].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new yT(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}merge(e,t,r,i,s,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor}getSide(){return 0}destroy(){this.parent=null}}Nt.prototype.breakAfter=0;function Rw(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class yT{constructor(e,t,r){this.children=e,this.pos=t,this.i=r,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let r=this.children[--this.i];this.pos-=r.length+r.breakAfter}}}function bT(n,e,t,r,i,s,o,a,l){let{children:c}=n,u=c.length?c[e]:null,h=s.length?s[s.length-1]:null,f=h?h.breakAfter:o;if(!(e==r&&u&&!o&&!f&&s.length<2&&u.merge(t,i,s.length?h:null,t==0,a,l))){if(r<c.length){let p=c[r];p&&i<p.length?(e==r&&(p=p.split(i),i=0),!f&&h&&p.merge(0,i,h,!0,0,l)?s[s.length-1]=p:(i&&p.merge(0,i,null,!1,0,l),s.push(p))):p!=null&&p.breakAfter&&(h?h.breakAfter=1:o=1),r++}for(u&&(u.breakAfter=o,t>0&&(!o&&s.length&&u.merge(t,u.length,s[0],!1,a,0)?u.breakAfter=s.shift().breakAfter:(t<u.length||u.children.length&&u.children[u.children.length-1].length==0)&&u.merge(t,u.length,null,!1,a,0),e++));e<r&&s.length;)if(c[r-1].become(s[s.length-1]))r--,s.pop(),l=s.length?0:a;else if(c[e].become(s[0]))e++,s.shift(),a=s.length?0:l;else break;!s.length&&e&&r<c.length&&!c[e-1].breakAfter&&c[r].merge(0,0,c[e-1],!1,a,l)&&e--,(e<r||s.length)&&n.replaceChildren(e,r,s)}}function vT(n,e,t,r,i,s){let o=n.childCursor(),{i:a,off:l}=o.findPos(t,1),{i:c,off:u}=o.findPos(e,-1),h=e-t;for(let f of r)h+=f.length;n.length+=h,bT(n,c,u,a,l,r,0,i,s)}let lr=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},_g=typeof document<"u"?document:{documentElement:{style:{}}};const xg=/Edge\/(\d+)/.exec(lr.userAgent),wT=/MSIE \d/.test(lr.userAgent),Sg=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(lr.userAgent),Yf=!!(wT||Sg||xg),Iw=!Yf&&/gecko\/(\d+)/i.test(lr.userAgent),Mp=!Yf&&/Chrome\/(\d+)/.exec(lr.userAgent),Qw="webkitFontSmoothing"in _g.documentElement.style,_T=!Yf&&/Apple Computer/.test(lr.vendor),Nw=_T&&(/Mobile\/\w+/.test(lr.userAgent)||lr.maxTouchPoints>2);var Ve={mac:Nw||/Mac/.test(lr.platform),windows:/Win/.test(lr.platform),linux:/Linux|X11/.test(lr.platform),ie:Yf,ie_version:wT?_g.documentMode||6:Sg?+Sg[1]:xg?+xg[1]:0,gecko:Iw,gecko_version:Iw?+(/Firefox\/(\d+)/.exec(lr.userAgent)||[0,0])[1]:0,chrome:!!Mp,chrome_version:Mp?+Mp[1]:0,ios:Nw,android:/Android\b/.test(lr.userAgent),webkit:Qw,safari:_T,webkit_version:Qw?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:_g.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const E5=256;class Ts extends Nt{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,r){return r&&(!(r instanceof Ts)||this.length-(t-e)+r.length>E5)?!1:(this.text=this.text.slice(0,e)+(r?r.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new Ts(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new Dn(this.dom,e)}domBoundsAround(e,t,r){return{from:r,to:r+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return kg(this.dom,e,t)}}class ui extends Nt{constructor(e,t=[],r=0){super(),this.mark=e,this.children=t,this.length=r;for(let i of t)i.setParent(this)}setAttrs(e){if(OT(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.dirty|=6)}sync(e){this.dom?this.dirty&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e)}merge(e,t,r,i,s,o){return r&&(!(r instanceof ui&&r.mark.eq(this.mark))||e&&s<=0||t<this.length&&o<=0)?!1:(vT(this,e,t,r?r.children:[],s-1,o-1),this.markDirty(),!0)}split(e){let t=[],r=0,i=-1,s=0;for(let a of this.children){let l=r+a.length;l>e&&t.push(r<e?a.split(e-r):a),i<0&&r>=e&&(i=s),r=l,s++}let o=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new ui(this.mark,t,o)}domAtPos(e){return kT(this,e)}coordsAt(e,t){return ET(this,e,t)}}function kg(n,e,t){let r=n.nodeValue.length;e>r&&(e=r);let i=e,s=e,o=0;e==0&&t<0||e==r&&t>=0?Ve.chrome||Ve.gecko||(e?(i--,o=1):s<r&&(s++,o=-1)):t<0?i--:s<r&&s++;let a=ca(n,i,s).getClientRects();if(!a.length)return mT;let l=a[(o?o<0:t>=0)?0:a.length-1];return Ve.safari&&!o&&l.width==0&&(l=Array.prototype.find.call(a,c=>c.width)||l),o?py(l,o<0):l||null}class ls extends Nt{constructor(e,t,r){super(),this.widget=e,this.length=t,this.side=r,this.prevWidget=null}static create(e,t,r){return new(e.customView||ls)(e,t,r)}split(e){let t=ls.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(){(!this.dom||!this.widget.updateDOM(this.dom))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}getSide(){return this.side}merge(e,t,r,i,s,o){return r&&(!(r instanceof ls)||!this.widget.compare(r.widget)||e>0&&s<=0||t<this.length&&o<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-t),!0)}become(e){return e.length==this.length&&e instanceof ls&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.eq(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return dt.empty;let e=this;for(;e.parent;)e=e.parent;let t=e.editorView,r=t&&t.state.doc,i=this.posAtStart;return r?r.slice(i,i+this.length):dt.empty}domAtPos(e){return e==0?Dn.before(this.dom):Dn.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let r=this.dom.getClientRects(),i=null;if(!r.length)return mT;for(let s=e>0?r.length-1:0;i=r[s],!(e>0?s==0:s==r.length-1||i.top<i.bottom);s+=e>0?-1:1);return this.length?i:py(i,this.side>0)}get isEditable(){return!1}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class xT extends ls{domAtPos(e){let{topView:t,text:r}=this.widget;return t?Tg(e,0,t,r,(i,s)=>i.domAtPos(s),i=>new Dn(r,Math.min(i,r.nodeValue.length))):new Dn(r,Math.min(e,r.nodeValue.length))}sync(){this.setDOM(this.widget.toDOM())}localPosFromDOM(e,t){let{topView:r,text:i}=this.widget;return r?ST(e,t,r,i):Math.min(t,this.length)}ignoreMutation(){return!1}get overrideDOMText(){return null}coordsAt(e,t){let{topView:r,text:i}=this.widget;return r?Tg(e,t,r,i,(s,o,a)=>s.coordsAt(o,a),(s,o)=>kg(i,s,o)):kg(i,e,t)}destroy(){var e;super.destroy(),(e=this.widget.topView)===null||e===void 0||e.destroy()}get isEditable(){return!0}canReuseDOM(){return!0}}function Tg(n,e,t,r,i,s){if(t instanceof ui){for(let o=t.dom.firstChild;o;o=o.nextSibling){let a=Nt.get(o);if(!a)return s(n,e);let l=la(o,r),c=a.length+(l?r.nodeValue.length:0);if(n<c||n==c&&a.getSide()<=0)return l?Tg(n,e,a,r,i,s):i(a,n,e);n-=c}return i(t,t.length,-1)}else return t.dom==r?s(n,e):i(t,n,e)}function ST(n,e,t,r){if(t instanceof ui)for(let i of t.children){let s=0,o=la(i.dom,r);if(la(i.dom,n))return s+(o?ST(n,e,i,r):i.localPosFromDOM(n,e));s+=o?r.nodeValue.length:i.length}else if(t.dom==r)return Math.min(e,r.nodeValue.length);return t.localPosFromDOM(n,e)}class ua extends Nt{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof ua&&e.side==this.side}split(){return new ua(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return Dn.before(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){let t=this.dom.getBoundingClientRect(),r=C5(this,this.side>0?-1:1);return r&&r.top<t.bottom&&r.bottom>t.top?{left:t.left,right:t.right,top:r.top,bottom:r.bottom}:t}get overrideDOMText(){return dt.empty}}Ts.prototype.children=ls.prototype.children=ua.prototype.children=my;function C5(n,e){let t=n.parent,r=t?t.children.indexOf(n):-1;for(;t&&r>=0;)if(e<0?r>0:r<t.children.length){let i=t.children[r+e];if(i instanceof Ts){let s=i.coordsAt(e<0?i.length:0,e);if(s)return s}r+=e}else if(t instanceof ui&&t.parent)r=t.parent.children.indexOf(t)+(e<0?0:1),t=t.parent;else{let i=t.dom.lastChild;if(i&&i.nodeName=="BR")return i.getClientRects()[0];break}}function kT(n,e){let t=n.dom,{children:r}=n,i=0;for(let s=0;i<r.length;i++){let o=r[i],a=s+o.length;if(!(a==s&&o.getSide()<=0)){if(e>s&&e<a&&o.dom.parentNode==t)return o.domAtPos(e-s);if(e<=s)break;s=a}}for(let s=i;s>0;s--){let o=r[s-1];if(o.dom.parentNode==t)return o.domAtPos(o.length)}for(let s=i;s<r.length;s++){let o=r[s];if(o.dom.parentNode==t)return o.domAtPos(0)}return new Dn(t,0)}function TT(n,e,t){let r,{children:i}=n;t>0&&e instanceof ui&&i.length&&(r=i[i.length-1])instanceof ui&&r.mark.eq(e.mark)?TT(r,e.children[0],t-1):(i.push(e),e.setParent(n)),n.length+=e.length}function ET(n,e,t){let r=null,i=-1,s=null,o=-1;function a(c,u){for(let h=0,f=0;h<c.children.length&&f<=u;h++){let p=c.children[h],d=f+p.length;d>=u&&(p.children.length?a(p,u-f):!s&&(d>u||f==d&&p.getSide()>0)?(s=p,o=u-f):(f<u||f==d&&p.getSide()<0)&&(r=p,i=u-f)),f=d}}a(n,e);let l=(t<0?r:s)||r||s;return l?l.coordsAt(Math.max(0,l==r?i:o),t):A5(n)}function A5(n){let e=n.dom.lastChild;if(!e)return n.dom.getBoundingClientRect();let t=Yl(e);return t[t.length-1]||null}function Eg(n,e){for(let t in n)t=="class"&&e.class?e.class+=" "+n.class:t=="style"&&e.style?e.style+=";"+n.style:e[t]=n[t];return e}function gy(n,e){if(n==e)return!0;if(!n||!e)return!1;let t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i of t)if(r.indexOf(i)==-1||n[i]!==e[i])return!1;return!0}function Cg(n,e,t){let r=null;if(e)for(let i in e)t&&i in t||n.removeAttribute(r=i);if(t)for(let i in t)e&&e[i]==t[i]||n.setAttribute(r=i,t[i]);return!!r}class bo{eq(e){return!1}updateDOM(e){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}ignoreEvent(e){return!0}get customView(){return null}destroy(e){}}var Bt=function(n){return n[n.Text=0]="Text",n[n.WidgetBefore=1]="WidgetBefore",n[n.WidgetAfter=2]="WidgetAfter",n[n.WidgetRange=3]="WidgetRange",n}(Bt||(Bt={}));class tt extends lo{constructor(e,t,r,i){super(),this.startSide=e,this.endSide=t,this.widget=r,this.spec=i}get heightRelevant(){return!1}static mark(e){return new Kf(e)}static widget(e){let t=e.side||0,r=!!e.block;return t+=r?t>0?3e8:-4e8:t>0?1e8:-1e8,new co(e,t,t,r,e.widget||null,!1)}static replace(e){let t=!!e.block,r,i;if(e.isBlockGap)r=-5e8,i=4e8;else{let{start:s,end:o}=CT(e,t);r=(s?t?-3e8:-1:5e8)-1,i=(o?t?2e8:1:-6e8)+1}return new co(e,r,i,t,e.widget||null,!0)}static line(e){return new Dc(e)}static set(e,t=!1){return Zt.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}tt.none=Zt.empty;class Kf extends tt{constructor(e){let{start:t,end:r}=CT(e);super(t?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){return this==e||e instanceof Kf&&this.tagName==e.tagName&&this.class==e.class&&gy(this.attrs,e.attrs)}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}Kf.prototype.point=!1;class Dc extends tt{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Dc&&gy(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}Dc.prototype.mapMode=Vn.TrackBefore;Dc.prototype.point=!0;class co extends tt{constructor(e,t,r,i,s,o){super(t,r,s,e),this.block=i,this.isReplace=o,this.mapMode=i?t<=0?Vn.TrackBefore:Vn.TrackAfter:Vn.TrackDel}get type(){return this.startSide<this.endSide?Bt.WidgetRange:this.startSide<=0?Bt.WidgetBefore:Bt.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5}eq(e){return e instanceof co&&P5(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}co.prototype.point=!0;function CT(n,e=!1){let{inclusiveStart:t,inclusiveEnd:r}=n;return t==null&&(t=n.inclusive),r==null&&(r=n.inclusive),{start:t!=null?t:e,end:r!=null?r:e}}function P5(n,e){return n==e||!!(n&&e&&n.compare(e))}function Ag(n,e,t,r=0){let i=t.length-1;i>=0&&t[i]+r>=n?t[i]=Math.max(t[i],e):t.push(n,e)}class jn extends Nt{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,r,i,s,o){if(r){if(!(r instanceof jn))return!1;this.dom||r.transferDOM(this)}return i&&this.setDeco(r?r.attrs:null),vT(this,e,t,r?r.children:[],s,o),!0}split(e){let t=new jn;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i:r,off:i}=this.childPos(e);i&&(t.append(this.children[r].split(i),0),this.children[r].merge(i,this.children[r].length,null,!1,0,0),r++);for(let s=r;s<this.children.length;s++)t.append(this.children[s],0);for(;r>0&&this.children[r-1].length==0;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=e,t}transferDOM(e){!this.dom||(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){gy(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){TT(this,e,t)}addLineDeco(e){let t=e.spec.attributes,r=e.spec.class;t&&(this.attrs=Eg(t,this.attrs||{})),r&&(this.attrs=Eg({class:r},this.attrs||{}))}domAtPos(e){return kT(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.dirty|=6)}sync(e){var t;this.dom?this.dirty&4&&(OT(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(Cg(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e);let r=this.dom.lastChild;for(;r&&Nt.get(r)instanceof ui;)r=r.lastChild;if(!r||!this.length||r.nodeName!="BR"&&((t=Nt.get(r))===null||t===void 0?void 0:t.isEditable)==!1&&(!Ve.ios||!this.children.some(i=>i instanceof Ts))){let i=document.createElement("BR");i.cmIgnore=!0,this.dom.appendChild(i)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0;for(let t of this.children){if(!(t instanceof Ts)||/[^ -~]/.test(t.text))return null;let r=Yl(t.dom);if(r.length!=1)return null;e+=r[0].width}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length}:null}coordsAt(e,t){return ET(this,e,t)}become(e){return!1}get type(){return Bt.Text}static find(e,t){for(let r=0,i=0;r<e.children.length;r++){let s=e.children[r],o=i+s.length;if(o>=t){if(s instanceof jn)return s;if(o>t)break}i=o+s.breakAfter}return null}}class no extends Nt{constructor(e,t,r){super(),this.widget=e,this.length=t,this.type=r,this.breakAfter=0,this.prevWidget=null}merge(e,t,r,i,s,o){return r&&(!(r instanceof no)||!this.widget.compare(r.widget)||e>0&&s<=0||t<this.length&&o<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?Dn.before(this.dom):Dn.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let r=new no(this.widget,t,this.type);return r.breakAfter=this.breakAfter,r}get children(){return my}sync(){(!this.dom||!this.widget.updateDOM(this.dom))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):dt.empty}domBoundsAround(){return null}become(e){return e instanceof no&&e.type==this.type&&e.widget.constructor==this.widget.constructor?(e.widget.eq(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Oy{constructor(e,t,r,i){this.doc=e,this.pos=t,this.end=r,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!e.breakAfter&&!(e instanceof no&&e.type==Bt.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new jn),this.atCursorPos=!0),this.curLine}flushBuffer(e){this.pendingBuffer&&(this.curLine.append(xu(new ua(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer([]),this.curLine=null,this.content.push(e)}finish(e){e?this.pendingBuffer=0:this.flushBuffer([]),this.posCovered()||this.getLine()}buildText(e,t,r){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:o,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer([]),this.curLine=null,e--;continue}else this.text=s,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(t.length-r)),this.getLine().append(xu(new Ts(this.text.slice(this.textOff,this.textOff+i)),t),r),this.atCursorPos=!0,this.textOff+=i,e-=i,r=0}}span(e,t,r,i){this.buildText(t-e,r,i),this.pos=t,this.openStart<0&&(this.openStart=i)}point(e,t,r,i,s,o){if(this.disallowBlockEffectsFor[o]&&r instanceof co){if(r.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=t-e;if(r instanceof co)if(r.block){let{type:l}=r;l==Bt.WidgetAfter&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new no(r.widget||new Lw("div"),a,l))}else{let l=ls.create(r.widget||new Lw("span"),a,a?0:r.startSide),c=this.atCursorPos&&!l.isEditable&&s<=i.length&&(e<t||r.startSide>0),u=!l.isEditable&&(e<t||r.startSide<=0),h=this.getLine();this.pendingBuffer==2&&!c&&(this.pendingBuffer=0),this.flushBuffer(i),c&&(h.append(xu(new ua(1),i),s),s=i.length+Math.max(0,s-i.length)),h.append(xu(l,i),s),this.atCursorPos=u,this.pendingBuffer=u?e<t?1:2:0}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(r);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=s)}static build(e,t,r,i,s){let o=new Oy(e,t,r,s);return o.openEnd=Zt.spans(i,t,r,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function xu(n,e){for(let t of e)n=new ui(t,[n],n.length);return n}class Lw extends bo{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}}const AT=et.define(),PT=et.define(),RT=et.define(),IT=et.define(),Pg=et.define(),QT=et.define(),NT=et.define({combine:n=>n.some(e=>e)}),LT=et.define({combine:n=>n.some(e=>e)});class Uh{constructor(e,t="nearest",r="nearest",i=5,s=5){this.range=e,this.y=t,this.x=r,this.yMargin=i,this.xMargin=s}map(e){return e.empty?this:new Uh(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin)}}const Dw=wt.define({map:(n,e)=>n.map(e)});function ds(n,e,t){let r=n.facet(IT);r.length?r[0](e):window.onerror?window.onerror(String(e),t,void 0,void 0,e):t?console.error(t+":",e):console.error(e)}const Jf=et.define({combine:n=>n.length?n[0]:!0});let R5=0;const vl=et.define();class Tr{constructor(e,t,r,i){this.id=e,this.create=t,this.domEventHandlers=r,this.extension=i(this)}static define(e,t){const{eventHandlers:r,provide:i,decorations:s}=t||{};return new Tr(R5++,e,r,o=>{let a=[vl.of(o)];return s&&a.push(Jl.of(l=>{let c=l.plugin(o);return c?s(c):tt.none})),i&&a.push(i(o)),a})}static fromClass(e,t){return Tr.define(r=>new e(r),t)}}class $p{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(r){if(ds(t.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){ds(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(r){ds(e.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const DT=et.define(),yy=et.define(),Jl=et.define(),MT=et.define(),$T=et.define(),wl=et.define();class ai{constructor(e,t,r,i){this.fromA=e,this.toA=t,this.fromB=r,this.toB=i}join(e){return new ai(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,r=this;for(;t>0;t--){let i=e[t-1];if(!(i.fromA>r.toA)){if(i.toA<r.fromA)break;r=r.join(i),e.splice(t-1,1)}}return e.splice(t,0,r),e}static extendWithRanges(e,t){if(t.length==0)return e;let r=[];for(let i=0,s=0,o=0,a=0;;i++){let l=i==e.length?null:e[i],c=o-a,u=l?l.fromB:1e9;for(;s<t.length&&t[s]<u;){let h=t[s],f=t[s+1],p=Math.max(a,h),d=Math.min(u,f);if(p<=d&&new ai(p+c,d+c,p,d).addToSet(r),f>u)break;s+=2}if(!l)return r;new ai(l.fromA,l.toA,l.fromB,l.toB).addToSet(r),o=l.toA,a=l.toB}}}class Vh{constructor(e,t,r){this.view=e,this.state=t,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=en.empty(this.startState.doc.length);for(let o of r)this.changes=this.changes.compose(o.changes);let i=[];this.changes.iterChangedRanges((o,a,l,c)=>i.push(new ai(o,a,l,c))),this.changedRanges=i;let s=e.hasFocus;s!=e.inputState.notifiedFocused&&(e.inputState.notifiedFocused=s,this.flags|=1)}static create(e,t,r){return new Vh(e,t,r)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}var rn=function(n){return n[n.LTR=0]="LTR",n[n.RTL=1]="RTL",n}(rn||(rn={}));const Rg=rn.LTR,I5=rn.RTL;function BT(n){let e=[];for(let t=0;t<n.length;t++)e.push(1<<+n[t]);return e}const Q5=BT("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),N5=BT("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Ig=Object.create(null),Zr=[];for(let n of["()","[]","{}"]){let e=n.charCodeAt(0),t=n.charCodeAt(1);Ig[e]=t,Ig[t]=-e}function L5(n){return n<=247?Q5[n]:1424<=n&&n<=1524?2:1536<=n&&n<=1785?N5[n-1536]:1774<=n&&n<=2220?4:8192<=n&&n<=8203?256:64336<=n&&n<=65023?4:n==8204?256:1}const D5=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Go{constructor(e,t,r){this.from=e,this.to=t,this.level=r}get dir(){return this.level%2?I5:Rg}side(e,t){return this.dir==t==e?this.to:this.from}static find(e,t,r,i){let s=-1;for(let o=0;o<e.length;o++){let a=e[o];if(a.from<=t&&a.to>=t){if(a.level==r)return o;(s<0||(i!=0?i<0?a.from<t:a.to>t:e[s].level>a.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}const Ft=[];function M5(n,e){let t=n.length,r=e==Rg?1:2,i=e==Rg?2:1;if(!n||r==1&&!D5.test(n))return FT(t);for(let o=0,a=r,l=r;o<t;o++){let c=L5(n.charCodeAt(o));c==512?c=a:c==8&&l==4&&(c=16),Ft[o]=c==4?2:c,c&7&&(l=c),a=c}for(let o=0,a=r,l=r;o<t;o++){let c=Ft[o];if(c==128)o<t-1&&a==Ft[o+1]&&a&24?c=Ft[o]=a:Ft[o]=256;else if(c==64){let u=o+1;for(;u<t&&Ft[u]==64;)u++;let h=o&&a==8||u<t&&Ft[u]==8?l==1?1:8:256;for(let f=o;f<u;f++)Ft[f]=h;o=u-1}else c==8&&l==1&&(Ft[o]=1);a=c,c&7&&(l=c)}for(let o=0,a=0,l=0,c,u,h;o<t;o++)if(u=Ig[c=n.charCodeAt(o)])if(u<0){for(let f=a-3;f>=0;f-=3)if(Zr[f+1]==-u){let p=Zr[f+2],d=p&2?r:p&4?p&1?i:r:0;d&&(Ft[o]=Ft[Zr[f]]=d),a=f;break}}else{if(Zr.length==189)break;Zr[a++]=o,Zr[a++]=c,Zr[a++]=l}else if((h=Ft[o])==2||h==1){let f=h==r;l=f?0:1;for(let p=a-3;p>=0;p-=3){let d=Zr[p+2];if(d&2)break;if(f)Zr[p+2]|=2;else{if(d&4)break;Zr[p+2]|=4}}}for(let o=0;o<t;o++)if(Ft[o]==256){let a=o+1;for(;a<t&&Ft[a]==256;)a++;let l=(o?Ft[o-1]:r)==1,c=(a<t?Ft[a]:r)==1,u=l==c?l?1:2:r;for(let h=o;h<a;h++)Ft[h]=u;o=a-1}let s=[];if(r==1)for(let o=0;o<t;){let a=o,l=Ft[o++]!=1;for(;o<t&&l==(Ft[o]!=1);)o++;if(l)for(let c=o;c>a;){let u=c,h=Ft[--c]!=2;for(;c>a&&h==(Ft[c-1]!=2);)c--;s.push(new Go(c,u,h?2:1))}else s.push(new Go(a,o,0))}else for(let o=0;o<t;){let a=o,l=Ft[o++]==2;for(;o<t&&l==(Ft[o]==2);)o++;s.push(new Go(a,o,l?1:2))}return s}function FT(n){return[new Go(0,n,0)]}let UT="";function $5(n,e,t,r,i){var s;let o=r.head-n.from,a=-1;if(o==0){if(!i||!n.length)return null;e[0].level!=t&&(o=e[0].side(!1,t),a=0)}else if(o==n.length){if(i)return null;let f=e[e.length-1];f.level!=t&&(o=f.side(!0,t),a=e.length-1)}a<0&&(a=Go.find(e,o,(s=r.bidiLevel)!==null&&s!==void 0?s:-1,r.assoc));let l=e[a];o==l.side(i,t)&&(l=e[a+=i?1:-1],o=l.side(!i,t));let c=i==(l.dir==t),u=Wn(n.text,o,c);if(UT=n.text.slice(Math.min(o,u),Math.max(o,u)),u!=l.side(i,t))return Oe.cursor(u+n.from,c?-1:1,l.level);let h=a==(i?e.length-1:0)?null:e[a+(i?1:-1)];return!h&&l.level!=t?Oe.cursor(i?n.to:n.from,i?-1:1,t):h&&h.level<l.level?Oe.cursor(h.side(!i,t)+n.from,i?1:-1,h.level):Oe.cursor(u+n.from,i?-1:1,l.level)}const cs="\uFFFF";class VT{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(Ot.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=cs}readRange(e,t){if(!e)return this;let r=e.parentNode;for(let i=e;;){this.findPointBefore(r,i),this.readNode(i);let s=i.nextSibling;if(s==t)break;let o=Nt.get(i),a=Nt.get(s);(o&&a?o.breakAfter:(o?o.breakAfter:Mw(i))||Mw(s)&&(i.nodeName!="BR"||i.cmIgnore))&&this.lineBreak(),i=s}return this.findPointBefore(r,t),this}readTextNode(e){let t=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,t.length));for(let r=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,a;if(this.lineSeparator?(s=t.indexOf(this.lineSeparator,r),o=this.lineSeparator.length):(a=i.exec(t))&&(s=a.index,o=a[0].length),this.append(t.slice(r,s<0?t.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=o-1);r=s+o}}readNode(e){if(e.cmIgnore)return;let t=Nt.get(e),r=t&&t.overrideDOMText;if(r!=null){this.findPointInside(e,r.length);for(let i=r.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==t&&(r.pos=this.text.length)}findPointInside(e,t){for(let r of this.points)(e.nodeType==3?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+Math.min(t,r.offset))}}function Mw(n){return n.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(n.nodeName)}class $w{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class Bw extends Nt{constructor(e){super(),this.view=e,this.compositionDeco=tt.none,this.decorations=[],this.dynamicDecorationMap=[],this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new jn],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new ai(0,0,0,e.state.doc.length)],0)}get editorView(){return this.view}get length(){return this.view.state.doc.length}update(e){let t=e.changedRanges;this.minWidth>0&&t.length&&(t.every(({fromA:o,toA:a})=>a<this.minWidthFrom||o>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.view.inputState.composing<0?this.compositionDeco=tt.none:(e.transactions.length||this.dirty)&&(this.compositionDeco=F5(this.view,e.changes)),(Ve.ie||Ve.chrome)&&!this.compositionDeco.size&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let r=this.decorations,i=this.updateDeco(),s=j5(r,i,e.changes);return t=ai.extendWithRanges(t,s),this.dirty==0&&t.length==0?!1:(this.updateInner(t,e.startState.doc.length),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t);let{observer:r}=this.view;r.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let s=Ve.chrome||Ve.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.sync(s),this.dirty=0,s&&(s.written||r.selectionRange.focusNode!=s.node)&&(this.forceSelection=!0),this.dom.style.height=""});let i=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let s of this.children)s instanceof no&&s.widget instanceof Fw&&i.push(s.dom);r.updateGaps(i)}updateChildren(e,t){let r=this.childCursor(t);for(let i=e.length-1;;i--){let s=i>=0?e[i]:null;if(!s)break;let{fromA:o,toA:a,fromB:l,toB:c}=s,{content:u,breakAtStart:h,openStart:f,openEnd:p}=Oy.build(this.view.state.doc,l,c,this.decorations,this.dynamicDecorationMap),{i:d,off:m}=r.findPos(a,1),{i:y,off:w}=r.findPos(o,-1);bT(this,y,w,d,m,u,h,f,p)}}updateSelection(e=!1,t=!1){if((e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange(),!(t||this.mayControlSelection()))return;let r=this.forceSelection;this.forceSelection=!1;let i=this.view.state.selection.main,s=this.domAtPos(i.anchor),o=i.empty?s:this.domAtPos(i.head);if(Ve.gecko&&i.empty&&B5(s)){let l=document.createTextNode("");this.view.observer.ignore(()=>s.node.insertBefore(l,s.node.childNodes[s.offset]||null)),s=o=new Dn(l,0),r=!0}let a=this.view.observer.selectionRange;(r||!a.focusNode||!Bh(s.node,s.offset,a.anchorNode,a.anchorOffset)||!Bh(o.node,o.offset,a.focusNode,a.focusOffset))&&(this.view.observer.ignore(()=>{Ve.android&&Ve.chrome&&this.dom.contains(a.focusNode)&&q5(a.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let l=$h(this.view.root);if(l)if(i.empty){if(Ve.gecko){let c=V5(s.node,s.offset);if(c&&c!=3){let u=jT(s.node,s.offset,c==1?1:-1);u&&(s=new Dn(u,c==1?0:u.nodeValue.length))}}l.collapse(s.node,s.offset),i.bidiLevel!=null&&a.cursorBidiLevel!=null&&(a.cursorBidiLevel=i.bidiLevel)}else if(l.extend){l.collapse(s.node,s.offset);try{l.extend(o.node,o.offset)}catch{}}else{let c=document.createRange();i.anchor>i.head&&([s,o]=[o,s]),c.setEnd(o.node,o.offset),c.setStart(s.node,s.offset),l.removeAllRanges(),l.addRange(c)}}),this.view.observer.setSelectionRange(s,o)),this.impreciseAnchor=s.precise?null:new Dn(a.anchorNode,a.anchorOffset),this.impreciseHead=o.precise?null:new Dn(a.focusNode,a.focusOffset)}enforceCursorAssoc(){if(this.compositionDeco.size)return;let{view:e}=this,t=e.state.selection.main,r=$h(e.root),{anchorNode:i,anchorOffset:s}=e.observer.selectionRange;if(!r||!t.empty||!t.assoc||!r.modify)return;let o=jn.find(this,t.head);if(!o)return;let a=o.posAtStart;if(t.head==a||t.head==a+o.length)return;let l=this.coordsAt(t.head,-1),c=this.coordsAt(t.head,1);if(!l||!c||l.bottom>c.top)return;let u=this.domAtPos(t.head+t.assoc);r.collapse(u.node,u.offset),r.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let h=e.observer.selectionRange;e.docView.posFromDOM(h.anchorNode,h.anchorOffset)!=t.from&&r.collapse(i,s)}mayControlSelection(){let e=this.view.root.activeElement;return e==this.dom||ah(this.dom,this.view.observer.selectionRange)&&!(e&&this.dom.contains(e))}nearest(e){for(let t=e;t;){let r=Nt.get(t);if(r&&r.rootView==this)return r;t=t.parentNode}return null}posFromDOM(e,t){let r=this.nearest(e);if(!r)throw new RangeError("Trying to find position for a DOM position outside of the document");return r.localPosFromDOM(e,t)+r.posAtStart}domAtPos(e){let{i:t,off:r}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let i=this.children[t];if(r<i.length||i instanceof jn)break;t++,r=0}return this.children[t].domAtPos(r)}coordsAt(e,t){for(let r=this.length,i=this.children.length-1;;i--){let s=this.children[i],o=r-s.breakAfter-s.length;if(e>o||e==o&&s.type!=Bt.WidgetBefore&&s.type!=Bt.WidgetAfter&&(!i||t==2||this.children[i-1].breakAfter||this.children[i-1].type==Bt.WidgetBefore&&t>-2))return s.coordsAt(e-o,t);r=o}}measureVisibleLineHeights(e){let t=[],{from:r,to:i}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,l=this.view.textDirection==rn.LTR;for(let c=0,u=0;u<this.children.length;u++){let h=this.children[u],f=c+h.length;if(f>i)break;if(c>=r){let p=h.dom.getBoundingClientRect();if(t.push(p.height),o){let d=h.dom.lastChild,m=d?Yl(d):[];if(m.length){let y=m[m.length-1],w=l?y.right-p.left:p.right-y.left;w>a&&(a=w,this.minWidth=s,this.minWidthFrom=c,this.minWidthTo=f)}}}c=f+h.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?rn.RTL:rn.LTR}measureTextSize(){for(let i of this.children)if(i instanceof jn){let s=i.measureTextSize();if(s)return s}let e=document.createElement("div"),t,r;return e.className="cm-line",e.style.width="99999px",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let i=Yl(e.firstChild)[0];t=e.getBoundingClientRect().height,r=i?i.width/27:7,e.remove()}),{lineHeight:t,charWidth:r}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new yT(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let r=0,i=0;;i++){let s=i==t.viewports.length?null:t.viewports[i],o=s?s.from-1:this.length;if(o>r){let a=t.lineBlockAt(o).bottom-t.lineBlockAt(r).top;e.push(tt.replace({widget:new Fw(a),block:!0,inclusive:!0,isBlockGap:!0}).range(r,o))}if(!s)break;r=s.to+1}return tt.set(e)}updateDeco(){let e=this.view.state.facet(Jl).map((t,r)=>(this.dynamicDecorationMap[r]=typeof t=="function")?t(this.view):t);for(let t=e.length;t<e.length+3;t++)this.dynamicDecorationMap[t]=!1;return this.decorations=[...e,this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){let{range:t}=e,r=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),i;if(!r)return;!t.empty&&(i=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(r={left:Math.min(r.left,i.left),top:Math.min(r.top,i.top),right:Math.max(r.right,i.right),bottom:Math.max(r.bottom,i.bottom)});let s=0,o=0,a=0,l=0;for(let u of this.view.state.facet($T).map(h=>h(this.view)))if(u){let{left:h,right:f,top:p,bottom:d}=u;h!=null&&(s=Math.max(s,h)),f!=null&&(o=Math.max(o,f)),p!=null&&(a=Math.max(a,p)),d!=null&&(l=Math.max(l,d))}let c={left:r.left-s,top:r.top-a,right:r.right+o,bottom:r.bottom+l};x5(this.view.scrollDOM,c,t.head<t.anchor?-1:1,e.x,e.y,e.xMargin,e.yMargin,this.view.textDirection==rn.LTR)}}function B5(n){return n.node.nodeType==1&&n.node.firstChild&&(n.offset==0||n.node.childNodes[n.offset-1].contentEditable=="false")&&(n.offset==n.node.childNodes.length||n.node.childNodes[n.offset].contentEditable=="false")}class Fw extends bo{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function WT(n){let e=n.observer.selectionRange,t=e.focusNode&&jT(e.focusNode,e.focusOffset,0);if(!t)return null;let r=n.docView.nearest(t);if(!r)return null;if(r instanceof jn){let i=t;for(;i.parentNode!=r.dom;)i=i.parentNode;let s=i.previousSibling;for(;s&&!Nt.get(s);)s=s.previousSibling;let o=s?Nt.get(s).posAtEnd:r.posAtStart;return{from:o,to:o,node:i,text:t}}else{for(;;){let{parent:s}=r;if(!s)return null;if(s instanceof jn)break;r=s}let i=r.posAtStart;return{from:i,to:i+r.length,node:r.dom,text:t}}}function F5(n,e){let t=WT(n);if(!t)return tt.none;let{from:r,to:i,node:s,text:o}=t,a=e.mapPos(r,1),l=Math.max(a,e.mapPos(i,-1)),{state:c}=n,u=s.nodeType==3?s.nodeValue:new VT([],c).readRange(s.firstChild,null).text;if(l-a<u.length)if(c.doc.sliceString(a,Math.min(c.doc.length,a+u.length),cs)==u)l=a+u.length;else if(c.doc.sliceString(Math.max(0,l-u.length),l,cs)==u)a=l-u.length;else return tt.none;else if(c.doc.sliceString(a,l,cs)!=u)return tt.none;let h=Nt.get(s);return h instanceof xT?h=h.widget.topView:h&&(h.parent=null),tt.set(tt.replace({widget:new U5(s,o,h),inclusive:!0}).range(a,l))}class U5 extends bo{constructor(e,t,r){super(),this.top=e,this.text=t,this.topView=r}eq(e){return this.top==e.top&&this.text==e.text}toDOM(){return this.top}ignoreEvent(){return!1}get customView(){return xT}}function jT(n,e,t){for(;;){if(n.nodeType==3)return n;if(n.nodeType==1&&e>0&&t<=0)n=n.childNodes[e-1],e=Kl(n);else if(n.nodeType==1&&e<n.childNodes.length&&t>=0)n=n.childNodes[e],e=0;else return null}}function V5(n,e){return n.nodeType!=1?0:(e&&n.childNodes[e-1].contentEditable=="false"?1:0)|(e<n.childNodes.length&&n.childNodes[e].contentEditable=="false"?2:0)}class W5{constructor(){this.changes=[]}compareRange(e,t){Ag(e,t,this.changes)}comparePoint(e,t){Ag(e,t,this.changes)}}function j5(n,e,t){let r=new W5;return Zt.compare(n,e,t,r),r.changes}function q5(n,e){for(let t=n;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function X5(n,e,t=1){let r=n.charCategorizer(e),i=n.doc.lineAt(e),s=e-i.from;if(i.length==0)return Oe.cursor(e);s==0?t=1:s==i.length&&(t=-1);let o=s,a=s;t<0?o=Wn(i.text,s,!1):a=Wn(i.text,s);let l=r(i.text.slice(o,a));for(;o>0;){let c=Wn(i.text,o,!1);if(r(i.text.slice(c,o))!=l)break;o=c}for(;a<i.length;){let c=Wn(i.text,a);if(r(i.text.slice(a,c))!=l)break;a=c}return Oe.range(o+i.from,a+i.from)}function z5(n,e){return e.left>n?e.left-n:Math.max(0,n-e.right)}function H5(n,e){return e.top>n?e.top-n:Math.max(0,n-e.bottom)}function Bp(n,e){return n.top<e.bottom-1&&n.bottom>e.top+1}function Uw(n,e){return e<n.top?{top:e,left:n.left,right:n.right,bottom:n.bottom}:n}function Vw(n,e){return e>n.bottom?{top:n.top,left:n.left,right:n.right,bottom:e}:n}function Qg(n,e,t){let r,i,s,o,a=!1,l,c,u,h;for(let d=n.firstChild;d;d=d.nextSibling){let m=Yl(d);for(let y=0;y<m.length;y++){let w=m[y];i&&Bp(i,w)&&(w=Uw(Vw(w,i.bottom),i.top));let b=z5(e,w),O=H5(t,w);if(b==0&&O==0)return d.nodeType==3?Ww(d,e,t):Qg(d,e,t);(!r||o>O||o==O&&s>b)&&(r=d,i=w,s=b,o=O,a=!b||(b>0?y<m.length-1:y>0)),b==0?t>w.bottom&&(!u||u.bottom<w.bottom)?(l=d,u=w):t<w.top&&(!h||h.top>w.top)&&(c=d,h=w):u&&Bp(u,w)?u=Vw(u,w.bottom):h&&Bp(h,w)&&(h=Uw(h,w.top))}}if(u&&u.bottom>=t?(r=l,i=u):h&&h.top<=t&&(r=c,i=h),!r)return{node:n,offset:0};let f=Math.max(i.left,Math.min(i.right,e));if(r.nodeType==3)return Ww(r,f,t);if(a&&r.contentEditable!="false")return Qg(r,f,t);let p=Array.prototype.indexOf.call(n.childNodes,r)+(e>=(i.left+i.right)/2?1:0);return{node:n,offset:p}}function Ww(n,e,t){let r=n.nodeValue.length,i=-1,s=1e9,o=0;for(let a=0;a<r;a++){let l=ca(n,a,a+1).getClientRects();for(let c=0;c<l.length;c++){let u=l[c];if(u.top==u.bottom)continue;o||(o=e-u.left);let h=(u.top>t?u.top-t:t-u.bottom)-1;if(u.left-1<=e&&u.right+1>=e&&h<s){let f=e>=(u.left+u.right)/2,p=f;if((Ve.chrome||Ve.gecko)&&ca(n,a).getBoundingClientRect().left==u.right&&(p=!f),h<=0)return{node:n,offset:a+(p?1:0)};i=a+(p?1:0),s=h}}}return{node:n,offset:i>-1?i:o>0?n.nodeValue.length:0}}function qT(n,{x:e,y:t},r,i=-1){var s;let o=n.contentDOM.getBoundingClientRect(),a=o.top+n.viewState.paddingTop,l,{docHeight:c}=n.viewState,u=t-a;if(u<0)return 0;if(u>c)return n.state.doc.length;for(let w=n.defaultLineHeight/2,b=!1;l=n.elementAtHeight(u),l.type!=Bt.Text;)for(;u=i>0?l.bottom+w:l.top-w,!(u>=0&&u<=c);){if(b)return r?null:0;b=!0,i=-i}t=a+u;let h=l.from;if(h<n.viewport.from)return n.viewport.from==0?0:r?null:jw(n,o,l,e,t);if(h>n.viewport.to)return n.viewport.to==n.state.doc.length?n.state.doc.length:r?null:jw(n,o,l,e,t);let f=n.dom.ownerDocument,p=n.root.elementFromPoint?n.root:f,d=p.elementFromPoint(e,t);d&&!n.contentDOM.contains(d)&&(d=null),d||(e=Math.max(o.left+1,Math.min(o.right-1,e)),d=p.elementFromPoint(e,t),d&&!n.contentDOM.contains(d)&&(d=null));let m,y=-1;if(d&&((s=n.docView.nearest(d))===null||s===void 0?void 0:s.isEditable)!=!1){if(f.caretPositionFromPoint){let w=f.caretPositionFromPoint(e,t);w&&({offsetNode:m,offset:y}=w)}else if(f.caretRangeFromPoint){let w=f.caretRangeFromPoint(e,t);w&&({startContainer:m,startOffset:y}=w,(!n.contentDOM.contains(m)||Ve.safari&&Z5(m,y,e)||Ve.chrome&&G5(m,y,e))&&(m=void 0))}}if(!m||!n.docView.dom.contains(m)){let w=jn.find(n.docView,h);if(!w)return u>l.top+l.height/2?l.to:l.from;({node:m,offset:y}=Qg(w.dom,e,t))}return n.docView.posFromDOM(m,y)}function jw(n,e,t,r,i){let s=Math.round((r-e.left)*n.defaultCharacterWidth);if(n.lineWrapping&&t.height>n.defaultLineHeight*1.5){let a=Math.floor((i-t.top)/n.defaultLineHeight);s+=a*n.viewState.heightOracle.lineLength}let o=n.state.sliceDoc(t.from,t.to);return t.from+m5(o,s,n.state.tabSize)}function Z5(n,e,t){let r;if(n.nodeType!=3||e!=(r=n.nodeValue.length))return!1;for(let i=n.nextSibling;i;i=i.nextSibling)if(i.nodeType!=1||i.nodeName!="BR")return!1;return ca(n,r-1,r).getBoundingClientRect().left>t}function G5(n,e,t){if(e!=0)return!1;for(let i=n;;){let s=i.parentNode;if(!s||s.nodeType!=1||s.firstChild!=i)return!1;if(s.classList.contains("cm-line"))break;i=s}let r=n.nodeType==1?n.getBoundingClientRect():ca(n,0,Math.max(n.nodeValue.length,1)).getBoundingClientRect();return t-r.left>5}function Y5(n,e,t,r){let i=n.state.doc.lineAt(e.head),s=!r||!n.lineWrapping?null:n.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(s){let l=n.dom.getBoundingClientRect(),c=n.textDirectionAt(i.from),u=n.posAtCoords({x:t==(c==rn.LTR)?l.right-1:l.left+1,y:(s.top+s.bottom)/2});if(u!=null)return Oe.cursor(u,t?-1:1)}let o=jn.find(n.docView,e.head),a=o?t?o.posAtEnd:o.posAtStart:t?i.to:i.from;return Oe.cursor(a,t?-1:1)}function qw(n,e,t,r){let i=n.state.doc.lineAt(e.head),s=n.bidiSpans(i),o=n.textDirectionAt(i.from);for(let a=e,l=null;;){let c=$5(i,s,o,a,t),u=UT;if(!c){if(i.number==(t?n.state.doc.lines:1))return a;u=`
`,i=n.state.doc.line(i.number+(t?1:-1)),s=n.bidiSpans(i),c=Oe.cursor(t?i.from:i.to)}if(l){if(!l(u))return a}else{if(!r)return c;l=r(u)}a=c}}function K5(n,e,t){let r=n.state.charCategorizer(e),i=r(t);return s=>{let o=r(s);return i==xn.Space&&(i=o),i==o}}function J5(n,e,t,r){let i=e.head,s=t?1:-1;if(i==(t?n.state.doc.length:0))return Oe.cursor(i,e.assoc);let o=e.goalColumn,a,l=n.contentDOM.getBoundingClientRect(),c=n.coordsAtPos(i),u=n.documentTop;if(c)o==null&&(o=c.left-l.left),a=s<0?c.top:c.bottom;else{let p=n.viewState.lineBlockAt(i);o==null&&(o=Math.min(l.right-l.left,n.defaultCharacterWidth*(i-p.from))),a=(s<0?p.top:p.bottom)+u}let h=l.left+o,f=r!=null?r:n.defaultLineHeight>>1;for(let p=0;;p+=10){let d=a+(f+p)*s,m=qT(n,{x:h,y:d},!1,s);if(d<l.top||d>l.bottom||(s<0?m<i:m>i))return Oe.cursor(m,e.assoc,void 0,o)}}function Fp(n,e,t){let r=n.state.facet(MT).map(i=>i(n));for(;;){let i=!1;for(let s of r)s.between(t.from-1,t.from+1,(o,a,l)=>{t.from>o&&t.from<a&&(t=e.head>t.from?Oe.cursor(o,1):Oe.cursor(a,-1),i=!0)});if(!i)return t}}class eB{constructor(e){this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.mouseSelection=null;for(let t in mn){let r=mn[t];e.contentDOM.addEventListener(t,i=>{!Xw(e,i)||this.ignoreDuringComposition(i)||t=="keydown"&&this.keydown(e,i)||(this.mustFlushObserver(i)&&e.observer.forceFlush(),this.runCustomHandlers(t,e,i)?i.preventDefault():r(e,i))},Ng[t]),this.registeredEvents.push(t)}Ve.chrome&&Ve.chrome_version==102&&e.scrollDOM.addEventListener("wheel",()=>{this.chromeScrollHack<0?e.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout(()=>{this.chromeScrollHack=-1,e.contentDOM.style.pointerEvents=""},100)},{passive:!0}),this.notifiedFocused=e.hasFocus,Ve.safari&&e.contentDOM.addEventListener("input",()=>null)}setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}ensureHandlers(e,t){var r;let i;this.customHandlers=[];for(let s of t)if(i=(r=s.update(e).spec)===null||r===void 0?void 0:r.domEventHandlers){this.customHandlers.push({plugin:s.value,handlers:i});for(let o in i)this.registeredEvents.indexOf(o)<0&&o!="scroll"&&(this.registeredEvents.push(o),e.contentDOM.addEventListener(o,a=>{!Xw(e,a)||this.runCustomHandlers(o,e,a)&&a.preventDefault()}))}}runCustomHandlers(e,t,r){for(let i of this.customHandlers){let s=i.handlers[e];if(s)try{if(s.call(i.plugin,r,t)||r.defaultPrevented)return!0}catch(o){ds(t.state,o)}}return!1}runScrollHandlers(e,t){this.lastScrollTop=e.scrollDOM.scrollTop,this.lastScrollLeft=e.scrollDOM.scrollLeft;for(let r of this.customHandlers){let i=r.handlers.scroll;if(i)try{i.call(r.plugin,t,e)}catch(s){ds(e.state,s)}}}keydown(e,t){if(this.lastKeyCode=t.keyCode,this.lastKeyTime=Date.now(),t.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(Ve.android&&Ve.chrome&&!t.synthetic&&(t.keyCode==13||t.keyCode==8))return e.observer.delayAndroidKey(t.key,t.keyCode),!0;let r;return Ve.ios&&!t.synthetic&&!t.altKey&&!t.metaKey&&((r=XT.find(i=>i.keyCode==t.keyCode))&&!t.ctrlKey||tB.indexOf(t.key)>-1&&t.ctrlKey&&!t.shiftKey)?(this.pendingIOSKey=r||t,setTimeout(()=>this.flushIOSKey(e),250),!0):!1}flushIOSKey(e){let t=this.pendingIOSKey;return t?(this.pendingIOSKey=void 0,Zo(e.contentDOM,t.key,t.keyCode)):!1}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:Ve.safari&&!Ve.ios&&Date.now()-this.compositionEndedAt<100?(this.compositionEndedAt=0,!0):!1:!1}mustFlushObserver(e){return e.type=="keydown"&&e.keyCode!=229}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const XT=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],tB="dthko",zT=[16,17,18,20,91,92,224,225];class nB{constructor(e,t,r,i){this.view=e,this.style=r,this.mustSelect=i,this.lastEvent=t;let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(Ot.allowMultipleSelections)&&rB(e,t),this.dragMove=iB(e,t),this.dragging=sB(e,t)&&YT(t)==1?null:!1,this.dragging===!1&&(t.preventDefault(),this.select(t))}move(e){if(e.buttons==0)return this.destroy();this.dragging===!1&&this.select(this.lastEvent=e)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}select(e){let t=this.style.get(e,this.extend,this.multiple);(this.mustSelect||!t.eq(this.view.state.selection)||t.main.assoc!=this.view.state.selection.main.assoc)&&this.view.dispatch({selection:t,userEvent:"select.pointer",scrollIntoView:!0}),this.mustSelect=!1}update(e){e.docChanged&&this.dragging&&(this.dragging=this.dragging.map(e.changes)),this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function rB(n,e){let t=n.state.facet(AT);return t.length?t[0](e):Ve.mac?e.metaKey:e.ctrlKey}function iB(n,e){let t=n.state.facet(PT);return t.length?t[0](e):Ve.mac?!e.altKey:!e.ctrlKey}function sB(n,e){let{main:t}=n.state.selection;if(t.empty)return!1;let r=$h(n.root);if(!r||r.rangeCount==0)return!0;let i=r.getRangeAt(0).getClientRects();for(let s=0;s<i.length;s++){let o=i[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function Xw(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,r;t!=n.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(r=Nt.get(t))&&r.ignoreEvent(e))return!1;return!0}const mn=Object.create(null),Ng=Object.create(null),HT=Ve.ie&&Ve.ie_version<15||Ve.ios&&Ve.webkit_version<604;function oB(n){let e=n.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{n.focus(),t.remove(),ZT(n,t.value)},50)}function ZT(n,e){let{state:t}=n,r,i=1,s=t.toText(e),o=s.lines==t.selection.ranges.length;if(Lg!=null&&t.selection.ranges.every(l=>l.empty)&&Lg==s.toString()){let l=-1;r=t.changeByRange(c=>{let u=t.doc.lineAt(c.from);if(u.from==l)return{range:c};l=u.from;let h=t.toText((o?s.line(i++).text:e)+t.lineBreak);return{changes:{from:u.from,insert:h},range:Oe.cursor(c.from+h.length)}})}else o?r=t.changeByRange(l=>{let c=s.line(i++);return{changes:{from:l.from,to:l.to,insert:c.text},range:Oe.cursor(l.from+c.length)}}):r=t.replaceSelection(s);n.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}mn.keydown=(n,e)=>{n.inputState.setSelectionOrigin("select"),e.keyCode==27?n.inputState.lastEscPress=Date.now():zT.indexOf(e.keyCode)<0&&(n.inputState.lastEscPress=0)};mn.touchstart=(n,e)=>{n.inputState.lastTouchTime=Date.now(),n.inputState.setSelectionOrigin("select.pointer")};mn.touchmove=n=>{n.inputState.setSelectionOrigin("select.pointer")};Ng.touchstart=Ng.touchmove={passive:!0};mn.mousedown=(n,e)=>{if(n.observer.flush(),n.inputState.lastTouchTime>Date.now()-2e3)return;let t=null;for(let r of n.state.facet(RT))if(t=r(n,e),t)break;if(!t&&e.button==0&&(t=cB(n,e)),t){let r=n.root.activeElement!=n.contentDOM;r&&n.observer.ignore(()=>gT(n.contentDOM)),n.inputState.startMouseSelection(new nB(n,e,t,r))}};function zw(n,e,t,r){if(r==1)return Oe.cursor(e,t);if(r==2)return X5(n.state,e,t);{let i=jn.find(n.docView,e),s=n.state.doc.lineAt(i?i.posAtEnd:e),o=i?i.posAtStart:s.from,a=i?i.posAtEnd:s.to;return a<n.state.doc.length&&a==s.to&&a++,Oe.range(o,a)}}let GT=(n,e)=>n>=e.top&&n<=e.bottom,Hw=(n,e,t)=>GT(e,t)&&n>=t.left&&n<=t.right;function aB(n,e,t,r){let i=jn.find(n.docView,e);if(!i)return 1;let s=e-i.posAtStart;if(s==0)return 1;if(s==i.length)return-1;let o=i.coordsAt(s,-1);if(o&&Hw(t,r,o))return-1;let a=i.coordsAt(s,1);return a&&Hw(t,r,a)?1:o&&GT(r,o)?-1:1}function Zw(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:aB(n,t,e.clientX,e.clientY)}}const lB=Ve.ie&&Ve.ie_version<=11;let Gw=null,Yw=0,Kw=0;function YT(n){if(!lB)return n.detail;let e=Gw,t=Kw;return Gw=n,Kw=Date.now(),Yw=!e||t>Date.now()-400&&Math.abs(e.clientX-n.clientX)<2&&Math.abs(e.clientY-n.clientY)<2?(Yw+1)%3:1}function cB(n,e){let t=Zw(n,e),r=YT(e),i=n.state.selection,s=t,o=e;return{update(a){a.docChanged&&(t.pos=a.changes.mapPos(t.pos),i=i.map(a.changes),o=null)},get(a,l,c){let u;o&&a.clientX==o.clientX&&a.clientY==o.clientY?u=s:(u=s=Zw(n,a),o=a);let h=zw(n,u.pos,u.bias,r);if(t.pos!=u.pos&&!l){let f=zw(n,t.pos,t.bias,r),p=Math.min(f.from,h.from),d=Math.max(f.to,h.to);h=p<h.from?Oe.range(p,d):Oe.range(d,p)}return l?i.replaceRange(i.main.extend(h.from,h.to)):c&&i.ranges.length>1&&i.ranges.some(f=>f.eq(h))?uB(i,h):c?i.addRange(h):Oe.create([h])}}}function uB(n,e){for(let t=0;;t++)if(n.ranges[t].eq(e))return Oe.create(n.ranges.slice(0,t).concat(n.ranges.slice(t+1)),n.mainIndex==t?0:n.mainIndex-(n.mainIndex>t?1:0))}mn.dragstart=(n,e)=>{let{selection:{main:t}}=n.state,{mouseSelection:r}=n.inputState;r&&(r.dragging=t),e.dataTransfer&&(e.dataTransfer.setData("Text",n.state.sliceDoc(t.from,t.to)),e.dataTransfer.effectAllowed="copyMove")};function Jw(n,e,t,r){if(!t)return;let i=n.posAtCoords({x:e.clientX,y:e.clientY},!1);e.preventDefault();let{mouseSelection:s}=n.inputState,o=r&&s&&s.dragging&&s.dragMove?{from:s.dragging.from,to:s.dragging.to}:null,a={from:i,insert:t},l=n.state.changes(o?[o,a]:a);n.focus(),n.dispatch({changes:l,selection:{anchor:l.mapPos(i,-1),head:l.mapPos(i,1)},userEvent:o?"move.drop":"input.drop"})}mn.drop=(n,e)=>{if(!e.dataTransfer)return;if(n.state.readOnly)return e.preventDefault();let t=e.dataTransfer.files;if(t&&t.length){e.preventDefault();let r=Array(t.length),i=0,s=()=>{++i==t.length&&Jw(n,e,r.filter(o=>o!=null).join(n.state.lineBreak),!1)};for(let o=0;o<t.length;o++){let a=new FileReader;a.onerror=s,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(r[o]=a.result),s()},a.readAsText(t[o])}}else Jw(n,e,e.dataTransfer.getData("Text"),!0)};mn.paste=(n,e)=>{if(n.state.readOnly)return e.preventDefault();n.observer.flush();let t=HT?null:e.clipboardData;t?(ZT(n,t.getData("text/plain")),e.preventDefault()):oB(n)};function hB(n,e){let t=n.dom.parentNode;if(!t)return;let r=t.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout(()=>{r.remove(),n.focus()},50)}function fB(n){let e=[],t=[],r=!1;for(let i of n.selection.ranges)i.empty||(e.push(n.sliceDoc(i.from,i.to)),t.push(i));if(!e.length){let i=-1;for(let{from:s}of n.selection.ranges){let o=n.doc.lineAt(s);o.number>i&&(e.push(o.text),t.push({from:o.from,to:Math.min(n.doc.length,o.to+1)})),i=o.number}r=!0}return{text:e.join(n.lineBreak),ranges:t,linewise:r}}let Lg=null;mn.copy=mn.cut=(n,e)=>{let{text:t,ranges:r,linewise:i}=fB(n.state);if(!t&&!i)return;Lg=i?t:null;let s=HT?null:e.clipboardData;s?(e.preventDefault(),s.clearData(),s.setData("text/plain",t)):hB(n,t),e.type=="cut"&&!n.state.readOnly&&n.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"})};function KT(n){setTimeout(()=>{n.hasFocus!=n.inputState.notifiedFocused&&n.update([])},10)}mn.focus=n=>{n.inputState.lastFocusTime=Date.now(),!n.scrollDOM.scrollTop&&(n.inputState.lastScrollTop||n.inputState.lastScrollLeft)&&(n.scrollDOM.scrollTop=n.inputState.lastScrollTop,n.scrollDOM.scrollLeft=n.inputState.lastScrollLeft),KT(n)};mn.blur=n=>{n.observer.clearSelectionRange(),KT(n)};mn.compositionstart=mn.compositionupdate=n=>{n.inputState.compositionFirstChange==null&&(n.inputState.compositionFirstChange=!0),n.inputState.composing<0&&(n.inputState.composing=0)};mn.compositionend=n=>{n.inputState.composing=-1,n.inputState.compositionEndedAt=Date.now(),n.inputState.compositionFirstChange=null,Ve.chrome&&Ve.android&&n.observer.flushSoon(),setTimeout(()=>{n.inputState.composing<0&&n.docView.compositionDeco.size&&n.update([])},50)};mn.contextmenu=n=>{n.inputState.lastContextMenu=Date.now()};mn.beforeinput=(n,e)=>{var t;let r;if(Ve.chrome&&Ve.android&&(r=XT.find(i=>i.inputType==e.inputType))&&(n.observer.delayAndroidKey(r.key,r.keyCode),r.key=="Backspace"||r.key=="Delete")){let i=((t=window.visualViewport)===null||t===void 0?void 0:t.height)||0;setTimeout(()=>{var s;(((s=window.visualViewport)===null||s===void 0?void 0:s.height)||0)>i+10&&n.hasFocus&&(n.contentDOM.blur(),n.focus())},100)}};const e_=["pre-wrap","normal","pre-line","break-spaces"];class dB{constructor(e){this.lineWrapping=e,this.doc=dt.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.lineLength=30,this.heightChanged=!1}heightForGap(e,t){let r=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.ceil((t-e-r*this.lineLength*.5)/this.lineLength)),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return e_.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let r=0;r<e.length;r++){let i=e[r];i<0?r++:this.heightSamples[Math.floor(i*10)]||(t=!0,this.heightSamples[Math.floor(i*10)]=!0)}return t}refresh(e,t,r,i,s){let o=e_.indexOf(e)>-1,a=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=o;if(this.lineWrapping=o,this.lineHeight=t,this.charWidth=r,this.lineLength=i,a){this.heightSamples={};for(let l=0;l<s.length;l++){let c=s[l];c<0?l++:this.heightSamples[Math.floor(c*10)]=!0}}return a}}class pB{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class us{constructor(e,t,r,i,s){this.from=e,this.length=t,this.top=r,this.height=i,this.type=s}get to(){return this.from+this.length}get bottom(){return this.top+this.height}join(e){let t=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(e.type)?e.type:[e]);return new us(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var It=function(n){return n[n.ByPos=0]="ByPos",n[n.ByHeight=1]="ByHeight",n[n.ByPosNoHeight=2]="ByPosNoHeight",n}(It||(It={}));const lh=.001;class Xn{constructor(e,t,r=2){this.length=e,this.height=t,this.flags=r}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e,t){this.height!=t&&(Math.abs(this.height-t)>lh&&(e.heightChanged=!0),this.height=t)}replace(e,t,r){return Xn.of(r)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,r,i){let s=this;for(let o=i.length-1;o>=0;o--){let{fromA:a,toA:l,fromB:c,toB:u}=i[o],h=s.lineAt(a,It.ByPosNoHeight,t,0,0),f=h.to>=l?h:s.lineAt(l,It.ByPosNoHeight,t,0,0);for(u+=f.to-l,l=f.to;o>0&&h.from<=i[o-1].toA;)a=i[o-1].fromA,c=i[o-1].fromB,o--,a<h.from&&(h=s.lineAt(a,It.ByPosNoHeight,t,0,0));c+=h.from-a,a=h.from;let p=by.build(r,e,c,u);s=s.replace(a,l,p)}return s.updateHeight(r,0)}static empty(){return new or(0,0)}static of(e){if(e.length==1)return e[0];let t=0,r=e.length,i=0,s=0;for(;;)if(t==r)if(i>s*2){let a=e[t-1];a.break?e.splice(--t,1,a.left,null,a.right):e.splice(--t,1,a.left,a.right),r+=1+a.break,i-=a.size}else if(s>i*2){let a=e[r];a.break?e.splice(r,1,a.left,null,a.right):e.splice(r,1,a.left,a.right),r+=2+a.break,s-=a.size}else break;else if(i<s){let a=e[t++];a&&(i+=a.size)}else{let a=e[--r];a&&(s+=a.size)}let o=0;return e[t-1]==null?(o=1,t--):e[t]==null&&(o=1,r++),new mB(Xn.of(e.slice(0,t)),o,Xn.of(e.slice(r)))}}Xn.prototype.size=1;class JT extends Xn{constructor(e,t,r){super(e,t),this.type=r}blockAt(e,t,r,i){return new us(i,this.length,r,this.height,this.type)}lineAt(e,t,r,i,s){return this.blockAt(0,r,i,s)}forEachLine(e,t,r,i,s,o){e<=s+this.length&&t>=s&&o(this.blockAt(0,r,i,s))}updateHeight(e,t=0,r=!1,i){return i&&i.from<=t&&i.more&&this.setHeight(e,i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class or extends JT{constructor(e,t){super(e,t,Bt.Text),this.collapsed=0,this.widgetHeight=0}replace(e,t,r){let i=r[0];return r.length==1&&(i instanceof or||i instanceof vn&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof vn?i=new or(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):Xn.of(r)}updateHeight(e,t=0,r=!1,i){return i&&i.from<=t&&i.more?this.setHeight(e,i.heights[i.index++]):(r||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class vn extends Xn{constructor(e){super(e,0)}lines(e,t){let r=e.lineAt(t).number,i=e.lineAt(t+this.length).number;return{firstLine:r,lastLine:i,lineHeight:this.height/(i-r+1)}}blockAt(e,t,r,i){let{firstLine:s,lastLine:o,lineHeight:a}=this.lines(t,i),l=Math.max(0,Math.min(o-s,Math.floor((e-r)/a))),{from:c,length:u}=t.line(s+l);return new us(c,u,r+a*l,a,Bt.Text)}lineAt(e,t,r,i,s){if(t==It.ByHeight)return this.blockAt(e,r,i,s);if(t==It.ByPosNoHeight){let{from:h,to:f}=r.lineAt(e);return new us(h,f-h,0,0,Bt.Text)}let{firstLine:o,lineHeight:a}=this.lines(r,s),{from:l,length:c,number:u}=r.lineAt(e);return new us(l,c,i+a*(u-o),a,Bt.Text)}forEachLine(e,t,r,i,s,o){let{firstLine:a,lineHeight:l}=this.lines(r,s);for(let c=Math.max(e,s),u=Math.min(s+this.length,t);c<=u;){let h=r.lineAt(c);c==e&&(i+=l*(h.number-a)),o(new us(h.from,h.length,i,l,Bt.Text)),i+=l,c=h.to+1}}replace(e,t,r){let i=this.length-t;if(i>0){let s=r[r.length-1];s instanceof vn?r[r.length-1]=new vn(s.length+i):r.push(null,new vn(i-1))}if(e>0){let s=r[0];s instanceof vn?r[0]=new vn(e+s.length):r.unshift(new vn(e-1),null)}return Xn.of(r)}decomposeLeft(e,t){t.push(new vn(e-1),null)}decomposeRight(e,t){t.push(null,new vn(this.length-e-1))}updateHeight(e,t=0,r=!1,i){let s=t+this.length;if(i&&i.from<=t+this.length&&i.more){let o=[],a=Math.max(t,i.from),l=-1,c=e.heightChanged;for(i.from>t&&o.push(new vn(i.from-t-1).updateHeight(e,t));a<=s&&i.more;){let h=e.doc.lineAt(a).length;o.length&&o.push(null);let f=i.heights[i.index++];l==-1?l=f:Math.abs(f-l)>=lh&&(l=-2);let p=new or(h,f);p.outdated=!1,o.push(p),a+=h+1}a<=s&&o.push(null,new vn(s-a).updateHeight(e,a));let u=Xn.of(o);return e.heightChanged=c||l<0||Math.abs(u.height-this.height)>=lh||Math.abs(l-this.lines(e.doc,t).lineHeight)>=lh,u}else(r||this.outdated)&&(this.setHeight(e,e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class mB extends Xn{constructor(e,t,r){super(e.length+t+r.length,e.height+r.height,t|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return this.flags&1}blockAt(e,t,r,i){let s=r+this.left.height;return e<s?this.left.blockAt(e,t,r,i):this.right.blockAt(e,t,s,i+this.left.length+this.break)}lineAt(e,t,r,i,s){let o=i+this.left.height,a=s+this.left.length+this.break,l=t==It.ByHeight?e<o:e<a,c=l?this.left.lineAt(e,t,r,i,s):this.right.lineAt(e,t,r,o,a);if(this.break||(l?c.to<a:c.from>a))return c;let u=t==It.ByPosNoHeight?It.ByPosNoHeight:It.ByPos;return l?c.join(this.right.lineAt(a,u,r,o,a)):this.left.lineAt(a,u,r,i,s).join(c)}forEachLine(e,t,r,i,s,o){let a=i+this.left.height,l=s+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,t,r,i,s,o),t>=l&&this.right.forEachLine(e,t,r,a,l,o);else{let c=this.lineAt(l,It.ByPos,r,i,s);e<c.from&&this.left.forEachLine(e,c.from-1,r,i,s,o),c.to>=e&&c.from<=t&&o(c),t>c.to&&this.right.forEachLine(c.to+1,t,r,a,l,o)}}replace(e,t,r){let i=this.left.length+this.break;if(t<i)return this.balanced(this.left.replace(e,t,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,t-i,r));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let a of r)s.push(a);if(e>0&&t_(s,o-1),t<this.length){let a=s.length;this.decomposeRight(t,s),t_(s,a)}return Xn.of(s)}decomposeLeft(e,t){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(r++,e>=r&&t.push(null)),e>r&&this.right.decomposeLeft(e-r,t)}decomposeRight(e,t){let r=this.left.length,i=r+this.break;if(e>=i)return this.right.decomposeRight(e-i,t);e<r&&this.left.decomposeRight(e,t),this.break&&e<i&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?Xn.of(this.break?[e,null,t]:[e,t]):(this.left=e,this.right=t,this.height=e.height+t.height,this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,r=!1,i){let{left:s,right:o}=this,a=t+s.length+this.break,l=null;return i&&i.from<=t+s.length&&i.more?l=s=s.updateHeight(e,t,r,i):s.updateHeight(e,t,r),i&&i.from<=a+o.length&&i.more?l=o=o.updateHeight(e,a,r,i):o.updateHeight(e,a,r),l?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function t_(n,e){let t,r;n[e]==null&&(t=n[e-1])instanceof vn&&(r=n[e+1])instanceof vn&&n.splice(e-1,3,new vn(t.length+1+r.length))}const gB=5;class by{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let r=Math.min(t,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof or?i.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new or(r-this.pos,-1)),this.writtenTo=r,t>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,r){if(e<t||r.heightRelevant){let i=r.widget?r.widget.estimatedHeight:0;i<0&&(i=this.oracle.lineHeight);let s=t-e;r.block?this.addBlock(new JT(s,i,r.type)):(s||i>=gB)&&this.addLineDeco(i,s)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new or(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let r=new vn(t-e);return this.oracle.doc.lineAt(e).to==t&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof or)return e;let t=new or(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine(),e.type==Bt.WidgetAfter&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,e.type!=Bt.WidgetBefore&&(this.covering=e)}addLineDeco(e,t){let r=this.ensureLine();r.length+=t,r.collapsed+=t,r.widgetHeight=Math.max(r.widgetHeight,e),this.writtenTo=this.pos=this.pos+t}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof or)&&!this.isCovered?this.nodes.push(new or(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let r=e;for(let i of this.nodes)i instanceof or&&i.updateHeight(this.oracle,r),r+=i?i.length:1;return this.nodes}static build(e,t,r,i){let s=new by(r,e);return Zt.spans(t,r,i,s,0),s.finish(r)}}function OB(n,e,t){let r=new yB;return Zt.compare(n,e,t,r,0),r.changes}class yB{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,r,i){(e<t||r&&r.heightRelevant||i&&i.heightRelevant)&&Ag(e,t,this.changes,5)}}function bB(n,e){let t=n.getBoundingClientRect(),r=n.ownerDocument,i=r.defaultView||window,s=Math.max(0,t.left),o=Math.min(i.innerWidth,t.right),a=Math.max(0,t.top),l=Math.min(i.innerHeight,t.bottom);for(let c=n.parentNode;c&&c!=r.body;)if(c.nodeType==1){let u=c,h=window.getComputedStyle(u);if((u.scrollHeight>u.clientHeight||u.scrollWidth>u.clientWidth)&&h.overflow!="visible"){let f=u.getBoundingClientRect();s=Math.max(s,f.left),o=Math.min(o,f.right),a=Math.max(a,f.top),l=c==n.parentNode?f.bottom:Math.min(l,f.bottom)}c=h.position=="absolute"||h.position=="fixed"?u.offsetParent:u.parentNode}else if(c.nodeType==11)c=c.host;else break;return{left:s-t.left,right:Math.max(s,o)-t.left,top:a-(t.top+e),bottom:Math.max(a,l)-(t.top+e)}}function vB(n,e){let t=n.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class Up{constructor(e,t,r){this.from=e,this.to=t,this.size=r}static same(e,t){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],s=t[r];if(i.from!=s.from||i.to!=s.to||i.size!=s.size)return!1}return!0}draw(e){return tt.replace({widget:new wB(this.size,e)}).range(this.from,this.to)}}class wB extends bo{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class n_{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scaler=r_,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=rn.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(yy).some(r=>typeof r!="function"&&r.class=="cm-lineWrapping");this.heightOracle=new dB(t),this.stateDeco=e.facet(Jl).filter(r=>typeof r!="function"),this.heightMap=Xn.empty().applyChanges(this.stateDeco,dt.empty,this.heightOracle.setDoc(e.doc),[new ai(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=tt.set(this.lineGaps.map(r=>r.draw(!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let r=0;r<=1;r++){let i=r?t.head:t.anchor;if(!e.some(({from:s,to:o})=>i>=s&&i<=o)){let{from:s,to:o}=this.lineBlockAt(i);e.push(new Su(s,o))}}this.viewports=e.sort((r,i)=>r.from-i.from),this.scaler=this.heightMap.height<=7e6?r_:new SB(this.heightOracle.doc,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.state.doc,0,0,e=>{this.viewportLines.push(this.scaler.scale==1?e:_l(e,this.scaler))})}update(e,t=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=this.state.facet(Jl).filter(c=>typeof c!="function");let i=e.changedRanges,s=ai.extendWithRanges(i,OB(r,this.stateDeco,e?e.changes:en.empty(this.state.doc.length))),o=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),this.heightMap.height!=o&&(e.flags|=2);let a=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<a.from||t.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,t));let l=!e.changes.empty||e.flags&2||a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,this.updateForViewport(),l&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>2e3<<1)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(LT)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,r=window.getComputedStyle(t),i=this.heightOracle,s=r.whiteSpace;this.defaultTextDirection=r.direction=="rtl"?rn.RTL:rn.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),a=o||this.mustMeasureContent||this.contentDOMHeight!=t.clientHeight;this.contentDOMHeight=t.clientHeight,this.mustMeasureContent=!1;let l=0,c=0,u=parseInt(r.paddingTop)||0,h=parseInt(r.paddingBottom)||0;(this.paddingTop!=u||this.paddingBottom!=h)&&(this.paddingTop=u,this.paddingBottom=h,l|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(a=!0),this.editorWidth=e.scrollDOM.clientWidth,l|=8);let f=(this.printing?vB:bB)(t,this.paddingTop),p=f.top-this.pixelViewport.top,d=f.bottom-this.pixelViewport.bottom;this.pixelViewport=f;let m=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(m!=this.inView&&(this.inView=m,m&&(a=!0)),!this.inView&&!this.scrollTarget)return 0;let y=t.clientWidth;if((this.contentDOMWidth!=y||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=y,this.editorHeight=e.scrollDOM.clientHeight,l|=8),a){let b=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(b)&&(o=!0),o||i.lineWrapping&&Math.abs(y-this.contentDOMWidth)>i.charWidth){let{lineHeight:O,charWidth:v}=e.docView.measureTextSize();o=O>0&&i.refresh(s,O,v,y/v,b),o&&(e.docView.minWidth=0,l|=8)}p>0&&d>0?c=Math.max(p,d):p<0&&d<0&&(c=Math.min(p,d)),i.heightChanged=!1;for(let O of this.viewports){let v=O.from==this.viewport.from?b:e.docView.measureVisibleLineHeights(O);this.heightMap=(o?Xn.empty().applyChanges(this.stateDeco,dt.empty,this.heightOracle,[new ai(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,o,new pB(O.from,v))}i.heightChanged&&(l|=2)}let w=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return w&&(this.viewport=this.getViewport(c,this.scrollTarget)),this.updateForViewport(),(l&2||w)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>2e3<<1)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),l|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),l}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,s=this.state.doc,{visibleTop:o,visibleBottom:a}=this,l=new Su(i.lineAt(o-r*1e3,It.ByHeight,s,0,0).from,i.lineAt(a+(1-r)*1e3,It.ByHeight,s,0,0).to);if(t){let{head:c}=t.range;if(c<l.from||c>l.to){let u=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),h=i.lineAt(c,It.ByPos,s,0,0),f;t.y=="center"?f=(h.top+h.bottom)/2-u/2:t.y=="start"||t.y=="nearest"&&c<l.from?f=h.top:f=h.bottom-u,l=new Su(i.lineAt(f-1e3/2,It.ByHeight,s,0,0).from,i.lineAt(f+u+1e3/2,It.ByHeight,s,0,0).to)}}return l}mapViewport(e,t){let r=t.mapPos(e.from,-1),i=t.mapPos(e.to,1);return new Su(this.heightMap.lineAt(r,It.ByPos,this.state.doc,0,0).from,this.heightMap.lineAt(i,It.ByPos,this.state.doc,0,0).to)}viewportIsAppropriate({from:e,to:t},r=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,It.ByPos,this.state.doc,0,0),{bottom:s}=this.heightMap.lineAt(t,It.ByPos,this.state.doc,0,0),{visibleTop:o,visibleBottom:a}=this;return(e==0||i<=o-Math.max(10,Math.min(-r,250)))&&(t==this.state.doc.length||s>=a+Math.max(10,Math.min(r,250)))&&i>o-2*1e3&&s<a+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let r=[];for(let i of e)t.touchesRange(i.from,i.to)||r.push(new Up(t.mapPos(i.from),t.mapPos(i.to),i.size));return r}ensureLineGaps(e,t){let r=this.heightOracle.lineWrapping,i=r?1e4:2e3,s=i>>1,o=i<<1;if(this.defaultTextDirection!=rn.LTR&&!r)return[];let a=[],l=(c,u,h,f)=>{if(u-c<s)return;let p=this.state.selection.main,d=[p.from];p.empty||d.push(p.to);for(let y of d)if(y>c&&y<u){l(c,y-10,h,f),l(y+10,u,h,f);return}let m=xB(e,y=>y.from>=h.from&&y.to<=h.to&&Math.abs(y.from-c)<s&&Math.abs(y.to-u)<s&&!d.some(w=>y.from<w&&y.to>w));if(!m){if(u<h.to&&t&&r&&t.visibleRanges.some(y=>y.from<=u&&y.to>=u)){let y=t.moveToLineBoundary(Oe.cursor(u),!1,!0).head;y>c&&(u=y)}m=new Up(c,u,this.gapSize(h,c,u,f))}a.push(m)};for(let c of this.viewportLines){if(c.length<o)continue;let u=_B(c.from,c.to,this.stateDeco);if(u.total<o)continue;let h=this.scrollTarget?this.scrollTarget.range.head:null,f,p;if(r){let d=i/this.heightOracle.lineLength*this.heightOracle.lineHeight,m,y;if(h!=null){let w=Tu(u,h),b=((this.visibleBottom-this.visibleTop)/2+d)/c.height;m=w-b,y=w+b}else m=(this.visibleTop-c.top-d)/c.height,y=(this.visibleBottom-c.top+d)/c.height;f=ku(u,m),p=ku(u,y)}else{let d=u.total*this.heightOracle.charWidth,m=i*this.heightOracle.charWidth,y,w;if(h!=null){let b=Tu(u,h),O=((this.pixelViewport.right-this.pixelViewport.left)/2+m)/d;y=b-O,w=b+O}else y=(this.pixelViewport.left-m)/d,w=(this.pixelViewport.right+m)/d;f=ku(u,y),p=ku(u,w)}f>c.from&&l(c.from,f,c,u),p<c.to&&l(p,c.to,c,u)}return a}gapSize(e,t,r,i){let s=Tu(i,r)-Tu(i,t);return this.heightOracle.lineWrapping?e.height*s:i.total*this.heightOracle.charWidth*s}updateLineGaps(e){Up.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=tt.set(e.map(t=>t.draw(this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];Zt.spans(e,this.viewport.from,this.viewport.to,{span(i,s){t.push({from:i,to:s})},point(){}},20);let r=t.length!=this.visibleRanges.length||this.visibleRanges.some((i,s)=>i.from!=t[s].from||i.to!=t[s].to);return this.visibleRanges=t,r?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||_l(this.heightMap.lineAt(e,It.ByPos,this.state.doc,0,0),this.scaler)}lineBlockAtHeight(e){return _l(this.heightMap.lineAt(this.scaler.fromDOM(e),It.ByHeight,this.state.doc,0,0),this.scaler)}elementAtHeight(e){return _l(this.heightMap.blockAt(this.scaler.fromDOM(e),this.state.doc,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Su{constructor(e,t){this.from=e,this.to=t}}function _B(n,e,t){let r=[],i=n,s=0;return Zt.spans(t,n,e,{span(){},point(o,a){o>i&&(r.push({from:i,to:o}),s+=o-i),i=a}},20),i<e&&(r.push({from:i,to:e}),s+=e-i),{total:s,ranges:r}}function ku({total:n,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let r=Math.floor(n*t);for(let i=0;;i++){let{from:s,to:o}=e[i],a=o-s;if(r<=a)return s+r;r-=a}}function Tu(n,e){let t=0;for(let{from:r,to:i}of n.ranges){if(e<=i){t+=e-r;break}t+=i-r}return t/n.total}function xB(n,e){for(let t of n)if(e(t))return t}const r_={toDOM(n){return n},fromDOM(n){return n},scale:1};class SB{constructor(e,t,r){let i=0,s=0,o=0;this.viewports=r.map(({from:a,to:l})=>{let c=t.lineAt(a,It.ByPos,e,0,0).top,u=t.lineAt(l,It.ByPos,e,0,0).bottom;return i+=u-c,{from:a,to:l,top:c,bottom:u,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(t.height-i);for(let a of this.viewports)a.domTop=o+(a.top-s)*this.scale,o=a.domBottom=a.domTop+(a.bottom-a.top),s=a.bottom}toDOM(e){for(let t=0,r=0,i=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.top)return i+(e-r)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);r=s.bottom,i=s.domBottom}}fromDOM(e){for(let t=0,r=0,i=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.domTop)return r+(e-i)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);r=s.bottom,i=s.domBottom}}}function _l(n,e){if(e.scale==1)return n;let t=e.toDOM(n.top),r=e.toDOM(n.bottom);return new us(n.from,n.length,t,r-t,Array.isArray(n.type)?n.type.map(i=>_l(i,e)):n.type)}const Eu=et.define({combine:n=>n.join(" ")}),Dg=et.define({combine:n=>n.indexOf(!0)>-1}),Mg=Ss.newName(),eE=Ss.newName(),tE=Ss.newName(),nE={"&light":"."+eE,"&dark":"."+tE};function $g(n,e,t){return new Ss(e,{finish(r){return/&/.test(r)?r.replace(/&\w*/,i=>{if(i=="&")return n;if(!t||!t[i])throw new RangeError(`Unsupported selector: ${i}`);return t[i]}):n+" "+r}})}const kB=$g("."+Mg,{"&.cm-editor":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,minHeight:"100%",display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},"&.cm-focused .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},nE);class TB{constructor(e,t,r,i){this.typeOver=i,this.bounds=null,this.text="";let{impreciseHead:s,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,r,0))){let a=s||o?[]:CB(e),l=new VT(a,e.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=AB(a,this.bounds.from)}else{let a=e.observer.selectionRange,l=s&&s.node==a.focusNode&&s.offset==a.focusOffset||!la(e.contentDOM,a.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(a.focusNode,a.focusOffset),c=o&&o.node==a.anchorNode&&o.offset==a.anchorOffset||!la(e.contentDOM,a.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(a.anchorNode,a.anchorOffset);this.newSel=Oe.single(c,l)}}}function rE(n,e){let t,{newSel:r}=e,i=n.state.selection.main;if(e.bounds){let{from:s,to:o}=e.bounds,a=i.from,l=null;(n.inputState.lastKeyCode===8&&n.inputState.lastKeyTime>Date.now()-100||Ve.android&&e.text.length<o-s)&&(a=i.to,l="end");let c=EB(n.state.doc.sliceString(s,o,cs),e.text,a-s,l);c&&(Ve.chrome&&n.inputState.lastKeyCode==13&&c.toB==c.from+2&&e.text.slice(c.from,c.toB)==cs+cs&&c.toB--,t={from:s+c.from,to:s+c.toA,insert:dt.of(e.text.slice(c.from,c.toB).split(cs))})}else r&&(!n.hasFocus||!n.state.facet(Jf)||r.main.eq(i))&&(r=null);if(!t&&!r)return!1;if(!t&&e.typeOver&&!i.empty&&r&&r.main.empty?t={from:i.from,to:i.to,insert:n.state.doc.slice(i.from,i.to)}:t&&t.from>=i.from&&t.to<=i.to&&(t.from!=i.from||t.to!=i.to)&&i.to-i.from-(t.to-t.from)<=4?t={from:i.from,to:i.to,insert:n.state.doc.slice(i.from,t.from).append(t.insert).append(n.state.doc.slice(t.to,i.to))}:(Ve.mac||Ve.android)&&t&&t.from==t.to&&t.from==i.head-1&&/^\. ?$/.test(t.insert.toString())?(r&&t.insert.length==2&&(r=Oe.single(r.main.anchor-1,r.main.head-1)),t={from:i.from,to:i.to,insert:dt.of([" "])}):Ve.chrome&&t&&t.from==t.to&&t.from==i.head&&t.insert.toString()==`
 `&&n.lineWrapping&&(r&&(r=Oe.single(r.main.anchor-1,r.main.head-1)),t={from:i.from,to:i.to,insert:dt.of([" "])}),t){let s=n.state;if(Ve.ios&&n.inputState.flushIOSKey(n)||Ve.android&&(t.from==i.from&&t.to==i.to&&t.insert.length==1&&t.insert.lines==2&&Zo(n.contentDOM,"Enter",13)||t.from==i.from-1&&t.to==i.to&&t.insert.length==0&&Zo(n.contentDOM,"Backspace",8)||t.from==i.from&&t.to==i.to+1&&t.insert.length==0&&Zo(n.contentDOM,"Delete",46)))return!0;let o=t.insert.toString();if(n.state.facet(QT).some(c=>c(n,t.from,t.to,o)))return!0;n.inputState.composing>=0&&n.inputState.composing++;let a;if(t.from>=i.from&&t.to<=i.to&&t.to-t.from>=(i.to-i.from)/3&&(!r||r.main.empty&&r.main.from==t.from+t.insert.length)&&n.inputState.composing<0){let c=i.from<t.from?s.sliceDoc(i.from,t.from):"",u=i.to>t.to?s.sliceDoc(t.to,i.to):"";a=s.replaceSelection(n.state.toText(c+t.insert.sliceString(0,void 0,n.state.lineBreak)+u))}else{let c=s.changes(t),u=r&&!s.selection.main.eq(r.main)&&r.main.to<=c.newLength?r.main:void 0;if(s.selection.ranges.length>1&&n.inputState.composing>=0&&t.to<=i.to&&t.to>=i.to-10){let h=n.state.sliceDoc(t.from,t.to),f=WT(n)||n.state.doc.lineAt(i.head),p=i.to-t.to,d=i.to-i.from;a=s.changeByRange(m=>{if(m.from==i.from&&m.to==i.to)return{changes:c,range:u||m.map(c)};let y=m.to-p,w=y-h.length;if(m.to-m.from!=d||n.state.sliceDoc(w,y)!=h||f&&m.to>=f.from&&m.from<=f.to)return{range:m};let b=s.changes({from:w,to:y,insert:t.insert}),O=m.to-i.to;return{changes:b,range:u?Oe.range(Math.max(0,u.anchor+O),Math.max(0,u.head+O)):m.map(b)}})}else a={changes:c,selection:u&&s.selection.replaceRange(u)}}let l="input.type";return n.composing&&(l+=".compose",n.inputState.compositionFirstChange&&(l+=".start",n.inputState.compositionFirstChange=!1)),n.dispatch(a,{scrollIntoView:!0,userEvent:l}),!0}else if(r&&!r.main.eq(i)){let s=!1,o="select";return n.inputState.lastSelectionTime>Date.now()-50&&(n.inputState.lastSelectionOrigin=="select"&&(s=!0),o=n.inputState.lastSelectionOrigin),n.dispatch({selection:r,scrollIntoView:s,userEvent:o}),!0}else return!1}function EB(n,e,t,r){let i=Math.min(n.length,e.length),s=0;for(;s<i&&n.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==i&&n.length==e.length)return null;let o=n.length,a=e.length;for(;o>0&&a>0&&n.charCodeAt(o-1)==e.charCodeAt(a-1);)o--,a--;if(r=="end"){let l=Math.max(0,s-Math.min(o,a));t-=o+l-s}if(o<s&&n.length<e.length){let l=t<=s&&t>=o?s-t:0;s-=l,a=s+(a-o),o=s}else if(a<s){let l=t<=s&&t>=a?s-t:0;s-=l,o=s+(o-a),a=s}return{from:s,toA:o,toB:a}}function CB(n){let e=[];if(n.root.activeElement!=n.contentDOM)return e;let{anchorNode:t,anchorOffset:r,focusNode:i,focusOffset:s}=n.observer.selectionRange;return t&&(e.push(new $w(t,r)),(i!=t||s!=r)&&e.push(new $w(i,s))),e}function AB(n,e){if(n.length==0)return null;let t=n[0].pos,r=n.length==2?n[1].pos:t;return t>-1&&r>-1?Oe.single(t+e,r+e):null}const PB={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Vp=Ve.ie&&Ve.ie_version<=11;class RB{constructor(e){this.view=e,this.active=!1,this.selectionRange=new S5,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resize=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let r of t)this.queue.push(r);(Ve.ie&&Ve.ie_version<=11||Ve.ios&&e.composing)&&t.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),Vp&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),typeof ResizeObserver=="function"&&(this.resize=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resize.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runScrollHandlers(this.view,e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,r)=>t!=e[r]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,i=this.selectionRange;if(r.state.facet(Jf)?r.root.activeElement!=this.dom:!ah(r.dom,i))return;let s=i.anchorNode&&r.docView.nearest(i.anchorNode);if(s&&s.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(Ve.ie&&Ve.ie_version<=11||Ve.android&&Ve.chrome)&&!r.state.selection.main.empty&&i.focusNode&&Bh(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=Ve.safari&&e.root.nodeType==11&&w5(this.dom.ownerDocument)==this.dom&&IB(this.view)||$h(e.root);if(!t||this.selectionRange.eq(t))return!1;let r=ah(this.dom,t);return r&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&T5(this.dom,t)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(t),r&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let r=this.dom;r;)if(r.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=t)r.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,PB),Vp&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){!this.active||(this.active=!1,this.observer.disconnect(),Vp&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var r;if(!this.delayedAndroidKey){let i=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),!this.flush()&&s.force&&Zo(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(i)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((r=this.delayedAndroidKey)===null||r===void 0)&&r.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}processRecords(){let e=this.queue;for(let s of this.observer.takeRecords())e.push(s);e.length&&(this.queue=[]);let t=-1,r=-1,i=!1;for(let s of e){let o=this.readMutation(s);!o||(o.typeOver&&(i=!0),t==-1?{from:t,to:r}=o:(t=Math.min(o.from,t),r=Math.max(o.to,r)))}return{from:t,to:r,typeOver:i}}readChange(){let{from:e,to:t,typeOver:r}=this.processRecords(),i=this.selectionChanged&&ah(this.dom,this.selectionRange);return e<0&&!i?null:(e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1,new TB(this.view,e,t,r))}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return!1;let r=this.view.state,i=rE(this.view,t);return this.view.state==r&&this.view.update([]),i}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.dirty|=4),e.type=="childList"){let r=i_(t,e.previousSibling||e.target.previousSibling,-1),i=i_(t,e.nextSibling||e.target.nextSibling,1);return{from:r?t.posAfter(r):t.posAtStart,to:i?t.posBefore(i):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var e,t,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(r=this.resize)===null||r===void 0||r.disconnect();for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function i_(n,e,t){for(;e;){let r=Nt.get(e);if(r&&r.parent==n)return r;let i=e.parentNode;e=i!=n.dom?i:t>0?e.nextSibling:e.previousSibling}return null}function IB(n){let e=null;function t(l){l.preventDefault(),l.stopImmediatePropagation(),e=l.getTargetRanges()[0]}if(n.contentDOM.addEventListener("beforeinput",t,!0),n.dom.ownerDocument.execCommand("indent"),n.contentDOM.removeEventListener("beforeinput",t,!0),!e)return null;let r=e.startContainer,i=e.startOffset,s=e.endContainer,o=e.endOffset,a=n.docView.domAtPos(n.state.selection.main.anchor);return Bh(a.node,a.offset,s,o)&&([r,i,s,o]=[s,o,r,i]),{anchorNode:r,anchorOffset:i,focusNode:s,focusOffset:o}}class Xe{constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: absolute; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=e.dispatch||(t=>this.update([t])),this.dispatch=this.dispatch.bind(this),this._root=e.root||k5(e.parent)||document,this.viewState=new n_(e.state||Ot.create(e)),this.plugins=this.state.facet(vl).map(t=>new $p(t));for(let t of this.plugins)t.update(this);this.observer=new RB(this),this.inputState=new eB(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new Bw(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),e.parent&&e.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}dispatch(...e){this._dispatch(e.length==1&&e[0]instanceof zt?e[0]:this.state.update(...e))}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,r=!1,i,s=this.state;for(let c of e){if(c.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=c.state}if(this.destroyed){this.viewState.state=s;return}let o=this.observer.delayedAndroidKey,a=null;if(o?(this.observer.clearDelayedAndroidKey(),a=this.observer.readChange(),(a&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(a=null)):this.observer.clear(),s.facet(Ot.phrases)!=this.state.facet(Ot.phrases))return this.setState(s);i=Vh.create(this,s,e);let l=this.viewState.scrollTarget;try{this.updateState=2;for(let c of e){if(l&&(l=l.map(c.changes)),c.scrollIntoView){let{main:u}=c.state.selection;l=new Uh(u.empty?u:Oe.cursor(u.head,u.head>u.anchor?-1:1))}for(let u of c.effects)u.is(Dw)&&(l=u.value)}this.viewState.update(i,l),this.bidiCache=Wh.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),t=this.docView.update(i),this.state.facet(wl)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(c=>c.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(Eu)!=i.state.facet(Eu)&&(this.viewState.mustMeasureContent=!0),(t||r||l||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!i.empty)for(let c of this.state.facet(Pg))c(i);a&&!rE(this,a)&&o.force&&Zo(this.contentDOM,o.key,o.keyCode)}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let r of this.plugins)r.destroy(this);this.viewState=new n_(e),this.plugins=e.facet(vl).map(r=>new $p(r)),this.pluginMap.clear();for(let r of this.plugins)r.update(this);this.docView=new Bw(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(vl),r=e.state.facet(vl);if(t!=r){let i=[];for(let s of r){let o=t.indexOf(s);if(o<0)i.push(new $p(s));else{let a=this.plugins[o];a.mustUpdate=e,i.push(a)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=i,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this)}measure(e=!0){if(this.destroyed)return;this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,{scrollHeight:r,scrollTop:i,clientHeight:s}=this.scrollDOM,o=i>r-s-4?r:i;try{for(let a=0;;a++){this.updateState=1;let l=this.viewport,c=this.viewState.lineBlockAtHeight(o),u=this.viewState.measure(this);if(!u&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let h=[];u&4||([this.measureRequests,h]=[h,this.measureRequests]);let f=h.map(y=>{try{return y.read(this)}catch(w){return ds(this.state,w),s_}}),p=Vh.create(this,this.state,[]),d=!1,m=!1;p.flags|=u,t?t.flags|=u:t=p,this.updateState=2,p.empty||(this.updatePlugins(p),this.inputState.update(p),this.updateAttrs(),d=this.docView.update(p));for(let y=0;y<h.length;y++)if(f[y]!=s_)try{let w=h[y];w.write&&w.write(f[y],this)}catch(w){ds(this.state,w)}if(this.viewState.editorHeight)if(this.viewState.scrollTarget)this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,m=!0;else{let y=this.viewState.lineBlockAt(c.from).top-c.top;(y>1||y<-1)&&(this.scrollDOM.scrollTop+=y,m=!0)}if(d&&this.docView.updateSelection(!0),this.viewport.from==l.from&&this.viewport.to==l.to&&!m&&this.measureRequests.length==0)break}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let a of this.state.facet(Pg))a(t)}get themeClasses(){return Mg+" "+(this.state.facet(Dg)?tE:eE)+" "+this.state.facet(Eu)}updateAttrs(){let e=o_(this,DT,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(Jf)?"true":"false",class:"cm-content",style:`${Ve.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),o_(this,yy,t);let r=this.observer.ignore(()=>{let i=Cg(this.contentDOM,this.contentAttrs,t),s=Cg(this.dom,this.editorAttrs,e);return i||s});return this.editorAttrs=e,this.contentAttrs=t,r}showAnnouncements(e){let t=!0;for(let r of e)for(let i of r.effects)if(i.is(Xe.announce)){t&&(this.announceDOM.textContent=""),t=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet(wl),Ss.mount(this.root,this.styleModules.concat(kB).reverse())}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find(r=>r.spec==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,r){return Fp(this,e,qw(this,e,t,r))}moveByGroup(e,t){return Fp(this,e,qw(this,e,t,r=>K5(this,e.head,r)))}moveToLineBoundary(e,t,r=!0){return Y5(this,e,t,r)}moveVertically(e,t,r){return Fp(this,e,J5(this,e,t,r))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),qT(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let r=this.docView.coordsAt(e,t);if(!r||r.left==r.right)return r;let i=this.state.doc.lineAt(e),s=this.bidiSpans(i),o=s[Go.find(s,e-i.from,-1,t)];return py(r,o.dir==rn.LTR==t>0)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(NT)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>QB)return FT(e.length);let t=this.textDirectionAt(e.from);for(let i of this.bidiCache)if(i.from==e.from&&i.dir==t)return i.order;let r=M5(e.text,t);return this.bidiCache.push(new Wh(e.from,e.to,t,r)),r}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||Ve.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{gT(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return Dw.of(new Uh(typeof e=="number"?Oe.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}static domEventHandlers(e){return Tr.define(()=>({}),{eventHandlers:e})}static theme(e,t){let r=Ss.newName(),i=[Eu.of(r),wl.of($g(`.${r}`,e))];return t&&t.dark&&i.push(Dg.of(!0)),i}static baseTheme(e){return yo.lowest(wl.of($g("."+Mg,e,nE)))}static findFromDOM(e){var t;let r=e.querySelector(".cm-content"),i=r&&Nt.get(r)||Nt.get(e);return((t=i==null?void 0:i.rootView)===null||t===void 0?void 0:t.view)||null}}Xe.styleModule=wl;Xe.inputHandler=QT;Xe.perLineTextDirection=NT;Xe.exceptionSink=IT;Xe.updateListener=Pg;Xe.editable=Jf;Xe.mouseSelectionStyle=RT;Xe.dragMovesSelection=PT;Xe.clickAddsSelectionRange=AT;Xe.decorations=Jl;Xe.atomicRanges=MT;Xe.scrollMargins=$T;Xe.darkTheme=Dg;Xe.contentAttributes=yy;Xe.editorAttributes=DT;Xe.lineWrapping=Xe.contentAttributes.of({class:"cm-lineWrapping"});Xe.announce=wt.define();const QB=4096,s_={};class Wh{constructor(e,t,r,i){this.from=e,this.to=t,this.dir=r,this.order=i}static update(e,t){if(t.empty)return e;let r=[],i=e.length?e[e.length-1].dir:rn.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==i&&!t.touchesRange(o.from,o.to)&&r.push(new Wh(t.mapPos(o.from,1),t.mapPos(o.to,-1),o.dir,o.order))}return r}}function o_(n,e,t){for(let r=n.state.facet(e),i=r.length-1;i>=0;i--){let s=r[i],o=typeof s=="function"?s(n):s;o&&Eg(o,t)}return t}const NB=Ve.mac?"mac":Ve.windows?"win":Ve.linux?"linux":"key";function LB(n,e){const t=n.split(/-(?!$)/);let r=t[t.length-1];r=="Space"&&(r=" ");let i,s,o,a;for(let l=0;l<t.length-1;++l){const c=t[l];if(/^(cmd|meta|m)$/i.test(c))a=!0;else if(/^a(lt)?$/i.test(c))i=!0;else if(/^(c|ctrl|control)$/i.test(c))s=!0;else if(/^s(hift)?$/i.test(c))o=!0;else if(/^mod$/i.test(c))e=="mac"?a=!0:s=!0;else throw new Error("Unrecognized modifier name: "+c)}return i&&(r="Alt-"+r),s&&(r="Ctrl-"+r),a&&(r="Meta-"+r),o&&(r="Shift-"+r),r}function Cu(n,e,t){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t!==!1&&e.shiftKey&&(n="Shift-"+n),n}const DB=yo.default(Xe.domEventHandlers({keydown(n,e){return sE(iE(e.state),n,e,"editor")}})),ec=et.define({enables:DB}),a_=new WeakMap;function iE(n){let e=n.facet(ec),t=a_.get(e);return t||a_.set(e,t=BB(e.reduce((r,i)=>r.concat(i),[]))),t}function MB(n,e,t){return sE(iE(n.state),e,n,t)}let is=null;const $B=4e3;function BB(n,e=NB){let t=Object.create(null),r=Object.create(null),i=(o,a)=>{let l=r[o];if(l==null)r[o]=a;else if(l!=a)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,a,l,c)=>{var u,h;let f=t[o]||(t[o]=Object.create(null)),p=a.split(/ (?!$)/).map(y=>LB(y,e));for(let y=1;y<p.length;y++){let w=p.slice(0,y).join(" ");i(w,!0),f[w]||(f[w]={preventDefault:!0,run:[b=>{let O=is={view:b,prefix:w,scope:o};return setTimeout(()=>{is==O&&(is=null)},$B),!0}]})}let d=p.join(" ");i(d,!1);let m=f[d]||(f[d]={preventDefault:!1,run:((h=(u=f._any)===null||u===void 0?void 0:u.run)===null||h===void 0?void 0:h.slice())||[]});l&&m.run.push(l),c&&(m.preventDefault=!0)};for(let o of n){let a=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let c of a){let u=t[c]||(t[c]=Object.create(null));u._any||(u._any={preventDefault:!1,run:[]});for(let h in u)u[h].run.push(o.any)}let l=o[e]||o.key;if(!!l)for(let c of a)s(c,l,o.run,o.preventDefault),o.shift&&s(c,"Shift-"+l,o.shift,o.preventDefault)}return t}function sE(n,e,t,r){let i=v5(e),s=zo(i,0),o=Lh(s)==i.length&&i!=" ",a="",l=!1;is&&is.view==t&&is.scope==r&&(a=is.prefix+" ",(l=zT.indexOf(e.keyCode)<0)&&(is=null));let c=new Set,u=d=>{if(d){for(let m of d.run)if(!c.has(m)&&(c.add(m),m(t,e)))return!0;d.preventDefault&&(l=!0)}return!1},h=n[r],f,p;if(h){if(u(h[a+Cu(i,e,!o)]))return!0;if(o&&(e.altKey||e.metaKey||e.ctrlKey)&&(f=ks[e.keyCode])&&f!=i){if(u(h[a+Cu(f,e,!0)]))return!0;if(e.shiftKey&&(p=Gl[e.keyCode])!=i&&p!=f&&u(h[a+Cu(p,e,!1)]))return!0}else if(o&&e.shiftKey&&u(h[a+Cu(i,e,!0)]))return!0;if(u(h._any))return!0}return l}class oE{constructor(e,t,r,i,s){this.className=e,this.left=t,this.top=r,this.width=i,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width>=0&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}}function FB(n,e){return n.constructor==e.constructor&&n.eq(e)}class UB{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(ch)!=e.state.facet(ch)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&e.view.requestMeasure(this.measureReq)}setOrder(e){let t=0,r=e.facet(ch);for(;t<r.length&&r[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}draw(e){if(e.length!=this.drawn.length||e.some((t,r)=>!FB(t,this.drawn[r]))){let t=this.dom.firstChild,r=0;for(let i of e)i.update&&t&&i.constructor&&this.drawn[r].constructor&&i.update(t,this.drawn[r])?(t=t.nextSibling,r++):this.dom.insertBefore(i.draw(),t);for(;t;){let i=t.nextSibling;t.remove(),t=i}this.drawn=e}}destroy(){this.dom.remove()}}const ch=et.define();function aE(n){return[Tr.define(e=>new UB(e,n)),ch.of(n)]}const lE=!Ve.ios,tc=et.define({combine(n){return Zf(n,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function l_(n={}){return[tc.of(n),VB,WB,jB,LT.of(!0)]}function cE(n){return n.startState.facet(tc)!=n.startState.facet(tc)}const VB=aE({above:!0,markers(n){let{state:e}=n,t=e.facet(tc),r=[];for(let i of e.selection.ranges){let s=i==e.selection.main;if(i.empty?!s||lE:t.drawRangeCursor){let o=XB(n,i,s);o&&r.push(o)}}return r},update(n,e){n.transactions.some(r=>r.scrollIntoView)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let t=cE(n);return t&&c_(n.state,e),n.docChanged||n.selectionSet||t},mount(n,e){c_(e.state,n)},class:"cm-cursorLayer"});function c_(n,e){e.style.animationDuration=n.facet(tc).cursorBlinkRate+"ms"}const WB=aE({above:!1,markers(n){return n.state.selection.ranges.map(e=>e.empty?[]:qB(n,e)).reduce((e,t)=>e.concat(t))},update(n,e){return n.docChanged||n.selectionSet||n.viewportChanged||cE(n)},class:"cm-selectionLayer"}),uE={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};lE&&(uE[".cm-line"].caretColor="transparent !important");const jB=yo.highest(Xe.theme(uE));function hE(n){let e=n.scrollDOM.getBoundingClientRect();return{left:(n.textDirection==rn.LTR?e.left:e.right-n.scrollDOM.clientWidth)-n.scrollDOM.scrollLeft,top:e.top-n.scrollDOM.scrollTop}}function u_(n,e,t){let r=Oe.cursor(e);return{from:Math.max(t.from,n.moveToLineBoundary(r,!1,!0).from),to:Math.min(t.to,n.moveToLineBoundary(r,!0,!0).from),type:Bt.Text}}function h_(n,e){let t=n.lineBlockAt(e);if(Array.isArray(t.type)){for(let r of t.type)if(r.to>e||r.to==e&&(r.to==t.to||r.type==Bt.Text))return r}return t}function qB(n,e){if(e.to<=n.viewport.from||e.from>=n.viewport.to)return[];let t=Math.max(e.from,n.viewport.from),r=Math.min(e.to,n.viewport.to),i=n.textDirection==rn.LTR,s=n.contentDOM,o=s.getBoundingClientRect(),a=hE(n),l=window.getComputedStyle(s.firstChild),c=o.left+parseInt(l.paddingLeft)+Math.min(0,parseInt(l.textIndent)),u=o.right-parseInt(l.paddingRight),h=h_(n,t),f=h_(n,r),p=h.type==Bt.Text?h:null,d=f.type==Bt.Text?f:null;if(n.lineWrapping&&(p&&(p=u_(n,t,p)),d&&(d=u_(n,r,d))),p&&d&&p.from==d.from)return y(w(e.from,e.to,p));{let O=p?w(e.from,null,p):b(h,!1),v=d?w(null,e.to,d):b(f,!0),_=[];return(p||h).to<(d||f).from-1?_.push(m(c,O.bottom,u,v.top)):O.bottom<v.top&&n.elementAtHeight((O.bottom+v.top)/2).type==Bt.Text&&(O.bottom=v.top=(O.bottom+v.top)/2),y(O).concat(_).concat(y(v))}function m(O,v,_,S){return new oE("cm-selectionBackground",O-a.left,v-a.top-.01,_-O,S-v+.01)}function y({top:O,bottom:v,horizontal:_}){let S=[];for(let R=0;R<_.length;R+=2)S.push(m(_[R],O,_[R+1],v));return S}function w(O,v,_){let S=1e9,R=-1e9,N=[];function T(I,B,k,j,ne){let Z=n.coordsAtPos(I,I==_.to?-2:2),le=n.coordsAtPos(k,k==_.from?2:-2);S=Math.min(Z.top,le.top,S),R=Math.max(Z.bottom,le.bottom,R),ne==rn.LTR?N.push(i&&B?c:Z.left,i&&j?u:le.right):N.push(!i&&j?c:le.left,!i&&B?u:Z.right)}let C=O!=null?O:_.from,Q=v!=null?v:_.to;for(let I of n.visibleRanges)if(I.to>C&&I.from<Q)for(let B=Math.max(I.from,C),k=Math.min(I.to,Q);;){let j=n.state.doc.lineAt(B);for(let ne of n.bidiSpans(j)){let Z=ne.from+j.from,le=ne.to+j.from;if(Z>=k)break;le>B&&T(Math.max(Z,B),O==null&&Z<=C,Math.min(le,k),v==null&&le>=Q,ne.dir)}if(B=j.to+1,B>=k)break}return N.length==0&&T(C,O==null,Q,v==null,n.textDirection),{top:S,bottom:R,horizontal:N}}function b(O,v){let _=o.top+(v?O.top:O.bottom);return{top:_,bottom:_,horizontal:[]}}}function XB(n,e,t){let r=n.coordsAtPos(e.head,e.assoc||1);if(!r)return null;let i=hE(n);return new oE(t?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",r.left-i.left,r.top-i.top,-1,r.bottom-r.top)}function f_(n,e,t,r,i){e.lastIndex=0;for(let s=n.iterRange(t,r),o=t,a;!s.next().done;o+=s.value.length)if(!s.lineBreak)for(;a=e.exec(s.value);)i(o+a.index,a)}function zB(n,e){let t=n.visibleRanges;if(t.length==1&&t[0].from==n.viewport.from&&t[0].to==n.viewport.to)return t;let r=[];for(let{from:i,to:s}of t)i=Math.max(n.state.doc.lineAt(i).from,i-e),s=Math.min(n.state.doc.lineAt(s).to,s+e),r.length&&r[r.length-1].to>=i?r[r.length-1].to=s:r.push({from:i,to:s});return r}class HB{constructor(e){const{regexp:t,decoration:r,decorate:i,boundary:s,maxLength:o=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,i)this.addMatch=(a,l,c,u)=>i(u,c,c+a[0].length,a,l);else if(typeof r=="function")this.addMatch=(a,l,c,u)=>{let h=r(a,l,c);h&&u(c,c+a[0].length,h)};else if(r)this.addMatch=(a,l,c,u)=>u(c,c+a[0].length,r);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=o}createDeco(e){let t=new xs,r=t.add.bind(t);for(let{from:i,to:s}of zB(e,this.maxLength))f_(e.state.doc,this.regexp,i,s,(o,a)=>this.addMatch(a,e,o,r));return t.finish()}updateDeco(e,t){let r=1e9,i=-1;return e.docChanged&&e.changes.iterChanges((s,o,a,l)=>{l>e.view.viewport.from&&a<e.view.viewport.to&&(r=Math.min(a,r),i=Math.max(l,i))}),e.viewportChanged||i-r>1e3?this.createDeco(e.view):i>-1?this.updateRange(e.view,t.map(e.changes),r,i):t}updateRange(e,t,r,i){for(let s of e.visibleRanges){let o=Math.max(s.from,r),a=Math.min(s.to,i);if(a>o){let l=e.state.doc.lineAt(o),c=l.to<a?e.state.doc.lineAt(a):l,u=Math.max(s.from,l.from),h=Math.min(s.to,c.to);if(this.boundary){for(;o>l.from;o--)if(this.boundary.test(l.text[o-1-l.from])){u=o;break}for(;a<c.to;a++)if(this.boundary.test(c.text[a-c.from])){h=a;break}}let f=[],p,d=(m,y,w)=>f.push(w.range(m,y));if(l==c)for(this.regexp.lastIndex=u-l.from;(p=this.regexp.exec(l.text))&&p.index<h-l.from;)this.addMatch(p,e,p.index+l.from,d);else f_(e.state.doc,this.regexp,u,h,(m,y)=>this.addMatch(y,e,m,d));t=t.update({filterFrom:u,filterTo:h,filter:(m,y)=>m<u||y>h,add:f})}}return t}}const Bg=/x/.unicode!=null?"gu":"g",ZB=new RegExp(`[\0-\b
-\x7F-\x9F\xAD\u061C\u200B\u200E\u200F\u2028\u2029\u202D\u202E\u2066\u2067\u2069\uFEFF\uFFF9-\uFFFC]`,Bg),GB={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let Wp=null;function YB(){var n;if(Wp==null&&typeof document<"u"&&document.body){let e=document.body.style;Wp=((n=e.tabSize)!==null&&n!==void 0?n:e.MozTabSize)!=null}return Wp||!1}const uh=et.define({combine(n){let e=Zf(n,{render:null,specialChars:ZB,addSpecialChars:null});return(e.replaceTabs=!YB())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,Bg)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,Bg)),e}});function d_(n={}){return[uh.of(n),KB()]}let p_=null;function KB(){return p_||(p_=Tr.fromClass(class{constructor(n){this.view=n,this.decorations=tt.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(n.state.facet(uh)),this.decorations=this.decorator.createDeco(n)}makeDecorator(n){return new HB({regexp:n.specialChars,decoration:(e,t,r)=>{let{doc:i}=t.state,s=zo(e[0],0);if(s==9){let o=i.lineAt(r),a=t.state.tabSize,l=Gf(o.text,a,r-o.from);return tt.replace({widget:new n3((a-l%a)*this.view.defaultCharacterWidth)})}return this.decorationCache[s]||(this.decorationCache[s]=tt.replace({widget:new t3(n,s)}))},boundary:n.replaceTabs?void 0:/[^]/})}update(n){let e=n.state.facet(uh);n.startState.facet(uh)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(n.view)):this.decorations=this.decorator.updateDeco(n,this.decorations)}},{decorations:n=>n.decorations}))}const JB="\u2022";function e3(n){return n>=32?JB:n==10?"\u2424":String.fromCharCode(9216+n)}class t3 extends bo{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=e3(this.code),r=e.state.phrase("Control character")+" "+(GB[this.code]||"0x"+this.code.toString(16)),i=this.options.render&&this.options.render(this.code,r,t);if(i)return i;let s=document.createElement("span");return s.textContent=t,s.title=r,s.setAttribute("aria-label",r),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class n3 extends bo{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function m_(){return i3}const r3=tt.line({class:"cm-activeLine"}),i3=Tr.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.docChanged||n.selectionSet)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=-1,t=[];for(let r of n.state.selection.ranges){let i=n.lineBlockAt(r.head);i.from>e&&(t.push(r3.range(i.from)),e=i.from)}return tt.set(t)}},{decorations:n=>n.decorations}),g_=et.define({combine(n){let e,t;for(let r of n)e=e||r.topContainer,t=t||r.bottomContainer;return{topContainer:e,bottomContainer:t}}});function jh(n,e){let t=n.plugin(fE),r=t?t.specs.indexOf(e):-1;return r>-1?t.panels[r]:null}const fE=Tr.fromClass(class{constructor(n){this.input=n.state.facet(qh),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(n));let e=n.state.facet(g_);this.top=new Au(n,!0,e.topContainer),this.bottom=new Au(n,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(n){let e=n.state.facet(g_);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Au(n.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Au(n.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=n.state.facet(qh);if(t!=this.input){let r=t.filter(l=>l),i=[],s=[],o=[],a=[];for(let l of r){let c=this.specs.indexOf(l),u;c<0?(u=l(n.view),a.push(u)):(u=this.panels[c],u.update&&u.update(n)),i.push(u),(u.top?s:o).push(u)}this.specs=r,this.panels=i,this.top.sync(s),this.bottom.sync(o);for(let l of a)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let r of this.panels)r.update&&r.update(n)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:n=>Xe.scrollMargins.of(e=>{let t=e.plugin(n);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class Au{constructor(e,t,r){this.view=e,this.top=t,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=O_(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=O_(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function O_(n){let e=n.nextSibling;return n.remove(),e}const qh=et.define({enables:fE});class ha extends lo{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}ha.prototype.elementClass="";ha.prototype.toDOM=void 0;ha.prototype.mapMode=Vn.TrackBefore;ha.prototype.startSide=ha.prototype.endSide=-1;ha.prototype.point=!0;const dE=1024;let s3=0;class vr{constructor(e,t){this.from=e,this.to=t}}class rt{constructor(e={}){this.id=s3++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=on.match(e)),t=>{let r=e(t);return r===void 0?null:[this,r]}}}rt.closedBy=new rt({deserialize:n=>n.split(" ")});rt.openedBy=new rt({deserialize:n=>n.split(" ")});rt.group=new rt({deserialize:n=>n.split(" ")});rt.contextHash=new rt({perNode:!0});rt.lookAhead=new rt({perNode:!0});rt.mounted=new rt({perNode:!0});class o3{constructor(e,t,r){this.tree=e,this.overlay=t,this.parser=r}}const a3=Object.create(null);class on{constructor(e,t,r,i=0){this.name=e,this.props=t,this.id=r,this.flags=i}static define(e){let t=e.props&&e.props.length?Object.create(null):a3,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new on(e.name||"",t,e.id,r);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(i)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[s[0].id]=s[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(rt.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let r in e)for(let i of r.split(" "))t[i]=e[r];return r=>{for(let i=r.prop(rt.group),s=-1;s<(i?i.length:0);s++){let o=t[s<0?r.name:i[s]];if(o)return o}}}}on.none=new on("",Object.create(null),0,8);class Mc{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let r of this.types){let i=null;for(let s of e){let o=s(r);o&&(i||(i=Object.assign({},r.props)),i[o[0].id]=o[1])}t.push(i?new on(r.name,i,r.id,r.flags):r)}return new Mc(t)}}const Pu=new WeakMap,y_=new WeakMap;var Mt;(function(n){n[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays"})(Mt||(Mt={}));class _t{constructor(e,t,r,i,s){if(this.type=e,this.children=t,this.positions=r,this.length=i,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,a]of s)this.props[typeof o=="number"?o:o.id]=a}}toString(){let e=this.prop(rt.mounted);if(e&&!e.overlay)return e.tree.toString();let t="";for(let r of this.children){let i=r.toString();i&&(t&&(t+=","),t+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new nc(this.topNode,e)}cursorAt(e,t=0,r=0){let i=Pu.get(this)||this.topNode,s=new nc(i);return s.moveTo(e,t),Pu.set(this,s._tree),s}get topNode(){return new kr(this,0,0,null)}resolve(e,t=0){let r=fa(Pu.get(this)||this.topNode,e,t,!1);return Pu.set(this,r),r}resolveInner(e,t=0){let r=fa(y_.get(this)||this.topNode,e,t,!0);return y_.set(this,r),r}iterate(e){let{enter:t,leave:r,from:i=0,to:s=this.length}=e;for(let o=this.cursor((e.mode||0)|Mt.IncludeAnonymous);;){let a=!1;if(o.from<=s&&o.to>=i&&(o.type.isAnonymous||t(o)!==!1)){if(o.firstChild())continue;a=!0}for(;a&&r&&!o.type.isAnonymous&&r(o),!o.nextSibling();){if(!o.parent())return;a=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:_y(on.none,this.children,this.positions,0,this.children.length,0,this.length,(t,r,i)=>new _t(this.type,t,r,i,this.propValues),e.makeTree||((t,r,i)=>new _t(on.none,t,r,i)))}static build(e){return c3(e)}}_t.empty=new _t(on.none,[],[],0);class vy{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new vy(this.buffer,this.index)}}class vo{constructor(e,t,r){this.buffer=e,this.length=t,this.set=r}get type(){return on.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],r=this.buffer[e+3],i=this.set.types[t],s=i.name;if(/\W/.test(s)&&!i.isError&&(s=JSON.stringify(s)),e+=4,r==e)return s;let o=[];for(;e<r;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,t,r,i,s){let{buffer:o}=this,a=-1;for(let l=e;l!=t&&!(pE(s,i,o[l+1],o[l+2])&&(a=l,r>0));l=o[l+3]);return a}slice(e,t,r){let i=this.buffer,s=new Uint16Array(t-e),o=0;for(let a=e,l=0;a<t;){s[l++]=i[a++],s[l++]=i[a++]-r;let c=s[l++]=i[a++]-r;s[l++]=i[a++]-e,o=Math.max(o,c)}return new vo(s,o,this.set)}}function pE(n,e,t,r){switch(n){case-2:return t<e;case-1:return r>=e&&t<e;case 0:return t<e&&r>e;case 1:return t<=e&&r>e;case 2:return r>e;case 4:return!0}}function mE(n,e){let t=n.childBefore(e);for(;t;){let r=t.lastChild;if(!r||r.to!=t.to)break;r.type.isError&&r.from==r.to?(n=t,t=r.prevSibling):t=r}return n}function fa(n,e,t,r){for(var i;n.from==n.to||(t<1?n.from>=e:n.from>e)||(t>-1?n.to<=e:n.to<e);){let o=!r&&n instanceof kr&&n.index<0?null:n.parent;if(!o)return n;n=o}let s=r?0:Mt.IgnoreOverlays;if(r)for(let o=n,a=o.parent;a;o=a,a=o.parent)o instanceof kr&&o.index<0&&((i=a.enter(e,t,s))===null||i===void 0?void 0:i.from)!=o.from&&(n=a);for(;;){let o=n.enter(e,t,s);if(!o)return n;n=o}}class kr{constructor(e,t,r,i){this._tree=e,this.from=t,this.index=r,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,r,i,s=0){for(let o=this;;){for(let{children:a,positions:l}=o._tree,c=t>0?a.length:-1;e!=c;e+=t){let u=a[e],h=l[e]+o.from;if(!!pE(i,r,h,h+u.length)){if(u instanceof vo){if(s&Mt.ExcludeBuffers)continue;let f=u.findChild(0,u.buffer.length,t,r-h,i);if(f>-1)return new ii(new l3(o,u,e,h),null,f)}else if(s&Mt.IncludeAnonymous||!u.type.isAnonymous||wy(u)){let f;if(!(s&Mt.IgnoreMounts)&&u.props&&(f=u.prop(rt.mounted))&&!f.overlay)return new kr(f.tree,h,e,o);let p=new kr(u,h,e,o);return s&Mt.IncludeAnonymous||!p.type.isAnonymous?p:p.nextChild(t<0?u.children.length-1:0,t,r,i)}}}if(s&Mt.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+t:e=t<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,r=0){let i;if(!(r&Mt.IgnoreOverlays)&&(i=this._tree.prop(rt.mounted))&&i.overlay){let s=e-this.from;for(let{from:o,to:a}of i.overlay)if((t>0?o<=s:o<s)&&(t<0?a>=s:a>s))return new kr(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(e=0){return new nc(this,e)}get tree(){return this._tree}toTree(){return this._tree}resolve(e,t=0){return fa(this,e,t,!1)}resolveInner(e,t=0){return fa(this,e,t,!0)}enterUnfinishedNodesBefore(e){return mE(this,e)}getChild(e,t=null,r=null){let i=Xh(this,e,t,r);return i.length?i[0]:null}getChildren(e,t=null,r=null){return Xh(this,e,t,r)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return zh(this,e)}}function Xh(n,e,t,r){let i=n.cursor(),s=[];if(!i.firstChild())return s;if(t!=null){for(;!i.type.is(t);)if(!i.nextSibling())return s}for(;;){if(r!=null&&i.type.is(r))return s;if(i.type.is(e)&&s.push(i.node),!i.nextSibling())return r==null?s:[]}}function zh(n,e,t=e.length-1){for(let r=n.parent;t>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[t]&&e[t]!=r.name)return!1;t--}}return!0}class l3{constructor(e,t,r,i){this.parent=e,this.buffer=t,this.index=r,this.start=i}}class ii{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,r){this.context=e,this._parent=t,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,t,r){let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.context.start,r);return s<0?null:new ii(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,r=0){if(r&Mt.ExcludeBuffers)return null;let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return s<0?null:new ii(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new ii(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new ii(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}cursor(e=0){return new nc(this,e)}get tree(){return null}toTree(){let e=[],t=[],{buffer:r}=this.context,i=this.index+4,s=r.buffer[this.index+3];if(s>i){let o=r.buffer[this.index+1];e.push(r.slice(i,s,o)),t.push(0)}return new _t(this.type,e,t,this.to-this.from)}resolve(e,t=0){return fa(this,e,t,!1)}resolveInner(e,t=0){return fa(this,e,t,!0)}enterUnfinishedNodesBefore(e){return mE(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,t=null,r=null){let i=Xh(this,e,t,r);return i.length?i[0]:null}getChildren(e,t=null,r=null){return Xh(this,e,t,r)}get node(){return this}matchContext(e){return zh(this,e)}}class nc{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof kr)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:r,buffer:i}=this.buffer;return this.type=t||i.set.types[i.buffer[e]],this.from=r+i.buffer[e+1],this.to=r+i.buffer[e+2],!0}yield(e){return e?e instanceof kr?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,r,this.mode));let{buffer:i}=this.buffer,s=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.buffer.start,r);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,r=this.mode){return this.buffer?r&Mt.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Mt.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Mt.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,r=this.stack.length-1;if(e<0){let i=r<0?0:this.stack[r]+4;if(this.index!=i)return this.yieldBuf(t.findChild(i,this.index,-1,0,4))}else{let i=t.buffer[this.index+3];if(i<(r<0?t.buffer.length:t.buffer[this.stack[r]+3]))return this.yieldBuf(i)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,r,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(i.buffer.buffer[s+3]<this.index)return!1;({index:t,parent:r}=i)}else({index:t,_parent:r}=this._tree);for(;r;{index:t,_parent:r}=r)if(t>-1)for(let s=t+e,o=e<0?-1:r._tree.children.length;s!=o;s+=e){let a=r._tree.children[s];if(this.mode&Mt.IncludeAnonymous||a instanceof vo||!a.type.isAnonymous||wy(a))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,r=0;if(e&&e.context==this.buffer){e:for(let i=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==i){if(i==this.index)return o;t=o,r=s+1;break e}i=this.stack[--s]}}for(let i=r;i<this.stack.length;i++)t=new ii(this.buffer,t,this.stack[i]);return this.bufferNode=new ii(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let r=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(i=!0)}for(;i&&t&&t(this),i=this.type.isAnonymous,!this.nextSibling();){if(!r)return;this.parent(),r--,i=!0}}}matchContext(e){if(!this.buffer)return zh(this.node,e);let{buffer:t}=this.buffer,{types:r}=t.set;for(let i=e.length-1,s=this.stack.length-1;i>=0;s--){if(s<0)return zh(this.node,e,i);let o=r[t.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[i]&&e[i]!=o.name)return!1;i--}}return!0}}function wy(n){return n.children.some(e=>e instanceof vo||!e.type.isAnonymous||wy(e))}function c3(n){var e;let{buffer:t,nodeSet:r,maxBufferLength:i=dE,reused:s=[],minRepeatType:o=r.types.length}=n,a=Array.isArray(t)?new vy(t,t.length):t,l=r.types,c=0,u=0;function h(v,_,S,R,N){let{id:T,start:C,end:Q,size:I}=a,B=u;for(;I<0;)if(a.next(),I==-1){let le=s[T];S.push(le),R.push(C-v);return}else if(I==-3){c=T;return}else if(I==-4){u=T;return}else throw new RangeError(`Unrecognized record size: ${I}`);let k=l[T],j,ne,Z=C-v;if(Q-C<=i&&(ne=m(a.pos-_,N))){let le=new Uint16Array(ne.size-ne.skip),oe=a.pos-ne.size,pe=le.length;for(;a.pos>oe;)pe=y(ne.start,le,pe);j=new vo(le,Q-ne.start,r),Z=ne.start-v}else{let le=a.pos-I;a.next();let oe=[],pe=[],P=T>=o?T:-1,D=0,H=Q;for(;a.pos>le;)P>=0&&a.id==P&&a.size>=0?(a.end<=H-i&&(p(oe,pe,C,D,a.end,H,P,B),D=oe.length,H=a.end),a.next()):h(C,le,oe,pe,P);if(P>=0&&D>0&&D<oe.length&&p(oe,pe,C,D,C,H,P,B),oe.reverse(),pe.reverse(),P>-1&&D>0){let F=f(k);j=_y(k,oe,pe,0,oe.length,0,Q-C,F,F)}else j=d(k,oe,pe,Q-C,B-Q)}S.push(j),R.push(Z)}function f(v){return(_,S,R)=>{let N=0,T=_.length-1,C,Q;if(T>=0&&(C=_[T])instanceof _t){if(!T&&C.type==v&&C.length==R)return C;(Q=C.prop(rt.lookAhead))&&(N=S[T]+C.length+Q)}return d(v,_,S,R,N)}}function p(v,_,S,R,N,T,C,Q){let I=[],B=[];for(;v.length>R;)I.push(v.pop()),B.push(_.pop()+S-N);v.push(d(r.types[C],I,B,T-N,Q-T)),_.push(N-S)}function d(v,_,S,R,N=0,T){if(c){let C=[rt.contextHash,c];T=T?[C].concat(T):[C]}if(N>25){let C=[rt.lookAhead,N];T=T?[C].concat(T):[C]}return new _t(v,_,S,R,T)}function m(v,_){let S=a.fork(),R=0,N=0,T=0,C=S.end-i,Q={size:0,start:0,skip:0};e:for(let I=S.pos-v;S.pos>I;){let B=S.size;if(S.id==_&&B>=0){Q.size=R,Q.start=N,Q.skip=T,T+=4,R+=4,S.next();continue}let k=S.pos-B;if(B<0||k<I||S.start<C)break;let j=S.id>=o?4:0,ne=S.start;for(S.next();S.pos>k;){if(S.size<0)if(S.size==-3)j+=4;else break e;else S.id>=o&&(j+=4);S.next()}N=ne,R+=B,T+=j}return(_<0||R==v)&&(Q.size=R,Q.start=N,Q.skip=T),Q.size>4?Q:void 0}function y(v,_,S){let{id:R,start:N,end:T,size:C}=a;if(a.next(),C>=0&&R<o){let Q=S;if(C>4){let I=a.pos-(C-4);for(;a.pos>I;)S=y(v,_,S)}_[--S]=Q,_[--S]=T-v,_[--S]=N-v,_[--S]=R}else C==-3?c=R:C==-4&&(u=R);return S}let w=[],b=[];for(;a.pos>0;)h(n.start||0,n.bufferStart||0,w,b,-1);let O=(e=n.length)!==null&&e!==void 0?e:w.length?b[0]+w[0].length:0;return new _t(l[n.topID],w.reverse(),b.reverse(),O)}const b_=new WeakMap;function hh(n,e){if(!n.isAnonymous||e instanceof vo||e.type!=n)return 1;let t=b_.get(e);if(t==null){t=1;for(let r of e.children){if(r.type!=n||!(r instanceof _t)){t=1;break}t+=hh(n,r)}b_.set(e,t)}return t}function _y(n,e,t,r,i,s,o,a,l){let c=0;for(let d=r;d<i;d++)c+=hh(n,e[d]);let u=Math.ceil(c*1.5/8),h=[],f=[];function p(d,m,y,w,b){for(let O=y;O<w;){let v=O,_=m[O],S=hh(n,d[O]);for(O++;O<w;O++){let R=hh(n,d[O]);if(S+R>=u)break;S+=R}if(O==v+1){if(S>u){let R=d[v];p(R.children,R.positions,0,R.children.length,m[v]+b);continue}h.push(d[v])}else{let R=m[O-1]+d[O-1].length-_;h.push(_y(n,d,m,v,O,_,R,null,l))}f.push(_+b-s)}}return p(e,t,r,i,0),(a||l)(h,f,o)}class u3{constructor(){this.map=new WeakMap}setBuffer(e,t,r){let i=this.map.get(e);i||this.map.set(e,i=new Map),i.set(t,r)}getBuffer(e,t){let r=this.map.get(e);return r&&r.get(t)}set(e,t){e instanceof ii?this.setBuffer(e.context.buffer,e.index,t):e instanceof kr&&this.map.set(e.tree,t)}get(e){return e instanceof ii?this.getBuffer(e.context.buffer,e.index):e instanceof kr?this.map.get(e.tree):void 0}cursorSet(e,t){e.buffer?this.setBuffer(e.buffer.buffer,e.index,t):this.map.set(e.tree,t)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}}class Mi{constructor(e,t,r,i,s=!1,o=!1){this.from=e,this.to=t,this.tree=r,this.offset=i,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],r=!1){let i=[new Mi(0,e.length,e,0,!1,r)];for(let s of t)s.to>e.length&&i.push(s);return i}static applyChanges(e,t,r=128){if(!t.length)return e;let i=[],s=1,o=e.length?e[0]:null;for(let a=0,l=0,c=0;;a++){let u=a<t.length?t[a]:null,h=u?u.fromA:1e9;if(h-l>=r)for(;o&&o.from<h;){let f=o;if(l>=f.from||h<=f.to||c){let p=Math.max(f.from,l)-c,d=Math.min(f.to,h)-c;f=p>=d?null:new Mi(p,d,f.tree,f.offset+c,a>0,!!u)}if(f&&i.push(f),o.to>h)break;o=s<e.length?e[s++]:null}if(!u)break;l=u.toA,c=u.toA-u.toB}return i}}class xy{startParse(e,t,r){return typeof e=="string"&&(e=new h3(e)),r=r?r.length?r.map(i=>new vr(i.from,i.to)):[new vr(0,0)]:[new vr(0,e.length)],this.createParse(e,t||[],r)}parse(e,t,r){let i=this.startParse(e,t,r);for(;;){let s=i.advance();if(s)return s}}}class h3{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}function gE(n){return(e,t,r,i)=>new d3(e,n,t,r,i)}class v_{constructor(e,t,r,i,s){this.parser=e,this.parse=t,this.overlay=r,this.target=i,this.ranges=s}}class f3{constructor(e,t,r,i,s,o,a){this.parser=e,this.predicate=t,this.mounts=r,this.index=i,this.start=s,this.target=o,this.prev=a,this.depth=0,this.ranges=[]}}const Fg=new rt({perNode:!0});class d3{constructor(e,t,r,i,s){this.nest=t,this.input=r,this.fragments=i,this.ranges=s,this.inner=[],this.innerDone=0,this.baseTree=null,this.stoppedAt=null,this.baseParse=e}advance(){if(this.baseParse){let r=this.baseParse.advance();if(!r)return null;if(this.baseParse=null,this.baseTree=r,this.startInner(),this.stoppedAt!=null)for(let i of this.inner)i.parse.stopAt(this.stoppedAt)}if(this.innerDone==this.inner.length){let r=this.baseTree;return this.stoppedAt!=null&&(r=new _t(r.type,r.children,r.positions,r.length,r.propValues.concat([[Fg,this.stoppedAt]]))),r}let e=this.inner[this.innerDone],t=e.parse.advance();if(t){this.innerDone++;let r=Object.assign(Object.create(null),e.target.props);r[rt.mounted.id]=new o3(t,e.overlay,e.parser),e.target.props=r}return null}get parsedPos(){if(this.baseParse)return 0;let e=this.input.length;for(let t=this.innerDone;t<this.inner.length;t++)this.inner[t].ranges[0].from<e&&(e=Math.min(e,this.inner[t].parse.parsedPos));return e}stopAt(e){if(this.stoppedAt=e,this.baseParse)this.baseParse.stopAt(e);else for(let t=this.innerDone;t<this.inner.length;t++)this.inner[t].parse.stopAt(e)}startInner(){let e=new g3(this.fragments),t=null,r=null,i=new nc(new kr(this.baseTree,this.ranges[0].from,0,null),Mt.IncludeAnonymous|Mt.IgnoreMounts);e:for(let s,o;this.stoppedAt==null||i.from<this.stoppedAt;){let a=!0,l;if(e.hasNode(i)){if(t){let c=t.mounts.find(u=>u.frag.from<=i.from&&u.frag.to>=i.to&&u.mount.overlay);if(c)for(let u of c.mount.overlay){let h=u.from+c.pos,f=u.to+c.pos;h>=i.from&&f<=i.to&&!t.ranges.some(p=>p.from<f&&p.to>h)&&t.ranges.push({from:h,to:f})}}a=!1}else if(r&&(o=p3(r.ranges,i.from,i.to)))a=o!=2;else if(!i.type.isAnonymous&&i.from<i.to&&(s=this.nest(i,this.input))){i.tree||m3(i);let c=e.findMounts(i.from,s.parser);if(typeof s.overlay=="function")t=new f3(s.parser,s.overlay,c,this.inner.length,i.from,i.tree,t);else{let u=x_(this.ranges,s.overlay||[new vr(i.from,i.to)]);u.length&&this.inner.push(new v_(s.parser,s.parser.startParse(this.input,S_(c,u),u),s.overlay?s.overlay.map(h=>new vr(h.from-i.from,h.to-i.from)):null,i.tree,u)),s.overlay?u.length&&(r={ranges:u,depth:0,prev:r}):a=!1}}else t&&(l=t.predicate(i))&&(l===!0&&(l=new vr(i.from,i.to)),l.from<l.to&&t.ranges.push(l));if(a&&i.firstChild())t&&t.depth++,r&&r.depth++;else for(;!i.nextSibling();){if(!i.parent())break e;if(t&&!--t.depth){let c=x_(this.ranges,t.ranges);c.length&&this.inner.splice(t.index,0,new v_(t.parser,t.parser.startParse(this.input,S_(t.mounts,c),c),t.ranges.map(u=>new vr(u.from-t.start,u.to-t.start)),t.target,c)),t=t.prev}r&&!--r.depth&&(r=r.prev)}}}}function p3(n,e,t){for(let r of n){if(r.from>=t)break;if(r.to>e)return r.from<=e&&r.to>=t?2:1}return 0}function w_(n,e,t,r,i,s){if(e<t){let o=n.buffer[e+1];r.push(n.slice(e,t,o)),i.push(o-s)}}function m3(n){let{node:e}=n,t=0;do n.parent(),t++;while(!n.tree);let r=0,i=n.tree,s=0;for(;s=i.positions[r]+n.from,!(s<=e.from&&s+i.children[r].length>=e.to);r++);let o=i.children[r],a=o.buffer;function l(c,u,h,f,p){let d=c;for(;a[d+2]+s<=e.from;)d=a[d+3];let m=[],y=[];w_(o,c,d,m,y,f);let w=a[d+1],b=a[d+2],O=w+s==e.from&&b+s==e.to&&a[d]==e.type.id;return m.push(O?e.toTree():l(d+4,a[d+3],o.set.types[a[d]],w,b-w)),y.push(w-f),w_(o,a[d+3],u,m,y,f),new _t(h,m,y,p)}i.children[r]=l(0,a.length,on.none,0,o.length);for(let c=0;c<=t;c++)n.childAfter(e.from)}class __{constructor(e,t){this.offset=t,this.done=!1,this.cursor=e.cursor(Mt.IncludeAnonymous|Mt.IgnoreMounts)}moveTo(e){let{cursor:t}=this,r=e-this.offset;for(;!this.done&&t.from<r;)t.to>=e&&t.enter(r,1,Mt.IgnoreOverlays|Mt.ExcludeBuffers)||t.next(!1)||(this.done=!0)}hasNode(e){if(this.moveTo(e.from),!this.done&&this.cursor.from+this.offset==e.from&&this.cursor.tree)for(let t=this.cursor.tree;;){if(t==e.tree)return!0;if(t.children.length&&t.positions[0]==0&&t.children[0]instanceof _t)t=t.children[0];else break}return!1}}class g3{constructor(e){var t;if(this.fragments=e,this.curTo=0,this.fragI=0,e.length){let r=this.curFrag=e[0];this.curTo=(t=r.tree.prop(Fg))!==null&&t!==void 0?t:r.to,this.inner=new __(r.tree,-r.offset)}else this.curFrag=this.inner=null}hasNode(e){for(;this.curFrag&&e.from>=this.curTo;)this.nextFrag();return this.curFrag&&this.curFrag.from<=e.from&&this.curTo>=e.to&&this.inner.hasNode(e)}nextFrag(){var e;if(this.fragI++,this.fragI==this.fragments.length)this.curFrag=this.inner=null;else{let t=this.curFrag=this.fragments[this.fragI];this.curTo=(e=t.tree.prop(Fg))!==null&&e!==void 0?e:t.to,this.inner=new __(t.tree,-t.offset)}}findMounts(e,t){var r;let i=[];if(this.inner){this.inner.cursor.moveTo(e,1);for(let s=this.inner.cursor.node;s;s=s.parent){let o=(r=s.tree)===null||r===void 0?void 0:r.prop(rt.mounted);if(o&&o.parser==t)for(let a=this.fragI;a<this.fragments.length;a++){let l=this.fragments[a];if(l.from>=s.to)break;l.tree==this.curFrag.tree&&i.push({frag:l,pos:s.from-l.offset,mount:o})}}}return i}}function x_(n,e){let t=null,r=e;for(let i=1,s=0;i<n.length;i++){let o=n[i-1].to,a=n[i].from;for(;s<r.length;s++){let l=r[s];if(l.from>=a)break;l.to<=o||(t||(r=t=e.slice()),l.from<o?(t[s]=new vr(l.from,o),l.to>a&&t.splice(s+1,0,new vr(a,l.to))):l.to>a?t[s--]=new vr(a,l.to):t.splice(s--,1))}}return r}function O3(n,e,t,r){let i=0,s=0,o=!1,a=!1,l=-1e9,c=[];for(;;){let u=i==n.length?1e9:o?n[i].to:n[i].from,h=s==e.length?1e9:a?e[s].to:e[s].from;if(o!=a){let f=Math.max(l,t),p=Math.min(u,h,r);f<p&&c.push(new vr(f,p))}if(l=Math.min(u,h),l==1e9)break;u==l&&(o?(o=!1,i++):o=!0),h==l&&(a?(a=!1,s++):a=!0)}return c}function S_(n,e){let t=[];for(let{pos:r,mount:i,frag:s}of n){let o=r+(i.overlay?i.overlay[0].from:0),a=o+i.tree.length,l=Math.max(s.from,o),c=Math.min(s.to,a);if(i.overlay){let u=i.overlay.map(f=>new vr(f.from+r,f.to+r)),h=O3(e,u,l,c);for(let f=0,p=l;;f++){let d=f==h.length,m=d?c:h[f].from;if(m>p&&t.push(new Mi(p,m,i.tree,-o,s.from>=p||s.openStart,s.to<=m||s.openEnd)),d)break;p=h[f].to}}else t.push(new Mi(l,c,i.tree,-o,s.from>=o||s.openStart,s.to<=a||s.openEnd))}return t}let y3=0;class Dr{constructor(e,t,r){this.set=e,this.base=t,this.modified=r,this.id=y3++}static define(e){if(e!=null&&e.base)throw new Error("Can not derive from a modified tag");let t=new Dr([],null,[]);if(t.set.push(t),e)for(let r of e.set)t.set.push(r);return t}static defineModifier(){let e=new Hh;return t=>t.modified.indexOf(e)>-1?t:Hh.get(t.base||t,t.modified.concat(e).sort((r,i)=>r.id-i.id))}}let b3=0;class Hh{constructor(){this.instances=[],this.id=b3++}static get(e,t){if(!t.length)return e;let r=t[0].instances.find(a=>a.base==e&&v3(t,a.modified));if(r)return r;let i=[],s=new Dr(i,e,t);for(let a of t)a.instances.push(s);let o=w3(t);for(let a of e.set)if(!a.modified.length)for(let l of o)i.push(Hh.get(a,l));return s}}function v3(n,e){return n.length==e.length&&n.every((t,r)=>t==e[r])}function w3(n){let e=[[]];for(let t=0;t<n.length;t++)for(let r=0,i=e.length;r<i;r++)e.push(e[r].concat(n[t]));return e.sort((t,r)=>r.length-t.length)}function Da(n){let e=Object.create(null);for(let t in n){let r=n[t];Array.isArray(r)||(r=[r]);for(let i of t.split(" "))if(i){let s=[],o=2,a=i;for(let h=0;;){if(a=="..."&&h>0&&h+3==i.length){o=1;break}let f=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!f)throw new RangeError("Invalid path: "+i);if(s.push(f[0]=="*"?"":f[0][0]=='"'?JSON.parse(f[0]):f[0]),h+=f[0].length,h==i.length)break;let p=i[h++];if(h==i.length&&p=="!"){o=0;break}if(p!="/")throw new RangeError("Invalid path: "+i);a=i.slice(h)}let l=s.length-1,c=s[l];if(!c)throw new RangeError("Invalid path: "+i);let u=new Zh(r,o,l>0?s.slice(0,l):null);e[c]=u.sort(e[c])}}return OE.add(e)}const OE=new rt;class Zh{constructor(e,t,r,i){this.tags=e,this.mode=t,this.context=r,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Zh.empty=new Zh([],2,null);function yE(n,e){let t=Object.create(null);for(let s of n)if(!Array.isArray(s.tag))t[s.tag.id]=s.class;else for(let o of s.tag)t[o.id]=s.class;let{scope:r,all:i=null}=e||{};return{style:s=>{let o=i;for(let a of s)for(let l of a.set){let c=t[l.id];if(c){o=o?o+" "+c:c;break}}return o},scope:r}}function _3(n,e){let t=null;for(let r of n){let i=r.style(e);i&&(t=t?t+" "+i:i)}return t}function x3(n,e,t,r=0,i=n.length){let s=new S3(r,Array.isArray(e)?e:[e],t);s.highlightRange(n.cursor(),r,i,"",s.highlighters),s.flush(i)}class S3{constructor(e,t,r){this.at=e,this.highlighters=t,this.span=r,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,r,i,s){let{type:o,from:a,to:l}=e;if(a>=r||l<=t)return;o.isTop&&(s=this.highlighters.filter(p=>!p.scope||p.scope(o)));let c=i,u=k3(e)||Zh.empty,h=_3(s,u.tags);if(h&&(c&&(c+=" "),c+=h,u.mode==1&&(i+=(i?" ":"")+h)),this.startSpan(e.from,c),u.opaque)return;let f=e.tree&&e.tree.prop(rt.mounted);if(f&&f.overlay){let p=e.node.enter(f.overlay[0].from+a,1),d=this.highlighters.filter(y=>!y.scope||y.scope(f.tree.type)),m=e.firstChild();for(let y=0,w=a;;y++){let b=y<f.overlay.length?f.overlay[y]:null,O=b?b.from+a:l,v=Math.max(t,w),_=Math.min(r,O);if(v<_&&m)for(;e.from<_&&(this.highlightRange(e,v,_,i,s),this.startSpan(Math.min(_,e.to),c),!(e.to>=O||!e.nextSibling())););if(!b||O>r)break;w=b.to+a,w>t&&(this.highlightRange(p.cursor(),Math.max(t,b.from+a),Math.min(r,w),i,d),this.startSpan(w,c))}m&&e.parent()}else if(e.firstChild()){do if(!(e.to<=t)){if(e.from>=r)break;this.highlightRange(e,t,r,i,s),this.startSpan(Math.min(r,e.to),c)}while(e.nextSibling());e.parent()}}}function k3(n){let e=n.type.prop(OE);for(;e&&e.context&&!n.matchContext(e.context);)e=e.next;return e||null}const Ae=Dr.define,Ru=Ae(),ts=Ae(),k_=Ae(ts),T_=Ae(ts),ns=Ae(),Iu=Ae(ns),jp=Ae(ns),Kr=Ae(),Fs=Ae(Kr),Gr=Ae(),Yr=Ae(),Ug=Ae(),rl=Ae(Ug),Qu=Ae(),J={comment:Ru,lineComment:Ae(Ru),blockComment:Ae(Ru),docComment:Ae(Ru),name:ts,variableName:Ae(ts),typeName:k_,tagName:Ae(k_),propertyName:T_,attributeName:Ae(T_),className:Ae(ts),labelName:Ae(ts),namespace:Ae(ts),macroName:Ae(ts),literal:ns,string:Iu,docString:Ae(Iu),character:Ae(Iu),attributeValue:Ae(Iu),number:jp,integer:Ae(jp),float:Ae(jp),bool:Ae(ns),regexp:Ae(ns),escape:Ae(ns),color:Ae(ns),url:Ae(ns),keyword:Gr,self:Ae(Gr),null:Ae(Gr),atom:Ae(Gr),unit:Ae(Gr),modifier:Ae(Gr),operatorKeyword:Ae(Gr),controlKeyword:Ae(Gr),definitionKeyword:Ae(Gr),moduleKeyword:Ae(Gr),operator:Yr,derefOperator:Ae(Yr),arithmeticOperator:Ae(Yr),logicOperator:Ae(Yr),bitwiseOperator:Ae(Yr),compareOperator:Ae(Yr),updateOperator:Ae(Yr),definitionOperator:Ae(Yr),typeOperator:Ae(Yr),controlOperator:Ae(Yr),punctuation:Ug,separator:Ae(Ug),bracket:rl,angleBracket:Ae(rl),squareBracket:Ae(rl),paren:Ae(rl),brace:Ae(rl),content:Kr,heading:Fs,heading1:Ae(Fs),heading2:Ae(Fs),heading3:Ae(Fs),heading4:Ae(Fs),heading5:Ae(Fs),heading6:Ae(Fs),contentSeparator:Ae(Kr),list:Ae(Kr),quote:Ae(Kr),emphasis:Ae(Kr),strong:Ae(Kr),link:Ae(Kr),monospace:Ae(Kr),strikethrough:Ae(Kr),inserted:Ae(),deleted:Ae(),changed:Ae(),invalid:Ae(),meta:Qu,documentMeta:Ae(Qu),annotation:Ae(Qu),processingInstruction:Ae(Qu),definition:Dr.defineModifier(),constant:Dr.defineModifier(),function:Dr.defineModifier(),standard:Dr.defineModifier(),local:Dr.defineModifier(),special:Dr.defineModifier()},E_=yE([{tag:J.link,class:"tok-link"},{tag:J.heading,class:"tok-heading"},{tag:J.emphasis,class:"tok-emphasis"},{tag:J.strong,class:"tok-strong"},{tag:J.keyword,class:"tok-keyword"},{tag:J.atom,class:"tok-atom"},{tag:J.bool,class:"tok-bool"},{tag:J.url,class:"tok-url"},{tag:J.labelName,class:"tok-labelName"},{tag:J.inserted,class:"tok-inserted"},{tag:J.deleted,class:"tok-deleted"},{tag:J.literal,class:"tok-literal"},{tag:J.string,class:"tok-string"},{tag:J.number,class:"tok-number"},{tag:[J.regexp,J.escape,J.special(J.string)],class:"tok-string2"},{tag:J.variableName,class:"tok-variableName"},{tag:J.local(J.variableName),class:"tok-variableName tok-local"},{tag:J.definition(J.variableName),class:"tok-variableName tok-definition"},{tag:J.special(J.variableName),class:"tok-variableName2"},{tag:J.definition(J.propertyName),class:"tok-propertyName tok-definition"},{tag:J.typeName,class:"tok-typeName"},{tag:J.namespace,class:"tok-namespace"},{tag:J.className,class:"tok-className"},{tag:J.macroName,class:"tok-macroName"},{tag:J.propertyName,class:"tok-propertyName"},{tag:J.operator,class:"tok-operator"},{tag:J.comment,class:"tok-comment"},{tag:J.meta,class:"tok-meta"},{tag:J.invalid,class:"tok-invalid"},{tag:J.punctuation,class:"tok-punctuation"}]);var qp;const da=new rt;function bE(n){return et.define({combine:n?e=>e.concat(n):void 0})}class wr{constructor(e,t,r=[],i=""){this.data=e,this.name=i,Ot.prototype.hasOwnProperty("tree")||Object.defineProperty(Ot.prototype,"tree",{get(){return an(this)}}),this.parser=t,this.extension=[ga.of(this),Ot.languageData.of((s,o,a)=>s.facet(C_(s,o,a)))].concat(r)}isActiveAt(e,t,r=-1){return C_(e,t,r)==this.data}findRegions(e){let t=e.facet(ga);if((t==null?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let r=[],i=(s,o)=>{if(s.prop(da)==this.data){r.push({from:o,to:o+s.length});return}let a=s.prop(rt.mounted);if(a){if(a.tree.prop(da)==this.data){if(a.overlay)for(let l of a.overlay)r.push({from:l.from+o,to:l.to+o});else r.push({from:o,to:o+s.length});return}else if(a.overlay){let l=r.length;if(i(a.tree,a.overlay[0].from+o),r.length>l)return}}for(let l=0;l<s.children.length;l++){let c=s.children[l];c instanceof _t&&i(c,s.positions[l]+o)}};return i(an(e),0),r}get allowsNesting(){return!0}}wr.setState=wt.define();function C_(n,e,t){let r=n.facet(ga);if(!r)return null;let i=r.data;if(r.allowsNesting)for(let s=an(n).topNode;s;s=s.enter(e,t,Mt.ExcludeBuffers))i=s.type.prop(da)||i;return i}class pa extends wr{constructor(e,t,r){super(e,t,[],r),this.parser=t}static define(e){let t=bE(e.languageData);return new pa(t,e.parser.configure({props:[da.add(r=>r.isTop?t:void 0)]}),e.name)}configure(e,t){return new pa(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function an(n){let e=n.field(wr.state,!1);return e?e.tree:_t.empty}class T3{constructor(e,t=e.length){this.doc=e,this.length=t,this.cursorPos=0,this.string="",this.cursor=e.iter()}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let r=this.cursorPos-this.string.length;return e<r||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-r,t-r)}}let il=null;class rc{constructor(e,t,r=[],i,s,o,a,l){this.parser=e,this.state=t,this.fragments=r,this.tree=i,this.treeLen=s,this.viewport=o,this.skipped=a,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,t,r){return new rc(e,t,[],_t.empty,0,r,[],null)}startParse(){return this.parser.startParse(new T3(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=_t.empty&&this.isDone(t!=null?t:this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(Mi.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(t!=null?t:this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(Mi.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=il;il=this;try{return e()}finally{il=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=A_(e,t.from,t.to);return e}changes(e,t){let{fragments:r,tree:i,treeLen:s,viewport:o,skipped:a}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((c,u,h,f)=>l.push({fromA:c,toA:u,fromB:h,toB:f})),r=Mi.applyChanges(r,l),i=_t.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){a=[];for(let c of this.skipped){let u=e.mapPos(c.from,1),h=e.mapPos(c.to,-1);u<h&&a.push({from:u,to:h})}}}return new rc(this.parser,t,r,i,s,o,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:i,to:s}=this.skipped[r];i<e.to&&s>e.from&&(this.fragments=A_(this.fragments,i,s),this.skipped.splice(r--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends xy{createParse(t,r,i){let s=i[0].from,o=i[i.length-1].to;return{parsedPos:s,advance(){let l=il;if(l){for(let c of i)l.tempSkipped.push(c);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=o,new _t(on.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return il}}function A_(n,e,t){return Mi.applyChanges(n,[{fromA:e,toA:t,fromB:e,toB:t}])}class ma{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,r)||t.takeTree(),new ma(t)}static init(e){let t=Math.min(3e3,e.doc.length),r=rc.create(e.facet(ga).parser,e,{from:0,to:t});return r.work(20,t)||r.takeTree(),new ma(r)}}wr.state=Er.define({create:ma.init,update(n,e){for(let t of e.effects)if(t.is(wr.setState))return t.value;return e.startState.facet(ga)!=e.state.facet(ga)?ma.init(e.state):n.apply(e)}});let vE=n=>{let e=setTimeout(()=>n(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(vE=n=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(n,{timeout:500-100})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const Xp=typeof navigator<"u"&&((qp=navigator.scheduling)===null||qp===void 0?void 0:qp.isInputPending)?()=>navigator.scheduling.isInputPending():null,E3=Tr.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(wr.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),e.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(wr.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=vE(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:i}}=this.view,s=r.field(wr.state);if(s.tree==s.context.tree&&s.context.isDone(i+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!Xp?Math.max(25,e.timeRemaining()-5):1e9),a=s.context.treeLen<i&&r.doc.length>i+1e3,l=s.context.work(()=>Xp&&Xp()||Date.now()>o,i+(a?0:1e5));this.chunkBudget-=Date.now()-t,(l||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:wr.setState.of(new ma(s.context))})),this.chunkBudget>0&&!(l&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>ds(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),ga=et.define({combine(n){return n.length?n[0]:null},enables:n=>[wr.state,E3,Xe.contentAttributes.compute([n],e=>{let t=e.facet(n);return t&&t.name?{"data-language":t.name}:{}})]});class ic{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}class Gh{constructor(e,t,r,i,s,o=void 0){this.name=e,this.alias=t,this.extensions=r,this.filename=i,this.loadFunc=s,this.support=o,this.loading=null}load(){return this.loading||(this.loading=this.loadFunc().then(e=>this.support=e,e=>{throw this.loading=null,e}))}static of(e){let{load:t,support:r}=e;if(!t){if(!r)throw new RangeError("Must pass either 'load' or 'support' to LanguageDescription.of");t=()=>Promise.resolve(r)}return new Gh(e.name,(e.alias||[]).concat(e.name).map(i=>i.toLowerCase()),e.extensions||[],e.filename,t,r)}static matchFilename(e,t){for(let i of e)if(i.filename&&i.filename.test(t))return i;let r=/\.([^.]+)$/.exec(t);if(r){for(let i of e)if(i.extensions.indexOf(r[1])>-1)return i}return null}static matchLanguageName(e,t,r=!0){t=t.toLowerCase();for(let i of e)if(i.alias.some(s=>s==t))return i;if(r)for(let i of e)for(let s of i.alias){let o=t.indexOf(s);if(o>-1&&(s.length>2||!/\w/.test(t[o-1])&&!/\w/.test(t[o+s.length])))return i}return null}}const C3=et.define(),ed=et.define({combine:n=>{if(!n.length)return"  ";if(!/^(?: +|\t+)$/.test(n[0]))throw new Error("Invalid indent unit: "+JSON.stringify(n[0]));return n[0]}});function Yh(n){let e=n.facet(ed);return e.charCodeAt(0)==9?n.tabSize*e.length:e.length}function Kh(n,e){let t="",r=n.tabSize;if(n.facet(ed).charCodeAt(0)==9)for(;e>=r;)t+="	",e-=r;for(let i=0;i<e;i++)t+=" ";return t}function wE(n,e){n instanceof Ot&&(n=new td(n));for(let r of n.state.facet(C3)){let i=r(n,e);if(i!==void 0)return i}let t=an(n.state);return t?A3(n,t,e):null}class td{constructor(e,t={}){this.state=e,this.options=t,this.unit=Yh(e)}lineAt(e,t=1){let r=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:s}=this.options;return i!=null&&i>=r.from&&i<=r.to?s&&i==e?{text:"",from:e}:(t<0?i<e:i<=e)?{text:r.text.slice(i-r.from),from:i}:{text:r.text.slice(0,i-r.from),from:r.from}:r}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:i}=this.lineAt(e,t);return r.slice(e-i,Math.min(r.length,e+100-i))}column(e,t=1){let{text:r,from:i}=this.lineAt(e,t),s=this.countColumn(r,e-i),o=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return o>-1&&(s+=o-this.countColumn(r,r.search(/\S|$/))),s}countColumn(e,t=e.length){return Gf(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:r,from:i}=this.lineAt(e,t),s=this.options.overrideIndentation;if(s){let o=s(i);if(o>-1)return o}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const $c=new rt;function A3(n,e,t){return _E(e.resolveInner(t).enterUnfinishedNodesBefore(t),t,n)}function P3(n){return n.pos==n.options.simulateBreak&&n.options.simulateDoubleBreak}function R3(n){let e=n.type.prop($c);if(e)return e;let t=n.firstChild,r;if(t&&(r=t.type.prop(rt.closedBy))){let i=n.lastChild,s=i&&r.indexOf(i.name)>-1;return o=>xE(o,!0,1,void 0,s&&!P3(o)?i.from:void 0)}return n.parent==null?I3:null}function _E(n,e,t){for(;n;n=n.parent){let r=R3(n);if(r)return r(Sy.create(t,e,n))}return null}function I3(){return 0}class Sy extends td{constructor(e,t,r){super(e.state,e.options),this.base=e,this.pos=t,this.node=r}static create(e,t,r){return new Sy(e,t,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){let e=this.state.doc.lineAt(this.node.from);for(;;){let t=this.node.resolve(e.from);for(;t.parent&&t.parent.from==t.from;)t=t.parent;if(Q3(t,this.node))break;e=this.state.doc.lineAt(t.from)}return this.lineIndent(e.from)}continue(){let e=this.node.parent;return e?_E(e,this.pos,this.base):0}}function Q3(n,e){for(let t=e;t;t=t.parent)if(n==t)return!0;return!1}function N3(n){let e=n.node,t=e.childAfter(e.from),r=e.lastChild;if(!t)return null;let i=n.options.simulateBreak,s=n.state.doc.lineAt(t.from),o=i==null||i<=s.from?s.to:Math.min(s.to,i);for(let a=t.to;;){let l=e.childAfter(a);if(!l||l==r)return null;if(!l.type.isSkipped)return l.from<o?t:null;a=l.to}}function L3({closing:n,align:e=!0,units:t=1}){return r=>xE(r,e,t,n)}function xE(n,e,t,r,i){let s=n.textAfter,o=s.match(/^\s*/)[0].length,a=r&&s.slice(o,o+r.length)==r||i==n.pos+o,l=e?N3(n):null;return l?a?n.column(l.from):n.column(l.to):n.baseIndent+(a?0:n.unit*t)}const D3=n=>n.baseIndent;function fh({except:n,units:e=1}={}){return t=>{let r=n&&n.test(t.textAfter);return t.baseIndent+(r?0:e*t.unit)}}const nd=new rt;function SE(n){let e=n.firstChild,t=n.lastChild;return e&&e.to<t.from?{from:e.to,to:t.type.isError?n.to:t.from}:null}class rd{constructor(e,t){this.specs=e;let r;function i(a){let l=Ss.newName();return(r||(r=Object.create(null)))["."+l]=a,l}const s=typeof t.all=="string"?t.all:t.all?i(t.all):void 0,o=t.scope;this.scope=o instanceof wr?a=>a.prop(da)==o.data:o?a=>a==o:void 0,this.style=yE(e.map(a=>({tag:a.tag,class:a.class||i(Object.assign({},a,{tag:null}))})),{all:s}).style,this.module=r?new Ss(r):null,this.themeType=t.themeType}static define(e,t){return new rd(e,t||{})}}const Vg=et.define(),kE=et.define({combine(n){return n.length?[n[0]]:null}});function zp(n){let e=n.facet(Vg);return e.length?e:n.facet(kE)}function P_(n,e){let t=[$3],r;return n instanceof rd&&(n.module&&t.push(Xe.styleModule.of(n.module)),r=n.themeType),e!=null&&e.fallback?t.push(kE.of(n)):r?t.push(Vg.computeN([Xe.darkTheme],i=>i.facet(Xe.darkTheme)==(r=="dark")?[n]:[])):t.push(Vg.of(n)),t}class M3{constructor(e){this.markCache=Object.create(null),this.tree=an(e.state),this.decorations=this.buildDeco(e,zp(e.state))}update(e){let t=an(e.state),r=zp(e.state),i=r!=zp(e.startState);t.length<e.view.viewport.to&&!i&&t.type==this.tree.type?this.decorations=this.decorations.map(e.changes):(t!=this.tree||e.viewportChanged||i)&&(this.tree=t,this.decorations=this.buildDeco(e.view,r))}buildDeco(e,t){if(!t||!this.tree.length)return tt.none;let r=new xs;for(let{from:i,to:s}of e.visibleRanges)x3(this.tree,t,(o,a,l)=>{r.add(o,a,this.markCache[l]||(this.markCache[l]=tt.mark({class:l})))},i,s);return r.finish()}}const $3=yo.high(Tr.fromClass(M3,{decorations:n=>n.decorations}));J.meta,J.link,J.heading,J.emphasis,J.strong,J.strikethrough,J.keyword,J.atom,J.bool,J.url,J.contentSeparator,J.labelName,J.literal,J.inserted,J.string,J.deleted,J.regexp,J.escape,J.string,J.variableName,J.variableName,J.typeName,J.namespace,J.className,J.variableName,J.macroName,J.propertyName,J.comment,J.invalid;const B3=1e4,F3="()[]{}";function Wg(n,e,t){let r=n.prop(e<0?rt.openedBy:rt.closedBy);if(r)return r;if(n.name.length==1){let i=t.indexOf(n.name);if(i>-1&&i%2==(e<0?1:0))return[t[i+e]]}return null}function Wo(n,e,t,r={}){let i=r.maxScanDistance||B3,s=r.brackets||F3,o=an(n),a=o.resolveInner(e,t);for(let l=a;l;l=l.parent){let c=Wg(l.type,t,s);if(c&&l.from<l.to)return U3(n,e,t,l,c,s)}return V3(n,e,t,o,a.type,i,s)}function U3(n,e,t,r,i,s){let o=r.parent,a={from:r.from,to:r.to},l=0,c=o==null?void 0:o.cursor();if(c&&(t<0?c.childBefore(r.from):c.childAfter(r.to)))do if(t<0?c.to<=r.from:c.from>=r.to){if(l==0&&i.indexOf(c.type.name)>-1&&c.from<c.to)return{start:a,end:{from:c.from,to:c.to},matched:!0};if(Wg(c.type,t,s))l++;else if(Wg(c.type,-t,s)){if(l==0)return{start:a,end:c.from==c.to?void 0:{from:c.from,to:c.to},matched:!1};l--}}while(t<0?c.prevSibling():c.nextSibling());return{start:a,matched:!1}}function V3(n,e,t,r,i,s,o){let a=t<0?n.sliceDoc(e-1,e):n.sliceDoc(e,e+1),l=o.indexOf(a);if(l<0||l%2==0!=t>0)return null;let c={from:t<0?e-1:e,to:t>0?e+1:e},u=n.doc.iterRange(e,t>0?n.doc.length:0),h=0;for(let f=0;!u.next().done&&f<=s;){let p=u.value;t<0&&(f+=p.length);let d=e+f*t;for(let m=t>0?0:p.length-1,y=t>0?p.length:-1;m!=y;m+=t){let w=o.indexOf(p[m]);if(!(w<0||r.resolveInner(d+m,1).type!=i))if(w%2==0==t>0)h++;else{if(h==1)return{start:c,end:{from:d+m,to:d+m+1},matched:w>>1==l>>1};h--}}t>0&&(f+=p.length)}return u.done?{start:c,matched:!1}:null}const W3=Object.create(null),R_=[on.none],I_=[],j3=Object.create(null);for(let[n,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])j3[n]=q3(W3,e);function Hp(n,e){I_.indexOf(n)>-1||(I_.push(n),console.warn(e))}function q3(n,e){let t=null;for(let s of e.split(".")){let o=n[s]||J[s];o?typeof o=="function"?t?t=o(t):Hp(s,`Modifier ${s} used at start of tag`):t?Hp(s,`Tag ${s} used as modifier`):t=o:Hp(s,`Unknown highlighting tag ${s}`)}if(!t)return 0;let r=e.replace(/ /g,"_"),i=on.define({id:R_.length,name:r,props:[Da({[r]:t})]});return R_.push(i),i.id}const X3=n=>{let e=Ty(n.state);return e.line?z3(n):e.block?Z3(n):!1};function ky(n,e){return({state:t,dispatch:r})=>{if(t.readOnly)return!1;let i=n(e,t);return i?(r(t.update(i)),!0):!1}}const z3=ky(K3,0),H3=ky(TE,0),Z3=ky((n,e)=>TE(n,e,Y3(e)),0);function Ty(n,e=n.selection.main.head){let t=n.languageDataAt("commentTokens",e);return t.length?t[0]:{}}const sl=50;function G3(n,{open:e,close:t},r,i){let s=n.sliceDoc(r-sl,r),o=n.sliceDoc(i,i+sl),a=/\s*$/.exec(s)[0].length,l=/^\s*/.exec(o)[0].length,c=s.length-a;if(s.slice(c-e.length,c)==e&&o.slice(l,l+t.length)==t)return{open:{pos:r-a,margin:a&&1},close:{pos:i+l,margin:l&&1}};let u,h;i-r<=2*sl?u=h=n.sliceDoc(r,i):(u=n.sliceDoc(r,r+sl),h=n.sliceDoc(i-sl,i));let f=/^\s*/.exec(u)[0].length,p=/\s*$/.exec(h)[0].length,d=h.length-p-t.length;return u.slice(f,f+e.length)==e&&h.slice(d,d+t.length)==t?{open:{pos:r+f+e.length,margin:/\s/.test(u.charAt(f+e.length))?1:0},close:{pos:i-p-t.length,margin:/\s/.test(h.charAt(d-1))?1:0}}:null}function Y3(n){let e=[];for(let t of n.selection.ranges){let r=n.doc.lineAt(t.from),i=t.to<=r.to?r:n.doc.lineAt(t.to),s=e.length-1;s>=0&&e[s].to>r.from?e[s].to=i.to:e.push({from:r.from,to:i.to})}return e}function TE(n,e,t=e.selection.ranges){let r=t.map(s=>Ty(e,s.from).block);if(!r.every(s=>s))return null;let i=t.map((s,o)=>G3(e,r[o],s.from,s.to));if(n!=2&&!i.every(s=>s))return{changes:e.changes(t.map((s,o)=>i[o]?[]:[{from:s.from,insert:r[o].open+" "},{from:s.to,insert:" "+r[o].close}]))};if(n!=1&&i.some(s=>s)){let s=[];for(let o=0,a;o<i.length;o++)if(a=i[o]){let l=r[o],{open:c,close:u}=a;s.push({from:c.pos-l.open.length,to:c.pos+c.margin},{from:u.pos-u.margin,to:u.pos+l.close.length})}return{changes:s}}return null}function K3(n,e,t=e.selection.ranges){let r=[],i=-1;for(let{from:s,to:o}of t){let a=r.length,l=1e9;for(let c=s;c<=o;){let u=e.doc.lineAt(c);if(u.from>i&&(s==o||o>u.from)){i=u.from;let h=Ty(e,c).line;if(!h)continue;let f=/^\s*/.exec(u.text)[0].length,p=f==u.length,d=u.text.slice(f,f+h.length)==h?f:-1;f<u.text.length&&f<l&&(l=f),r.push({line:u,comment:d,token:h,indent:f,empty:p,single:!1})}c=u.to+1}if(l<1e9)for(let c=a;c<r.length;c++)r[c].indent<r[c].line.text.length&&(r[c].indent=l);r.length==a+1&&(r[a].single=!0)}if(n!=2&&r.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:a,token:l,indent:c,empty:u,single:h}of r)(h||!u)&&s.push({from:a.from+c,insert:l+" "});let o=e.changes(s);return{changes:o,selection:e.selection.map(o,1)}}else if(n!=1&&r.some(s=>s.comment>=0)){let s=[];for(let{line:o,comment:a,token:l}of r)if(a>=0){let c=o.from+a,u=c+l.length;o.text[u-o.from]==" "&&u++,s.push({from:c,to:u})}return{changes:s}}return null}function Ma(n,e){return Oe.create(n.ranges.map(e),n.mainIndex)}function Oi(n,e){return n.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function jr({state:n,dispatch:e},t){let r=Ma(n.selection,t);return r.eq(n.selection)?!1:(e(Oi(n,r)),!0)}function id(n,e){return Oe.cursor(e?n.to:n.from)}function EE(n,e){return jr(n,t=>t.empty?n.moveByChar(t,e):id(t,e))}function Bn(n){return n.textDirectionAt(n.state.selection.main.head)==rn.LTR}const CE=n=>EE(n,!Bn(n)),AE=n=>EE(n,Bn(n));function PE(n,e){return jr(n,t=>t.empty?n.moveByGroup(t,e):id(t,e))}const J3=n=>PE(n,!Bn(n)),eF=n=>PE(n,Bn(n));function tF(n,e,t){if(e.type.prop(t))return!0;let r=e.to-e.from;return r&&(r>2||/[^\s,.;:]/.test(n.sliceDoc(e.from,e.to)))||e.firstChild}function sd(n,e,t){let r=an(n).resolveInner(e.head),i=t?rt.closedBy:rt.openedBy;for(let l=e.head;;){let c=t?r.childAfter(l):r.childBefore(l);if(!c)break;tF(n,c,i)?r=c:l=t?c.to:c.from}let s=r.type.prop(i),o,a;return s&&(o=t?Wo(n,r.from,1):Wo(n,r.to,-1))&&o.matched?a=t?o.end.to:o.end.from:a=t?r.to:r.from,Oe.cursor(a,t?-1:1)}const nF=n=>jr(n,e=>sd(n.state,e,!Bn(n))),rF=n=>jr(n,e=>sd(n.state,e,Bn(n)));function RE(n,e){return jr(n,t=>{if(!t.empty)return id(t,e);let r=n.moveVertically(t,e);return r.head!=t.head?r:n.moveToLineBoundary(t,e)})}const IE=n=>RE(n,!1),QE=n=>RE(n,!0);function NE(n){return Math.max(n.defaultLineHeight,Math.min(n.dom.clientHeight,innerHeight)-5)}function LE(n,e){let{state:t}=n,r=Ma(t.selection,a=>a.empty?n.moveVertically(a,e,NE(n)):id(a,e));if(r.eq(t.selection))return!1;let i=n.coordsAtPos(t.selection.main.head),s=n.scrollDOM.getBoundingClientRect(),o;return i&&i.top>s.top&&i.bottom<s.bottom&&i.top-s.top<=n.scrollDOM.scrollHeight-n.scrollDOM.scrollTop-n.scrollDOM.clientHeight&&(o=Xe.scrollIntoView(r.main.head,{y:"start",yMargin:i.top-s.top})),n.dispatch(Oi(t,r),{effects:o}),!0}const Q_=n=>LE(n,!1),jg=n=>LE(n,!0);function Ls(n,e,t){let r=n.lineBlockAt(e.head),i=n.moveToLineBoundary(e,t);if(i.head==e.head&&i.head!=(t?r.to:r.from)&&(i=n.moveToLineBoundary(e,t,!1)),!t&&i.head==r.from&&r.length){let s=/^\s*/.exec(n.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;s&&e.head!=r.from+s&&(i=Oe.cursor(r.from+s))}return i}const iF=n=>jr(n,e=>Ls(n,e,!0)),sF=n=>jr(n,e=>Ls(n,e,!1)),oF=n=>jr(n,e=>Ls(n,e,!Bn(n))),aF=n=>jr(n,e=>Ls(n,e,Bn(n))),lF=n=>jr(n,e=>Oe.cursor(n.lineBlockAt(e.head).from,1)),cF=n=>jr(n,e=>Oe.cursor(n.lineBlockAt(e.head).to,-1));function uF(n,e,t){let r=!1,i=Ma(n.selection,s=>{let o=Wo(n,s.head,-1)||Wo(n,s.head,1)||s.head>0&&Wo(n,s.head-1,1)||s.head<n.doc.length&&Wo(n,s.head+1,-1);if(!o||!o.end)return s;r=!0;let a=o.start.from==s.head?o.end.to:o.end.from;return t?Oe.range(s.anchor,a):Oe.cursor(a)});return r?(e(Oi(n,i)),!0):!1}const hF=({state:n,dispatch:e})=>uF(n,e,!1);function Cr(n,e){let t=Ma(n.state.selection,r=>{let i=e(r);return Oe.range(r.anchor,i.head,i.goalColumn)});return t.eq(n.state.selection)?!1:(n.dispatch(Oi(n.state,t)),!0)}function DE(n,e){return Cr(n,t=>n.moveByChar(t,e))}const ME=n=>DE(n,!Bn(n)),$E=n=>DE(n,Bn(n));function BE(n,e){return Cr(n,t=>n.moveByGroup(t,e))}const fF=n=>BE(n,!Bn(n)),dF=n=>BE(n,Bn(n)),pF=n=>Cr(n,e=>sd(n.state,e,!Bn(n))),mF=n=>Cr(n,e=>sd(n.state,e,Bn(n)));function FE(n,e){return Cr(n,t=>n.moveVertically(t,e))}const UE=n=>FE(n,!1),VE=n=>FE(n,!0);function WE(n,e){return Cr(n,t=>n.moveVertically(t,e,NE(n)))}const N_=n=>WE(n,!1),L_=n=>WE(n,!0),gF=n=>Cr(n,e=>Ls(n,e,!0)),OF=n=>Cr(n,e=>Ls(n,e,!1)),yF=n=>Cr(n,e=>Ls(n,e,!Bn(n))),bF=n=>Cr(n,e=>Ls(n,e,Bn(n))),vF=n=>Cr(n,e=>Oe.cursor(n.lineBlockAt(e.head).from)),wF=n=>Cr(n,e=>Oe.cursor(n.lineBlockAt(e.head).to)),D_=({state:n,dispatch:e})=>(e(Oi(n,{anchor:0})),!0),M_=({state:n,dispatch:e})=>(e(Oi(n,{anchor:n.doc.length})),!0),$_=({state:n,dispatch:e})=>(e(Oi(n,{anchor:n.selection.main.anchor,head:0})),!0),B_=({state:n,dispatch:e})=>(e(Oi(n,{anchor:n.selection.main.anchor,head:n.doc.length})),!0),_F=({state:n,dispatch:e})=>(e(n.update({selection:{anchor:0,head:n.doc.length},userEvent:"select"})),!0),xF=({state:n,dispatch:e})=>{let t=ad(n).map(({from:r,to:i})=>Oe.range(r,Math.min(i+1,n.doc.length)));return e(n.update({selection:Oe.create(t),userEvent:"select"})),!0},SF=({state:n,dispatch:e})=>{let t=Ma(n.selection,r=>{var i;let s=an(n).resolveInner(r.head,1);for(;!(s.from<r.from&&s.to>=r.to||s.to>r.to&&s.from<=r.from||!(!((i=s.parent)===null||i===void 0)&&i.parent));)s=s.parent;return Oe.range(s.to,s.from)});return e(Oi(n,t)),!0},kF=({state:n,dispatch:e})=>{let t=n.selection,r=null;return t.ranges.length>1?r=Oe.create([t.main]):t.main.empty||(r=Oe.create([Oe.cursor(t.main.head)])),r?(e(Oi(n,r)),!0):!1};function od(n,e){if(n.state.readOnly)return!1;let t="delete.selection",{state:r}=n,i=r.changeByRange(s=>{let{from:o,to:a}=s;if(o==a){let l=e(o);l<o?(t="delete.backward",l=Nu(n,l,!1)):l>o&&(t="delete.forward",l=Nu(n,l,!0)),o=Math.min(o,l),a=Math.max(a,l)}else o=Nu(n,o,!1),a=Nu(n,a,!0);return o==a?{range:s}:{changes:{from:o,to:a},range:Oe.cursor(o)}});return i.changes.empty?!1:(n.dispatch(r.update(i,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?Xe.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function Nu(n,e,t){if(n instanceof Xe)for(let r of n.state.facet(Xe.atomicRanges).map(i=>i(n)))r.between(e,e,(i,s)=>{i<e&&s>e&&(e=t?s:i)});return e}const jE=(n,e)=>od(n,t=>{let{state:r}=n,i=r.doc.lineAt(t),s,o;if(!e&&t>i.from&&t<i.from+200&&!/[^ \t]/.test(s=i.text.slice(0,t-i.from))){if(s[s.length-1]=="	")return t-1;let a=Gf(s,r.tabSize),l=a%Yh(r)||Yh(r);for(let c=0;c<l&&s[s.length-1-c]==" ";c++)t--;o=t}else o=Wn(i.text,t-i.from,e,e)+i.from,o==t&&i.number!=(e?r.doc.lines:1)&&(o+=e?1:-1);return o}),qg=n=>jE(n,!1),qE=n=>jE(n,!0),XE=(n,e)=>od(n,t=>{let r=t,{state:i}=n,s=i.doc.lineAt(r),o=i.charCategorizer(r);for(let a=null;;){if(r==(e?s.to:s.from)){r==t&&s.number!=(e?i.doc.lines:1)&&(r+=e?1:-1);break}let l=Wn(s.text,r-s.from,e)+s.from,c=s.text.slice(Math.min(r,l)-s.from,Math.max(r,l)-s.from),u=o(c);if(a!=null&&u!=a)break;(c!=" "||r!=t)&&(a=u),r=l}return r}),zE=n=>XE(n,!1),TF=n=>XE(n,!0),HE=n=>od(n,e=>{let t=n.lineBlockAt(e).to;return e<t?t:Math.min(n.state.doc.length,e+1)}),EF=n=>od(n,e=>{let t=n.lineBlockAt(e).from;return e>t?t:Math.max(0,e-1)}),CF=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:dt.of(["",""])},range:Oe.cursor(r.from)}));return e(n.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},AF=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(r=>{if(!r.empty||r.from==0||r.from==n.doc.length)return{range:r};let i=r.from,s=n.doc.lineAt(i),o=i==s.from?i-1:Wn(s.text,i-s.from,!1)+s.from,a=i==s.to?i+1:Wn(s.text,i-s.from,!0)+s.from;return{changes:{from:o,to:a,insert:n.doc.slice(i,a).append(n.doc.slice(o,i))},range:Oe.cursor(a)}});return t.changes.empty?!1:(e(n.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function ad(n){let e=[],t=-1;for(let r of n.selection.ranges){let i=n.doc.lineAt(r.from),s=n.doc.lineAt(r.to);if(!r.empty&&r.to==s.from&&(s=n.doc.lineAt(r.to-1)),t>=i.number){let o=e[e.length-1];o.to=s.to,o.ranges.push(r)}else e.push({from:i.from,to:s.to,ranges:[r]});t=s.number+1}return e}function ZE(n,e,t){if(n.readOnly)return!1;let r=[],i=[];for(let s of ad(n)){if(t?s.to==n.doc.length:s.from==0)continue;let o=n.doc.lineAt(t?s.to+1:s.from-1),a=o.length+1;if(t){r.push({from:s.to,to:o.to},{from:s.from,insert:o.text+n.lineBreak});for(let l of s.ranges)i.push(Oe.range(Math.min(n.doc.length,l.anchor+a),Math.min(n.doc.length,l.head+a)))}else{r.push({from:o.from,to:s.from},{from:s.to,insert:n.lineBreak+o.text});for(let l of s.ranges)i.push(Oe.range(l.anchor-a,l.head-a))}}return r.length?(e(n.update({changes:r,scrollIntoView:!0,selection:Oe.create(i,n.selection.mainIndex),userEvent:"move.line"})),!0):!1}const PF=({state:n,dispatch:e})=>ZE(n,e,!1),RF=({state:n,dispatch:e})=>ZE(n,e,!0);function GE(n,e,t){if(n.readOnly)return!1;let r=[];for(let i of ad(n))t?r.push({from:i.from,insert:n.doc.slice(i.from,i.to)+n.lineBreak}):r.push({from:i.to,insert:n.lineBreak+n.doc.slice(i.from,i.to)});return e(n.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const IF=({state:n,dispatch:e})=>GE(n,e,!1),QF=({state:n,dispatch:e})=>GE(n,e,!0),NF=n=>{if(n.state.readOnly)return!1;let{state:e}=n,t=e.changes(ad(e).map(({from:i,to:s})=>(i>0?i--:s<e.doc.length&&s++,{from:i,to:s}))),r=Ma(e.selection,i=>n.moveVertically(i,!0)).map(t);return n.dispatch({changes:t,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function LF(n,e){if(/\(\)|\[\]|\{\}/.test(n.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=an(n).resolveInner(e),r=t.childBefore(e),i=t.childAfter(e),s;return r&&i&&r.to<=e&&i.from>=e&&(s=r.type.prop(rt.closedBy))&&s.indexOf(i.name)>-1&&n.doc.lineAt(r.to).from==n.doc.lineAt(i.from).from?{from:r.to,to:i.from}:null}const DF=YE(!1),MF=YE(!0);function YE(n){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let r=e.changeByRange(i=>{let{from:s,to:o}=i,a=e.doc.lineAt(s),l=!n&&s==o&&LF(e,s);n&&(s=o=(o<=a.to?a:e.doc.lineAt(o)).to);let c=new td(e,{simulateBreak:s,simulateDoubleBreak:!!l}),u=wE(c,s);for(u==null&&(u=/^\s*/.exec(e.doc.lineAt(s).text)[0].length);o<a.to&&/\s/.test(a.text[o-a.from]);)o++;l?{from:s,to:o}=l:s>a.from&&s<a.from+100&&!/\S/.test(a.text.slice(0,s))&&(s=a.from);let h=["",Kh(e,u)];return l&&h.push(Kh(e,c.lineIndent(a.from,-1))),{changes:{from:s,to:o,insert:dt.of(h)},range:Oe.cursor(s+1+h[1].length)}});return t(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function Ey(n,e){let t=-1;return n.changeByRange(r=>{let i=[];for(let o=r.from;o<=r.to;){let a=n.doc.lineAt(o);a.number>t&&(r.empty||r.to>a.from)&&(e(a,i,r),t=a.number),o=a.to+1}let s=n.changes(i);return{changes:i,range:Oe.range(s.mapPos(r.anchor,1),s.mapPos(r.head,1))}})}const $F=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=Object.create(null),r=new td(n,{overrideIndentation:s=>{let o=t[s];return o==null?-1:o}}),i=Ey(n,(s,o,a)=>{let l=wE(r,s.from);if(l==null)return;/\S/.test(s.text)||(l=0);let c=/^\s*/.exec(s.text)[0],u=Kh(n,l);(c!=u||a.from<s.from+c.length)&&(t[s.from]=l,o.push({from:s.from,to:s.from+c.length,insert:u}))});return i.changes.empty||e(n.update(i,{userEvent:"indent"})),!0},KE=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(Ey(n,(t,r)=>{r.push({from:t.from,insert:n.facet(ed)})}),{userEvent:"input.indent"})),!0),JE=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(Ey(n,(t,r)=>{let i=/^\s*/.exec(t.text)[0];if(!i)return;let s=Gf(i,n.tabSize),o=0,a=Kh(n,Math.max(0,s-Yh(n)));for(;o<i.length&&o<a.length&&i.charCodeAt(o)==a.charCodeAt(o);)o++;r.push({from:t.from+o,to:t.from+i.length,insert:a.slice(o)})}),{userEvent:"delete.dedent"})),!0),BF=[{key:"Ctrl-b",run:CE,shift:ME,preventDefault:!0},{key:"Ctrl-f",run:AE,shift:$E},{key:"Ctrl-p",run:IE,shift:UE},{key:"Ctrl-n",run:QE,shift:VE},{key:"Ctrl-a",run:lF,shift:vF},{key:"Ctrl-e",run:cF,shift:wF},{key:"Ctrl-d",run:qE},{key:"Ctrl-h",run:qg},{key:"Ctrl-k",run:HE},{key:"Ctrl-Alt-h",run:zE},{key:"Ctrl-o",run:CF},{key:"Ctrl-t",run:AF},{key:"Ctrl-v",run:jg}],FF=[{key:"ArrowLeft",run:CE,shift:ME,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:J3,shift:fF,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:oF,shift:yF,preventDefault:!0},{key:"ArrowRight",run:AE,shift:$E,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:eF,shift:dF,preventDefault:!0},{mac:"Cmd-ArrowRight",run:aF,shift:bF,preventDefault:!0},{key:"ArrowUp",run:IE,shift:UE,preventDefault:!0},{mac:"Cmd-ArrowUp",run:D_,shift:$_},{mac:"Ctrl-ArrowUp",run:Q_,shift:N_},{key:"ArrowDown",run:QE,shift:VE,preventDefault:!0},{mac:"Cmd-ArrowDown",run:M_,shift:B_},{mac:"Ctrl-ArrowDown",run:jg,shift:L_},{key:"PageUp",run:Q_,shift:N_},{key:"PageDown",run:jg,shift:L_},{key:"Home",run:sF,shift:OF,preventDefault:!0},{key:"Mod-Home",run:D_,shift:$_},{key:"End",run:iF,shift:gF,preventDefault:!0},{key:"Mod-End",run:M_,shift:B_},{key:"Enter",run:DF},{key:"Mod-a",run:_F},{key:"Backspace",run:qg,shift:qg},{key:"Delete",run:qE},{key:"Mod-Backspace",mac:"Alt-Backspace",run:zE},{key:"Mod-Delete",mac:"Alt-Delete",run:TF},{mac:"Mod-Backspace",run:EF},{mac:"Mod-Delete",run:HE}].concat(BF.map(n=>({mac:n.key,run:n.run,shift:n.shift}))),F_=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:nF,shift:pF},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:rF,shift:mF},{key:"Alt-ArrowUp",run:PF},{key:"Shift-Alt-ArrowUp",run:IF},{key:"Alt-ArrowDown",run:RF},{key:"Shift-Alt-ArrowDown",run:QF},{key:"Escape",run:kF},{key:"Mod-Enter",run:MF},{key:"Alt-l",mac:"Ctrl-l",run:xF},{key:"Mod-i",run:SF,preventDefault:!0},{key:"Mod-[",run:JE},{key:"Mod-]",run:KE},{key:"Mod-Alt-\\",run:$F},{key:"Shift-Mod-k",run:NF},{key:"Shift-Mod-\\",run:hF},{key:"Mod-/",run:X3},{key:"Alt-A",run:H3}].concat(FF),U_={key:"Tab",run:KE,shift:JE};function Rn(){var n=arguments[0];typeof n=="string"&&(n=document.createElement(n));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var i=t[r];typeof i=="string"?n.setAttribute(r,i):i!=null&&(n[r]=i)}e++}for(;e<arguments.length;e++)eC(n,arguments[e]);return n}function eC(n,e){if(typeof e=="string")n.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)n.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)eC(n,e[t]);else throw new RangeError("Unsupported child node: "+e)}const V_=typeof String.prototype.normalize=="function"?n=>n.normalize("NFKD"):n=>n;class sc{constructor(e,t,r=0,i=e.length,s,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(r,i),this.bufferStart=r,this.normalize=s?a=>s(V_(a)):V_,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return zo(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=n5(e),r=this.bufferStart+this.bufferPos;this.bufferPos+=Lh(e);let i=this.normalize(t);for(let s=0,o=r;;s++){let a=i.charCodeAt(s),l=this.match(a,o);if(l)return this.value=l,this;if(s==i.length-1)break;o==r&&s<t.length&&t.charCodeAt(s)==a&&o++}}}match(e,t){let r=null;for(let i=0;i<this.matches.length;i+=2){let s=this.matches[i],o=!1;this.query.charCodeAt(s)==e&&(s==this.query.length-1?r={from:this.matches[i+1],to:t+1}:(this.matches[i]++,o=!0)),o||(this.matches.splice(i,2),i-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?r={from:t,to:t+1}:this.matches.push(1,t)),r&&this.test&&!this.test(r.from,r.to,this.buffer,this.bufferPos)&&(r=null),r}}typeof Symbol<"u"&&(sc.prototype[Symbol.iterator]=function(){return this});const tC={from:-1,to:-1,match:/.*/.exec("")},Cy="gm"+(/x/.unicode==null?"":"u");class nC{constructor(e,t,r,i=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=tC,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new rC(e,t,r,i,s);this.re=new RegExp(t,Cy+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.iter=e.iter();let o=e.lineAt(i);this.curLineStart=o.from,this.matchPos=Jh(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let r=this.curLineStart+t.index,i=r+t[0].length;if(this.matchPos=Jh(this.text,i+(r==i?1:0)),r==this.curLineStart+this.curLine.length&&this.nextLine(),(r<i||r>this.value.to)&&(!this.test||this.test(r,i,t)))return this.value={from:r,to:i,match:t},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const Zp=new WeakMap;class Yo{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,r){let i=Zp.get(e);if(!i||i.from>=r||i.to<=t){let a=new Yo(t,e.sliceString(t,r));return Zp.set(e,a),a}if(i.from==t&&i.to==r)return i;let{text:s,from:o}=i;return o>t&&(s=e.sliceString(t,o)+s,o=t),i.to<r&&(s+=e.sliceString(i.to,r)),Zp.set(e,new Yo(o,s)),new Yo(t,s.slice(t-o,r-o))}}class rC{constructor(e,t,r,i,s){this.text=e,this.to=s,this.done=!1,this.value=tC,this.matchPos=Jh(e,i),this.re=new RegExp(t,Cy+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.flat=Yo.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let r=this.flat.from+t.index,i=r+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(r,i,t)))return this.value={from:r,to:i,match:t},this.matchPos=Jh(this.text,i+(r==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Yo.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(nC.prototype[Symbol.iterator]=rC.prototype[Symbol.iterator]=function(){return this});function UF(n){try{return new RegExp(n,Cy),!0}catch{return!1}}function Jh(n,e){if(e>=n.length)return e;let t=n.lineAt(e),r;for(;e<t.to&&(r=t.text.charCodeAt(e-t.from))>=56320&&r<57344;)e++;return e}function Xg(n){let e=Rn("input",{class:"cm-textfield",name:"line"}),t=Rn("form",{class:"cm-gotoLine",onkeydown:i=>{i.keyCode==27?(i.preventDefault(),n.dispatch({effects:ef.of(!1)}),n.focus()):i.keyCode==13&&(i.preventDefault(),r())},onsubmit:i=>{i.preventDefault(),r()}},Rn("label",n.state.phrase("Go to line"),": ",e)," ",Rn("button",{class:"cm-button",type:"submit"},n.state.phrase("go")));function r(){let i=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(e.value);if(!i)return;let{state:s}=n,o=s.doc.lineAt(s.selection.main.head),[,a,l,c,u]=i,h=c?+c.slice(1):0,f=l?+l:o.number;if(l&&u){let d=f/100;a&&(d=d*(a=="-"?-1:1)+o.number/s.doc.lines),f=Math.round(s.doc.lines*d)}else l&&a&&(f=f*(a=="-"?-1:1)+o.number);let p=s.doc.line(Math.max(1,Math.min(s.doc.lines,f)));n.dispatch({effects:ef.of(!1),selection:Oe.cursor(p.from+Math.max(0,Math.min(h,p.length))),scrollIntoView:!0}),n.focus()}return{dom:t}}const ef=wt.define(),W_=Er.define({create(){return!0},update(n,e){for(let t of e.effects)t.is(ef)&&(n=t.value);return n},provide:n=>qh.from(n,e=>e?Xg:null)}),VF=n=>{let e=jh(n,Xg);if(!e){let t=[ef.of(!0)];n.state.field(W_,!1)==null&&t.push(wt.appendConfig.of([W_,WF])),n.dispatch({effects:t}),e=jh(n,Xg)}return e&&e.dom.querySelector("input").focus(),!0},WF=Xe.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),jF=({state:n,dispatch:e})=>{let{selection:t}=n,r=Oe.create(t.ranges.map(i=>n.wordAt(i.head)||Oe.cursor(i.head)),t.mainIndex);return r.eq(t)?!1:(e(n.update({selection:r})),!0)};function qF(n,e){let{main:t,ranges:r}=n.selection,i=n.wordAt(t.head),s=i&&i.from==t.from&&i.to==t.to;for(let o=!1,a=new sc(n.doc,e,r[r.length-1].to);;)if(a.next(),a.done){if(o)return null;a=new sc(n.doc,e,0,Math.max(0,r[r.length-1].from-1)),o=!0}else{if(o&&r.some(l=>l.from==a.value.from))continue;if(s){let l=n.wordAt(a.value.from);if(!l||l.from!=a.value.from||l.to!=a.value.to)continue}return a.value}}const XF=({state:n,dispatch:e})=>{let{ranges:t}=n.selection;if(t.some(s=>s.from===s.to))return jF({state:n,dispatch:e});let r=n.sliceDoc(t[0].from,t[0].to);if(n.selection.ranges.some(s=>n.sliceDoc(s.from,s.to)!=r))return!1;let i=qF(n,r);return i?(e(n.update({selection:n.selection.addRange(Oe.range(i.from,i.to),!1),effects:Xe.scrollIntoView(i.to)})),!0):!1},ld=et.define({combine(n){return Zf(n,{top:!1,caseSensitive:!1,literal:!1,wholeWord:!1,createPanel:e=>new rU(e)})}});function j_(n){return n?[ld.of(n),Hg]:Hg}class iC{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||UF(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(t,r)=>r=="n"?`
`:r=="r"?"\r":r=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new GF(this):new HF(this)}getCursor(e,t=0,r){let i=e.doc?e:Ot.create({doc:e});return r==null&&(r=i.doc.length),this.regexp?Uo(this,i,t,r):Fo(this,i,t,r)}}class sC{constructor(e){this.spec=e}}function Fo(n,e,t,r){return new sc(e.doc,n.unquoted,t,r,n.caseSensitive?void 0:i=>i.toLowerCase(),n.wholeWord?zF(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function zF(n,e){return(t,r,i,s)=>((s>t||s+i.length<r)&&(s=Math.max(0,t-2),i=n.sliceString(s,Math.min(n.length,r+2))),(e(tf(i,t-s))!=xn.Word||e(nf(i,t-s))!=xn.Word)&&(e(nf(i,r-s))!=xn.Word||e(tf(i,r-s))!=xn.Word))}class HF extends sC{constructor(e){super(e)}nextMatch(e,t,r){let i=Fo(this.spec,e,r,e.doc.length).nextOverlapping();return i.done&&(i=Fo(this.spec,e,0,t).nextOverlapping()),i.done?null:i.value}prevMatchInRange(e,t,r){for(let i=r;;){let s=Math.max(t,i-1e4-this.spec.unquoted.length),o=Fo(this.spec,e,s,i),a=null;for(;!o.nextOverlapping().done;)a=o.value;if(a)return a;if(s==t)return null;i-=1e4}}prevMatch(e,t,r){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let r=Fo(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=t)return null;i.push(r.value)}return i}highlight(e,t,r,i){let s=Fo(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(r+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}function Uo(n,e,t,r){return new nC(e.doc,n.search,{ignoreCase:!n.caseSensitive,test:n.wholeWord?ZF(e.charCategorizer(e.selection.main.head)):void 0},t,r)}function tf(n,e){return n.slice(Wn(n,e,!1),e)}function nf(n,e){return n.slice(e,Wn(n,e))}function ZF(n){return(e,t,r)=>!r[0].length||(n(tf(r.input,r.index))!=xn.Word||n(nf(r.input,r.index))!=xn.Word)&&(n(nf(r.input,r.index+r[0].length))!=xn.Word||n(tf(r.input,r.index+r[0].length))!=xn.Word)}class GF extends sC{nextMatch(e,t,r){let i=Uo(this.spec,e,r,e.doc.length).next();return i.done&&(i=Uo(this.spec,e,0,t).next()),i.done?null:i.value}prevMatchInRange(e,t,r){for(let i=1;;i++){let s=Math.max(t,r-i*1e4),o=Uo(this.spec,e,s,r),a=null;for(;!o.next().done;)a=o.value;if(a&&(s==t||a.from>s+10))return a;if(s==t)return null}}prevMatch(e,t,r){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace.replace(/\$([$&\d+])/g,(t,r)=>r=="$"?"$":r=="&"?e.match[0]:r!="0"&&+r<e.match.length?e.match[r]:t))}matchAll(e,t){let r=Uo(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=t)return null;i.push(r.value)}return i}highlight(e,t,r,i){let s=Uo(this.spec,e,Math.max(0,t-250),Math.min(r+250,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}const oc=wt.define(),Ay=wt.define(),ps=Er.define({create(n){return new Gp(zg(n).create(),null)},update(n,e){for(let t of e.effects)t.is(oc)?n=new Gp(t.value.create(),n.panel):t.is(Ay)&&(n=new Gp(n.query,t.value?Py:null));return n},provide:n=>qh.from(n,e=>e.panel)});class Gp{constructor(e,t){this.query=e,this.panel=t}}const YF=tt.mark({class:"cm-searchMatch"}),KF=tt.mark({class:"cm-searchMatch cm-searchMatch-selected"}),JF=Tr.fromClass(class{constructor(n){this.view=n,this.decorations=this.highlight(n.state.field(ps))}update(n){let e=n.state.field(ps);(e!=n.startState.field(ps)||n.docChanged||n.selectionSet||n.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:n,panel:e}){if(!e||!n.spec.valid)return tt.none;let{view:t}=this,r=new xs;for(let i=0,s=t.visibleRanges,o=s.length;i<o;i++){let{from:a,to:l}=s[i];for(;i<o-1&&l>s[i+1].from-2*250;)l=s[++i].to;n.highlight(t.state,a,l,(c,u)=>{let h=t.state.selection.ranges.some(f=>f.from==c&&f.to==u);r.add(c,u,h?KF:YF)})}return r.finish()}},{decorations:n=>n.decorations});function Bc(n){return e=>{let t=e.state.field(ps,!1);return t&&t.query.spec.valid?n(e,t):Ry(e)}}const rf=Bc((n,{query:e})=>{let{to:t}=n.state.selection.main,r=e.nextMatch(n.state,t,t);return r?(n.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0,effects:Iy(n,r),userEvent:"select.search"}),!0):!1}),sf=Bc((n,{query:e})=>{let{state:t}=n,{from:r}=t.selection.main,i=e.prevMatch(t,r,r);return i?(n.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:Iy(n,i),userEvent:"select.search"}),!0):!1}),eU=Bc((n,{query:e})=>{let t=e.matchAll(n.state,1e3);return!t||!t.length?!1:(n.dispatch({selection:Oe.create(t.map(r=>Oe.range(r.from,r.to))),userEvent:"select.search.matches"}),!0)}),tU=({state:n,dispatch:e})=>{let t=n.selection;if(t.ranges.length>1||t.main.empty)return!1;let{from:r,to:i}=t.main,s=[],o=0;for(let a=new sc(n.doc,n.sliceDoc(r,i));!a.next().done;){if(s.length>1e3)return!1;a.value.from==r&&(o=s.length),s.push(Oe.range(a.value.from,a.value.to))}return e(n.update({selection:Oe.create(s,o),userEvent:"select.search.matches"})),!0},q_=Bc((n,{query:e})=>{let{state:t}=n,{from:r,to:i}=t.selection.main;if(t.readOnly)return!1;let s=e.nextMatch(t,r,r);if(!s)return!1;let o=[],a,l,c=[];if(s.from==r&&s.to==i&&(l=t.toText(e.getReplacement(s)),o.push({from:s.from,to:s.to,insert:l}),s=e.nextMatch(t,s.from,s.to),c.push(Xe.announce.of(t.phrase("replaced match on line $",t.doc.lineAt(r).number)+"."))),s){let u=o.length==0||o[0].from>=s.to?0:s.to-s.from-l.length;a={anchor:s.from-u,head:s.to-u},c.push(Iy(n,s))}return n.dispatch({changes:o,selection:a,scrollIntoView:!!a,effects:c,userEvent:"input.replace"}),!0}),nU=Bc((n,{query:e})=>{if(n.state.readOnly)return!1;let t=e.matchAll(n.state,1e9).map(i=>{let{from:s,to:o}=i;return{from:s,to:o,insert:e.getReplacement(i)}});if(!t.length)return!1;let r=n.state.phrase("replaced $ matches",t.length)+".";return n.dispatch({changes:t,effects:Xe.announce.of(r),userEvent:"input.replace.all"}),!0});function Py(n){return n.state.facet(ld).createPanel(n)}function zg(n,e){var t,r,i,s;let o=n.selection.main,a=o.empty||o.to>o.from+100?"":n.sliceDoc(o.from,o.to);if(e&&!a)return e;let l=n.facet(ld);return new iC({search:((t=e==null?void 0:e.literal)!==null&&t!==void 0?t:l.literal)?a:a.replace(/\n/g,"\\n"),caseSensitive:(r=e==null?void 0:e.caseSensitive)!==null&&r!==void 0?r:l.caseSensitive,literal:(i=e==null?void 0:e.literal)!==null&&i!==void 0?i:l.literal,wholeWord:(s=e==null?void 0:e.wholeWord)!==null&&s!==void 0?s:l.wholeWord})}const Ry=n=>{let e=n.state.field(ps,!1);if(e&&e.panel){let t=jh(n,Py);if(!t)return!1;let r=t.dom.querySelector("[main-field]");if(r&&r!=n.root.activeElement){let i=zg(n.state,e.query.spec);i.valid&&n.dispatch({effects:oc.of(i)}),r.focus(),r.select()}}else n.dispatch({effects:[Ay.of(!0),e?oc.of(zg(n.state,e.query.spec)):wt.appendConfig.of(Hg)]});return!0},oC=n=>{let e=n.state.field(ps,!1);if(!e||!e.panel)return!1;let t=jh(n,Py);return t&&t.dom.contains(n.root.activeElement)&&n.focus(),n.dispatch({effects:Ay.of(!1)}),!0},X_=[{key:"Mod-f",run:Ry,scope:"editor search-panel"},{key:"F3",run:rf,shift:sf,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:rf,shift:sf,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:oC,scope:"editor search-panel"},{key:"Mod-Shift-l",run:tU},{key:"Alt-g",run:VF},{key:"Mod-d",run:XF,preventDefault:!0}];class rU{constructor(e){this.view=e;let t=this.query=e.state.field(ps).query.spec;this.commit=this.commit.bind(this),this.searchField=Rn("input",{value:t.search,placeholder:nr(e,"Find"),"aria-label":nr(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Rn("input",{value:t.replace,placeholder:nr(e,"Replace"),"aria-label":nr(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Rn("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=Rn("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=Rn("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit});function r(i,s,o){return Rn("button",{class:"cm-button",name:i,onclick:s,type:"button"},o)}this.dom=Rn("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,r("next",()=>rf(e),[nr(e,"next")]),r("prev",()=>sf(e),[nr(e,"previous")]),r("select",()=>eU(e),[nr(e,"all")]),Rn("label",null,[this.caseField,nr(e,"match case")]),Rn("label",null,[this.reField,nr(e,"regexp")]),Rn("label",null,[this.wordField,nr(e,"by word")]),...e.state.readOnly?[]:[Rn("br"),this.replaceField,r("replace",()=>q_(e),[nr(e,"replace")]),r("replaceAll",()=>nU(e),[nr(e,"replace all")])],Rn("button",{name:"close",onclick:()=>oC(e),"aria-label":nr(e,"close"),type:"button"},["\xD7"])])}commit(){let e=new iC({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:oc.of(e)}))}keydown(e){MB(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?sf:rf)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),q_(this.view))}update(e){for(let t of e.transactions)for(let r of t.effects)r.is(oc)&&!r.value.eq(this.query)&&this.setQuery(r.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(ld).top}}function nr(n,e){return n.state.phrase(e)}const Lu=30,Du=/[\s\.,:;?!]/;function Iy(n,{from:e,to:t}){let r=n.state.doc.lineAt(e),i=n.state.doc.lineAt(t).to,s=Math.max(r.from,e-Lu),o=Math.min(i,t+Lu),a=n.state.sliceDoc(s,o);if(s!=r.from){for(let l=0;l<Lu;l++)if(!Du.test(a[l+1])&&Du.test(a[l])){a=a.slice(l);break}}if(o!=i){for(let l=a.length-1;l>a.length-Lu;l--)if(!Du.test(a[l-1])&&Du.test(a[l])){a=a.slice(0,l);break}}return Xe.announce.of(`${n.state.phrase("current match")}. ${a} ${n.state.phrase("on line")} ${r.number}.`)}const iU=Xe.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),Hg=[ps,yo.lowest(JF),iU];function z_(n){let e=Object.keys(n).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function sU(n){let e=Object.create(null),t=Object.create(null);for(let{label:i}of n){e[i[0]]=!0;for(let s=1;s<i.length;s++)t[i[s]]=!0}let r=z_(e)+z_(t)+"*$";return[new RegExp("^"+r),new RegExp(r)]}function oU(n){let e=n.map(i=>typeof i=="string"?{label:i}:i),[t,r]=e.every(i=>/^\w+$/.test(i.label))?[/\w*$/,/\w+$/]:sU(e);return i=>{let s=i.matchBefore(r);return s||i.explicit?{from:s?s.from:i.pos,options:e,validFor:t}:null}}function aU(n,e){return t=>{for(let r=an(t.state).resolveInner(t.pos,-1);r;r=r.parent)if(n.indexOf(r.name)>-1)return null;return e(t)}}const lU=Xe.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer",padding:"1px 3px",lineHeight:1.2}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"\xB7\xB7\xB7"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:`${400}px`,boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:`${30}px`},".cm-completionInfo.cm-completionInfo-right-narrow":{left:`${30}px`},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'\u0192'"}},".cm-completionIcon-class":{"&:after":{content:"'\u25CB'"}},".cm-completionIcon-interface":{"&:after":{content:"'\u25CC'"}},".cm-completionIcon-variable":{"&:after":{content:"'\u{1D465}'"}},".cm-completionIcon-constant":{"&:after":{content:"'\u{1D436}'"}},".cm-completionIcon-type":{"&:after":{content:"'\u{1D461}'"}},".cm-completionIcon-enum":{"&:after":{content:"'\u222A'"}},".cm-completionIcon-property":{"&:after":{content:"'\u25A1'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\u{1F511}\uFE0E'"}},".cm-completionIcon-namespace":{"&:after":{content:"'\u25A2'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class cU{constructor(e,t,r,i){this.field=e,this.line=t,this.from=r,this.to=i}}class Qy{constructor(e,t,r){this.field=e,this.from=t,this.to=r}map(e){let t=e.mapPos(this.from,-1,Vn.TrackDel),r=e.mapPos(this.to,1,Vn.TrackDel);return t==null||r==null?null:new Qy(this.field,t,r)}}class Ny{constructor(e,t){this.lines=e,this.fieldPositions=t}instantiate(e,t){let r=[],i=[t],s=e.doc.lineAt(t),o=/^\s*/.exec(s.text)[0];for(let l of this.lines){if(r.length){let c=o,u=/^\t*/.exec(l)[0].length;for(let h=0;h<u;h++)c+=e.facet(ed);i.push(t+c.length-u),l=c+l.slice(u)}r.push(l),t+=l.length+1}let a=this.fieldPositions.map(l=>new Qy(l.field,i[l.line]+l.from,i[l.line]+l.to));return{text:r,ranges:a}}static parse(e){let t=[],r=[],i=[],s;for(let o of e.split(/\r\n?|\n/)){for(;s=/[#$]\{(?:(\d+)(?::([^}]*))?|([^}]*))\}/.exec(o);){let a=s[1]?+s[1]:null,l=s[2]||s[3]||"",c=-1;for(let u=0;u<t.length;u++)(a!=null?t[u].seq==a:l?t[u].name==l:!1)&&(c=u);if(c<0){let u=0;for(;u<t.length&&(a==null||t[u].seq!=null&&t[u].seq<a);)u++;t.splice(u,0,{seq:a,name:l}),c=u;for(let h of i)h.field>=c&&h.field++}i.push(new cU(c,r.length,s.index,s.index+l.length)),o=o.slice(0,s.index)+l+o.slice(s.index+s[0].length)}for(let a;a=/\\([{}])/.exec(o);){o=o.slice(0,a.index)+a[1]+o.slice(a.index+a[0].length);for(let l of i)l.line==r.length&&l.from>a.index&&(l.from--,l.to--)}r.push(o)}return new Ny(r,i)}}let uU=tt.widget({widget:new class extends bo{toDOM(){let n=document.createElement("span");return n.className="cm-snippetFieldPosition",n}ignoreEvent(){return!1}}}),hU=tt.mark({class:"cm-snippetField"});class $a{constructor(e,t){this.ranges=e,this.active=t,this.deco=tt.set(e.map(r=>(r.from==r.to?uU:hU).range(r.from,r.to)))}map(e){let t=[];for(let r of this.ranges){let i=r.map(e);if(!i)return null;t.push(i)}return new $a(t,this.active)}selectionInsideField(e){return e.ranges.every(t=>this.ranges.some(r=>r.field==this.active&&r.from<=t.from&&r.to>=t.to))}}const Fc=wt.define({map(n,e){return n&&n.map(e)}}),fU=wt.define(),ac=Er.define({create(){return null},update(n,e){for(let t of e.effects){if(t.is(Fc))return t.value;if(t.is(fU)&&n)return new $a(n.ranges,t.value)}return n&&e.docChanged&&(n=n.map(e.changes)),n&&e.selection&&!n.selectionInsideField(e.selection)&&(n=null),n},provide:n=>Xe.decorations.from(n,e=>e?e.deco:tt.none)});function Ly(n,e){return Oe.create(n.filter(t=>t.field==e).map(t=>Oe.range(t.from,t.to)))}function dU(n){let e=Ny.parse(n);return(t,r,i,s)=>{let{text:o,ranges:a}=e.instantiate(t.state,i),l={changes:{from:i,to:s,insert:dt.of(o)},scrollIntoView:!0};if(a.length&&(l.selection=Ly(a,0)),a.length>1){let c=new $a(a,0),u=l.effects=[Fc.of(c)];t.state.field(ac,!1)===void 0&&u.push(wt.appendConfig.of([ac,yU,bU,lU]))}t.dispatch(t.state.update(l))}}function aC(n){return({state:e,dispatch:t})=>{let r=e.field(ac,!1);if(!r||n<0&&r.active==0)return!1;let i=r.active+n,s=n>0&&!r.ranges.some(o=>o.field==i+n);return t(e.update({selection:Ly(r.ranges,i),effects:Fc.of(s?null:new $a(r.ranges,i))})),!0}}const pU=({state:n,dispatch:e})=>n.field(ac,!1)?(e(n.update({effects:Fc.of(null)})),!0):!1,mU=aC(1),gU=aC(-1),OU=[{key:"Tab",run:mU,shift:gU},{key:"Escape",run:pU}],H_=et.define({combine(n){return n.length?n[0]:OU}}),yU=yo.highest(ec.compute([H_],n=>n.facet(H_)));function Qr(n,e){return Object.assign(Object.assign({},e),{apply:dU(n)})}const bU=Xe.domEventHandlers({mousedown(n,e){let t=e.state.field(ac,!1),r;if(!t||(r=e.posAtCoords({x:n.clientX,y:n.clientY}))==null)return!1;let i=t.ranges.find(s=>s.from<=r&&s.to>=r);return!i||i.field==t.active?!1:(e.dispatch({selection:Ly(t.ranges,i.field),effects:Fc.of(t.ranges.some(s=>s.field>i.field)?new $a(t.ranges,i.field):null)}),!0)}}),lC=new class extends lo{};lC.startSide=1;lC.endSide=-1;class of{constructor(e,t,r,i,s,o,a){this.type=e,this.value=t,this.from=r,this.hash=i,this.end=s,this.children=o,this.positions=a,this.hashProp=[[rt.contextHash,i]]}static create(e,t,r,i,s){let o=i+(i<<8)+e+(t<<4)|0;return new of(e,t,r,o,s,[],[])}addChild(e,t){e.prop(rt.contextHash)!=this.hash&&(e=new _t(e.type,e.children,e.positions,e.length,this.hashProp)),this.children.push(e),this.positions.push(t)}toTree(e,t=this.end){let r=this.children.length-1;return r>=0&&(t=Math.max(t,this.positions[r]+this.children[r].length+this.from)),new _t(e.types[this.type],this.children,this.positions,t-this.from).balance({makeTree:(s,o,a)=>new _t(on.none,s,o,a,this.hashProp)})}}var ke;(function(n){n[n.Document=1]="Document",n[n.CodeBlock=2]="CodeBlock",n[n.FencedCode=3]="FencedCode",n[n.Blockquote=4]="Blockquote",n[n.HorizontalRule=5]="HorizontalRule",n[n.BulletList=6]="BulletList",n[n.OrderedList=7]="OrderedList",n[n.ListItem=8]="ListItem",n[n.ATXHeading1=9]="ATXHeading1",n[n.ATXHeading2=10]="ATXHeading2",n[n.ATXHeading3=11]="ATXHeading3",n[n.ATXHeading4=12]="ATXHeading4",n[n.ATXHeading5=13]="ATXHeading5",n[n.ATXHeading6=14]="ATXHeading6",n[n.SetextHeading1=15]="SetextHeading1",n[n.SetextHeading2=16]="SetextHeading2",n[n.HTMLBlock=17]="HTMLBlock",n[n.LinkReference=18]="LinkReference",n[n.Paragraph=19]="Paragraph",n[n.CommentBlock=20]="CommentBlock",n[n.ProcessingInstructionBlock=21]="ProcessingInstructionBlock",n[n.Escape=22]="Escape",n[n.Entity=23]="Entity",n[n.HardBreak=24]="HardBreak",n[n.Emphasis=25]="Emphasis",n[n.StrongEmphasis=26]="StrongEmphasis",n[n.Link=27]="Link",n[n.Image=28]="Image",n[n.InlineCode=29]="InlineCode",n[n.HTMLTag=30]="HTMLTag",n[n.Comment=31]="Comment",n[n.ProcessingInstruction=32]="ProcessingInstruction",n[n.URL=33]="URL",n[n.HeaderMark=34]="HeaderMark",n[n.QuoteMark=35]="QuoteMark",n[n.ListMark=36]="ListMark",n[n.LinkMark=37]="LinkMark",n[n.EmphasisMark=38]="EmphasisMark",n[n.CodeMark=39]="CodeMark",n[n.CodeText=40]="CodeText",n[n.CodeInfo=41]="CodeInfo",n[n.LinkTitle=42]="LinkTitle",n[n.LinkLabel=43]="LinkLabel"})(ke||(ke={}));class vU{constructor(e,t){this.start=e,this.content=t,this.marks=[],this.parsers=[]}}class wU{constructor(){this.text="",this.baseIndent=0,this.basePos=0,this.depth=0,this.markers=[],this.pos=0,this.indent=0,this.next=-1}forward(){this.basePos>this.pos&&this.forwardInner()}forwardInner(){let e=this.skipSpace(this.basePos);this.indent=this.countIndent(e,this.pos,this.indent),this.pos=e,this.next=e==this.text.length?-1:this.text.charCodeAt(e)}skipSpace(e){return Pl(this.text,e)}reset(e){for(this.text=e,this.baseIndent=this.basePos=this.pos=this.indent=0,this.forwardInner(),this.depth=1;this.markers.length;)this.markers.pop()}moveBase(e){this.basePos=e,this.baseIndent=this.countIndent(e,this.pos,this.indent)}moveBaseColumn(e){this.baseIndent=e,this.basePos=this.findColumn(e)}addMarker(e){this.markers.push(e)}countIndent(e,t=0,r=0){for(let i=t;i<e;i++)r+=this.text.charCodeAt(i)==9?4-r%4:1;return r}findColumn(e){let t=0;for(let r=0;t<this.text.length&&r<e;t++)r+=this.text.charCodeAt(t)==9?4-r%4:1;return t}scrub(){if(!this.baseIndent)return this.text;let e="";for(let t=0;t<this.basePos;t++)e+=" ";return e+this.text.slice(this.basePos)}}function Z_(n,e,t){if(t.pos==t.text.length||n!=e.block&&t.indent>=e.stack[t.depth+1].value+t.baseIndent)return!0;if(t.indent>=t.baseIndent+4)return!1;let r=(n.type==ke.OrderedList?$y:My)(t,e,!1);return r>0&&(n.type!=ke.BulletList||Dy(t,e,!1)<0)&&t.text.charCodeAt(t.pos+r-1)==n.value}const cC={[ke.Blockquote](n,e,t){return t.next!=62?!1:(t.markers.push(mt(ke.QuoteMark,e.lineStart+t.pos,e.lineStart+t.pos+1)),t.moveBase(t.pos+(Ar(t.text.charCodeAt(t.pos+1))?2:1)),n.end=e.lineStart+t.text.length,!0)},[ke.ListItem](n,e,t){return t.indent<t.baseIndent+n.value&&t.next>-1?!1:(t.moveBaseColumn(t.baseIndent+n.value),!0)},[ke.OrderedList]:Z_,[ke.BulletList]:Z_,[ke.Document](){return!0}};function Ar(n){return n==32||n==9||n==10||n==13}function Pl(n,e=0){for(;e<n.length&&Ar(n.charCodeAt(e));)e++;return e}function G_(n,e,t){for(;e>t&&Ar(n.charCodeAt(e-1));)e--;return e}function uC(n){if(n.next!=96&&n.next!=126)return-1;let e=n.pos+1;for(;e<n.text.length&&n.text.charCodeAt(e)==n.next;)e++;if(e<n.pos+3)return-1;if(n.next==96){for(let t=e;t<n.text.length;t++)if(n.text.charCodeAt(t)==96)return-1}return e}function hC(n){return n.next!=62?-1:n.text.charCodeAt(n.pos+1)==32?2:1}function Dy(n,e,t){if(n.next!=42&&n.next!=45&&n.next!=95)return-1;let r=1;for(let i=n.pos+1;i<n.text.length;i++){let s=n.text.charCodeAt(i);if(s==n.next)r++;else if(!Ar(s))return-1}return t&&n.next==45&&pC(n)>-1&&n.depth==e.stack.length||r<3?-1:1}function fC(n,e){for(let t=n.stack.length-1;t>=0;t--)if(n.stack[t].type==e)return!0;return!1}function My(n,e,t){return(n.next==45||n.next==43||n.next==42)&&(n.pos==n.text.length-1||Ar(n.text.charCodeAt(n.pos+1)))&&(!t||fC(e,ke.BulletList)||n.skipSpace(n.pos+2)<n.text.length)?1:-1}function $y(n,e,t){let r=n.pos,i=n.next;for(;i>=48&&i<=57;){r++;if(r==n.text.length)return-1;i=n.text.charCodeAt(r)}return r==n.pos||r>n.pos+9||i!=46&&i!=41||r<n.text.length-1&&!Ar(n.text.charCodeAt(r+1))||t&&!fC(e,ke.OrderedList)&&(n.skipSpace(r+1)==n.text.length||r>n.pos+1||n.next!=49)?-1:r+1-n.pos}function dC(n){if(n.next!=35)return-1;let e=n.pos+1;for(;e<n.text.length&&n.text.charCodeAt(e)==35;)e++;if(e<n.text.length&&n.text.charCodeAt(e)!=32)return-1;let t=e-n.pos;return t>6?-1:t}function pC(n){if(n.next!=45&&n.next!=61||n.indent>=n.baseIndent+4)return-1;let e=n.pos+1;for(;e<n.text.length&&n.text.charCodeAt(e)==n.next;)e++;let t=e;for(;e<n.text.length&&Ar(n.text.charCodeAt(e));)e++;return e==n.text.length?t:-1}const Zg=/^[ \t]*$/,mC=/-->/,gC=/\?>/,Gg=[[/^<(?:script|pre|style)(?:\s|>|$)/i,/<\/(?:script|pre|style)>/i],[/^\s*<!--/,mC],[/^\s*<\?/,gC],[/^\s*<![A-Z]/,/>/],[/^\s*<!\[CDATA\[/,/\]\]>/],[/^\s*<\/?(?:address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h1|h2|h3|h4|h5|h6|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul)(?:\s|\/?>|$)/i,Zg],[/^\s*(?:<\/[a-z][\w-]*\s*>|<[a-z][\w-]*(\s+[a-z:_][\w-.]*(?:\s*=\s*(?:[^\s"'=<>`]+|'[^']*'|"[^"]*"))?)*\s*>)\s*$/i,Zg]];function OC(n,e,t){if(n.next!=60)return-1;let r=n.text.slice(n.pos);for(let i=0,s=Gg.length-(t?1:0);i<s;i++)if(Gg[i][0].test(r))return i;return-1}function Y_(n,e){let t=n.countIndent(e,n.pos,n.indent),r=n.countIndent(n.skipSpace(e),e,t);return r>=t+5?t+1:r}function Us(n,e,t){let r=n.length-1;r>=0&&n[r].to==e&&n[r].type==ke.CodeText?n[r].to=t:n.push(mt(ke.CodeText,e,t))}const Mu={LinkReference:void 0,IndentedCode(n,e){let t=e.baseIndent+4;if(e.indent<t)return!1;let r=e.findColumn(t),i=n.lineStart+r,s=n.lineStart+e.text.length,o=[],a=[];for(Us(o,i,s);n.nextLine()&&e.depth>=n.stack.length;)if(e.pos==e.text.length){Us(a,n.lineStart-1,n.lineStart);for(let l of e.markers)a.push(l)}else{if(e.indent<t)break;{if(a.length){for(let c of a)c.type==ke.CodeText?Us(o,c.from,c.to):o.push(c);a=[]}Us(o,n.lineStart-1,n.lineStart);for(let c of e.markers)o.push(c);s=n.lineStart+e.text.length;let l=n.lineStart+e.findColumn(e.baseIndent+4);l<s&&Us(o,l,s)}}return a.length&&(a=a.filter(l=>l.type!=ke.CodeText),a.length&&(e.markers=a.concat(e.markers))),n.addNode(n.buffer.writeElements(o,-i).finish(ke.CodeBlock,s-i),i),!0},FencedCode(n,e){let t=uC(e);if(t<0)return!1;let r=n.lineStart+e.pos,i=e.next,s=t-e.pos,o=e.skipSpace(t),a=G_(e.text,e.text.length,o),l=[mt(ke.CodeMark,r,r+s)];o<a&&l.push(mt(ke.CodeInfo,n.lineStart+o,n.lineStart+a));for(let c=!0;n.nextLine()&&e.depth>=n.stack.length;c=!1){let u=e.pos;if(e.indent-e.baseIndent<4)for(;u<e.text.length&&e.text.charCodeAt(u)==i;)u++;if(u-e.pos>=s&&e.skipSpace(u)==e.text.length){for(let h of e.markers)l.push(h);l.push(mt(ke.CodeMark,n.lineStart+e.pos,n.lineStart+u)),n.nextLine();break}else{c||Us(l,n.lineStart-1,n.lineStart);for(let p of e.markers)l.push(p);let h=n.lineStart+e.basePos,f=n.lineStart+e.text.length;h<f&&Us(l,h,f)}}return n.addNode(n.buffer.writeElements(l,-r).finish(ke.FencedCode,n.prevLineEnd()-r),r),!0},Blockquote(n,e){let t=hC(e);return t<0?!1:(n.startContext(ke.Blockquote,e.pos),n.addNode(ke.QuoteMark,n.lineStart+e.pos,n.lineStart+e.pos+1),e.moveBase(e.pos+t),null)},HorizontalRule(n,e){if(Dy(e,n,!1)<0)return!1;let t=n.lineStart+e.pos;return n.nextLine(),n.addNode(ke.HorizontalRule,t),!0},BulletList(n,e){let t=My(e,n,!1);if(t<0)return!1;n.block.type!=ke.BulletList&&n.startContext(ke.BulletList,e.basePos,e.next);let r=Y_(e,e.pos+1);return n.startContext(ke.ListItem,e.basePos,r-e.baseIndent),n.addNode(ke.ListMark,n.lineStart+e.pos,n.lineStart+e.pos+t),e.moveBaseColumn(r),null},OrderedList(n,e){let t=$y(e,n,!1);if(t<0)return!1;n.block.type!=ke.OrderedList&&n.startContext(ke.OrderedList,e.basePos,e.text.charCodeAt(e.pos+t-1));let r=Y_(e,e.pos+t);return n.startContext(ke.ListItem,e.basePos,r-e.baseIndent),n.addNode(ke.ListMark,n.lineStart+e.pos,n.lineStart+e.pos+t),e.moveBaseColumn(r),null},ATXHeading(n,e){let t=dC(e);if(t<0)return!1;let r=e.pos,i=n.lineStart+r,s=G_(e.text,e.text.length,r),o=s;for(;o>r&&e.text.charCodeAt(o-1)==e.next;)o--;(o==s||o==r||!Ar(e.text.charCodeAt(o-1)))&&(o=e.text.length);let a=n.buffer.write(ke.HeaderMark,0,t).writeElements(n.parser.parseInline(e.text.slice(r+t+1,o),i+t+1),-i);o<e.text.length&&a.write(ke.HeaderMark,o-r,s-r);let l=a.finish(ke.ATXHeading1-1+t,e.text.length-r);return n.nextLine(),n.addNode(l,i),!0},HTMLBlock(n,e){let t=OC(e,n,!1);if(t<0)return!1;let r=n.lineStart+e.pos,i=Gg[t][1],s=[],o=i!=Zg;for(;!i.test(e.text)&&n.nextLine();){if(e.depth<n.stack.length){o=!1;break}for(let c of e.markers)s.push(c)}o&&n.nextLine();let a=i==mC?ke.CommentBlock:i==gC?ke.ProcessingInstructionBlock:ke.HTMLBlock,l=n.prevLineEnd();return n.addNode(n.buffer.writeElements(s,-r).finish(a,l-r),r),!0},SetextHeading:void 0};class _U{constructor(e){this.stage=0,this.elts=[],this.pos=0,this.start=e.start,this.advance(e.content)}nextLine(e,t,r){if(this.stage==-1)return!1;let i=r.content+`
`+t.scrub(),s=this.advance(i);return s>-1&&s<i.length?this.complete(e,r,s):!1}finish(e,t){return(this.stage==2||this.stage==3)&&Pl(t.content,this.pos)==t.content.length?this.complete(e,t,t.content.length):!1}complete(e,t,r){return e.addLeafElement(t,mt(ke.LinkReference,this.start,this.start+r,this.elts)),!0}nextStage(e){return e?(this.pos=e.to-this.start,this.elts.push(e),this.stage++,!0):(e===!1&&(this.stage=-1),!1)}advance(e){for(;;){if(this.stage==-1)return-1;if(this.stage==0){if(!this.nextStage(TC(e,this.pos,this.start,!0)))return-1;if(e.charCodeAt(this.pos)!=58)return this.stage=-1;this.elts.push(mt(ke.LinkMark,this.pos+this.start,this.pos+this.start+1)),this.pos++}else if(this.stage==1){if(!this.nextStage(SC(e,Pl(e,this.pos),this.start)))return-1}else if(this.stage==2){let t=Pl(e,this.pos),r=0;if(t>this.pos){let i=kC(e,t,this.start);if(i){let s=Yp(e,i.to-this.start);s>0&&(this.nextStage(i),r=s)}}return r||(r=Yp(e,this.pos)),r>0&&r<e.length?r:-1}else return Yp(e,this.pos)}}}function Yp(n,e){for(;e<n.length;e++){let t=n.charCodeAt(e);if(t==10)break;if(!Ar(t))return-1}return e}class xU{nextLine(e,t,r){let i=t.depth<e.stack.length?-1:pC(t),s=t.next;if(i<0)return!1;let o=mt(ke.HeaderMark,e.lineStart+t.pos,e.lineStart+i);return e.nextLine(),e.addLeafElement(r,mt(s==61?ke.SetextHeading1:ke.SetextHeading2,r.start,e.prevLineEnd(),[...e.parser.parseInline(r.content,r.start),o])),!0}finish(){return!1}}const SU={LinkReference(n,e){return e.content.charCodeAt(0)==91?new _U(e):null},SetextHeading(){return new xU}},kU=[(n,e)=>dC(e)>=0,(n,e)=>uC(e)>=0,(n,e)=>hC(e)>=0,(n,e)=>My(e,n,!0)>=0,(n,e)=>$y(e,n,!0)>=0,(n,e)=>Dy(e,n,!0)>=0,(n,e)=>OC(e,n,!0)>=0],TU={text:"",end:0};class EU{constructor(e,t,r,i){this.parser=e,this.input=t,this.ranges=i,this.line=new wU,this.atEnd=!1,this.dontInject=new Set,this.stoppedAt=null,this.rangeI=0,this.to=i[i.length-1].to,this.lineStart=this.absoluteLineStart=this.absoluteLineEnd=i[0].from,this.block=of.create(ke.Document,0,this.lineStart,0,0),this.stack=[this.block],this.fragments=r.length?new RU(r,t):null,this.readLine()}get parsedPos(){return this.absoluteLineStart}advance(){if(this.stoppedAt!=null&&this.absoluteLineStart>this.stoppedAt)return this.finish();let{line:e}=this;for(;;){for(;e.depth<this.stack.length;)this.finishContext();for(let r of e.markers)this.addNode(r.type,r.from,r.to);if(e.pos<e.text.length)break;if(!this.nextLine())return this.finish()}if(this.fragments&&this.reuseFragment(e.basePos))return null;e:for(;;){for(let r of this.parser.blockParsers)if(r){let i=r(this,e);if(i!=!1){if(i==!0)return null;e.forward();continue e}}break}let t=new vU(this.lineStart+e.pos,e.text.slice(e.pos));for(let r of this.parser.leafBlockParsers)if(r){let i=r(this,t);i&&t.parsers.push(i)}e:for(;this.nextLine()&&e.pos!=e.text.length;){if(e.indent<e.baseIndent+4){for(let r of this.parser.endLeafBlock)if(r(this,e,t))break e}for(let r of t.parsers)if(r.nextLine(this,e,t))return null;t.content+=`
`+e.scrub();for(let r of e.markers)t.marks.push(r)}return this.finishLeaf(t),null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}reuseFragment(e){if(!this.fragments.moveTo(this.absoluteLineStart+e,this.absoluteLineStart)||!this.fragments.matches(this.block.hash))return!1;let t=this.fragments.takeNodes(this);if(!t)return!1;let r=t,i=this.absoluteLineStart+t;for(let s=1;s<this.ranges.length;s++){let o=this.ranges[s-1].to,a=this.ranges[s].from;o>=this.lineStart&&a<i&&(r-=a-o)}return this.lineStart+=r,this.absoluteLineStart+=t,this.moveRangeI(),this.absoluteLineStart<this.to?(this.lineStart++,this.absoluteLineStart++,this.readLine()):(this.atEnd=!0,this.readLine()),!0}get depth(){return this.stack.length}parentType(e=this.depth-1){return this.parser.nodeSet.types[this.stack[e].type]}nextLine(){return this.lineStart+=this.line.text.length,this.absoluteLineEnd>=this.to?(this.absoluteLineStart=this.absoluteLineEnd,this.atEnd=!0,this.readLine(),!1):(this.lineStart++,this.absoluteLineStart=this.absoluteLineEnd+1,this.moveRangeI(),this.readLine(),!0)}moveRangeI(){for(;this.rangeI<this.ranges.length-1&&this.absoluteLineStart>=this.ranges[this.rangeI].to;)this.rangeI++,this.absoluteLineStart=Math.max(this.absoluteLineStart,this.ranges[this.rangeI].from)}scanLine(e){let t=TU;if(t.end=e,e>=this.to)t.text="";else if(t.text=this.lineChunkAt(e),t.end+=t.text.length,this.ranges.length>1){let r=this.absoluteLineStart,i=this.rangeI;for(;this.ranges[i].to<t.end;){i++;let s=this.ranges[i].from,o=this.lineChunkAt(s);t.end=s+o.length,t.text=t.text.slice(0,this.ranges[i-1].to-r)+o,r=t.end-t.text.length}}return t}readLine(){let{line:e}=this,{text:t,end:r}=this.scanLine(this.absoluteLineStart);for(this.absoluteLineEnd=r,e.reset(t);e.depth<this.stack.length;e.depth++){let i=this.stack[e.depth],s=this.parser.skipContextMarkup[i.type];if(!s)throw new Error("Unhandled block context "+ke[i.type]);if(!s(i,this,e))break;e.forward()}}lineChunkAt(e){let t=this.input.chunk(e),r;if(this.input.lineChunks)r=t==`
`?"":t;else{let i=t.indexOf(`
`);r=i<0?t:t.slice(0,i)}return e+r.length>this.to?r.slice(0,this.to-e):r}prevLineEnd(){return this.atEnd?this.lineStart:this.lineStart-1}startContext(e,t,r=0){this.block=of.create(e,r,this.lineStart+t,this.block.hash,this.lineStart+this.line.text.length),this.stack.push(this.block)}startComposite(e,t,r=0){this.startContext(this.parser.getNodeType(e),t,r)}addNode(e,t,r){typeof e=="number"&&(e=new _t(this.parser.nodeSet.types[e],Oa,Oa,(r!=null?r:this.prevLineEnd())-t)),this.block.addChild(e,t-this.block.from)}addElement(e){this.block.addChild(e.toTree(this.parser.nodeSet),e.from-this.block.from)}addLeafElement(e,t){this.addNode(this.buffer.writeElements(Kg(t.children,e.marks),-t.from).finish(t.type,t.to-t.from),t.from)}finishContext(){let e=this.stack.pop(),t=this.stack[this.stack.length-1];t.addChild(e.toTree(this.parser.nodeSet),e.from-t.from),this.block=t}finish(){for(;this.stack.length>1;)this.finishContext();return this.addGaps(this.block.toTree(this.parser.nodeSet,this.lineStart))}addGaps(e){return this.ranges.length>1?yC(this.ranges,0,e.topNode,this.ranges[0].from,this.dontInject):e}finishLeaf(e){for(let r of e.parsers)if(r.finish(this,e))return;let t=Kg(this.parser.parseInline(e.content,e.start),e.marks);this.addNode(this.buffer.writeElements(t,-e.start).finish(ke.Paragraph,e.content.length),e.start)}elt(e,t,r,i){return typeof e=="string"?mt(this.parser.getNodeType(e),t,r,i):new wC(e,t)}get buffer(){return new vC(this.parser.nodeSet)}}function yC(n,e,t,r,i){if(i.has(t.tree))return t.tree;let s=n[e].to,o=[],a=[],l=t.from+r;function c(u,h){for(;h?u>=s:u>s;){let f=n[e+1].from-s;r+=f,u+=f,e++,s=n[e].to}}for(let u=t.firstChild;u;u=u.nextSibling){c(u.from+r,!0);let h=u.from+r,f;u.to+r>s?(f=yC(n,e,u,r,i),c(u.to+r,!1)):f=u.toTree(),o.push(f),a.push(h-l)}return c(t.to+r,!1),new _t(t.type,o,a,t.to+r-l,t.tree?t.tree.propValues:void 0)}class cd extends xy{constructor(e,t,r,i,s,o,a,l,c){super(),this.nodeSet=e,this.blockParsers=t,this.leafBlockParsers=r,this.blockNames=i,this.endLeafBlock=s,this.skipContextMarkup=o,this.inlineParsers=a,this.inlineNames=l,this.wrappers=c,this.nodeTypes=Object.create(null);for(let u of e.types)this.nodeTypes[u.name]=u.id}createParse(e,t,r){let i=new EU(this,e,t,r);for(let s of this.wrappers)i=s(i,e,t,r);return i}configure(e){let t=Yg(e);if(!t)return this;let{nodeSet:r,skipContextMarkup:i}=this,s=this.blockParsers.slice(),o=this.leafBlockParsers.slice(),a=this.blockNames.slice(),l=this.inlineParsers.slice(),c=this.inlineNames.slice(),u=this.endLeafBlock.slice(),h=this.wrappers;if(ol(t.defineNodes)){i=Object.assign({},i);let f=r.types.slice(),p;for(let d of t.defineNodes){let{name:m,block:y,composite:w,style:b}=typeof d=="string"?{name:d}:d;if(f.some(_=>_.name==m))continue;w&&(i[f.length]=(_,S,R)=>w(S,R,_.value));let O=f.length,v=w?["Block","BlockContext"]:y?O>=ke.ATXHeading1&&O<=ke.SetextHeading2?["Block","LeafBlock","Heading"]:["Block","LeafBlock"]:void 0;f.push(on.define({id:O,name:m,props:v&&[[rt.group,v]]})),b&&(p||(p={}),Array.isArray(b)||b instanceof Dr?p[m]=b:Object.assign(p,b))}r=new Mc(f),p&&(r=r.extend(Da(p)))}if(ol(t.props)&&(r=r.extend(...t.props)),ol(t.remove))for(let f of t.remove){let p=this.blockNames.indexOf(f),d=this.inlineNames.indexOf(f);p>-1&&(s[p]=o[p]=void 0),d>-1&&(l[d]=void 0)}if(ol(t.parseBlock))for(let f of t.parseBlock){let p=a.indexOf(f.name);if(p>-1)s[p]=f.parse,o[p]=f.leaf;else{let d=f.before?$u(a,f.before):f.after?$u(a,f.after)+1:a.length-1;s.splice(d,0,f.parse),o.splice(d,0,f.leaf),a.splice(d,0,f.name)}f.endLeaf&&u.push(f.endLeaf)}if(ol(t.parseInline))for(let f of t.parseInline){let p=c.indexOf(f.name);if(p>-1)l[p]=f.parse;else{let d=f.before?$u(c,f.before):f.after?$u(c,f.after)+1:c.length-1;l.splice(d,0,f.parse),c.splice(d,0,f.name)}}return t.wrap&&(h=h.concat(t.wrap)),new cd(r,s,o,a,u,i,l,c,h)}getNodeType(e){let t=this.nodeTypes[e];if(t==null)throw new RangeError(`Unknown node type '${e}'`);return t}parseInline(e,t){let r=new AU(this,e,t);e:for(let i=t;i<r.end;){let s=r.char(i);for(let o of this.inlineParsers)if(o){let a=o(r,s,i);if(a>=0){i=a;continue e}}i++}return r.resolveMarkers(0)}}function ol(n){return n!=null&&n.length>0}function Yg(n){if(!Array.isArray(n))return n;if(n.length==0)return null;let e=Yg(n[0]);if(n.length==1)return e;let t=Yg(n.slice(1));if(!t||!e)return e||t;let r=(o,a)=>(o||Oa).concat(a||Oa),i=e.wrap,s=t.wrap;return{props:r(e.props,t.props),defineNodes:r(e.defineNodes,t.defineNodes),parseBlock:r(e.parseBlock,t.parseBlock),parseInline:r(e.parseInline,t.parseInline),remove:r(e.remove,t.remove),wrap:i?s?(o,a,l,c)=>i(s(o,a,l,c),a,l,c):i:s}}function $u(n,e){let t=n.indexOf(e);if(t<0)throw new RangeError(`Position specified relative to unknown parser ${e}`);return t}let bC=[on.none];for(let n=1,e;e=ke[n];n++)bC[n]=on.define({id:n,name:e,props:n>=ke.Escape?[]:[[rt.group,n in cC?["Block","BlockContext"]:["Block","LeafBlock"]]]});const Oa=[];class vC{constructor(e){this.nodeSet=e,this.content=[],this.nodes=[]}write(e,t,r,i=0){return this.content.push(e,t,r,4+i*4),this}writeElements(e,t=0){for(let r of e)r.writeTo(this,t);return this}finish(e,t){return _t.build({buffer:this.content,nodeSet:this.nodeSet,reused:this.nodes,topID:e,length:t})}}class lc{constructor(e,t,r,i=Oa){this.type=e,this.from=t,this.to=r,this.children=i}writeTo(e,t){let r=e.content.length;e.writeElements(this.children,t),e.content.push(this.type,this.from+t,this.to+t,e.content.length+4-r)}toTree(e){return new vC(e).writeElements(this.children,-this.from).finish(this.type,this.to-this.from)}}class wC{constructor(e,t){this.tree=e,this.from=t}get to(){return this.from+this.tree.length}get type(){return this.tree.type.id}get children(){return Oa}writeTo(e,t){e.nodes.push(this.tree),e.content.push(e.nodes.length-1,this.from+t,this.to+t,-1)}toTree(){return this.tree}}function mt(n,e,t,r){return new lc(n,e,t,r)}const _C={resolve:"Emphasis",mark:"EmphasisMark"},xC={resolve:"Emphasis",mark:"EmphasisMark"},al={},K_={};class Mr{constructor(e,t,r,i){this.type=e,this.from=t,this.to=r,this.side=i}}const J_="!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~";let cc=/[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~\xA1\u2010-\u2027]/;try{cc=new RegExp("[\\p{Pc}|\\p{Pd}|\\p{Pe}|\\p{Pf}|\\p{Pi}|\\p{Po}|\\p{Ps}]","u")}catch{}const Kp={Escape(n,e,t){if(e!=92||t==n.end-1)return-1;let r=n.char(t+1);for(let i=0;i<J_.length;i++)if(J_.charCodeAt(i)==r)return n.append(mt(ke.Escape,t,t+2));return-1},Entity(n,e,t){if(e!=38)return-1;let r=/^(?:#\d+|#x[a-f\d]+|\w+);/i.exec(n.slice(t+1,t+31));return r?n.append(mt(ke.Entity,t,t+1+r[0].length)):-1},InlineCode(n,e,t){if(e!=96||t&&n.char(t-1)==96)return-1;let r=t+1;for(;r<n.end&&n.char(r)==96;)r++;let i=r-t,s=0;for(;r<n.end;r++)if(n.char(r)==96){if(s++,s==i&&n.char(r+1)!=96)return n.append(mt(ke.InlineCode,t,r+1,[mt(ke.CodeMark,t,t+i),mt(ke.CodeMark,r+1-i,r+1)]))}else s=0;return-1},HTMLTag(n,e,t){if(e!=60||t==n.end-1)return-1;let r=n.slice(t+1,n.end),i=/^(?:[a-z][-\w+.]+:[^\s>]+|[a-z\d.!#$%&'*+/=?^_`{|}~-]+@[a-z\d](?:[a-z\d-]{0,61}[a-z\d])?(?:\.[a-z\d](?:[a-z\d-]{0,61}[a-z\d])?)*)>/i.exec(r);if(i)return n.append(mt(ke.URL,t,t+1+i[0].length));let s=/^!--[^>](?:-[^-]|[^-])*?-->/i.exec(r);if(s)return n.append(mt(ke.Comment,t,t+1+s[0].length));let o=/^\?[^]*?\?>/.exec(r);if(o)return n.append(mt(ke.ProcessingInstruction,t,t+1+o[0].length));let a=/^(?:![A-Z][^]*?>|!\[CDATA\[[^]*?\]\]>|\/\s*[a-zA-Z][\w-]*\s*>|\s*[a-zA-Z][\w-]*(\s+[a-zA-Z:_][\w-.:]*(?:\s*=\s*(?:[^\s"'=<>`]+|'[^']*'|"[^"]*"))?)*\s*(\/\s*)?>)/.exec(r);return a?n.append(mt(ke.HTMLTag,t,t+1+a[0].length)):-1},Emphasis(n,e,t){if(e!=95&&e!=42)return-1;let r=t+1;for(;n.char(r)==e;)r++;let i=n.slice(t-1,t),s=n.slice(r,r+1),o=cc.test(i),a=cc.test(s),l=/\s|^$/.test(i),c=/\s|^$/.test(s),u=!c&&(!a||l||o),h=!l&&(!o||c||a),f=u&&(e==42||!h||o),p=h&&(e==42||!u||a);return n.append(new Mr(e==95?_C:xC,t,r,(f?1:0)|(p?2:0)))},HardBreak(n,e,t){if(e==92&&n.char(t+1)==10)return n.append(mt(ke.HardBreak,t,t+2));if(e==32){let r=t+1;for(;n.char(r)==32;)r++;if(n.char(r)==10&&r>=t+2)return n.append(mt(ke.HardBreak,t,r+1))}return-1},Link(n,e,t){return e==91?n.append(new Mr(al,t,t+1,1)):-1},Image(n,e,t){return e==33&&n.char(t+1)==91?n.append(new Mr(K_,t,t+2,1)):-1},LinkEnd(n,e,t){if(e!=93)return-1;for(let r=n.parts.length-1;r>=0;r--){let i=n.parts[r];if(i instanceof Mr&&(i.type==al||i.type==K_)){if(!i.side||n.skipSpace(i.to)==t&&!/[(\[]/.test(n.slice(t+1,t+2)))return n.parts[r]=null,-1;let s=n.takeContent(r),o=n.parts[r]=CU(n,s,i.type==al?ke.Link:ke.Image,i.from,t+1);if(i.type==al)for(let a=0;a<r;a++){let l=n.parts[a];l instanceof Mr&&l.type==al&&(l.side=0)}return o.to}}return-1}};function CU(n,e,t,r,i){let{text:s}=n,o=n.char(i),a=i;if(e.unshift(mt(ke.LinkMark,r,r+(t==ke.Image?2:1))),e.push(mt(ke.LinkMark,i-1,i)),o==40){let l=n.skipSpace(i+1),c=SC(s,l-n.offset,n.offset),u;c&&(l=n.skipSpace(c.to),u=kC(s,l-n.offset,n.offset),u&&(l=n.skipSpace(u.to))),n.char(l)==41&&(e.push(mt(ke.LinkMark,i,i+1)),a=l+1,c&&e.push(c),u&&e.push(u),e.push(mt(ke.LinkMark,l,a)))}else if(o==91){let l=TC(s,i-n.offset,n.offset,!1);l&&(e.push(l),a=l.to)}return mt(t,r,a,e)}function SC(n,e,t){if(n.charCodeAt(e)==60){for(let i=e+1;i<n.length;i++){let s=n.charCodeAt(i);if(s==62)return mt(ke.URL,e+t,i+1+t);if(s==60||s==10)return!1}return null}else{let i=0,s=e;for(let o=!1;s<n.length;s++){let a=n.charCodeAt(s);if(Ar(a))break;if(o)o=!1;else if(a==40)i++;else if(a==41){if(!i)break;i--}else a==92&&(o=!0)}return s>e?mt(ke.URL,e+t,s+t):s==n.length?null:!1}}function kC(n,e,t){let r=n.charCodeAt(e);if(r!=39&&r!=34&&r!=40)return!1;let i=r==40?41:r;for(let s=e+1,o=!1;s<n.length;s++){let a=n.charCodeAt(s);if(o)o=!1;else{if(a==i)return mt(ke.LinkTitle,e+t,s+1+t);a==92&&(o=!0)}}return null}function TC(n,e,t,r){for(let i=!1,s=e+1,o=Math.min(n.length,s+999);s<o;s++){let a=n.charCodeAt(s);if(i)i=!1;else{if(a==93)return r?!1:mt(ke.LinkLabel,e+t,s+1+t);if(r&&!Ar(a)&&(r=!1),a==91)return!1;a==92&&(i=!0)}}return null}class AU{constructor(e,t,r){this.parser=e,this.text=t,this.offset=r,this.parts=[]}char(e){return e>=this.end?-1:this.text.charCodeAt(e-this.offset)}get end(){return this.offset+this.text.length}slice(e,t){return this.text.slice(e-this.offset,t-this.offset)}append(e){return this.parts.push(e),e.to}addDelimiter(e,t,r,i,s){return this.append(new Mr(e,t,r,(i?1:0)|(s?2:0)))}addElement(e){return this.append(e)}resolveMarkers(e){for(let r=e;r<this.parts.length;r++){let i=this.parts[r];if(!(i instanceof Mr&&i.type.resolve&&i.side&2))continue;let s=i.type==_C||i.type==xC,o=i.to-i.from,a,l=r-1;for(;l>=e;l--){let m=this.parts[l];if(m instanceof Mr&&m.side&1&&m.type==i.type&&!(s&&(i.side&1||m.side&2)&&(m.to-m.from+o)%3==0&&((m.to-m.from)%3||o%3))){a=m;break}}if(!a)continue;let c=i.type.resolve,u=[],h=a.from,f=i.to;if(s){let m=Math.min(2,a.to-a.from,o);h=a.to-m,f=i.from+m,c=m==1?"Emphasis":"StrongEmphasis"}a.type.mark&&u.push(this.elt(a.type.mark,h,a.to));for(let m=l+1;m<r;m++)this.parts[m]instanceof lc&&u.push(this.parts[m]),this.parts[m]=null;i.type.mark&&u.push(this.elt(i.type.mark,i.from,f));let p=this.elt(c,h,f,u);this.parts[l]=s&&a.from!=h?new Mr(a.type,a.from,h,a.side):null,(this.parts[r]=s&&i.to!=f?new Mr(i.type,f,i.to,i.side):null)?this.parts.splice(r,0,p):this.parts[r]=p}let t=[];for(let r=e;r<this.parts.length;r++){let i=this.parts[r];i instanceof lc&&t.push(i)}return t}findOpeningDelimiter(e){for(let t=this.parts.length-1;t>=0;t--){let r=this.parts[t];if(r instanceof Mr&&r.type==e)return t}return null}takeContent(e){let t=this.resolveMarkers(e);return this.parts.length=e,t}skipSpace(e){return Pl(this.text,e-this.offset)+this.offset}elt(e,t,r,i){return typeof e=="string"?mt(this.parser.getNodeType(e),t,r,i):new wC(e,t)}}function Kg(n,e){if(!e.length)return n;if(!n.length)return e;let t=n.slice(),r=0;for(let i of e){for(;r<t.length&&t[r].to<i.to;)r++;if(r<t.length&&t[r].from<i.from){let s=t[r];s instanceof lc&&(t[r]=new lc(s.type,s.from,s.to,Kg(s.children,[i])))}else t.splice(r++,0,i)}return t}const PU=[ke.CodeBlock,ke.ListItem,ke.OrderedList,ke.BulletList];class RU{constructor(e,t){this.fragments=e,this.input=t,this.i=0,this.fragment=null,this.fragmentEnd=-1,this.cursor=null,e.length&&(this.fragment=e[this.i++])}nextFragment(){this.fragment=this.i<this.fragments.length?this.fragments[this.i++]:null,this.cursor=null,this.fragmentEnd=-1}moveTo(e,t){for(;this.fragment&&this.fragment.to<=e;)this.nextFragment();if(!this.fragment||this.fragment.from>(e?e-1:0))return!1;if(this.fragmentEnd<0){let s=this.fragment.to;for(;s>0&&this.input.read(s-1,s)!=`
`;)s--;this.fragmentEnd=s?s-1:0}let r=this.cursor;r||(r=this.cursor=this.fragment.tree.cursor(),r.firstChild());let i=e+this.fragment.offset;for(;r.to<=i;)if(!r.parent())return!1;for(;;){if(r.from>=i)return this.fragment.from<=t;if(!r.childAfter(i))return!1}}matches(e){let t=this.cursor.tree;return t&&t.prop(rt.contextHash)==e}takeNodes(e){let t=this.cursor,r=this.fragment.offset,i=this.fragmentEnd-(this.fragment.openEnd?1:0),s=e.absoluteLineStart,o=s,a=e.block.children.length,l=o,c=a;for(;;){if(t.to-r>i){if(t.type.isAnonymous&&t.firstChild())continue;break}if(e.dontInject.add(t.tree),e.addNode(t.tree,t.from-r),t.type.is("Block")&&(PU.indexOf(t.type.id)<0?(o=t.to-r,a=e.block.children.length):(o=l,a=c,l=t.to-r,c=e.block.children.length)),!t.nextSibling())break}for(;e.block.children.length>a;)e.block.children.pop(),e.block.positions.pop();return o-s}}const IU=Da({"Blockquote/...":J.quote,HorizontalRule:J.contentSeparator,"ATXHeading1/... SetextHeading1/...":J.heading1,"ATXHeading2/... SetextHeading2/...":J.heading2,"ATXHeading3/...":J.heading3,"ATXHeading4/...":J.heading4,"ATXHeading5/...":J.heading5,"ATXHeading6/...":J.heading6,"Comment CommentBlock":J.comment,Escape:J.escape,Entity:J.character,"Emphasis/...":J.emphasis,"StrongEmphasis/...":J.strong,"Link/... Image/...":J.link,"OrderedList/... BulletList/...":J.list,"BlockQuote/...":J.quote,"InlineCode CodeText":J.monospace,URL:J.url,"HeaderMark HardBreak QuoteMark ListMark LinkMark EmphasisMark CodeMark":J.processingInstruction,"CodeInfo LinkLabel":J.labelName,LinkTitle:J.string,Paragraph:J.content}),QU=new cd(new Mc(bC).extend(IU),Object.keys(Mu).map(n=>Mu[n]),Object.keys(Mu).map(n=>SU[n]),Object.keys(Mu),kU,cC,Object.keys(Kp).map(n=>Kp[n]),Object.keys(Kp),[]);function NU(n,e,t){let r=[];for(let i=n.firstChild,s=e;;i=i.nextSibling){let o=i?i.from:t;if(o>s&&r.push({from:s,to:o}),!i)break;s=i.to}return r}function LU(n){let{codeParser:e,htmlParser:t}=n;return{wrap:gE((i,s)=>{let o=i.type.id;if(e&&(o==ke.CodeBlock||o==ke.FencedCode)){let a="";if(o==ke.FencedCode){let c=i.node.getChild(ke.CodeInfo);c&&(a=s.read(c.from,c.to))}let l=e(a);if(l)return{parser:l,overlay:c=>c.type.id==ke.CodeText}}else if(t&&(o==ke.HTMLBlock||o==ke.HTMLTag))return{parser:t,overlay:NU(i.node,i.from,i.to)};return null})}}const DU={resolve:"Strikethrough",mark:"StrikethroughMark"},MU={defineNodes:[{name:"Strikethrough",style:{"Strikethrough/...":J.strikethrough}},{name:"StrikethroughMark",style:J.processingInstruction}],parseInline:[{name:"Strikethrough",parse(n,e,t){if(e!=126||n.char(t+1)!=126||n.char(t+2)==126)return-1;let r=n.slice(t-1,t),i=n.slice(t+2,t+3),s=/\s|^$/.test(r),o=/\s|^$/.test(i),a=cc.test(r),l=cc.test(i);return n.addDelimiter(DU,t,t+2,!o&&(!l||s||a),!s&&(!a||o||l))},after:"Emphasis"}]};function Rl(n,e,t=0,r,i=0){let s=0,o=!0,a=-1,l=-1,c=!1,u=()=>{r.push(n.elt("TableCell",i+a,i+l,n.parser.parseInline(e.slice(a,l),i+a)))};for(let h=t;h<e.length;h++){let f=e.charCodeAt(h);f==124&&!c?((!o||a>-1)&&s++,o=!1,r&&(a>-1&&u(),r.push(n.elt("TableDelimiter",h+i,h+i+1))),a=l=-1):(c||f!=32&&f!=9)&&(a<0&&(a=h),l=h+1),c=!c&&f==92}return a>-1&&(s++,r&&u()),s}function e1(n,e){for(let t=e;t<n.length;t++){let r=n.charCodeAt(t);if(r==124)return!0;r==92&&t++}return!1}const EC=/^\|?(\s*:?-+:?\s*\|)+(\s*:?-+:?\s*)?$/;class t1{constructor(){this.rows=null}nextLine(e,t,r){if(this.rows==null){this.rows=!1;let i;if((t.next==45||t.next==58||t.next==124)&&EC.test(i=t.text.slice(t.pos))){let s=[];Rl(e,r.content,0,s,r.start)==Rl(e,i,t.pos)&&(this.rows=[e.elt("TableHeader",r.start,r.start+r.content.length,s),e.elt("TableDelimiter",e.lineStart+t.pos,e.lineStart+t.text.length)])}}else if(this.rows){let i=[];Rl(e,t.text,t.pos,i,e.lineStart),this.rows.push(e.elt("TableRow",e.lineStart+t.pos,e.lineStart+t.text.length,i))}return!1}finish(e,t){return this.rows?(e.addLeafElement(t,e.elt("Table",t.start,t.start+t.content.length,this.rows)),!0):!1}}const $U={defineNodes:[{name:"Table",block:!0},{name:"TableHeader",style:{"TableHeader/...":J.heading}},"TableRow",{name:"TableCell",style:J.content},{name:"TableDelimiter",style:J.processingInstruction}],parseBlock:[{name:"Table",leaf(n,e){return e1(e.content,0)?new t1:null},endLeaf(n,e,t){if(t.parsers.some(i=>i instanceof t1)||!e1(e.text,e.basePos))return!1;let r=n.scanLine(n.absoluteLineEnd+1).text;return EC.test(r)&&Rl(n,e.text,e.basePos)==Rl(n,r,e.basePos)},before:"SetextHeading"}]};class BU{nextLine(){return!1}finish(e,t){return e.addLeafElement(t,e.elt("Task",t.start,t.start+t.content.length,[e.elt("TaskMarker",t.start,t.start+3),...e.parser.parseInline(t.content.slice(3),t.start+3)])),!0}}const FU={defineNodes:[{name:"Task",block:!0,style:J.list},{name:"TaskMarker",style:J.atom}],parseBlock:[{name:"TaskList",leaf(n,e){return/^\[[ xX]\]/.test(e.content)&&n.parentType().name=="ListItem"?new BU:null},after:"SetextHeading"}]},UU=[$U,FU,MU];function CC(n,e,t){return(r,i,s)=>{if(i!=n||r.char(s+1)==n)return-1;let o=[r.elt(t,s,s+1)];for(let a=s+1;a<r.end;a++){let l=r.char(a);if(l==n)return r.addElement(r.elt(e,s,a+1,o.concat(r.elt(t,a,a+1))));if(l==92&&o.push(r.elt("Escape",a,a+++2)),Ar(l))break}return-1}}const VU={defineNodes:[{name:"Superscript",style:J.special(J.content)},{name:"SuperscriptMark",style:J.processingInstruction}],parseInline:[{name:"Superscript",parse:CC(94,"Superscript","SuperscriptMark")}]},WU={defineNodes:[{name:"Subscript",style:J.special(J.content)},{name:"SubscriptMark",style:J.processingInstruction}],parseInline:[{name:"Subscript",parse:CC(126,"Subscript","SubscriptMark")}]},jU={defineNodes:[{name:"Emoji",style:J.character}],parseInline:[{name:"Emoji",parse(n,e,t){let r;return e!=58||!(r=/^[a-zA-Z_0-9]+:/.exec(n.slice(t+1,n.end)))?-1:n.addElement(n.elt("Emoji",t,t+1+r[0].length))}}]};class af{constructor(e,t,r,i,s,o,a,l,c,u=0,h){this.p=e,this.stack=t,this.state=r,this.reducePos=i,this.pos=s,this.score=o,this.buffer=a,this.bufferBase=l,this.curContext=c,this.lookAhead=u,this.parent=h}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,r=0){let i=e.parser.context;return new af(e,[],t,r,r,0,[],0,i?new n1(i,i.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){let t=e>>19,r=e&65535,{parser:i}=this.p,s=i.dynamicPrecedence(r);if(s&&(this.score+=s),t==0){this.pushState(i.getGoto(this.state,r,!0),this.reducePos),r<i.minRepeatTerm&&this.storeNode(r,this.reducePos,this.reducePos,4,!0),this.reduceContext(r,this.reducePos);return}let o=this.stack.length-(t-1)*3-(e&262144?6:0),a=this.stack[o-2],l=this.stack[o-1],c=this.bufferBase+this.buffer.length-l;if(r<i.minRepeatTerm||e&131072){let u=i.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(r,a,u,c+4,!0)}if(e&262144)this.state=this.stack[o];else{let u=this.stack[o-3];this.state=i.getGoto(u,r,!0)}for(;this.stack.length>o;)this.stack.pop();this.reduceContext(r,a)}storeNode(e,t,r,i=4,s=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let o=this,a=this.buffer.length;if(a==0&&o.parent&&(a=o.bufferBase-o.parent.bufferBase,o=o.parent),a>0&&o.buffer[a-4]==0&&o.buffer[a-1]>-1){if(t==r)return;if(o.buffer[a-2]>=t){o.buffer[a-2]=r;return}}}if(!s||this.pos==r)this.buffer.push(e,t,r,i);else{let o=this.buffer.length;if(o>0&&this.buffer[o-4]!=0)for(;o>0&&this.buffer[o-2]>r;)this.buffer[o]=this.buffer[o-4],this.buffer[o+1]=this.buffer[o-3],this.buffer[o+2]=this.buffer[o-2],this.buffer[o+3]=this.buffer[o-1],o-=4,i>4&&(i-=4);this.buffer[o]=e,this.buffer[o+1]=t,this.buffer[o+2]=r,this.buffer[o+3]=i}}shift(e,t,r){let i=this.pos;if(e&131072)this.pushState(e&65535,this.pos);else if((e&262144)==0){let s=e,{parser:o}=this.p;(r>this.pos||t<=o.maxNode)&&(this.pos=r,o.stateFlag(s,1)||(this.reducePos=r)),this.pushState(s,i),this.shiftContext(t,i),t<=o.maxNode&&this.buffer.push(t,i,r,4)}else this.pos=r,this.shiftContext(t,i),t<=this.p.parser.maxNode&&this.buffer.push(t,i,r,4)}apply(e,t,r){e&65536?this.reduce(e):this.shift(e,t,r)}useNode(e,t){let r=this.p.reused.length-1;(r<0||this.p.reused[r]!=e)&&(this.p.reused.push(e),r++);let i=this.pos;this.reducePos=this.pos=i+e.length,this.pushState(t,i),this.buffer.push(r,i,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let r=e.buffer.slice(t),i=e.bufferBase+t;for(;e&&i==e.bufferBase;)e=e.parent;return new af(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,r,i,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let r=e<=this.p.parser.maxNode;r&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,r?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new qU(this);;){let r=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(r==0)return!1;if((r&65536)==0)return!0;t.reduce(r)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>4<<1||this.stack.length>=120){let i=[];for(let s=0,o;s<t.length;s+=2)(o=t[s+1])!=this.state&&this.p.parser.hasAction(o,e)&&i.push(t[s],o);if(this.stack.length<120)for(let s=0;i.length<4<<1&&s<t.length;s+=2){let o=t[s+1];i.some((a,l)=>l&1&&a==o)||i.push(t[s],o)}t=i}let r=[];for(let i=0;i<t.length&&r.length<4;i+=2){let s=t[i+1];if(s==this.state)continue;let o=this.split();o.pushState(s,this.pos),o.storeNode(0,o.pos,o.pos,4,!0),o.shiftContext(t[i],this.pos),o.score-=200,r.push(o)}return r}forceReduce(){let e=this.p.parser.stateSlot(this.state,5);if((e&65536)==0)return!1;let{parser:t}=this.p;if(!t.validAction(this.state,e)){let r=e>>19,i=e&65535,s=this.stack.length-r*3;if(s<0||t.getGoto(this.stack[s],i,!1)<0)return!1;this.storeNode(0,this.reducePos,this.reducePos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(e),!0}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.reducePos,this.reducePos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.reducePos,this.reducePos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new n1(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class n1{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}var r1;(function(n){n[n.Insert=200]="Insert",n[n.Delete=190]="Delete",n[n.Reduce=100]="Reduce",n[n.MaxNext=4]="MaxNext",n[n.MaxInsertStackDepth=300]="MaxInsertStackDepth",n[n.DampenInsertStackDepth=120]="DampenInsertStackDepth"})(r1||(r1={}));class qU{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=e&65535,r=e>>19;r==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(r-1)*3;let i=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=i}}class lf{constructor(e,t,r){this.stack=e,this.pos=t,this.index=r,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new lf(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new lf(this.stack,this.pos,this.index)}}class dh{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const i1=new dh;class XU{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=i1,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let r=this.range,i=this.rangeIndex,s=this.pos+e;for(;s<r.from;){if(!i)return null;let o=this.ranges[--i];s-=r.from-o.to,r=o}for(;t<0?s>r.to:s>=r.to;){if(i==this.ranges.length-1)return null;let o=this.ranges[++i];s+=o.from-r.to,r=o}return s}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t=this.chunkOff+e,r,i;if(t>=0&&t<this.chunk.length)r=this.pos+e,i=this.chunk.charCodeAt(t);else{let s=this.resolveOffset(e,1);if(s==null)return-1;if(r=s,r>=this.chunk2Pos&&r<this.chunk2Pos+this.chunk2.length)i=this.chunk2.charCodeAt(r-this.chunk2Pos);else{let o=this.rangeIndex,a=this.range;for(;a.to<=r;)a=this.ranges[++o];this.chunk2=this.input.chunk(this.chunk2Pos=r),r+this.chunk2.length>a.to&&(this.chunk2=this.chunk2.slice(0,a.to-r)),i=this.chunk2.charCodeAt(0)}}return r>=this.token.lookAhead&&(this.token.lookAhead=r+1),i}acceptToken(e,t=0){let r=t?this.resolveOffset(t,-1):this.pos;if(r==null||r<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=r}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=i1,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let r="";for(let i of this.ranges){if(i.from>=t)break;i.to>e&&(r+=this.input.read(Math.max(i.from,e),Math.min(i.to,t)))}return r}}class ph{constructor(e,t){this.data=e,this.id=t}token(e,t){zU(this.data,e,t,this.id)}}ph.prototype.contextual=ph.prototype.fallback=ph.prototype.extend=!1;class qr{constructor(e,t={}){this.token=e,this.contextual=!!t.contextual,this.fallback=!!t.fallback,this.extend=!!t.extend}}function zU(n,e,t,r){let i=0,s=1<<r,{parser:o}=t.p,{dialect:a}=o;e:for(;(s&n[i])!=0;){let l=n[i+1];for(let f=i+3;f<l;f+=2)if((n[f+1]&s)>0){let p=n[f];if(a.allows(p)&&(e.token.value==-1||e.token.value==p||o.overrides(p,e.token.value))){e.acceptToken(p);break}}let c=e.next,u=0,h=n[i+2];if(e.next<0&&h>u&&n[l+h*3-3]==65535&&n[l+h*3-3]==65535){i=n[l+h*3-1];continue e}for(;u<h;){let f=u+h>>1,p=l+f+(f<<1),d=n[p],m=n[p+1]||65536;if(c<d)h=f;else if(c>=m)u=f+1;else{i=n[p+2],e.advance();continue e}}break}}function Bu(n,e=Uint16Array){if(typeof n!="string")return n;let t=null;for(let r=0,i=0;r<n.length;){let s=0;for(;;){let o=n.charCodeAt(r++),a=!1;if(o==126){s=65535;break}o>=92&&o--,o>=34&&o--;let l=o-32;if(l>=46&&(l-=46,a=!0),s+=l,a)break;s*=46}t?t[i++]=s:t=new e(s)}return t}const Nr=typeof process<"u"&&process.env&&/\bparse\b/.test(process.env.LOG);let Jp=null;var s1;(function(n){n[n.Margin=25]="Margin"})(s1||(s1={}));function o1(n,e,t){let r=n.cursor(Mt.IncludeAnonymous);for(r.moveTo(e);;)if(!(t<0?r.childBefore(e):r.childAfter(e)))for(;;){if((t<0?r.to<e:r.from>e)&&!r.type.isError)return t<0?Math.max(0,Math.min(r.to-1,e-25)):Math.min(n.length,Math.max(r.from+1,e+25));if(t<0?r.prevSibling():r.nextSibling())break;if(!r.parent())return t<0?0:n.length}}class HU{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?o1(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?o1(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let r=this.trees[t],i=this.index[t];if(i==r.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let s=r.children[i],o=this.start[t]+r.positions[i];if(o>e)return this.nextStart=o,null;if(s instanceof _t){if(o==e){if(o<this.safeFrom)return null;let a=o+s.length;if(a<=this.safeTo){let l=s.prop(rt.lookAhead);if(!l||a+l<this.fragment.to)return s}}this.index[t]++,o+s.length>=Math.max(this.safeFrom,e)&&(this.trees.push(s),this.start.push(o),this.index.push(0))}else this.index[t]++,this.nextStart=o+s.length}}}class ZU{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(r=>new dh)}getActions(e){let t=0,r=null,{parser:i}=e.p,{tokenizers:s}=i,o=i.stateSlot(e.state,3),a=e.curContext?e.curContext.hash:0,l=0;for(let c=0;c<s.length;c++){if((1<<c&o)==0)continue;let u=s[c],h=this.tokens[c];if(!(r&&!u.fallback)&&((u.contextual||h.start!=e.pos||h.mask!=o||h.context!=a)&&(this.updateCachedToken(h,u,e),h.mask=o,h.context=a),h.lookAhead>h.end+25&&(l=Math.max(h.lookAhead,l)),h.value!=0)){let f=t;if(h.extended>-1&&(t=this.addActions(e,h.extended,h.end,t)),t=this.addActions(e,h.value,h.end,t),!u.extend&&(r=h,t>f))break}}for(;this.actions.length>t;)this.actions.pop();return l&&e.setLookAhead(l),!r&&e.pos==this.stream.end&&(r=new dh,r.value=e.p.parser.eofTerm,r.start=r.end=e.pos,t=this.addActions(e,r.value,r.end,t)),this.mainToken=r,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new dh,{pos:r,p:i}=e;return t.start=r,t.end=Math.min(r+1,i.stream.end),t.value=r==i.stream.end?i.parser.eofTerm:0,t}updateCachedToken(e,t,r){let i=this.stream.clipPos(r.pos);if(t.token(this.stream.reset(i,e),r),e.value>-1){let{parser:s}=r.p;for(let o=0;o<s.specialized.length;o++)if(s.specialized[o]==e.value){let a=s.specializers[o](this.stream.read(e.start,e.end),r);if(a>=0&&r.p.parser.dialect.allows(a>>1)){(a&1)==0?e.value=a>>1:e.extended=a>>1;break}}}else e.value=0,e.end=this.stream.clipPos(i+1)}putAction(e,t,r,i){for(let s=0;s<i;s+=3)if(this.actions[s]==e)return i;return this.actions[i++]=e,this.actions[i++]=t,this.actions[i++]=r,i}addActions(e,t,r,i){let{state:s}=e,{parser:o}=e.p,{data:a}=o;for(let l=0;l<2;l++)for(let c=o.stateSlot(s,l?2:1);;c+=3){if(a[c]==65535)if(a[c+1]==1)c=Ai(a,c+2);else{i==0&&a[c+1]==2&&(i=this.putAction(Ai(a,c+2),t,r,i));break}a[c]==t&&(i=this.putAction(Ai(a,c+1),t,r,i))}return i}}var a1;(function(n){n[n.Distance=5]="Distance",n[n.MaxRemainingPerStep=3]="MaxRemainingPerStep",n[n.MinBufferLengthPrune=500]="MinBufferLengthPrune",n[n.ForceReduceLimit=10]="ForceReduceLimit",n[n.CutDepth=15e3]="CutDepth",n[n.CutTo=9e3]="CutTo"})(a1||(a1={}));class GU{constructor(e,t,r,i){this.parser=e,this.input=t,this.ranges=i,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.stream=new XU(t,i),this.tokens=new ZU(e,this.stream),this.topTerm=e.top[1];let{from:s}=i[0];this.stacks=[af.start(this,e.top[0],s)],this.fragments=r.length&&this.stream.end-s>e.bufferLength*4?new HU(r,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,t=this.minStackPos,r=this.stacks=[],i,s;for(let o=0;o<e.length;o++){let a=e[o];for(;;){if(this.tokens.mainToken=null,a.pos>t)r.push(a);else{if(this.advanceStack(a,r,e))continue;{i||(i=[],s=[]),i.push(a);let l=this.tokens.getMainToken(a);s.push(l.value,l.end)}}break}}if(!r.length){let o=i&&KU(i);if(o)return this.stackToTree(o);if(this.parser.strict)throw Nr&&i&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&i){let o=this.stoppedAt!=null&&i[0].pos>this.stoppedAt?i[0]:this.runRecovery(i,s,r);if(o)return this.stackToTree(o.forceAll())}if(this.recovering){let o=this.recovering==1?1:this.recovering*3;if(r.length>o)for(r.sort((a,l)=>l.score-a.score);r.length>o;)r.pop();r.some(a=>a.reducePos>t)&&this.recovering--}else if(r.length>1){e:for(let o=0;o<r.length-1;o++){let a=r[o];for(let l=o+1;l<r.length;l++){let c=r[l];if(a.sameState(c)||a.buffer.length>500&&c.buffer.length>500)if((a.score-c.score||a.buffer.length-c.buffer.length)>0)r.splice(l--,1);else{r.splice(o--,1);continue e}}}}this.minStackPos=r[0].pos;for(let o=1;o<r.length;o++)r[o].pos<this.minStackPos&&(this.minStackPos=r[o].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,r){let i=e.pos,{parser:s}=this,o=Nr?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&i>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let c=e.curContext&&e.curContext.tracker.strict,u=c?e.curContext.hash:0;for(let h=this.fragments.nodeAt(i);h;){let f=this.parser.nodeSet.types[h.type.id]==h.type?s.getGoto(e.state,h.type.id):-1;if(f>-1&&h.length&&(!c||(h.prop(rt.contextHash)||0)==u))return e.useNode(h,f),Nr&&console.log(o+this.stackID(e)+` (via reuse of ${s.getName(h.type.id)})`),!0;if(!(h instanceof _t)||h.children.length==0||h.positions[0]>0)break;let p=h.children[0];if(p instanceof _t&&h.positions[0]==0)h=p;else break}}let a=s.stateSlot(e.state,4);if(a>0)return e.reduce(a),Nr&&console.log(o+this.stackID(e)+` (via always-reduce ${s.getName(a&65535)})`),!0;if(e.stack.length>=15e3)for(;e.stack.length>9e3&&e.forceReduce(););let l=this.tokens.getActions(e);for(let c=0;c<l.length;){let u=l[c++],h=l[c++],f=l[c++],p=c==l.length||!r,d=p?e:e.split();if(d.apply(u,h,f),Nr&&console.log(o+this.stackID(d)+` (via ${(u&65536)==0?"shift":`reduce of ${s.getName(u&65535)}`} for ${s.getName(h)} @ ${i}${d==e?"":", split"})`),p)return!0;d.pos>i?t.push(d):r.push(d)}return!1}advanceFully(e,t){let r=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>r)return l1(e,t),!0}}runRecovery(e,t,r){let i=null,s=!1;for(let o=0;o<e.length;o++){let a=e[o],l=t[o<<1],c=t[(o<<1)+1],u=Nr?this.stackID(a)+" -> ":"";if(a.deadEnd&&(s||(s=!0,a.restart(),Nr&&console.log(u+this.stackID(a)+" (restarted)"),this.advanceFully(a,r))))continue;let h=a.split(),f=u;for(let p=0;h.forceReduce()&&p<10&&(Nr&&console.log(f+this.stackID(h)+" (via force-reduce)"),!this.advanceFully(h,r));p++)Nr&&(f=this.stackID(h)+" -> ");for(let p of a.recoverByInsert(l))Nr&&console.log(u+this.stackID(p)+" (via recover-insert)"),this.advanceFully(p,r);this.stream.end>a.pos?(c==a.pos&&(c++,l=0),a.recoverByDelete(l,c),Nr&&console.log(u+this.stackID(a)+` (via recover-delete ${this.parser.getName(l)})`),l1(a,r)):(!i||i.score<a.score)&&(i=a)}return i}stackToTree(e){return e.close(),_t.build({buffer:lf.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(Jp||(Jp=new WeakMap)).get(e);return t||Jp.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function l1(n,e){for(let t=0;t<e.length;t++){let r=e[t];if(r.pos==n.pos&&r.sameState(n)){e[t].score<n.score&&(e[t]=n);return}}e.push(n)}class YU{constructor(e,t,r){this.source=e,this.flags=t,this.disabled=r}allows(e){return!this.disabled||this.disabled[e]==0}}const em=n=>n;class AC{constructor(e){this.start=e.start,this.shift=e.shift||em,this.reduce=e.reduce||em,this.reuse=e.reuse||em,this.hash=e.hash||(()=>0),this.strict=e.strict!==!1}}class ya extends xy{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (${14})`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let a=0;a<e.repeatNodeCount;a++)t.push("");let r=Object.keys(e.topRules).map(a=>e.topRules[a][1]),i=[];for(let a=0;a<t.length;a++)i.push([]);function s(a,l,c){i[a].push([l,l.deserialize(String(c))])}if(e.nodeProps)for(let a of e.nodeProps){let l=a[0];typeof l=="string"&&(l=rt[l]);for(let c=1;c<a.length;){let u=a[c++];if(u>=0)s(u,l,a[c++]);else{let h=a[c+-u];for(let f=-u;f>0;f--)s(a[c++],l,h);c++}}}this.nodeSet=new Mc(t.map((a,l)=>on.define({name:l>=this.minRepeatTerm?void 0:a,id:l,props:i[l],top:r.indexOf(l)>-1,error:l==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(l)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=dE;let o=Bu(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let a=0;a<this.specializerSpecs.length;a++)this.specialized[a]=this.specializerSpecs[a].term;this.specializers=this.specializerSpecs.map(u1),this.states=Bu(e.states,Uint32Array),this.data=Bu(e.stateData),this.goto=Bu(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(a=>typeof a=="number"?new ph(o,a):a),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,r){let i=new GU(this,e,t,r);for(let s of this.wrappers)i=s(i,e,t,r);return i}getGoto(e,t,r=!1){let i=this.goto;if(t>=i[0])return-1;for(let s=i[t+1];;){let o=i[s++],a=o&1,l=i[s++];if(a&&r)return l;for(let c=s+(o>>1);s<c;s++)if(i[s]==e)return l;if(a)return-1}}hasAction(e,t){let r=this.data;for(let i=0;i<2;i++)for(let s=this.stateSlot(e,i?2:1),o;;s+=3){if((o=r[s])==65535)if(r[s+1]==1)o=r[s=Ai(r,s+2)];else{if(r[s+1]==2)return Ai(r,s+2);break}if(o==t||o==0)return Ai(r,s+1)}return 0}stateSlot(e,t){return this.states[e*6+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){if(t==this.stateSlot(e,4))return!0;for(let r=this.stateSlot(e,1);;r+=3){if(this.data[r]==65535)if(this.data[r+1]==1)r=Ai(this.data,r+2);else return!1;if(t==Ai(this.data,r+1))return!0}}nextStates(e){let t=[];for(let r=this.stateSlot(e,1);;r+=3){if(this.data[r]==65535)if(this.data[r+1]==1)r=Ai(this.data,r+2);else break;if((this.data[r+2]&1)==0){let i=this.data[r+1];t.some((s,o)=>o&1&&s==i)||t.push(this.data[r],i)}}return t}overrides(e,t){let r=c1(this.data,this.tokenPrecTable,t);return r<0||c1(this.data,this.tokenPrecTable,e)<r}configure(e){let t=Object.assign(Object.create(ya.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let r=this.topRules[e.top];if(!r)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=r}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(r=>{let i=e.tokenizers.find(s=>s.from==r);return i?i.to:r})),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map((r,i)=>{let s=e.specializers.find(a=>a.from==r.external);if(!s)return r;let o=Object.assign(Object.assign({},r),{external:s.to});return t.specializers[i]=u1(o),o})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),e.bufferLength!=null&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return t==null?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),r=t.map(()=>!1);if(e)for(let s of e.split(" ")){let o=t.indexOf(s);o>=0&&(r[o]=!0)}let i=null;for(let s=0;s<t.length;s++)if(!r[s])for(let o=this.dialects[t[s]],a;(a=this.data[o++])!=65535;)(i||(i=new Uint8Array(this.maxTerm+1)))[a]=1;return new YU(e,r,i)}static deserialize(e){return new ya(e)}}function Ai(n,e){return n[e]|n[e+1]<<16}function c1(n,e,t){for(let r=e,i;(i=n[r])!=65535;r++)if(i==t)return r-e;return-1}function KU(n){let e=null;for(let t of n){let r=t.p.stoppedAt;(t.pos==t.p.stream.end||r!=null&&t.pos>r)&&t.p.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t)}return e}function u1(n){if(n.external){let e=n.extend?1:0;return(t,r)=>n.external(t,r)<<1|e}return n.get}const JU=54,e6=1,t6=55,n6=2,r6=56,i6=3,cf=4,PC=5,RC=6,IC=7,QC=8,s6=9,o6=10,a6=11,tm=57,l6=12,h1=58,c6=18,u6=20,NC=21,h6=22,Jg=24,LC=25,f6=27,d6=30,p6=33,m6=35,g6=0,O6={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},y6={dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},f1={dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}};function b6(n){return n==45||n==46||n==58||n>=65&&n<=90||n==95||n>=97&&n<=122||n>=161}function DC(n){return n==9||n==10||n==13||n==32}let d1=null,p1=null,m1=0;function eO(n,e){let t=n.pos+e;if(m1==t&&p1==n)return d1;let r=n.peek(e);for(;DC(r);)r=n.peek(++e);let i="";for(;b6(r);)i+=String.fromCharCode(r),r=n.peek(++e);return p1=n,m1=t,d1=i?i.toLowerCase():r==v6||r==w6?void 0:null}const MC=60,$C=62,BC=47,v6=63,w6=33,_6=45;function g1(n,e){this.name=n,this.parent=e,this.hash=e?e.hash:0;for(let t=0;t<n.length;t++)this.hash+=(this.hash<<4)+n.charCodeAt(t)+(n.charCodeAt(t)<<8)}const x6=[cf,QC,PC,RC,IC],S6=new AC({start:null,shift(n,e,t,r){return x6.indexOf(e)>-1?new g1(eO(r,1)||"",n):n},reduce(n,e){return e==c6&&n?n.parent:n},reuse(n,e,t,r){let i=e.type.id;return i==cf||i==m6?new g1(eO(r,1)||"",n):n},hash(n){return n?n.hash:0},strict:!1}),k6=new qr((n,e)=>{if(n.next!=MC){n.next<0&&e.context&&n.acceptToken(tm);return}n.advance();let t=n.next==BC;t&&n.advance();let r=eO(n,0);if(r===void 0)return;if(!r)return n.acceptToken(t?l6:cf);let i=e.context?e.context.name:null;if(t){if(r==i)return n.acceptToken(s6);if(i&&y6[i])return n.acceptToken(tm,-2);if(e.dialectEnabled(g6))return n.acceptToken(o6);for(let s=e.context;s;s=s.parent)if(s.name==r)return;n.acceptToken(a6)}else{if(r=="script")return n.acceptToken(PC);if(r=="style")return n.acceptToken(RC);if(r=="textarea")return n.acceptToken(IC);if(O6.hasOwnProperty(r))return n.acceptToken(QC);i&&f1[i]&&f1[i][r]?n.acceptToken(tm,-1):n.acceptToken(cf)}},{contextual:!0}),T6=new qr(n=>{for(let e=0,t=0;;t++){if(n.next<0){t&&n.acceptToken(h1);break}if(n.next==_6)e++;else if(n.next==$C&&e>=2){t>3&&n.acceptToken(h1,-2);break}else e=0;n.advance()}});function By(n,e,t){let r=2+n.length;return new qr(i=>{for(let s=0,o=0,a=0;;a++){if(i.next<0){a&&i.acceptToken(e);break}if(s==0&&i.next==MC||s==1&&i.next==BC||s>=2&&s<r&&i.next==n.charCodeAt(s-2))s++,o++;else if((s==2||s==r)&&DC(i.next))o++;else if(s==r&&i.next==$C){a>o?i.acceptToken(e,-o):i.acceptToken(t,-(o-2));break}else if((i.next==10||i.next==13)&&a){i.acceptToken(e,1);break}else s=o=0;i.advance()}})}const E6=By("script",JU,e6),C6=By("style",t6,n6),A6=By("textarea",r6,i6),P6=Da({"Text RawText":J.content,"StartTag StartCloseTag SelfClosingEndTag EndTag":J.angleBracket,TagName:J.tagName,"MismatchedCloseTag/TagName":[J.tagName,J.invalid],AttributeName:J.attributeName,"AttributeValue UnquotedAttributeValue":J.attributeValue,Is:J.definitionOperator,"EntityReference CharacterReference":J.character,Comment:J.blockComment,ProcessingInst:J.processingInstruction,DoctypeDecl:J.documentMeta}),R6=ya.deserialize({version:14,states:",xOVOxOOO!WQ!bO'#CoO!]Q!bO'#CyO!bQ!bO'#C|O!gQ!bO'#DPO!lQ!bO'#DRO!qOXO'#CnO!|OYO'#CnO#XO[O'#CnO$eOxO'#CnOOOW'#Cn'#CnO$lO!rO'#DTO$tQ!bO'#DVO$yQ!bO'#DWOOOW'#Dk'#DkOOOW'#DY'#DYQVOxOOO%OQ#tO,59ZO%WQ#tO,59eO%`Q#tO,59hO%hQ#tO,59kO%sQ#tO,59mOOOX'#D^'#D^O%{OXO'#CwO&WOXO,59YOOOY'#D_'#D_O&`OYO'#CzO&kOYO,59YOOO['#D`'#D`O&sO[O'#C}O'OO[O,59YOOOW'#Da'#DaO'WOxO,59YO'_Q!bO'#DQOOOW,59Y,59YOOO`'#Db'#DbO'dO!rO,59oOOOW,59o,59oO'lQ!bO,59qO'qQ!bO,59rOOOW-E7W-E7WO'vQ#tO'#CqOOQO'#DZ'#DZO(UQ#tO1G.uOOOX1G.u1G.uO(^Q#tO1G/POOOY1G/P1G/PO(fQ#tO1G/SOOO[1G/S1G/SO(nQ#tO1G/VOOOW1G/V1G/VOOOW1G/X1G/XO(yQ#tO1G/XOOOX-E7[-E7[O)RQ!bO'#CxOOOW1G.t1G.tOOOY-E7]-E7]O)WQ!bO'#C{OOO[-E7^-E7^O)]Q!bO'#DOOOOW-E7_-E7_O)bQ!bO,59lOOO`-E7`-E7`OOOW1G/Z1G/ZOOOW1G/]1G/]OOOW1G/^1G/^O)gQ&jO,59]OOQO-E7X-E7XOOOX7+$a7+$aOOOY7+$k7+$kOOO[7+$n7+$nOOOW7+$q7+$qOOOW7+$s7+$sO)rQ!bO,59dO)wQ!bO,59gO)|Q!bO,59jOOOW1G/W1G/WO*RO,UO'#CtO*dO7[O'#CtOOQO1G.w1G.wOOOW1G/O1G/OOOOW1G/R1G/ROOOW1G/U1G/UOOOO'#D['#D[O*uO,UO,59`OOQO,59`,59`OOOO'#D]'#D]O+WO7[O,59`OOOO-E7Y-E7YOOQO1G.z1G.zOOOO-E7Z-E7Z",stateData:"+u~O!^OS~OSSOTPOUQOVROWTOY]OZ[O[^O^^O_^O`^Oa^Ox^O{_O!dZO~OdaO~OdbO~OdcO~OddO~OdeO~O!WfOPkP!ZkP~O!XiOQnP!ZnP~O!YlORqP!ZqP~OSSOTPOUQOVROWTOXqOY]OZ[O[^O^^O_^O`^Oa^Ox^O!dZO~O!ZrO~P#dO![sO!euO~OdvO~OdwO~OfyOj|O~OfyOj!OO~OfyOj!QO~OfyOj!SOv!TO~OfyOj!TO~O!WfOPkX!ZkX~OP!WO!Z!XO~O!XiOQnX!ZnX~OQ!ZO!Z!XO~O!YlORqX!ZqX~OR!]O!Z!XO~O!Z!XO~P#dOd!_O~O![sO!e!aO~Oj!bO~Oj!cO~Og!dOfeXjeXveX~OfyOj!fO~OfyOj!gO~OfyOj!hO~OfyOj!iOv!jO~OfyOj!jO~Od!kO~Od!lO~Od!mO~Oj!nO~Oi!qO!`!oO!b!pO~Oj!rO~Oj!sO~Oj!tO~O_!uO`!uOa!uO!`!wO!a!uO~O_!xO`!xOa!xO!b!wO!c!xO~O_!uO`!uOa!uO!`!{O!a!uO~O_!xO`!xOa!xO!b!{O!c!xO~Ov~vj`!dx{_a_~",goto:"%p!`PPPPPPPPPPPPPPPPPP!a!gP!mPP!yPP!|#P#S#Y#]#`#f#i#l#r#xP!aP!a!aP$O$U$l$r$x%O%U%[%bPPPPPPPP%hX^OX`pXUOX`pezabcde{}!P!R!UR!q!dRhUR!XhXVOX`pRkVR!XkXWOX`pRnWR!XnXXOX`pQrXR!XpXYOX`pQ`ORx`Q{aQ}bQ!PcQ!RdQ!UeZ!e{}!P!R!UQ!v!oR!z!vQ!y!pR!|!yQgUR!VgQjVR!YjQmWR![mQpXR!^pQtZR!`tS_O`ToXp",nodeNames:"\u26A0 StartCloseTag StartCloseTag StartCloseTag StartTag StartTag StartTag StartTag StartTag StartCloseTag StartCloseTag StartCloseTag IncompleteCloseTag Document Text EntityReference CharacterReference InvalidEntity Element OpenTag TagName Attribute AttributeName Is AttributeValue UnquotedAttributeValue EndTag ScriptText CloseTag OpenTag StyleText CloseTag OpenTag TextareaText CloseTag OpenTag CloseTag SelfClosingTag SelfClosingEndTag Comment ProcessingInst MismatchedCloseTag CloseTag DoctypeDecl",maxTerm:67,context:S6,nodeProps:[["closedBy",-10,1,2,3,5,6,7,8,9,10,11,"EndTag",4,"EndTag SelfClosingEndTag",-4,19,29,32,35,"CloseTag"],["group",-9,12,15,16,17,18,39,40,41,42,"Entity",14,"Entity TextContent",-3,27,30,33,"TextContent Entity"],["openedBy",26,"StartTag StartCloseTag",-4,28,31,34,36,"OpenTag",38,"StartTag"]],propSources:[P6],skippedNodes:[0],repeatNodeCount:9,tokenData:"#(r!aR!YOX$qXY,QYZ,QZ[$q[]&X]^,Q^p$qpq,Qqr-_rs4ysv-_vw5iwxJ^x}-_}!OKP!O!P-_!P!Q!!O!Q![-_![!]!$c!]!^-_!^!_!(k!_!`#'S!`!a#'z!a!c-_!c!}!$c!}#R-_#R#S!$c#S#T3V#T#o!$c#o#s-_#s$f$q$f%W-_%W%o!$c%o%p-_%p&a!$c&a&b-_&b1p!$c1p4U-_4U4d!$c4d4e-_4e$IS!$c$IS$I`-_$I`$Ib!$c$Ib$Kh-_$Kh%#t!$c%#t&/x-_&/x&Et!$c&Et&FV-_&FV;'S!$c;'S;:j!(e;:j;=`4s<%l?&r-_?&r?Ah!$c?Ah?BY$q?BY?Mn!$c?MnO$q!Z$|c^PiW!a`!cpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr$qrs&}sv$qvw+Pwx(tx!^$q!^!_*V!_!a&X!a#S$q#S#T&X#T;'S$q;'S;=`+z<%lO$q!R&bX^P!a`!cpOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&Xq'UV^P!cpOv&}wx'kx!^&}!^!_(V!_;'S&};'S;=`(n<%lO&}P'pT^POv'kw!^'k!_;'S'k;'S;=`(P<%lO'kP(SP;=`<%l'kp([S!cpOv(Vx;'S(V;'S;=`(h<%lO(Vp(kP;=`<%l(Vq(qP;=`<%l&}a({W^P!a`Or(trs'ksv(tw!^(t!^!_)e!_;'S(t;'S;=`*P<%lO(t`)jT!a`Or)esv)ew;'S)e;'S;=`)y<%lO)e`)|P;=`<%l)ea*SP;=`<%l(t!Q*^V!a`!cpOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!Q*vP;=`<%l*V!R*|P;=`<%l&XW+UYiWOX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+PW+wP;=`<%l+P!Z+}P;=`<%l$q!a,]`^P!a`!cp!^^OX&XXY,QYZ,QZ]&X]^,Q^p&Xpq,Qqr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X!_-ljfS^PiW!a`!cpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx!P-_!P!Q$q!Q!^-_!^!_1n!_!a&X!a#S-_#S#T3V#T#s-_#s$f$q$f;'S-_;'S;=`4s<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q[/ecfSiWOX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!^!_0p!a#S/^#S#T0p#T#s/^#s$f+P$f;'S/^;'S;=`1h<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+PS0uXfSqr0psw0px!P0p!Q!_0p!a#s0p$f;'S0p;'S;=`1b<%l?Ah0p?BY?Mn0pS1eP;=`<%l0p[1kP;=`<%l/^!U1wbfS!a`!cpOq*Vqr1nrs(Vsv1nvw0pwx)ex!P1n!P!Q*V!Q!_1n!_!a*V!a#s1n#s$f*V$f;'S1n;'S;=`3P<%l?Ah1n?Ah?BY*V?BY?Mn1n?MnO*V!U3SP;=`<%l1n!V3bcfS^P!a`!cpOq&Xqr3Vrs&}sv3Vvw0pwx(tx!P3V!P!Q&X!Q!^3V!^!_1n!_!a&X!a#s3V#s$f&X$f;'S3V;'S;=`4m<%l?Ah3V?Ah?BY&X?BY?Mn3V?MnO&X!V4pP;=`<%l3V!_4vP;=`<%l-_!Z5SV!`h^P!cpOv&}wx'kx!^&}!^!_(V!_;'S&};'S;=`(n<%lO&}!_5rjfSiWa!ROX7dXZ8qZ[7d[^8q^p7dqr:crs8qst@Ttw:cwx8qx!P:c!P!Q7d!Q!]:c!]!^/^!^!_=p!_!a8q!a#S:c#S#T=p#T#s:c#s$f7d$f;'S:c;'S;=`?}<%l?Ah:c?Ah?BY7d?BY?Mn:c?MnO7d!Z7ibiWOX7dXZ8qZ[7d[^8q^p7dqr7drs8qst+Ptw7dwx8qx!]7d!]!^9f!^!a8q!a#S7d#S#T8q#T;'S7d;'S;=`:]<%lO7d!R8tVOp8qqs8qt!]8q!]!^9Z!^;'S8q;'S;=`9`<%lO8q!R9`O_!R!R9cP;=`<%l8q!Z9mYiW_!ROX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+P!Z:`P;=`<%l7d!_:jjfSiWOX7dXZ8qZ[7d[^8q^p7dqr:crs8qst/^tw:cwx8qx!P:c!P!Q7d!Q!]:c!]!^<[!^!_=p!_!a8q!a#S:c#S#T=p#T#s:c#s$f7d$f;'S:c;'S;=`?}<%l?Ah:c?Ah?BY7d?BY?Mn:c?MnO7d!_<ecfSiW_!ROX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!^!_0p!a#S/^#S#T0p#T#s/^#s$f+P$f;'S/^;'S;=`1h<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+P!V=udfSOp8qqr=prs8qst0ptw=pwx8qx!P=p!P!Q8q!Q!]=p!]!^?T!^!_=p!_!a8q!a#s=p#s$f8q$f;'S=p;'S;=`?w<%l?Ah=p?Ah?BY8q?BY?Mn=p?MnO8q!V?[XfS_!Rqr0psw0px!P0p!Q!_0p!a#s0p$f;'S0p;'S;=`1b<%l?Ah0p?BY?Mn0p!V?zP;=`<%l=p!_@QP;=`<%l:c!_@[ifSiWOXAyXZCTZ[Ay[^CT^pAyqrDrrsCTswDrwxCTx!PDr!P!QAy!Q!]Dr!]!^/^!^!_G|!_!aCT!a#SDr#S#TG|#T#sDr#s$fAy$f;'SDr;'S;=`JW<%l?AhDr?Ah?BYAy?BY?MnDr?MnOAy!ZBOaiWOXAyXZCTZ[Ay[^CT^pAyqrAyrsCTswAywxCTx!]Ay!]!^Cu!^!aCT!a#SAy#S#TCT#T;'SAy;'S;=`Dl<%lOAy!RCWUOpCTq!]CT!]!^Cj!^;'SCT;'S;=`Co<%lOCT!RCoO`!R!RCrP;=`<%lCT!ZC|YiW`!ROX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+P!ZDoP;=`<%lAy!_DyifSiWOXAyXZCTZ[Ay[^CT^pAyqrDrrsCTswDrwxCTx!PDr!P!QAy!Q!]Dr!]!^Fh!^!_G|!_!aCT!a#SDr#S#TG|#T#sDr#s$fAy$f;'SDr;'S;=`JW<%l?AhDr?Ah?BYAy?BY?MnDr?MnOAy!_FqcfSiW`!ROX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!^!_0p!a#S/^#S#T0p#T#s/^#s$f+P$f;'S/^;'S;=`1h<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+P!VHRcfSOpCTqrG|rsCTswG|wxCTx!PG|!P!QCT!Q!]G|!]!^I^!^!_G|!_!aCT!a#sG|#s$fCT$f;'SG|;'S;=`JQ<%l?AhG|?Ah?BYCT?BY?MnG|?MnOCT!VIeXfS`!Rqr0psw0px!P0p!Q!_0p!a#s0p$f;'S0p;'S;=`1b<%l?Ah0p?BY?Mn0p!VJTP;=`<%lG|!_JZP;=`<%lDr!ZJgW!bx^P!a`Or(trs'ksv(tw!^(t!^!_)e!_;'S(t;'S;=`*P<%lO(t!aK^lfS^PiW!a`!cpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx}-_}!OMU!O!P-_!P!Q$q!Q!^-_!^!_1n!_!a&X!a#S-_#S#T3V#T#s-_#s$f$q$f;'S-_;'S;=`4s<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q!aMckfS^PiW!a`!cpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx!P-_!P!Q$q!Q!^-_!^!_1n!_!`&X!`!a! W!a#S-_#S#T3V#T#s-_#s$f$q$f;'S-_;'S;=`4s<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q!T! cX^P!a`!cp!eQOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X!a!!Zd^PiW!a`!cpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr$qrs&}sv$qvw+Pwx(tx!^$q!^!_*V!_!`&X!`!a!#i!a#S$q#S#T&X#T;'S$q;'S;=`+z<%lO$q!X!#vX^P!a`!cpvSjUOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X!a!$r!ZfSdQ^PiW!a`!cpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx}-_}!O!$c!O!P!$c!P!Q$q!Q![!$c![!]!$c!]!^-_!^!_1n!_!a&X!a!c-_!c!}!$c!}#R-_#R#S!$c#S#T3V#T#o!$c#o#s-_#s$f$q$f$}-_$}%O!$c%O%W-_%W%o!$c%o%p-_%p&a!$c&a&b-_&b1p!$c1p4U!$c4U4d!$c4d4e-_4e$IS!$c$IS$I`-_$I`$Ib!$c$Ib$Je-_$Je$Jg!$c$Jg$Kh-_$Kh%#t!$c%#t&/x-_&/x&Et!$c&Et&FV-_&FV;'S!$c;'S;:j!(e;:j;=`4s<%l?&r-_?&r?Ah!$c?Ah?BY$q?BY?Mn!$c?MnO$q!a!(hP;=`<%l!$c!V!(tcfS!a`!cpOq*Vqr!*Prs(Vsv1nvw0pwx)ex!P1n!P!Q*V!Q!_1n!_!a*V!a!b!H^!b#s1n#s$f*V$f;'S1n;'S;=`3P<%l?Ah1n?Ah?BY*V?BY?Mn1n?MnO*V!V!*YhfS!a`!cpOq*Vqr1nrs(Vsv1nvw0pwx)ex}1n}!O!+t!O!P1n!P!Q*V!Q!_1n!_!a*V!a!f1n!f!g!.p!g#W1n#W#X!?^#X#s1n#s$f*V$f;'S1n;'S;=`3P<%l?Ah1n?Ah?BY*V?BY?Mn1n?MnO*V!V!+}dfS!a`!cpOq*Vqr1nrs(Vsv1nvw0pwx)ex}1n}!O!-]!O!P1n!P!Q*V!Q!_1n!_!a*V!a#s1n#s$f*V$f;'S1n;'S;=`3P<%l?Ah1n?Ah?BY*V?BY?Mn1n?MnO*V!V!-hbfS!a`!cp!dPOq*Vqr1nrs(Vsv1nvw0pwx)ex!P1n!P!Q*V!Q!_1n!_!a*V!a#s1n#s$f*V$f;'S1n;'S;=`3P<%l?Ah1n?Ah?BY*V?BY?Mn1n?MnO*V!V!.ydfS!a`!cpOq*Vqr1nrs(Vsv1nvw0pwx)ex!P1n!P!Q*V!Q!_1n!_!a*V!a!q1n!q!r!0X!r#s1n#s$f*V$f;'S1n;'S;=`3P<%l?Ah1n?Ah?BY*V?BY?Mn1n?MnO*V!V!0bdfS!a`!cpOq*Vqr1nrs(Vsv1nvw0pwx)ex!P1n!P!Q*V!Q!_1n!_!a*V!a!e1n!e!f!1p!f#s1n#s$f*V$f;'S1n;'S;=`3P<%l?Ah1n?Ah?BY*V?BY?Mn1n?MnO*V!V!1ydfS!a`!cpOq*Vqr1nrs(Vsv1nvw0pwx)ex!P1n!P!Q*V!Q!_1n!_!a*V!a!v1n!v!w!3X!w#s1n#s$f*V$f;'S1n;'S;=`3P<%l?Ah1n?Ah?BY*V?BY?Mn1n?MnO*V!V!3bdfS!a`!cpOq*Vqr1nrs(Vsv1nvw0pwx)ex!P1n!P!Q*V!Q!_1n!_!a*V!a!{1n!{!|!4p!|#s1n#s$f*V$f;'S1n;'S;=`3P<%l?Ah1n?Ah?BY*V?BY?Mn1n?MnO*V!V!4ydfS!a`!cpOq*Vqr1nrs(Vsv1nvw0pwx)ex!P1n!P!Q*V!Q!_1n!_!a*V!a!r1n!r!s!6X!s#s1n#s$f*V$f;'S1n;'S;=`3P<%l?Ah1n?Ah?BY*V?BY?Mn1n?MnO*V!V!6bdfS!a`!cpOq*Vqr1nrs(Vsv1nvw0pwx)ex!P1n!P!Q*V!Q!_1n!_!a*V!a!g1n!g!h!7p!h#s1n#s$f*V$f;'S1n;'S;=`3P<%l?Ah1n?Ah?BY*V?BY?Mn1n?MnO*V!V!7ycfS!a`!cpOq!9Uqr!7prs!9{sv!7pvw!=swx!;ox!P!7p!P!Q!9U!Q!_!7p!_!`!9U!`!a!<}!a#s!7p#s$f!9U$f;'S!7p;'S;=`!?W<%l?Ah!7p?Ah?BY!9U?BY?Mn!7p?MnO!9U!R!9]Y!a`!cpOr!9Urs!9{sv!9Uvw!:gwx!;ox!`!9U!`!a!<}!a;'S!9U;'S;=`!=m<%lO!9Uq!:QV!cpOv!9{vx!:gx!`!9{!`!a!;U!a;'S!9{;'S;=`!;i<%lO!9{P!:jTO!`!:g!`!a!:y!a;'S!:g;'S;=`!;O<%lO!:gP!;OO{PP!;RP;=`<%l!:gq!;]S!cp{POv(Vx;'S(V;'S;=`(h<%lO(Vq!;lP;=`<%l!9{a!;tX!a`Or!;ors!:gsv!;ovw!:gw!`!;o!`!a!<a!a;'S!;o;'S;=`!<w<%lO!;oa!<hT!a`{POr)esv)ew;'S)e;'S;=`)y<%lO)ea!<zP;=`<%l!;o!R!=WV!a`!cp{POr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R!=pP;=`<%l!9UT!=xbfSOq!:gqr!=srs!:gsw!=swx!:gx!P!=s!P!Q!:g!Q!_!=s!_!`!:g!`!a!:y!a#s!=s#s$f!:g$f;'S!=s;'S;=`!?Q<%l?Ah!=s?Ah?BY!:g?BY?Mn!=s?MnO!:gT!?TP;=`<%l!=s!V!?ZP;=`<%l!7p!V!?gdfS!a`!cpOq*Vqr1nrs(Vsv1nvw0pwx)ex!P1n!P!Q*V!Q!_1n!_!a*V!a#c1n#c#d!@u#d#s1n#s$f*V$f;'S1n;'S;=`3P<%l?Ah1n?Ah?BY*V?BY?Mn1n?MnO*V!V!AOdfS!a`!cpOq*Vqr1nrs(Vsv1nvw0pwx)ex!P1n!P!Q*V!Q!_1n!_!a*V!a#V1n#V#W!B^#W#s1n#s$f*V$f;'S1n;'S;=`3P<%l?Ah1n?Ah?BY*V?BY?Mn1n?MnO*V!V!BgdfS!a`!cpOq*Vqr1nrs(Vsv1nvw0pwx)ex!P1n!P!Q*V!Q!_1n!_!a*V!a#h1n#h#i!Cu#i#s1n#s$f*V$f;'S1n;'S;=`3P<%l?Ah1n?Ah?BY*V?BY?Mn1n?MnO*V!V!DOdfS!a`!cpOq*Vqr1nrs(Vsv1nvw0pwx)ex!P1n!P!Q*V!Q!_1n!_!a*V!a#m1n#m#n!E^#n#s1n#s$f*V$f;'S1n;'S;=`3P<%l?Ah1n?Ah?BY*V?BY?Mn1n?MnO*V!V!EgdfS!a`!cpOq*Vqr1nrs(Vsv1nvw0pwx)ex!P1n!P!Q*V!Q!_1n!_!a*V!a#d1n#d#e!Fu#e#s1n#s$f*V$f;'S1n;'S;=`3P<%l?Ah1n?Ah?BY*V?BY?Mn1n?MnO*V!V!GOdfS!a`!cpOq*Vqr1nrs(Vsv1nvw0pwx)ex!P1n!P!Q*V!Q!_1n!_!a*V!a#X1n#X#Y!7p#Y#s1n#s$f*V$f;'S1n;'S;=`3P<%l?Ah1n?Ah?BY*V?BY?Mn1n?MnO*V!V!HgcfS!a`!cpOq!Irqr!H^rs!Jisv!H^vw#!vwx!MZx!P!H^!P!Q!Ir!Q!_!H^!_!a!Ir!a!b#%h!b#s!H^#s$f!Ir$f;'S!H^;'S;=`#&|<%l?Ah!H^?Ah?BY!Ir?BY?Mn!H^?MnO!Ir!R!IyY!a`!cpOr!Irrs!Jisv!Irvw!KTwx!MZx!a!Ir!a!b# Z!b;'S!Ir;'S;=`#!p<%lO!Irq!JnV!cpOv!Jivx!KTx!a!Ji!a!b!LU!b;'S!Ji;'S;=`!MT<%lO!JiP!KWTO!a!KT!a!b!Kg!b;'S!KT;'S;=`!LO<%lO!KTP!KjTO!`!KT!`!a!Ky!a;'S!KT;'S;=`!LO<%lO!KTP!LOOxPP!LRP;=`<%l!KTq!LZV!cpOv!Jivx!KTx!`!Ji!`!a!Lp!a;'S!Ji;'S;=`!MT<%lO!Jiq!LwS!cpxPOv(Vx;'S(V;'S;=`(h<%lO(Vq!MWP;=`<%l!Jia!M`X!a`Or!MZrs!KTsv!MZvw!KTw!a!MZ!a!b!M{!b;'S!MZ;'S;=`# T<%lO!MZa!NQX!a`Or!MZrs!KTsv!MZvw!KTw!`!MZ!`!a!Nm!a;'S!MZ;'S;=`# T<%lO!MZa!NtT!a`xPOr)esv)ew;'S)e;'S;=`)y<%lO)ea# WP;=`<%l!MZ!R# bY!a`!cpOr!Irrs!Jisv!Irvw!KTwx!MZx!`!Ir!`!a#!Q!a;'S!Ir;'S;=`#!p<%lO!Ir!R#!ZV!a`!cpxPOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R#!sP;=`<%l!IrT#!{bfSOq!KTqr#!vrs!KTsw#!vwx!KTx!P#!v!P!Q!KT!Q!_#!v!_!a!KT!a!b#$T!b#s#!v#s$f!KT$f;'S#!v;'S;=`#%b<%l?Ah#!v?Ah?BY!KT?BY?Mn#!v?MnO!KTT#$YbfSOq!KTqr#!vrs!KTsw#!vwx!KTx!P#!v!P!Q!KT!Q!_#!v!_!`!KT!`!a!Ky!a#s#!v#s$f!KT$f;'S#!v;'S;=`#%b<%l?Ah#!v?Ah?BY!KT?BY?Mn#!v?MnO!KTT#%eP;=`<%l#!v!V#%qcfS!a`!cpOq!Irqr!H^rs!Jisv!H^vw#!vwx!MZx!P!H^!P!Q!Ir!Q!_!H^!_!`!Ir!`!a#!Q!a#s!H^#s$f!Ir$f;'S!H^;'S;=`#&|<%l?Ah!H^?Ah?BY!Ir?BY?Mn!H^?MnO!Ir!V#'PP;=`<%l!H^!V#'_XgS^P!a`!cpOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X!X#(VX^P!a`!cpjUOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X",tokenizers:[E6,C6,A6,k6,T6,0,1,2,3,4,5],topRules:{Document:[0,13]},dialects:{noMatch:0,selfClosing:485},tokenPrec:487});function I6(n,e){let t=Object.create(null);for(let r of n.firstChild.getChildren(NC)){let i=r.getChild(h6),s=r.getChild(Jg)||r.getChild(LC);i&&(t[e.read(i.from,i.to)]=s?s.type.id==Jg?e.read(s.from+1,s.to-1):e.read(s.from,s.to):"")}return t}function nm(n,e,t){let r;for(let i of t)if(!i.attrs||i.attrs(r||(r=I6(n.node.parent,e))))return{parser:i.parser};return null}function FC(n=[],e=[]){let t=[],r=[],i=[];for(let o of n){let a=o.tag=="script"?t:o.tag=="style"?r:o.tag=="textarea"?i:null;if(!a)throw new RangeError("Only script, style, and textarea tags can host nested parsers");a.push(o)}let s=e.length?Object.create(null):null;for(let o of e)(s[o.name]||(s[o.name]=[])).push(o);return gE((o,a)=>{let l=o.type.id;if(l==f6)return nm(o,a,t);if(l==d6)return nm(o,a,r);if(l==p6)return nm(o,a,i);if(s&&l==NC){let c=o.node,u;if(u=c.firstChild){let h=s[a.read(u.from,u.to)];if(h)for(let f of h){if(f.tagName){if(!tagName){let d=c.parent.getChild(u6);tagName=d?a.read(d.from,d.to):" "}if(attrTagName!=tagName)continue}let p=c.lastChild;if(p.type.id==Jg)return{parser:f.parser,overlay:[{from:p.from+1,to:p.to-1}]};if(p.type.id==LC)return{parser:f.parser,overlay:[{from:p.from,to:p.to}]}}}}return null})}const Q6=95,O1=1,N6=96,L6=97,y1=2,UC=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],D6=58,M6=40,VC=95,$6=91,mh=45,B6=46,F6=35,U6=37;function uf(n){return n>=65&&n<=90||n>=97&&n<=122||n>=161}function V6(n){return n>=48&&n<=57}const W6=new qr((n,e)=>{for(let t=!1,r=0,i=0;;i++){let{next:s}=n;if(uf(s)||s==mh||s==VC||t&&V6(s))!t&&(s!=mh||i>0)&&(t=!0),r===i&&s==mh&&r++,n.advance();else{t&&n.acceptToken(s==M6?N6:r==2&&e.canShift(y1)?y1:L6);break}}}),j6=new qr(n=>{if(UC.includes(n.peek(-1))){let{next:e}=n;(uf(e)||e==VC||e==F6||e==B6||e==$6||e==D6||e==mh)&&n.acceptToken(Q6)}}),q6=new qr(n=>{if(!UC.includes(n.peek(-1))){let{next:e}=n;if(e==U6&&(n.advance(),n.acceptToken(O1)),uf(e)){do n.advance();while(uf(n.next));n.acceptToken(O1)}}}),X6=Da({"AtKeyword import charset namespace keyframes media supports":J.definitionKeyword,"from to selector":J.keyword,NamespaceName:J.namespace,KeyframeName:J.labelName,TagName:J.tagName,ClassName:J.className,PseudoClassName:J.constant(J.className),IdName:J.labelName,"FeatureName PropertyName":J.propertyName,AttributeName:J.attributeName,NumberLiteral:J.number,KeywordQuery:J.keyword,UnaryQueryOp:J.operatorKeyword,"CallTag ValueName":J.atom,VariableName:J.variableName,Callee:J.operatorKeyword,Unit:J.unit,"UniversalSelector NestingSelector":J.definitionOperator,MatchOp:J.compareOperator,"ChildOp SiblingOp, LogicOp":J.logicOperator,BinOp:J.arithmeticOperator,Important:J.modifier,Comment:J.blockComment,ParenthesizedContent:J.special(J.name),ColorLiteral:J.color,StringLiteral:J.string,":":J.punctuation,"PseudoOp #":J.derefOperator,"; ,":J.separator,"( )":J.paren,"[ ]":J.squareBracket,"{ }":J.brace}),z6={__proto__:null,lang:32,"nth-child":32,"nth-last-child":32,"nth-of-type":32,"nth-last-of-type":32,dir:32,"host-context":32,url:60,"url-prefix":60,domain:60,regexp:60,selector:134},H6={__proto__:null,"@import":114,"@media":138,"@charset":142,"@namespace":146,"@keyframes":152,"@supports":164},Z6={__proto__:null,not:128,only:128,from:158,to:160},G6=ya.deserialize({version:14,states:"8SQYQ[OOO!ZQ[OOOOQP'#Cd'#CdOOQP'#Cc'#CcO!cQ[O'#CfO#VQXO'#CaO#^Q[O'#ChO#iQ[O'#DPO#nQ[O'#DTOOQP'#Ee'#EeO#sQdO'#DeO$_Q[O'#DrO#sQdO'#DtO$pQ[O'#DvO${Q[O'#DyO%QQ[O'#EPO%`Q[O'#EROOQS'#Ed'#EdOOQS'#ET'#ETQYQ[OOOOQO'#Db'#DbO%gQWO'#DaQ%lQWOOOOQP'#Cg'#CgOOQP,59Q,59QO!cQ[O,59QO%qQ[O'#EWO&]QWO,58{O&eQ[O,59SO#iQ[O,59kO#nQ[O,59oO%qQ[O,59sO%qQ[O,59uO%qQ[O,59vO'tQ[O'#D`OOQS,58{,58{OOQP'#Ck'#CkOOQO'#C}'#C}OOQP,59S,59SO'{QWO,59SO(QQWO,59SOOQP'#DR'#DROOQP,59k,59kOOQO'#DV'#DVO(VQ`O,59oOOQS'#Cp'#CpO#sQdO'#CqO(_QvO'#CsO)lQtO,5:POOQO'#Cx'#CxO(QQWO'#CwO*QQWO'#CyOOQS'#Eh'#EhOOQO'#Dh'#DhO*VQ[O'#DoO*eQWO'#EkO%QQ[O'#DmO*sQWO'#DpOOQO'#El'#ElO&`QWO,5:^O*xQpO,5:`OOQS'#Dx'#DxO+QQWO,5:bO+VQ[O,5:bOOQO'#D{'#D{O+_QWO,5:eO+dQWO,5:kO+lQWO,5:mOOQS-E8R-E8RO#sQdO,59{O+tQ[O'#E]Q%lQWOOOOQP1G.l1G.lO,nQXO,5:rOOQO-E8U-E8UOOQS1G.g1G.gOOQP1G.n1G.nO'{QWO1G.nO(QQWO1G.nOOQP1G/V1G/VO,{Q`O1G/ZO-fQXO1G/_O-|QXO1G/aO.dQXO1G/bO.zQXO'#CdOOQS,59z,59zO/oQWO,59zO/wQ[O,59zO0OQ[O'#DOO0VQdO'#CoOOQP1G/Z1G/ZO#sQdO1G/ZO0^QpO,59]OOQS,59_,59_O#sQdO,59aO0fQWO1G/kOOQS,59c,59cO0kQ!bO,59eO0sQWO'#DhO1OQWO,5:TO1TQWO,5:ZO%QQ[O,5:VO%QQ[O'#EZO1]QWO,5;VO1hQWO,5:XO%qQ[O,5:[OOQS1G/x1G/xOOQS1G/z1G/zOOQS1G/|1G/|O1yQWO1G/|O2OQdO'#D|OOQS1G0P1G0POOQS1G0V1G0VOOQS1G0X1G0XO2^QtO1G/gOOQO,5:w,5:wOOQO-E8Z-E8ZOOQP7+$Y7+$YOOQP7+$u7+$uO#sQdO7+$uO2tQ[O'#EYO3OQWO1G/fOOQS1G/f1G/fO3OQWO1G/fO3WQXO'#EjO3_QWO,59jO3dQtO'#EUO4XQdO'#EgO4cQWO,59ZO4hQpO7+$uOOQS1G.w1G.wOOQS1G.{1G.{OOQS7+%V7+%VO4pQWO1G/PO#sQdO1G/oOOQO1G/u1G/uOOQO1G/q1G/qO4uQWO,5:uOOQO-E8X-E8XO5TQXO1G/vOOQS7+%h7+%hO5[QYO'#CsO&`QWO'#E[O5dQdO,5:hOOQS,5:h,5:hO5rQtO'#EXO#sQdO'#EXO6pQdO7+%ROOQO7+%R7+%RO7TQpO<<HaOOQO,5:t,5:tO7]Q[O,5:tOOQO-E8W-E8WOOQS7+%Q7+%QO7gQWO7+%QO7oQWO,5;UOOQP1G/U1G/UOOQS-E8S-E8SO#sQdO'#EVO7wQWO,5;ROOQT1G.u1G.uOOQP<<Ha<<HaOOQS7+$k7+$kO8PQdO7+%ZOOQO7+%b7+%bOOQS,5:v,5:vOOQS-E8Y-E8YOOQS1G0S1G0SO8WQtO,5:sOOQS-E8V-E8VOOQO<<Hm<<HmOOQPAN={AN={OOQO1G0`1G0`OOQS<<Hl<<HlO9UQdO,5:qOOQO-E8T-E8TOOQO<<Hu<<Hu",stateData:"9f~O#VOSROS~OUXOXXO]UO^UOtVOxWO!Y`O!ZYO!gZO!i[O!k]O!n^O!t_O#TQO#YSO~OQeO#TdO~O#TgO~O]lO^lOpjOtmOxnO|oO!PqO#RpO#YiO~O!RrO~P!hO`xO#SuO#TtO~O#TyO~O#T{O~OQ!UOb!OOf!UOh!UOn!TO#S!RO#T}O#]!PO~Ob!WO!b!YO!e!ZO#T!VO!R#_P~Oh!`On!TO#T!_O~O#T!bO~Ob!WO!b!YO!e!ZO#T!VO~O!W#_P~P$_O]!gO~O!W!hO~OUXOXXO]UO^UOtVOxWO#TQO#YSO~OpjO!RrO~O`!pO#SuO#TtO~OQeOUXOXXO]UO^UOtVOxWO!Y`O!ZYO!gZO!i[O!k]O!n^O!t_O#T!vO#YSO~O!Q!wO~P&pOb!zO~Ob!{O~Ov!|Oz!}O~OP#PObgXjgX!WgX!bgX!egX#TgXagXQgXfgXhgXngXpgX!VgX#QgX#SgX#]gXvgX!QgX~Ob!WOj#QO!b!YO!e!ZO#T!VO!W#_P~Ob#TO~Ob!WO!b!YO!e!ZO#T#UO~Op#YO!`#XO!R#_X!W#_X~Ob#]O~Oj#QO!W#_O~O!W#`O~Oh#aOn!TO~O!R#bO~O!RrO!`#XO~O!RrO!W#eO~OQeO#TdO!W#PX#Q#PX~O]lO^lOtmOxnO|oO!PqO#RpO#YiO~Op!za!R!zaa!za~P,SOv#jOz#kO~O]lO^lOtmOxnO#YiO~Op{i|{i!P{i!R{i#R{ia{i~P-TOp}i|}i!P}i!R}i#R}ia}i~P-TOp!Oi|!Oi!P!Oi!R!Oi#R!Oia!Oi~P-TO]WX]!UX^WXpWXtWXxWX|WX!PWX!RWX#RWX#YWX~O!Q#nO!W#lO~O!Q#nO~P&pOa#^P~P%qOa#ZP~P#sOa#vOj#QO~O!W#xO~Oh#yOo#yO~O]!^Xa![X!`![X~O]#zO~Oa#{O!`#XO~Op#YO!R#_a!W#_a~O!`#XOp!aa!R!aa!W!aaa!aa~O!W$QO~O!Q$UO!q$SO!r$SO#]$RO~Oj#QOp$WO!V$YO!W!Ti#Q!Ti!Q!Ti~P#sO!Q!|X!W!|X~P&pO!Q$_O!W#lO~Oa#^X~P!hOa$bO~Oj#QOQ!xXa!xXb!xXf!xXh!xXn!xXp!xX#S!xX#T!xX#]!xX~Op$dOa#ZX~P#sOa$fO~Oj#QOv$gO~Oa$hO~O!`#XOp!}a!R!}a!W!}a~Oa$jO~P,SOP#PO!RgX~O!Q$mO!q$SO!r$SO#]$RO~Oj#QOQ!{Xb!{Xf!{Xh!{Xn!{Xp!{X!V!{X!W!{X#Q!{X#S!{X#T!{X#]!{X!Q!{X~Op$WO!V$pO!W!Tq#Q!Tq!Q!Tq~P#sOj#QOv$qO~O!Q!|a!W!|a~P&pO!Q$sO!W#lO~OpjOa#^a~Op$dOa#Za~Oa$vO~P#sOj#QOQ!{ab!{af!{ah!{an!{ap!{a!V!{a!W!{a#Q!{a#S!{a#T!{a#]!{a!Q!{a~Oa!yap!ya~P#sOo#]j!Pj~",goto:",`#aPPPPP#bP#j#xP#j$W#jPP$^PPP$d$m$mP%PP$mP$m%g%yPPP&c&i#jP&oP#jP&uP#jP#j#jPPP&{'_'qPP#bPP'y'y(T'yP'yP'y'yP#bP#bP#bP(W#bP(Z(^PP#bP#bP(a(o(})T)_)e)o)u){PPPPPP*R*ZP*u*xP+n+q+z]aOcr!y#l$]iXOcjopqr!y!z#]#l$]iROcjopqr!y!z#]#l$]QhSR!jiQvUR!nlQ!nxQ#S!SR#i!pq!UY[!O!g!{!}#Q#f#k#s#z$W$X$d$i$tp!UY[!O!g!{!}#Q#f#k#s#z$W$X$d$i$tT$S#b$Tq!SY[!O!g!{!}#Q#f#k#s#z$W$X$d$i$tp!UY[!O!g!{!}#Q#f#k#s#z$W$X$d$i$tQ!`]R#a!aQwUR!olQ!nwR#i!oQzVR!qmQ|WR!rnQsTQ!mkQ#^!]Q#d!dQ#e!eR$k$SQfPQ!xrQ#g!hQ#o!yQ$[#lR$r$]]ePr!h!y#l$]a![Z_`!Q!W!Y#X#YR#V!WR!a]R!c^R#c!cQcOU!fc!y$]Q!yrR$]#lQ#s!{U$c#s$i$tQ$i#zR$t$dQ$e#sR$u$eQkTS!lk$aR$a#pQ$X#fR$o$XQ#m!xS$^#m$`R$`#oQ#Z!XR$O#ZQ$T#bR$l$TQ!ifR#h!i]bOcr!y#l$][TOcr!y#l$]Q!kjQ!soQ!tpQ!uqQ#p!zR$P#]R#t!{Q!QYQ!^[Q#O!OQ#f!g[#r!{#s#z$d$i$tQ#u!}Q#w#QS$V#f$XQ$Z#kR$n$WR#q!zQ!]ZQ!e`R#R!QU!XZ`!QQ!d_Q#W!WQ#[!YQ#|#XR#}#Y",nodeNames:"\u26A0 Unit VariableName Comment StyleSheet RuleSet UniversalSelector TagSelector TagName NestingSelector ClassSelector ClassName PseudoClassSelector : :: PseudoClassName PseudoClassName ) ( ArgList ValueName ParenthesizedValue ColorLiteral NumberLiteral StringLiteral BinaryExpression BinOp CallExpression Callee CallLiteral CallTag ParenthesizedContent , PseudoClassName ArgList IdSelector # IdName ] AttributeSelector [ AttributeName MatchOp ChildSelector ChildOp DescendantSelector SiblingSelector SiblingOp } { Block Declaration PropertyName Important ; ImportStatement AtKeyword import KeywordQuery FeatureQuery FeatureName BinaryQuery LogicOp UnaryQuery UnaryQueryOp ParenthesizedQuery SelectorQuery selector MediaStatement media CharsetStatement charset NamespaceStatement namespace NamespaceName KeyframesStatement keyframes KeyframeName KeyframeList from to SupportsStatement supports AtRule Styles",maxTerm:108,nodeProps:[["openedBy",17,"(",48,"{"],["closedBy",18,")",49,"}"]],propSources:[X6],skippedNodes:[0,3],repeatNodeCount:9,tokenData:"Lq~R!^OX$}X^%u^p$}pq%uqr)Xrs.Rst/utu6duv$}vw7^wx7oxy9^yz9oz{9t{|:_|}?Q}!O?c!O!P@Q!P!Q@i!Q![Cu![!]Dp!]!^El!^!_$}!_!`E}!`!aF`!a!b$}!b!cG[!c!}$}!}#OHt#O#P$}#P#QIV#Q#R6d#R#T$}#T#UIh#U#c$}#c#dJy#d#o$}#o#pK`#p#q6d#q#rKq#r#sLS#s#y$}#y#z%u#z$f$}$f$g%u$g#BY$}#BY#BZ%u#BZ$IS$}$IS$I_%u$I_$I|$}$I|$JO%u$JO$JT$}$JT$JU%u$JU$KV$}$KV$KW%u$KW&FU$}&FU&FV%u&FV;'S$};'S;=`Lk<%lO$}W%QSOy%^z;'S%^;'S;=`%o<%lO%^W%cSoWOy%^z;'S%^;'S;=`%o<%lO%^W%rP;=`<%l%^~%zh#V~OX%^X^'f^p%^pq'fqy%^z#y%^#y#z'f#z$f%^$f$g'f$g#BY%^#BY#BZ'f#BZ$IS%^$IS$I_'f$I_$I|%^$I|$JO'f$JO$JT%^$JT$JU'f$JU$KV%^$KV$KW'f$KW&FU%^&FU&FV'f&FV;'S%^;'S;=`%o<%lO%^~'mh#V~oWOX%^X^'f^p%^pq'fqy%^z#y%^#y#z'f#z$f%^$f$g'f$g#BY%^#BY#BZ'f#BZ$IS%^$IS$I_'f$I_$I|%^$I|$JO'f$JO$JT%^$JT$JU'f$JU$KV%^$KV$KW'f$KW&FU%^&FU&FV'f&FV;'S%^;'S;=`%o<%lO%^^)[UOy%^z#]%^#]#^)n#^;'S%^;'S;=`%o<%lO%^^)sUoWOy%^z#a%^#a#b*V#b;'S%^;'S;=`%o<%lO%^^*[UoWOy%^z#d%^#d#e*n#e;'S%^;'S;=`%o<%lO%^^*sUoWOy%^z#c%^#c#d+V#d;'S%^;'S;=`%o<%lO%^^+[UoWOy%^z#f%^#f#g+n#g;'S%^;'S;=`%o<%lO%^^+sUoWOy%^z#h%^#h#i,V#i;'S%^;'S;=`%o<%lO%^^,[UoWOy%^z#T%^#T#U,n#U;'S%^;'S;=`%o<%lO%^^,sUoWOy%^z#b%^#b#c-V#c;'S%^;'S;=`%o<%lO%^^-[UoWOy%^z#h%^#h#i-n#i;'S%^;'S;=`%o<%lO%^^-uS!VUoWOy%^z;'S%^;'S;=`%o<%lO%^~.UWOY.RZr.Rrs.ns#O.R#O#P.s#P;'S.R;'S;=`/o<%lO.R~.sOh~~.vRO;'S.R;'S;=`/P;=`O.R~/SXOY.RZr.Rrs.ns#O.R#O#P.s#P;'S.R;'S;=`/o;=`<%l.R<%lO.R~/rP;=`<%l.R_/zYtPOy%^z!Q%^!Q![0j![!c%^!c!i0j!i#T%^#T#Z0j#Z;'S%^;'S;=`%o<%lO%^^0oYoWOy%^z!Q%^!Q![1_![!c%^!c!i1_!i#T%^#T#Z1_#Z;'S%^;'S;=`%o<%lO%^^1dYoWOy%^z!Q%^!Q![2S![!c%^!c!i2S!i#T%^#T#Z2S#Z;'S%^;'S;=`%o<%lO%^^2ZYfUoWOy%^z!Q%^!Q![2y![!c%^!c!i2y!i#T%^#T#Z2y#Z;'S%^;'S;=`%o<%lO%^^3QYfUoWOy%^z!Q%^!Q![3p![!c%^!c!i3p!i#T%^#T#Z3p#Z;'S%^;'S;=`%o<%lO%^^3uYoWOy%^z!Q%^!Q![4e![!c%^!c!i4e!i#T%^#T#Z4e#Z;'S%^;'S;=`%o<%lO%^^4lYfUoWOy%^z!Q%^!Q![5[![!c%^!c!i5[!i#T%^#T#Z5[#Z;'S%^;'S;=`%o<%lO%^^5aYoWOy%^z!Q%^!Q![6P![!c%^!c!i6P!i#T%^#T#Z6P#Z;'S%^;'S;=`%o<%lO%^^6WSfUoWOy%^z;'S%^;'S;=`%o<%lO%^Y6gUOy%^z!_%^!_!`6y!`;'S%^;'S;=`%o<%lO%^Y7QSzQoWOy%^z;'S%^;'S;=`%o<%lO%^X7cSXPOy%^z;'S%^;'S;=`%o<%lO%^~7rWOY7oZw7owx.nx#O7o#O#P8[#P;'S7o;'S;=`9W<%lO7o~8_RO;'S7o;'S;=`8h;=`O7o~8kXOY7oZw7owx.nx#O7o#O#P8[#P;'S7o;'S;=`9W;=`<%l7o<%lO7o~9ZP;=`<%l7o_9cSbVOy%^z;'S%^;'S;=`%o<%lO%^~9tOa~_9{UUPjSOy%^z!_%^!_!`6y!`;'S%^;'S;=`%o<%lO%^_:fWjS!PPOy%^z!O%^!O!P;O!P!Q%^!Q![>T![;'S%^;'S;=`%o<%lO%^^;TUoWOy%^z!Q%^!Q![;g![;'S%^;'S;=`%o<%lO%^^;nYoW#]UOy%^z!Q%^!Q![;g![!g%^!g!h<^!h#X%^#X#Y<^#Y;'S%^;'S;=`%o<%lO%^^<cYoWOy%^z{%^{|=R|}%^}!O=R!O!Q%^!Q![=j![;'S%^;'S;=`%o<%lO%^^=WUoWOy%^z!Q%^!Q![=j![;'S%^;'S;=`%o<%lO%^^=qUoW#]UOy%^z!Q%^!Q![=j![;'S%^;'S;=`%o<%lO%^^>[[oW#]UOy%^z!O%^!O!P;g!P!Q%^!Q![>T![!g%^!g!h<^!h#X%^#X#Y<^#Y;'S%^;'S;=`%o<%lO%^_?VSpVOy%^z;'S%^;'S;=`%o<%lO%^^?hWjSOy%^z!O%^!O!P;O!P!Q%^!Q![>T![;'S%^;'S;=`%o<%lO%^_@VU#YPOy%^z!Q%^!Q![;g![;'S%^;'S;=`%o<%lO%^~@nTjSOy%^z{@}{;'S%^;'S;=`%o<%lO%^~ASUoWOy@}yzAfz{Bm{;'S@};'S;=`Co<%lO@}~AiTOzAfz{Ax{;'SAf;'S;=`Bg<%lOAf~A{VOzAfz{Ax{!PAf!P!QBb!Q;'SAf;'S;=`Bg<%lOAf~BgOR~~BjP;=`<%lAf~BrWoWOy@}yzAfz{Bm{!P@}!P!QC[!Q;'S@};'S;=`Co<%lO@}~CcSoWR~Oy%^z;'S%^;'S;=`%o<%lO%^~CrP;=`<%l@}^Cz[#]UOy%^z!O%^!O!P;g!P!Q%^!Q![>T![!g%^!g!h<^!h#X%^#X#Y<^#Y;'S%^;'S;=`%o<%lO%^XDuU]POy%^z![%^![!]EX!];'S%^;'S;=`%o<%lO%^XE`S^PoWOy%^z;'S%^;'S;=`%o<%lO%^_EqS!WVOy%^z;'S%^;'S;=`%o<%lO%^YFSSzQOy%^z;'S%^;'S;=`%o<%lO%^XFeU|POy%^z!`%^!`!aFw!a;'S%^;'S;=`%o<%lO%^XGOS|PoWOy%^z;'S%^;'S;=`%o<%lO%^XG_WOy%^z!c%^!c!}Gw!}#T%^#T#oGw#o;'S%^;'S;=`%o<%lO%^XHO[!YPoWOy%^z}%^}!OGw!O!Q%^!Q![Gw![!c%^!c!}Gw!}#T%^#T#oGw#o;'S%^;'S;=`%o<%lO%^XHySxPOy%^z;'S%^;'S;=`%o<%lO%^^I[SvUOy%^z;'S%^;'S;=`%o<%lO%^XIkUOy%^z#b%^#b#cI}#c;'S%^;'S;=`%o<%lO%^XJSUoWOy%^z#W%^#W#XJf#X;'S%^;'S;=`%o<%lO%^XJmS!`PoWOy%^z;'S%^;'S;=`%o<%lO%^XJ|UOy%^z#f%^#f#gJf#g;'S%^;'S;=`%o<%lO%^XKeS!RPOy%^z;'S%^;'S;=`%o<%lO%^_KvS!QVOy%^z;'S%^;'S;=`%o<%lO%^ZLXU!PPOy%^z!_%^!_!`6y!`;'S%^;'S;=`%o<%lO%^WLnP;=`<%l$}",tokenizers:[j6,q6,W6,0,1,2,3],topRules:{StyleSheet:[0,4],Styles:[1,84]},specialized:[{term:96,get:n=>z6[n]||-1},{term:56,get:n=>H6[n]||-1},{term:97,get:n=>Z6[n]||-1}],tokenPrec:1120});let rm=null;function im(){if(!rm&&typeof document=="object"&&document.body){let n=[];for(let e in document.body.style)/[A-Z]|^-|^(item|length)$/.test(e)||n.push(e);rm=n.sort().map(e=>({type:"property",label:e}))}return rm||[]}const b1=["active","after","any-link","autofill","backdrop","before","checked","cue","default","defined","disabled","empty","enabled","file-selector-button","first","first-child","first-letter","first-line","first-of-type","focus","focus-visible","focus-within","fullscreen","has","host","host-context","hover","in-range","indeterminate","invalid","is","lang","last-child","last-of-type","left","link","marker","modal","not","nth-child","nth-last-child","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","part","placeholder","placeholder-shown","read-only","read-write","required","right","root","scope","selection","slotted","target","target-text","valid","visited","where"].map(n=>({type:"class",label:n})),v1=["above","absolute","activeborder","additive","activecaption","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","antialiased","appworkspace","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","contain","content","contents","content-box","context-menu","continuous","copy","counter","counters","cover","crop","cross","crosshair","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic-abegede-gez","ethiopic-halehame-aa-er","ethiopic-halehame-gez","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","graytext","grid","groove","hand","hard-light","help","hidden","hide","higher","highlight","highlighttext","horizontal","hsl","hsla","hue","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","justify","keep-all","landscape","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-hexadecimal","lower-latin","lower-norwegian","lowercase","ltr","luminosity","manipulation","match","matrix","matrix3d","medium","menu","menutext","message-box","middle","min-intrinsic","mix","monospace","move","multiple","multiple_mask_images","multiply","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","opacity","open-quote","optimizeLegibility","optimizeSpeed","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","self-start","self-end","semi-condensed","semi-expanded","separate","serif","show","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","text","text-bottom","text-top","textarea","textfield","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","to","top","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-latin","uppercase","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"].map(n=>({type:"keyword",label:n})).concat(["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"].map(n=>({type:"constant",label:n}))),Y6=["a","abbr","address","article","aside","b","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","dd","del","details","dfn","dialog","div","dl","dt","em","figcaption","figure","footer","form","header","hgroup","h1","h2","h3","h4","h5","h6","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","main","meter","nav","ol","output","p","pre","ruby","section","select","small","source","span","strong","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","tr","u","ul"].map(n=>({type:"type",label:n})),Ki=/^[\w-]*/,K6=n=>{let{state:e,pos:t}=n,r=an(e).resolveInner(t,-1);if(r.name=="PropertyName")return{from:r.from,options:im(),validFor:Ki};if(r.name=="ValueName")return{from:r.from,options:v1,validFor:Ki};if(r.name=="PseudoClassName")return{from:r.from,options:b1,validFor:Ki};if(r.name=="TagName"){for(let{parent:o}=r;o;o=o.parent)if(o.name=="Block")return{from:r.from,options:im(),validFor:Ki};return{from:r.from,options:Y6,validFor:Ki}}if(!n.explicit)return null;let i=r.resolve(t),s=i.childBefore(t);return s&&s.name==":"&&i.name=="PseudoClassSelector"?{from:t,options:b1,validFor:Ki}:s&&s.name==":"&&i.name=="Declaration"||i.name=="ArgList"?{from:t,options:v1,validFor:Ki}:i.name=="Block"?{from:t,options:im(),validFor:Ki}:null},hf=pa.define({name:"css",parser:G6.configure({props:[$c.add({Declaration:fh()}),nd.add({Block:SE})]}),languageData:{commentTokens:{block:{open:"/*",close:"*/"}},indentOnInput:/^\s*\}$/,wordChars:"-"}});function J6(){return new ic(hf,hf.data.of({autocomplete:K6}))}const e4=1,w1=294,_1=2,t4=3,Fu=295,n4=4,r4=296,x1=297,i4=299,s4=300,o4=5,a4=6,l4=1,c4=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],WC=125,u4=123,h4=59,S1=47,f4=42,d4=43,p4=45,m4=36,g4=96,O4=92,y4=new AC({start:!1,shift(n,e){return e==o4||e==a4||e==i4?n:e==s4},strict:!1}),b4=new qr((n,e)=>{let{next:t}=n;(t==WC||t==-1||e.context)&&e.canShift(x1)&&n.acceptToken(x1)},{contextual:!0,fallback:!0}),v4=new qr((n,e)=>{let{next:t}=n,r;c4.indexOf(t)>-1||t==S1&&((r=n.peek(1))==S1||r==f4)||t!=WC&&t!=h4&&t!=-1&&!e.context&&e.canShift(w1)&&n.acceptToken(w1)},{contextual:!0}),w4=new qr((n,e)=>{let{next:t}=n;if((t==d4||t==p4)&&(n.advance(),t==n.next)){n.advance();let r=!e.context&&e.canShift(_1);n.acceptToken(r?_1:t4)}},{contextual:!0}),_4=new qr(n=>{for(let e=!1,t=0;;t++){let{next:r}=n;if(r<0){t&&n.acceptToken(Fu);break}else if(r==g4){t?n.acceptToken(Fu):n.acceptToken(r4,1);break}else if(r==u4&&e){t==1?n.acceptToken(n4,1):n.acceptToken(Fu,-1);break}else if(r==10&&t){n.advance(),n.acceptToken(Fu);break}else r==O4&&n.advance();e=r==m4,n.advance()}}),x4=new qr((n,e)=>{if(!(n.next!=101||!e.dialectEnabled(l4))){n.advance();for(let t=0;t<6;t++){if(n.next!="xtends".charCodeAt(t))return;n.advance()}n.next>=57&&n.next<=65||n.next>=48&&n.next<=90||n.next==95||n.next>=97&&n.next<=122||n.next>160||n.acceptToken(e4)}}),S4=Da({"get set async static":J.modifier,"for while do if else switch try catch finally return throw break continue default case":J.controlKeyword,"in of await yield void typeof delete instanceof":J.operatorKeyword,"let var const function class extends":J.definitionKeyword,"import export from":J.moduleKeyword,"with debugger as new":J.keyword,TemplateString:J.special(J.string),super:J.atom,BooleanLiteral:J.bool,this:J.self,null:J.null,Star:J.modifier,VariableName:J.variableName,"CallExpression/VariableName TaggedTemplateExpression/VariableName":J.function(J.variableName),VariableDefinition:J.definition(J.variableName),Label:J.labelName,PropertyName:J.propertyName,PrivatePropertyName:J.special(J.propertyName),"CallExpression/MemberExpression/PropertyName":J.function(J.propertyName),"FunctionDeclaration/VariableDefinition":J.function(J.definition(J.variableName)),"ClassDeclaration/VariableDefinition":J.definition(J.className),PropertyDefinition:J.definition(J.propertyName),PrivatePropertyDefinition:J.definition(J.special(J.propertyName)),UpdateOp:J.updateOperator,LineComment:J.lineComment,BlockComment:J.blockComment,Number:J.number,String:J.string,ArithOp:J.arithmeticOperator,LogicOp:J.logicOperator,BitOp:J.bitwiseOperator,CompareOp:J.compareOperator,RegExp:J.regexp,Equals:J.definitionOperator,Arrow:J.function(J.punctuation),": Spread":J.punctuation,"( )":J.paren,"[ ]":J.squareBracket,"{ }":J.brace,"InterpolationStart InterpolationEnd":J.special(J.brace),".":J.derefOperator,", ;":J.separator,"@":J.meta,TypeName:J.typeName,TypeDefinition:J.definition(J.typeName),"type enum interface implements namespace module declare":J.definitionKeyword,"abstract global Privacy readonly override":J.modifier,"is keyof unique infer":J.operatorKeyword,JSXAttributeValue:J.attributeValue,JSXText:J.content,"JSXStartTag JSXStartCloseTag JSXSelfCloseEndTag JSXEndTag":J.angleBracket,"JSXIdentifier JSXNameSpacedName":J.tagName,"JSXAttribute/JSXIdentifier JSXAttribute/JSXNameSpacedName":J.attributeName,"JSXBuiltin/JSXIdentifier":J.standard(J.tagName)}),k4={__proto__:null,export:18,as:23,from:29,default:32,async:37,function:38,this:50,true:58,false:58,null:68,void:72,typeof:76,super:92,new:126,await:143,yield:145,delete:146,class:156,extends:158,public:213,private:213,protected:213,readonly:215,instanceof:234,satisfies:237,in:238,const:240,import:272,keyof:327,unique:331,infer:337,is:373,abstract:393,implements:395,type:397,let:400,var:402,interface:409,enum:413,namespace:419,module:421,declare:425,global:429,for:450,of:459,while:462,with:466,do:470,if:474,else:476,switch:480,case:486,try:492,catch:496,finally:500,return:504,throw:508,break:512,continue:516,debugger:520},T4={__proto__:null,async:113,get:115,set:117,public:175,private:175,protected:175,static:177,abstract:179,override:181,readonly:187,accessor:189,new:377},E4={__proto__:null,"<":133},C4=ya.deserialize({version:14,states:"$CWO`QdOOO$}QdOOO)WQ(C|O'#ChO)_OWO'#DYO+jQdO'#D_O+zQdO'#DjO$}QdO'#DtO.OQdO'#DzOOQ(C['#ET'#ETO.fQ`O'#EQOOQO'#IW'#IWO.nQ`O'#GgOOQO'#Ee'#EeO.yQ`O'#EdO/OQ`O'#EdO1QQ(C|O'#JQO3nQ(C|O'#JRO4_Q`O'#FSO4dQ!bO'#FkOOQ(C['#F['#F[O4oO#tO'#F[O4}Q&jO'#FrO6bQ`O'#FqOOQ(C['#JR'#JROOQ(CW'#JQ'#JQOOQS'#Jk'#JkO6gQ`O'#H{O6lQ(ChO'#H|OOQS'#Iu'#IuOOQS'#IO'#IOQ`QdOOO$}QdO'#DlO6tQ`O'#GgO6yQ&jO'#CmO7XQ`O'#EcO7dQ`O'#EnO7iQ&jO'#FZO8TQ`O'#GgO8YQ`O'#GkO8eQ`O'#GkO8sQ`O'#GnO8sQ`O'#GoO8sQ`O'#GqO6tQ`O'#GtO9dQ`O'#GwO:uQ`O'#CdO;VQ`O'#HUO;_Q`O'#H[O;_Q`O'#H^O`QdO'#H`O;_Q`O'#HbO;_Q`O'#HeO;dQ`O'#HkO;iQ(CjO'#HqO$}QdO'#HsO;tQ(CjO'#HuO<PQ(CjO'#HwO6lQ(ChO'#HyO<[Q(C|O'#ChO<xQ,UO'#DdQOQ`OOO=mQaO'#D{O6yQ&jO'#EcO={Q`O'#EcO>WQpO'#FZO$}QdO'#DZOOOW'#IQ'#IQO>`OWO,59tOOQ(C[,59t,59tO>kQdO'#IRO?OQ`O'#JSOAQQtO'#JSO)jQdO'#JSOAXQ`O,59yOAoQ`O'#EeOA|Q`O'#J`OBXQ`O'#J_OBXQ`O'#J_OBaQ`O,5;ROBfQ`O'#J^OOQ(C[,5:U,5:UOBmQdO,5:UODnQ(C|O,5:`OE_Q`O,5:fOEdQ`O'#J[OF^Q(ChO'#J]O8YQ`O'#J[OFeQ`O'#J[OFmQ`O,5;QOFrQ`O'#J[OOQ(C]'#Ch'#ChO$}QdO'#DzOGfQpO,5:lOOQO'#JX'#JXOOQO-E<U-E<UO6tQ`O,5=ROG|Q`O,5=ROHRQdO,5;OOJRQ&jO'#E`OKcQ`O,5;OOLxQ&jO'#DnOMPQdO'#DsOMZQ,UO,5;XOMcQ,UO,5;XO$}QdO,5;XOOQS'#Ez'#EzOOQS'#E|'#E|O$}QdO,5;YO$}QdO,5;YO$}QdO,5;YO$}QdO,5;YO$}QdO,5;YO$}QdO,5;YO$}QdO,5;YO$}QdO,5;YO$}QdO,5;YO$}QdO,5;YO$}QdO,5;YOOQS'#FQ'#FQOMqQdO,5;kOOQ(C[,5;p,5;pOOQ(C[,5;q,5;qO! qQ`O,5;qOOQ(C[,5;r,5;rO$}QdO'#I^O! yQ(ChO,5<_OJRQ&jO,5;YO!!hQ&jO,5;YO$}QdO,5;nO!!oQ!bO'#FaO!#lQ!bO'#JdO!#WQ!bO'#JdO!#sQ!bO'#JdOOQO'#Jd'#JdO!$XQ!bO,5;yOOOO,5<V,5<VO!$jQdO'#FmOOOO'#I]'#I]O4oO#tO,5;vO!$qQ!bO'#FoOOQ(C[,5;v,5;vO!%bQ7]O'#CsOOQ(C]'#Cv'#CvO!%uQ`O'#CvO!%zOWO'#CzO!&hQ&kO,5<[O!&oQ`O,5<^O!(RQMhO'#F|O!(`Q`O'#F}O!(eQ`O'#F}O!(jQMhO'#GRO!)iQ,UO'#GVO!*_Q7]O'#I}OOQ(C]'#I}'#I}O!+eQaO'#I|O!+sQ`O'#I{O!+{Q`O'#CrOOQ(C]'#Ct'#CtOOQ(C]'#C}'#C}OOQ(C]'#DP'#DPO.iQ`O'#DROKhQ&jO'#FtOKhQ&jO'#FvO!,TQ`O'#FxO!,YQ`O'#FyO!(eQ`O'#GPOKhQ&jO'#GUO!,_Q`O'#EfO!,yQ`O,5<]O`QdO,5>gOOQS'#Ix'#IxOOQS,5>h,5>hOOQS-E;|-E;|O!.xQ(C|O,5:WOOQ(CX'#Cp'#CpO!/lQ&kO,5=ROOQO'#Cf'#CfO!/}Q(ChO'#IyO6bQ`O'#IyO;dQ`O,59XO!0`Q!bO,59XO!0hQ&jO,59XO6yQ&jO,59XO!0sQ`O,5;OO!0{Q`O'#HTO!1ZQ`O'#JoO$}QdO,5;sO!1cQ,UO,5;uO!1hQ`O,5=nO!1mQ`O,5=nO!1rQ`O,5=nO6lQ(ChO,5=nO!2QQ`O'#EgO!2wQ,UO'#EhOOQ(CW'#J^'#J^O!3OQ(ChO'#JlO6lQ(ChO,5=VO8sQ`O,5=]OOQP'#Cs'#CsO!3ZQ!bO,5=YO!3cQ!cO,5=ZO!3nQ`O,5=]O!3sQpO,5=`O;dQ`O'#GyO6tQ`O'#G{O!3{Q`O'#G{O6yQ&jO'#HOO!4QQ`O'#HOOOQS,5=c,5=cO!4VQ`O'#HPO!4_Q`O'#CmO!4dQ`O,59OO!4nQ`O,59OO!6sQdO,59OOOQS,59O,59OO!7QQ(ChO,59OO$}QdO,59OO!7]QdO'#HWOOQS'#HX'#HXOOQS'#HY'#HYO`QdO,5=pO!7mQ`O,5=pO`QdO,5=vO`QdO,5=xO!7rQ`O,5=zO`QdO,5=|O!7wQ`O,5>PO!7|QdO,5>VOOQS,5>],5>]O$}QdO,5>]O6lQ(ChO,5>_OOQS,5>a,5>aO!<QQ`O,5>aOOQS,5>c,5>cO!<QQ`O,5>cOOQS,5>e,5>eO!<VQ!bO'#DWOOQ(CW'#JU'#JUO$}QdO'#JUO!<tQ!bO'#JUO!=cQ!bO'#DeO!=tQ,UO'#DeO!@PQdO'#DeO!@WQ`O'#JTO!@`Q`O,5:OO!@eQ`O'#EiO!@sQ`O'#JaO!@{Q`O,5;SO!AcQ,UO'#DeO!AmQ,UO'#EOOOQ(C[,5:g,5:gO$}QdO,5:gOJRQ&jO,5:gO!BjQaO,5:gO;dQ`O,5:}O!0`Q!bO,5:}O!0hQ&jO,5:}O6yQ&jO,5:}O!BuQpO,59uOOOW-E<O-E<OOOQ(C[1G/`1G/`O!BzQtO,5>mO)jQdO,5>mOOQO,5>s,5>sO!CUQdO'#IROOQO-E<P-E<PO!CcQ`O,5?nO!CkQtO,5?nO!CrQ`O,5?yOOQ(C[1G/e1G/eO$}QdO,5?zO!CzQ`O'#IXOOQO-E<V-E<VO!CrQ`O,5?yOOQ(CW1G0m1G0mOOQ(C[1G/p1G/pOOQ(C[1G0Q1G0QO!D`Q`O,5?vO8YQ`O,5?vO!DhQ`O,5?vOOQ(CW'#E_'#E_O$}QdO,5?wO!DvQ(ChO,5?wO!EXQ(ChO,5?wO!E`Q`O'#IZO!D`Q`O,5?vOOQ(CW1G0l1G0lOMZQ,UO,5:nOMfQ,UO,5:nOOQO,5:p,5:pO!E}Q`O,5:pO!FVQ&kO1G2mO6tQ`O1G2mOOQ(C[1G0j1G0jO!FhQ(C|O1G0jO!GmQ(CyO,5:zOOQ(C]'#F{'#F{O!JWQ(C}O'#I}OHRQdO1G0jO!J}Q&kO'#JVO!KXQ`O,5:YO!K^QtO'#JWO$}QdO'#JWO!KhQ`O,5:_OOQ(C]'#DW'#DWOOQ(C[1G0s1G0sO$}QdO1G0sOOQ(C[1G1]1G1]O!KmQ`O1G0sO!NUQ(C|O1G0tO!N]Q(C|O1G0tO#!vQ(C|O1G0tO#!}Q(C|O1G0tO#%XQ(C|O1G0tO#%oQ(C|O1G0tO#(iQ(C|O1G0tO#(pQ(C|O1G0tO#+ZQ(C|O1G0tO#+bQ(C|O1G0tO#-YQ(C|O1G0tO#0YQ!LUO'#ChO#2WQ!LUO1G1VO#4UQ!LUO'#JRO! tQ`O1G1]O#4iQ(C|O,5>xOOQ(CW-E<[-E<[O#5]Q(C}O1G0tOOQ(C[1G0t1G0tO#7hQ(C|O1G1YO#8[Q!bO,5;}O#8dQ!bO,5<OO#8lQ!bO'#FfO#9TQ`O'#FeOOQO'#Je'#JeOOQO'#I['#I[O#9YQ!bO1G1eOOQ(C[1G1e1G1eOOOO1G1p1G1pO#9kQ!LUO'#JQO#9uQ`O,5<XOMqQdO,5<XOOOO-E<Z-E<ZOOQ(C[1G1b1G1bOOQ(C[,5<Z,5<ZO#9zQ!bO,5<ZOOQ(C],59b,59bOJRQ&jO'#C|OOOW'#IP'#IPO#:POWO,59fOOQ(C],59f,59fO$}QdO1G1vO!,YQ`O'#I`O#:[Q`O,5<oOOQ(C],5<l,5<lOOQO'#Gb'#GbOKhQ&jO,5<{OOQO'#Gd'#GdOKhQ&jO,5<}OJRQ&jO,5=POOQO1G1x1G1xO#:gQqO'#CpO#:zQqO,5<hO#;RQ`O'#JhO6tQ`O'#JhO#;aQ`O,5<jOKhQ&jO,5<iO#;fQ`O'#GOO#;qQ`O,5<iO#;vQqO'#F{O#<TQqO'#JiO#<_Q`O'#JiOJRQ&jO'#JiO#<dQ`O,5<mOOQ(CW'#Di'#DiO#<iQ!bO'#GWO!)dQ,UO'#GWO#<zQ`O'#GYO#=PQ`O'#G[O!(eQ`O'#G_O#=UQ(ChO'#IbO#=aQ,UO,5<qOOQ(C],5<q,5<qO#=hQ,UO'#GWO#=vQ,UO'#GXO#>OQ,UO'#GXOOQ(C],5=Q,5=QOKhQ&jO,5?hOKhQ&jO,5?hO#>TQ`O'#IcO#>`Q`O,5?gO#>hQ`O,59^O#?XQ&kO,59mOOQ(C],59m,59mO#?zQ&kO,5<`O#@mQ&kO,5<bO#@wQ`O,5<dOOQ(C],5<e,5<eO#@|Q`O,5<kO#ARQ&kO,5<pOHRQdO1G1wO#AcQ`O1G1wOOQS1G4R1G4ROOQ(C[1G/r1G/rO! qQ`O1G/rOOQS1G2m1G2mOJRQ&jO1G2mO$}QdO1G2mOJRQ&jO1G2mO#AhQaO1G2mO#CQQ&jO'#E`OOQ(CW,5?e,5?eO#C[Q(ChO,5?eOOQS1G.s1G.sO;dQ`O1G.sO!0`Q!bO1G.sO!0hQ&jO1G.sO#CmQ`O1G0jO#CrQ`O'#ChO#C}Q`O'#JpO#DVQ`O,5=oO#D[Q`O'#JpO#DaQ`O'#JpO#DiQ`O'#IkO#DwQ`O,5@ZO#EPQtO1G1_OOQ(C[1G1a1G1aO6tQ`O1G3YO#EWQ`O1G3YO#E]Q`O1G3YO#EbQ`O1G3YOOQS1G3Y1G3YO8YQ`O'#J_O8YQ`O'#EiO$}QdO'#EiO8YQ`O'#IeO#EgQ(ChO,5@WOOQS1G2q1G2qO!3nQ`O1G2wOJRQ&jO1G2tO#ErQ`O1G2tOOQS1G2u1G2uOJRQ&jO1G2uO#EwQaO1G2uO#FPQ,UO'#GsOOQS1G2w1G2wO!)dQ,UO'#IgO!3sQpO1G2zOOQS1G2z1G2zOOQS,5=e,5=eO#FXQ&kO,5=gO6tQ`O,5=gO#=PQ`O,5=jO6bQ`O,5=jO!0`Q!bO,5=jO!0hQ&jO,5=jO6yQ&jO,5=jO#FjQ`O'#JnO#FuQ`O,5=kOOQS1G.j1G.jO#FzQ(ChO1G.jO#GVQ`O1G.jO#G[Q`O1G.jO6lQ(ChO1G.jO#GdQtO,5@]O#GnQ`O,5@]O#GyQdO,5=rO#HQQ`O,5=rO8YQ`O,5@]OOQS1G3[1G3[O`QdO1G3[OOQS1G3b1G3bOOQS1G3d1G3dO;_Q`O1G3fO#HVQdO1G3hO#LTQdO'#HgOOQS1G3k1G3kO#LbQ`O'#HmO;dQ`O'#HoOOQS1G3q1G3qO#LjQdO1G3qO6lQ(ChO1G3wOOQS1G3y1G3yOOQ(CW'#GS'#GSO6lQ(ChO1G3{O6lQ(ChO1G3}O$!kQ`O,5?pOMqQdO,5;TO8YQ`O,5;TO;dQ`O,5:POMqQdO,5:PO$}QdO'#JUO!0`Q!bO,5:PO$!pQ!LUO,5:POOQO,5;T,5;TO$!zQ,UO'#ISO$#bQ`O,5?oOOQ(C[1G/j1G/jO$#jQ,UO'#IYO$#tQ`O,5?{OOQ(CW1G0n1G0nO!=tQ,UO,5:PO$#|Q,UO'#E[OOQ(CW'#EZ'#EZO$$sQ(DjO'#E[O$%_Q,UO'#EPOOQO'#IV'#IVO$%pQ,UO,5:jOOQ(C[,5:j,5:jO$&mQ,UO'#EPO$&zQ,UO'#EPO$'[Q,UO'#EbO$'_Q,UO'#E[O$'xQ,UO'#E[O$%_Q,UO'#E[O$(iQ`O1G0RO$(nQqO1G0ROOQ(C[1G0R1G0RO$}QdO1G0ROJRQ&jO1G0ROOQ(C[1G0i1G0iO;dQ`O1G0iO!0`Q!bO1G0iO!0hQ&jO1G0iOOOW1G/a1G/aO$(uQpO,5<_O$(}QtO1G4XOOQO1G4_1G4_O$}QdO,5>mO$)XQ`O1G5YO$)aQ`O1G5eO$)iQtO1G5fO8YQ`O,5>sO$)sQ`O1G5bO$)sQ`O1G5bO8YQ`O1G5bO$){Q(C|O1G5cO$}QdO1G5cO$*]Q(ChO1G5cO$*nQ`O,5>uO8YQ`O,5>uOOQO,5>u,5>uO$+SQ`O,5>uOOQO-E<X-E<XOOQO1G0Y1G0YOOQO1G0[1G0[O! tQ`O1G0[OOQS7+(X7+(XOJRQ&jO7+(XO$}QdO7+(XOJRQ&jO7+(XO$+bQaO7+(XO$+pQ&kO7+(XO$,RQ(C}O,59mO$.ZQ(C}O,5<`O$0fQ(C}O,5<bO$2qQ(C}O,5<pOOQ(C[7+&U7+&UO$5SQ(C|O7+&UO$5vQ&jO'#ITO$6QQ`O,5?qOOQ(C]1G/t1G/tO$6YQdO'#IUO$6gQ`O,5?rO$6oQtO,5?rOOQ(C[1G/y1G/yO$6yQ`O7+&_OOQ(C[7+&_7+&_O$7OQ!LUO,5:`O$}QdO7+&qO$7YQ!LUO,5:WOOQ(C[7+&w7+&wOOQO1G1i1G1iOOQO1G1j1G1jO$7gQ$ISO,5<QOMqQdO,5<POOQO-E<Y-E<YOOQ(C[7+'P7+'POOOO7+'[7+'[OOOO1G1s1G1sO$7rQ`O1G1sOOQ(C[1G1u1G1uO$7wQqO,59hOOOW-E;}-E;}OOQ(C]1G/Q1G/QO$8OQ(C|O7+'bOOQ(C],5>z,5>zO$8rQ`O,5>zOOQ(C]1G2Z1G2ZP$8wQ`O'#I`POQ(C]-E<^-E<^O$9hQ&kO1G2gO$:ZQ&kO1G2iO$:eQqO1G2kOOQ(C]1G2S1G2SO$:lQ`O'#I_O$:zQ`O,5@SO$:zQ`O,5@SO$;SQ`O,5@SO$;_Q`O,5@SOOQO1G2U1G2UO$;mQ&kO1G2TOKhQ&jO1G2TO$;}QMhO'#IaO$<_Q`O,5@TOJRQ&jO,5@TO$<gQqO,5@TOOQ(C]1G2X1G2XOOQ(CW,5<r,5<rOOQ(CW,5<s,5<sO$<qQ`O,5<sO#<uQ`O,5<sO!0`Q!bO,5<rOOQO'#GZ'#GZO$<vQ`O,5<tOOQ(CW,5<v,5<vO$<qQ`O,5<yOOQO,5>|,5>|OOQO-E<`-E<`OOQ(C]1G2]1G2]O!)dQ,UO,5<rO$=OQ`O,5<sO#<zQ`O,5<tO!)dQ,UO,5<sO$=ZQ&kO1G5SO$=eQ&kO1G5SOOQO,5>},5>}OOQO-E<a-E<aOOQP1G.x1G.xO!1cQ,UO,59oO$}QdO,59oO$=rQ`O1G2OOKhQ&jO1G2VO$=wQ(C|O7+'cOOQ(C[7+'c7+'cOHRQdO7+'cOOQ(C[7+%^7+%^O$>kQqO'#JjO$(iQ`O7+(XO$>uQ`O7+(XO$>}QqO7+(XO$?XQ(CyO'#ChO$?lQ(CyO,5<wO$@^Q`O,5<wOOQ(CW1G5P1G5POOQS7+$_7+$_O;dQ`O7+$_O!0`Q!bO7+$_OHRQdO7+&UO$@cQ`O'#IjO$@tQ`O,5@[OOQO1G3Z1G3ZO6tQ`O,5@[O$@tQ`O,5@[O$@|Q`O,5@[OOQO,5?V,5?VOOQO-E<i-E<iOOQ(C[7+&y7+&yO$ARQ`O7+(tO6lQ(ChO7+(tO6tQ`O7+(tO$AWQ`O7+(tO$A]Q`O,5;TOOQ(CW,5?P,5?POOQ(CW-E<c-E<cOOQS7+(c7+(cO$AbQ(CyO7+(`OJRQ&jO7+(`O$AlQqO7+(aOOQS7+(a7+(aOJRQ&jO7+(aO$AsQ`O'#JmO$BOQ`O,5=_OOQO,5?R,5?ROOQO-E<e-E<eOOQS7+(f7+(fO$CUQ,UO'#G|OOQS1G3R1G3ROJRQ&jO1G3RO$}QdO1G3ROJRQ&jO1G3RO$C]QaO1G3RO$CkQ&kO1G3RO6lQ(ChO1G3UO#=PQ`O1G3UO6bQ`O1G3UO!0`Q!bO1G3UO!0hQ&jO1G3UO$C|Q`O'#IiO$DXQ`O,5@YO$DaQ,UO,5@YOOQ(CW1G3V1G3VOOQS7+$U7+$UO$DiQ`O7+$UO6lQ(ChO7+$UO$DnQ`O7+$UO$}QdO1G5wO$}QdO1G5xO$DsQdO1G3^O$DzQ`O1G3^O$EPQdO1G3^O$EWQ(ChO1G5wOOQS7+(v7+(vO6lQ(ChO7+)QO`QdO7+)SOOQS'#Js'#JsOOQS'#Il'#IlO$EbQdO,5>ROOQS,5>R,5>RO$}QdO'#HhO$EoQ`O'#HjOOQS,5>X,5>XO8YQ`O,5>XOOQS,5>Z,5>ZOOQS7+)]7+)]OOQS7+)c7+)cOOQS7+)g7+)gOOQS7+)i7+)iO$EtQ!bO1G5[O$FYQ!LUO1G0oO$FdQ`O1G0oOOQO1G/k1G/kO$FoQ!LUO1G/kO$FyQ`O,5?pO;dQ`O1G/kOMqQdO'#DeOOQO,5>n,5>nOOQO-E<Q-E<QOOQO,5>t,5>tOOQO-E<W-E<WO!0`Q!bO1G/kO$GOQ7[O,5:lO$HOQ(DjO,5:vO$%_Q,UO,5:kO$HjQ,UO,5:kO$HwQ,UO,5:kO$IXQ,UO,5:vO$IrQ,UO,5:vO$%_Q,UO,5:vO;dQ`O,5:kOOQO,5:v,5:vO$}QdO,5:vO$JcQ(ChO,5:vO$JnQ(ChO,5:vO!0`Q!bO,5:kOOQO-E<T-E<TOOQ(C[1G0U1G0UOOQO,5:|,5:|O$J|Q(ChO,5:vOOQ(C[7+%m7+%mO$(iQ`O7+%mO$(nQqO7+%mOOQ(C[7+&T7+&TO;dQ`O7+&TO!0`Q!bO7+&TO$KbQ`O7+*|O$KbQ`O7+*|O$KjQ(C|O7+*}O$}QdO7+*}OOQO1G4a1G4aO8YQ`O1G4aO$KzQ`O1G4aOOQO7+%v7+%vO$(iQ`O<<KsO$LYQ`O<<KsO$LbQqO<<KsOOQS<<Ks<<KsOJRQ&jO<<KsO$}QdO<<KsOJRQ&jO<<KsO$LlQaO<<KsO$LzQ(C}O1G2gO% VQ(C}O1G2iO%#bQ(C}O1G2TO%%sQ&kO,5>oOOQO-E<R-E<RO%%}QtO,5>pO$}QdO,5>pOOQO-E<S-E<SO%&XQ`O1G5^OOQ(C[<<Iy<<IyO%&aQ!LUO1G0jO%(kQ!LUO1G0tO%(rQ!LUO1G0tO%*vQ!LUO1G0tO%*}Q!LUO1G0tO%,rQ!LUO1G0tO%-YQ!LUO1G0tO%/mQ!LUO1G0tO%/tQ!LUO1G0tO%1xQ!LUO1G0tO%2PQ!LUO1G0tO%3wQ!LUO1G0tO%4[Q(C|O<<J]O%5aQ!LVO1G0tO%7VQ!LVO'#I}O%7aQ!LUO1G1YOMqQdO'#FhOOQO'#Jf'#JfOOQO1G1l1G1lO%7nQ`O1G1kO%7sQ!LUO,5>xOOOO7+'_7+'_OOOW1G/S1G/SOOQ(C]1G4f1G4fOKhQ&jO7+(VO%7}Q`O,5>yO6tQ`O,5>yOOQO-E<]-E<]O%8]Q`O1G5nO%8]Q`O1G5nO%8eQ`O1G5nO%8pQ&kO7+'oO%9QQqO,5>{O%9[Q`O,5>{OJRQ&jO,5>{OOQO-E<_-E<_O%9aQqO1G5oO%9kQ`O1G5oOOQ(CW1G2_1G2_O$<qQ`O1G2_OOQ(CW1G2^1G2^O%9sQ`O1G2`OJRQ&jO1G2`OOQ(CW1G2e1G2eO!0`Q!bO1G2^O#<uQ`O1G2_O%9xQ`O1G2`O%:QQ`O1G2_OKhQ&jO7+*nOOQ(C]1G/Z1G/ZO%:]Q`O1G/ZOOQ(C]7+'j7+'jO%:bQ&kO7+'qO%:rQ(C|O<<J}OOQ(C[<<J}<<J}OJRQ&jO'#IdO%;fQ`O,5@UOJRQ&jO1G2cOOQS<<Gy<<GyO;dQ`O<<GyO%;nQ(C|O<<IpOOQ(C[<<Ip<<IpOOQO,5?U,5?UO%<bQ`O,5?UO%<gQ`O,5?UOOQO-E<h-E<hO%<oQ`O1G5vO%<oQ`O1G5vO6tQ`O1G5vO%<wQ`O<<L`OOQS<<L`<<L`O%<|Q`O<<L`O6lQ(ChO<<L`O%=RQ`O1G0oOOQS<<Kz<<KzO$AbQ(CyO<<KzOOQS<<K{<<K{O$AlQqO<<K{O%=WQ,UO'#IfO%=cQ`O,5@XOMqQdO,5@XOOQS1G2y1G2yO%=kQ(DjO'#JUO%>VQdO'#JUO%>^Q,UO'#E[O%>tQ(ChO'#E[O$$sQ(DjO'#E[O$%hQ,UO'#G}OOQO'#Ih'#IhO%?YQ,UO,5=hOOQS,5=h,5=hO%?aQ,UO'#E[O%?rQ,UO'#E[O%@YQ,UO'#E[O%@vQ,UO'#G}O%AXQ`O7+(mO%A^Q`O7+(mO%AfQqO7+(mOOQS7+(m7+(mOJRQ&jO7+(mO$}QdO7+(mOJRQ&jO7+(mO%ApQaO7+(mOOQS7+(p7+(pO6lQ(ChO7+(pO#=PQ`O7+(pO6bQ`O7+(pO!0`Q!bO7+(pO%BOQ`O,5?TOOQO-E<g-E<gOOQO'#HQ'#HQO%BZQ`O1G5tO6lQ(ChO<<GpOOQS<<Gp<<GpO%BcQ`O<<GpO%BhQ`O7++cO%BmQ`O7++dOOQS7+(x7+(xO%BrQ`O7+(xO%BwQdO7+(xO%COQ`O7+(xO$}QdO7++cO$}QdO7++dOOQS<<Ll<<LlOOQS<<Ln<<LnOOQS-E<j-E<jOOQS1G3m1G3mO%CTQ`O,5>SOOQS,5>U,5>UO%CYQ`O1G3sO8YQ`O7+&ZOMqQdO7+&ZOOQ(CW1G5[1G5[OOQO7+%V7+%VO%C_Q!LUO1G5fO;dQ`O7+%VO;dQ`O1G0VOOQO1G0b1G0bO$}QdO1G0bO%CiQ(ChO1G0bO%CtQ(ChO1G0bO!0`Q!bO1G0VO$%_Q,UO1G0VO%DSQ,UO1G0VO%DaQ(DjO1G0bO%D{Q,UO1G0VO$%_Q,UO1G0bO%E]Q,UO1G0bO%EvQ(ChO1G0bOOQO1G0V1G0VO%F[Q(C|O1G0bOOQ(C[<<IX<<IXOOQ(C[<<Io<<IoO;dQ`O<<IoO%FfQ`O<<NhO%FnQ(C|O<<NiOOQO7+){7+){O8YQ`O7+){OOQSANA_ANA_OJRQ&jOANA_O$(iQ`OANA_O%GOQ`OANA_O%GWQqOANA_O$}QdOANA_OJRQ&jOANA_O%GbQ(C}O7+'oO%IsQ(C}O7+'qO%LUQtO1G4[O%L`Q!LUO7+&UO%MUQ!LVO,59mO& YQ!LVO,5<`O&#aQ!LVO,5<bO&%SQ!LVO,5<pO&&xQ!LUO7+'bO&'VQ!LUO7+'cO&'dQ`O,5<SOOQO7+'V7+'VO&'iQ&kO<<KqOOQO1G4e1G4eO&'pQ`O1G4eO&'{Q`O1G4eO&(ZQ`O7++YO&(ZQ`O7++YOJRQ&jO1G4gO&(cQqO1G4gO&(mQ`O7++ZOOQ(CW7+'y7+'yO$<qQ`O7+'zO&(uQqO7+'zOOQ(CW7+'x7+'xO$<qQ`O7+'yO&(|Q`O7+'zOJRQ&jO7+'zO#<uQ`O7+'yO&)RQ&kO<<NYOOQ(C]7+$u7+$uO&)]QqO,5?OOOQO-E<b-E<bO&)gQ(CyO7+'}OOQSAN=eAN=eO6tQ`O1G4pOOQO1G4p1G4pO&)wQ`O1G4pO&)|Q`O7++bO&)|Q`O7++bO6lQ(ChOANAzO&*UQ`OANAzOOQSANAzANAzOOQSANAfANAfOOQSANAgANAgO&*ZQ`O,5?QOOQO-E<d-E<dO&*fQ!LUO1G5sO#=PQ`O,5=iO6bQ`O,5=iO&,vQtO'#ChO&-QQ,UO,5:vO&-[Q,UO,5:vO!0`Q!bO,5=iOOQO-E<f-E<fOOQS1G3S1G3SO%>VQdO,5<tO%=kQ(DjO,5=iO$HOQ(DjO,5:vO$%hQ,UO,5=iO&-lQ,UO,5=iO&-}Q,UO,5:vOOQS<<LX<<LXOJRQ&jO<<LXO%AXQ`O<<LXO&.eQ`O<<LXO&.mQqO<<LXO$}QdO<<LXOJRQ&jO<<LXOOQS<<L[<<L[O6lQ(ChO<<L[O#=PQ`O<<L[O6bQ`O<<L[O&.wQ,UO1G4oO&/PQ`O7++`OOQSAN=[AN=[O6lQ(ChOAN=[OOQS<<N}<<N}OOQS<= O<= OOOQS<<Ld<<LdO&/XQ`O<<LdO&/^QdO<<LdO&/eQ`O<<N}O&/jQ`O<= OOOQS1G3n1G3nO;dQ`O7+)_O&/oQ`O<<IuO&/zQ!LUO<<IuOOQO<<Hq<<HqOOQO7+%q7+%qO%F[Q(C|O7+%|OOQO7+%|7+%|O$}QdO7+%|O&0UQ(ChO7+%|O;dQ`O7+%qO!0`Q!bO7+%qO$%_Q,UO7+%qO&0aQ(ChO7+%|O&0oQ,UO7+%qO&0|Q(ChO7+%|O&1bQ(DjO7+%|O&1lQ,UO7+%qO$%_Q,UO7+%|OOQ(C[AN?ZAN?ZOOQO<<Mg<<MgO$(iQ`OG26yOOQSG26yG26yOJRQ&jOG26yO&1|Q`OG26yO&2UQqOG26yO&2`Q!LUO<<J]O&2mQ!LVO1G2TO&4wQ!LVO1G2gO&7OQ!LVO1G2iO&8qQ!LUO<<J}O&9OQ!LUO<<IpOOQO1G1n1G1nOKhQ&jOANA]OOQO7+*P7+*PO&9]Q`O7+*PO&9hQ`O<<NtO&9pQqO7+*ROOQ(CW<<Kf<<KfO$<qQ`O<<KfOOQ(CW<<Ke<<KeO&9zQqO<<KfO$<qQ`O<<KeOOQO7+*[7+*[O6tQ`O7+*[O&:RQ`O<<N|OOQSG27fG27fO6lQ(ChOG27fOMqQdO1G4lO&:ZQ`O7++_O6lQ(ChO1G3TO#=PQ`O1G3TO&:cQ,UO1G0bO6bQ`O1G3TO!0`Q!bO1G3TO$%hQ,UO1G3TO%=kQ(DjO1G3TO%DaQ(DjO1G0bO&:mQ,UO1G3TO%AXQ`OANAsOOQSANAsANAsOJRQ&jOANAsO&;OQ`OANAsO&;WQqOANAsOOQSANAvANAvO6lQ(ChOANAvO#=PQ`OANAvOOQO'#HR'#HROOQO7+*Z7+*ZOOQSG22vG22vOOQSANBOANBOO&;bQ`OANBOOOQSANDiANDiOOQSANDjANDjOOQS<<Ly<<LyOMqQdOAN?aOOQO<<Ih<<IhO%F[Q(C|O<<IhO$}QdO<<IhOOQO<<I]<<I]O;dQ`O<<I]O!0`Q!bO<<I]O&;gQ(ChO<<IhO$%_Q,UO<<I]O&;rQ(ChO<<IhO&<QQ,UO<<I]O&<_Q(ChO<<IhOOQSLD,eLD,eO$(iQ`OLD,eOJRQ&jOLD,eO&<sQ!LVO7+'oO&>iQ!LVO7+'qO&@_Q&kOG26wOOQO<<Mk<<MkOOQ(CWANAQANAQO$<qQ`OANAQOOQ(CWANAPANAPOOQO<<Mv<<MvOOQSLD-QLD-QO&@oQ!LUO7+*WOOQO7+(o7+(oO6lQ(ChO7+(oO#=PQ`O7+(oO6bQ`O7+(oO!0`Q!bO7+(oO$%hQ,UO7+(oOOQSG27_G27_O%AXQ`OG27_OJRQ&jOG27_OOQSG27bG27bO6lQ(ChOG27bOOQSG27jG27jO&@yQ!LUOG24{OOQOAN?SAN?SO%F[Q(C|OAN?SOOQOAN>wAN>wO;dQ`OAN>wO$}QdOAN?SO!0`Q!bOAN>wO&ATQ(ChOAN?SO$%_Q,UOAN>wO&A`Q(ChOAN?SOOQS!$(!P!$(!PO$(iQ`O!$(!PO&AnQ(C}OG26wOOQ(CWG26lG26lOOQO<<LZ<<LZO6lQ(ChO<<LZO#=PQ`O<<LZO6bQ`O<<LZO!0`Q!bO<<LZOOQSLD,yLD,yO%AXQ`OLD,yOOQSLD,|LD,|OOQOG24nG24nOOQOG24cG24cO%F[Q(C|OG24nO;dQ`OG24cO$}QdOG24nO!0`Q!bOG24cO&DPQ(ChOG24nOOQS!)9Ek!)9EkO&DmQ7]O,5:zOOQOANAuANAuO6lQ(ChOANAuO#=PQ`OANAuO6bQ`OANAuOOQS!$(!e!$(!eOOQOLD*YLD*YOOQOLD)}LD)}O%F[Q(C|OLD*YO;dQ`OLD)}O$}QdOLD*YO&EpQ!LVOG26wO&GfQ7]O,59mO&HfQ7]O,5<`O&IfQ7]O,5<bO&JfQ7]O,5<pOOQOG27aG27aO6lQ(ChOG27aO#=PQ`OG27aOOQO!$'Mt!$'MtOOQO!$'Mi!$'MiO%F[Q(C|O!$'MtO&KiQ7]O1G2gO&LiQ7]O1G2iO&MiQ7]O1G2TOOQOLD,{LD,{O6lQ(ChOLD,{OOQO!)9C`!)9C`O&NlQ7]O7+'oO' oQ7]O7+'qOOQO!$(!g!$(!gO'!rQ7]OG26wOMqQdO'#DtO.fQ`O'#EQO'#uQtO'#JQOMqQdO'#DlO'#|QtO'#ChO'&dQtO'#ChO'&tQdO,5;OO'(tQ&jO'#E`OMqQdO,5;YOMqQdO,5;YOMqQdO,5;YOMqQdO,5;YOMqQdO,5;YOMqQdO,5;YOMqQdO,5;YOMqQdO,5;YOMqQdO,5;YOMqQdO,5;YOMqQdO,5;YOMqQdO'#I^O'*UQ`O,5<_O'*^Q&jO,5;YO'+nQ&jO,5;YOMqQdO,5;nO.iQ`O'#DRO.iQ`O'#DRO.iQ`O'#DROJRQ&jO'#FtO'(tQ&jO'#FtO'*^Q&jO'#FtOJRQ&jO'#FvO'(tQ&jO'#FvO'*^Q&jO'#FvOJRQ&jO'#GUO'(tQ&jO'#GUO'*^Q&jO'#GUOMqQdO,5?zO'&tQdO1G0jO'+uQ!LUO'#ChOMqQdO1G1vOJRQ&jO,5<{O'(tQ&jO,5<{O'*^Q&jO,5<{OJRQ&jO,5<}O'(tQ&jO,5<}O'*^Q&jO,5<}OJRQ&jO,5<iO'(tQ&jO,5<iO'*^Q&jO,5<iO'&tQdO1G1wOMqQdO7+&qOJRQ&jO1G2TO'(tQ&jO1G2TO'*^Q&jO1G2TOJRQ&jO1G2VO'(tQ&jO1G2VO'*^Q&jO1G2VO'&tQdO7+'cO'&tQdO7+&UO',PQ`O7+'zOJRQ&jOANA]O'(tQ&jOANA]O'*^Q&jOANA]O',PQ`O<<KfO',PQ`OANAQO',UQ`O'#EdO',ZQ`O'#EdO',cQ`O'#FSO',hQ`O'#EnO',mQ`O'#J`O',xQ`O'#J^O'-TQ`O,5;OO'-YQ&kO,5<[O'-aQ`O'#F}O'-fQ`O'#F}O'-kQ`O'#F}O'-pQ`O,5<]O'-xQ`O,5;OO'.QQ!LUO1G1VO'.XQ`O,5<iO'.^Q`O,5<iO'.cQ`O,5<iO'.hQ`O,5<kO'.mQ`O,5<kO'.rQ`O,5<kO'.wQ`O1G1wO'.|Q`O1G0jO'/RQ`O1G2`O'/WQ&kO<<KqO'/_Q&kO<<KqO'/fQ&kO<<KqO'/mQqO7+'zO'/tQ`O7+'zO'/yQqO<<KfO4}Q&jO'#FrO6bQ`O'#FqO={Q`O'#EcOMqQdO,5;kO!(eQ`O'#F}O!(eQ`O'#F}O!(eQ`O'#F}O!(eQ`O'#GPO!(eQ`O'#GPO!(eQ`O'#GPO'0QQ`O,5<tOKhQ&jO7+(VOKhQ&jO7+(VOKhQ&jO7+(VOJRQ&jO1G2`O'0YQ`O1G2`OJRQ&jO7+'zO$:eQqO1G2kO$:eQqO1G2kO$:eQqO1G2kOJRQ&jO,5=POJRQ&jO,5=POJRQ&jO,5=P",stateData:"'1c~O'gOS'hOSTOSUOS~OQUORUOX}O]gO_lObrOcqOigOkUOlgOmgOrgOtUOvUO{SO!OgO!PgO!VTO!aoO!fVO!iUO!jUO!kUO!lUO!mUO!ppO!uXO#lwO#|tO$QbO%[uO%^xO%`vO%avO%dyO%fzO%i{O%j{O%l|O%y!OO&P!PO&R!QO&T!RO&V!SO&Y!TO&`!UO&f!VO&h!WO&j!XO&l!YO&n!ZO'jQO'rRO'|WO(ZeO~OQUORUO]gOb!aOc!`OigOkUOlgOmgOrgOtUOvUO{SO!OgO!PgO!V!]O!aoO!fVO!iUO!jUO!kUO!lUO!mUO!p!_O#|!bO$QbO'j![O'rRO'|WO(ZeO~OQ[XZ[X_[Xk[Xx[Xy[X{[X!T[X!c[X!d[X!f[X!l[X#T[X#`dX#c[X#d[X#e[X#f[X#g[X#h[X#i[X#j[X#k[X#m[X#o[X#q[X#r[X#w[X'e[X'r[X'}[X(U[X(V[X~O!_$vX~P&}OS!cO'c!dO'd!fO~OQUORUO]gOb!aOc!`OigOkUOlgOmgOrgOtUOvUO{SO!OgO!PgO!V!]O!aoO!fVO!iUO!jUO!kUO!lUO!mUO!p!_O#|!bO$QbO'j;ZO'rRO'|WO(ZeO~O!S!jO!T!gO!Q'vP!Q(RP~P)jO!U!rO~P`OQUORUO]gOb!aOc!`OigOkUOlgOmgOrgOtUOvUO{SO!OgO!PgO!V!]O!aoO!fVO!iUO!jUO!kUO!lUO!mUO!p!_O#|!bO$QbO'rRO'|WO(ZeO~O!S!xO!uXO#^!{O#_!xO'j;[O!e(OP~P,RO!f!}O'j!|O~O!p#RO!uXO%[#SO~O#`#TO~O!_#UO#`#TO~OQ#lOZ#sOk#aOx#YOy#ZO{#[O!T#pO!c#cO!d#WO!f#XO!l#lO#c#_O#d#`O#e#`O#f#`O#g#bO#h#cO#i#cO#j#rO#k#cO#m#dO#o#fO#q#hO#r#iO'rRO'}#jO(U#]O(V#^O~O_'tX'e'tX'a'tX!e'tX!Q'tX!V'tX%]'tX!_'tX~P/WO#T#tO#w#tOQ'uXZ'uX_'uXk'uXx'uXy'uX{'uX!T'uX!c'uX!d'uX!f'uX!l'uX#c'uX#d'uX#e'uX#f'uX#g'uX#h'uX#i'uX#j'uX#m'uX#o'uX#q'uX#r'uX'r'uX'}'uX(U'uX(V'uX~O#k'uX'e'uX'a'uX!Q'uX!e'uXo'uX!V'uX%]'uX!_'uX~P1nO#T#tO~O$S#vO$U#uO$]#{O~O!V#|O$QbO$`#}O$b$PO~O]$SOi$cOk$TOl$SOm$SOr$dOt$eOv$fO{$[O!V$]O!a$kO!f$XO#_$lO#|$iO$i$gO$k$hO$n$jO'j$RO'n$bO'r$UOe'oP~O!f$mO~O!_$oO~O_$pO'e$pO~O'j$tO~O!f$mO'j$tO'k$vO'n$bO~Oc$|O!f$mO'j$tO~O#k#cO~O]%VOx%RO!V%OO!f%QO%^%UO'j$tO'k$vO^(cP~O!p#RO~O{%WO!V%XO'j$tO~O{%WO!V%XO%f%]O'j$tO~O'j%^O~O#lwO%^xO%`vO%avO%dyO%fzO%i{O%j{O~Ob%gOc%fO!p%dO%[%eO%n%cO~P8xOb%jOcqO!V%iO!ppO!uXO#lwO%[uO%`vO%avO%dyO%fzO%i{O%j{O%l|O~O`%mO#T%pO%^%kO'k$vO~P9wO!f%qO!i%uO~O!f!}O~O!VTO~O_$pO'b%}O'e$pO~O_$pO'b&QO'e$pO~O_$pO'b&SO'e$pO~O'a[Xo[X!Q[X!e[X%}[X!V[X%][X!_[X~P&}O]&XOl&XO{&WO!S&[O!Y&bO!Z&ZO![&ZO'k$vO's&UO!U'wP!U(TP~OP&fO!V&cO!q&eO'j$tO~Oc&kO!f$mO'j$tO~Ox%RO!f%QO~OS!cO'c!dO'd&nO~O!S&pO!Q&uX!Q&{X!T&uX!T&{X~P)jO!T&rO!Q'vX~OQ#lOZ#sOk#aOx#YOy#ZO{#[O!T&rO!c#cO!d#WO!f#XO!l#lO#c#_O#d#`O#e#`O#f#`O#g#bO#h#cO#i#cO#j#rO#k#cO#m#dO#o#fO#q#hO#r#iO'rRO'}#jO(U#]O(V#^O~O!Q'vX~P?WO!Q&wO~O!Q(QX!T(QX!_(QX!e(QX'}(QX~O#T(QX#`#XX!U(QX~PA^O#T&xO!Q(SX!T(SX~O!T&yO!Q(RX~O!Q&|O~O#T#tO~PA^O!U&}O~P`Ox#YOy#ZO{#[O!d#WO!f#XO'rROQ!haZ!hak!ha!T!ha!c!ha!l!ha#c!ha#d!ha#e!ha#f!ha#g!ha#h!ha#i!ha#j!ha#k!ha#m!ha#o!ha#q!ha#r!ha'}!ha(U!ha(V!ha~O_!ha'e!ha'a!ha!Q!ha!e!hao!ha!V!ha%]!ha!_!ha~PBtO!e'OO~O{%WO!V%XO!uXO#^'RO#_'QO'j$tO~O!_#UO#T'TO'}'SO!T(PX_(PX'e(PX~O!e(PX~PExO!T'WO!e(OX~O!e'YO~O{%WO!V%XO#_'QO'j$tO~Ox'ZOy'[O!d#WO!f#XO!u!ta{!ta~O!p!ta%[!ta!V!ta#^!ta#_!ta'j!ta~PGQO!p'`O~OQUORUO]gOb!aOc!`OigOkUOlgOmgOrgOtUOvUO{SO!OgO!PgO!VTO!aoO!fVO!iUO!jUO!kUO!lUO!mUO!p!_O#|!bO$QbO'j![O'rRO'|WO(ZeO~O]$SOi$cOk$TOl$SOm$SOr$dOt$eOv;oO{$[O!V$]O!a=`O!f$XO#_;xO#|$iO$i;rO$k;uO$n$jO'j'dO'n$bO'r$UO~O#`'fO~O]$SOi$cOk$TOl$SOm$SOr$dOt$eOv$fO{$[O!V$]O!a$kO!f$XO#_$lO#|$iO$i$gO$k$hO$n$jO'j'dO'n$bO'r$UO~Oe'yP~PKhO!S'jO!e'zP~P$}O's'lO'|WO~O{'nO!f#XO's'lO'|WO~OQ;VOR;VO]gOb=ZOc!`OigOk;VOlgOmgOrgOt;VOv;VO{SO!OgO!PgO!V!]O!a;YO!fVO!i;VO!j;VO!k;VO!l;VO!m;VO!p!_O#|!bO$QbO'j'|O'rRO'|WO(Z=XO~Oy(PO!f#XO~O!T#pO_$ga'e$ga'a$ga!e$ga!Q$ga!V$ga%]$ga!_$ga~O#l(TO~PJROx(WO!_(VO!V$TX$P$TX$S$TX$U$TX$]$TX~O!_(VO!V(WX$P(WX$S(WX$U(WX$](WX~Ox(WO~P!#WOx(WO!V(WX$P(WX$S(WX$U(WX$](WX~O!V(YO$P(^O$S(XO$U(XO$](_O~O!S(bO~PMqO$S#vO$U#uO$](eO~OP$oXx$oX{$oX!d$oX(U$oX(V$oX~OPgXegXe$oX!TgX#TgX~P!$|Ol(gO~OS(hO'c(iO'd(kO~OP(tOx(mO{(nO(U(pO(V(rO~Oe(lO~P!&VOe(uO~O]$SOi$cOk$TOl$SOm$SOr$dOt$eOv;oO{$[O!V$]O!a=`O!f$XO#_;xO#|$iO$i;rO$k;uO$n$jO'n$bO'r$UO~O!S(yO'j(vO!e([P~P!&tO#`({O~O!f(|O~O!S)RO'j)OO!Q(]P~P!&tOk)`O{)WO!Y)^O!Z)VO![)VO!f(|O#P)_O%S)YO'k$vO's)TO~O!U)]O~P!(wO!d#WOP'qXx'qX{'qX(U'qX(V'qX!T'qX#u'qX!U'qX~Oe'qX#T'qX]'qXl'qX!Y'qX!Z'qX!['qX!u'qX!y'qX!z'qX!{'qX#P'qX#Q'qX'k'qX's'qX'|'qX~P!)pOP)cO#T)bOe'pX!T'pX~O!T)dOe'oX~O'j%^Oe'oP~O!f)kO~O'j'dO~O{%WO!S!xO!V%XO!uXO#^!{O#_!xO'j$tO!e(OP~O!_#UO#`)oO~OQ#lOZ#sOk#aOx#YOy#ZO{#[O!c#cO!d#WO!f#XO!l#lO#c#_O#d#`O#e#`O#f#`O#g#bO#h#cO#i#cO#j#rO#k#cO#m#dO#o#fO#q#hO#r#iO'rRO'}#jO(U#]O(V#^O~O_!`a!T!`a'e!`a'a!`a!Q!`a!e!`ao!`a!V!`a%]!`a!_!`a~P!-ROP)wO!V&cO!q)vO%])uO'n$bO~O!_)yO!V'mX_'mX!T'mX'e'mX~O!f$mO'n$bO~O!f$mO'j$tO'n$bO~O!_#UO#`'fO~O]*UO%^*VO'j*RO!U(dP~O!T*WO^(cX~O's'lO~OZ*[O~O^*]O~O!V%OO'j$tO'k$vO^(cP~O{%WO!S*aO!T&yO!V%XO'j$tO!Q(RP~O]&_Ol&_O{*cO!S*bO's'lO~O!U(TP~P!2fO!T*dO_(`X'e(`X~O#T*hO'n$bO~OP*kO!V$]O'n$bO~O!V*mO~Ox*oO!VTO~O!p*tO~Oc*yO~O'j!|O!U(bP~Oc$|O~O%^xO'j%^O~P9wOZ+PO^+OO~OQUORUO]gObrOcqOigOkUOlgOmgOrgOtUOvUO{SO!OgO!PgO!aoO!fVO!iUO!jUO!kUO!lUO!mUO!ppO!uXO$QbO%[uO'rRO'|WO(ZeO~O!V!]O#|!bO'j![O~P!4vO^+OO_$pO'e$pO~O_+TO#l+VO%`+VO%a+VO~P$}O!f%qO~O&P+[O~O!V+^O~O&b+`O&d+aOQ&_aR&_aX&_a]&_a_&_ab&_ac&_ai&_ak&_al&_am&_ar&_at&_av&_a{&_a!O&_a!P&_a!V&_a!a&_a!f&_a!i&_a!j&_a!k&_a!l&_a!m&_a!p&_a!u&_a#l&_a#|&_a$Q&_a%[&_a%^&_a%`&_a%a&_a%d&_a%f&_a%i&_a%j&_a%l&_a%y&_a&P&_a&R&_a&T&_a&V&_a&Y&_a&`&_a&f&_a&h&_a&j&_a&l&_a&n&_a'a&_a'j&_a'r&_a'|&_a(Z&_a!U&_a&W&_a`&_a&]&_a~O'j+fO~O!TzX!T!]X!UzX!U!]X!_zX!_!]X!f!]X#TzX'n!]X~O!_+kO#T+jO!T#]X!T'xX!U#]X!U'xX!_'xX!f'xX'n'xX~O!_+mO!f$mO'n$bO!T!XX!U!XX~O]&VOl&VO{+nO's)TO~OQ;VOR;VO]gOb=ZOc!`OigOk;VOlgOmgOrgOt;VOv;VO{SO!OgO!PgO!V!]O!a;YO!fVO!i;VO!j;VO!k;VO!l;VO!m;VO!p!_O#|!bO$QbO'rRO'|WO(Z=XO~O'j;}O~P!>SO!T+rO!U'wX~O!U+tO~O!_+kO#T+jO!T#]X!U#]X~O!T+uO!U(TX~O!U+wO~O]&VOl&VO{+nO'k$vO's)TO~O!Z+xO![+xO~P!AQO_+}O!U,PO!Y,QO!Z+|O![+|O!u;WO!y,UO!z,SO!{,TO!|,RO#P,VO#Q,VO'|+zO~P!AQOP,[O!V&cO!q,ZO~Oo,aO~O!Q&ua!T&ua~P!-RO!S,eO!Q&uX!T&uX~P$}O!T&rO!Q'va~O!Q'va~P?WO!T&yO!Q(Ra~O{%WO!S,iO!V%XO'j$tO!Q&{X!T&{X~O!T'WO!e(Oa~O{%WO!V%XO#_,lO'j$tO~O#T,nO!T(Pa!e(Pa_(Pa'e(Pa~O!_#UO~P!DvO{%WO!S,qO!V%XO!uXO#^,sO#_,qO'j$tO!T&}X!e&}X~Oy,wO!f#XO~OP,{O!V&cO!q,zO%],yO'n$bO~O_#Wi!T#Wi'e#Wi'a#Wi!Q#Wi!e#Wio#Wi!V#Wi%]#Wi!_#Wi~P!-ROP=mOx(mO{(nO(U(pO(V(rO~O#`#Sa!T#Sa!e#Sa#T#Sa!V#Sa_#Sa'e#Sa!Q#Sa~P!G[O!d#WOP'qXx'qX{'qX(U'qX(V'qXQ'qXZ'qXk'qXy'qX!T'qX!c'qX!f'qX!l'qX#c'qX#d'qX#e'qX#f'qX#g'qX#h'qX#i'qX#j'qX#k'qX#m'qX#o'qX#q'qX#r'qX'r'qX'}'qX~O#`'qX_'qX'e'qX!e'qX!Q'qX'a'qX!V'qX#T'qXo'qX%]'qX!_'qX~P!HZO!T-UOe'yX~P!&VOe-WO~O!T-XO!e'zX~P!-RO!e-[O~O!Q-^O~OQ#lOx#YOy#ZO{#[O!d#WO!f#XO!l#lO'rROZ#bi_#bik#bi!T#bi!c#bi#d#bi#e#bi#f#bi#g#bi#h#bi#i#bi#j#bi#k#bi#m#bi#o#bi#q#bi#r#bi'e#bi'}#bi(U#bi(V#bi'a#bi!Q#bi!e#bio#bi!V#bi%]#bi!_#bi~O#c#bi~P!KrO#c#_O~P!KrOQ#lOx#YOy#ZO{#[O!d#WO!f#XO!l#lO#c#_O#d#`O#e#`O#f#`O'rROZ#bi_#bi!T#bi!c#bi#g#bi#h#bi#i#bi#j#bi#k#bi#m#bi#o#bi#q#bi#r#bi'e#bi'}#bi(U#bi(V#bi'a#bi!Q#bi!e#bio#bi!V#bi%]#bi!_#bi~Ok#bi~P!NdOk#aO~P!NdOQ#lOk#aOx#YOy#ZO{#[O!d#WO!f#XO!l#lO#c#_O#d#`O#e#`O#f#`O#g#bO'rRO_#bi!T#bi#m#bi#o#bi#q#bi#r#bi'e#bi'}#bi(U#bi(V#bi'a#bi!Q#bi!e#bio#bi!V#bi%]#bi!_#bi~OZ#bi!c#bi#h#bi#i#bi#j#bi#k#bi~P##UOZ#sO!c#cO#h#cO#i#cO#j#rO#k#cO~P##UOQ#lOZ#sOk#aOx#YOy#ZO{#[O!c#cO!d#WO!f#XO!l#lO#c#_O#d#`O#e#`O#f#`O#g#bO#h#cO#i#cO#j#rO#k#cO#m#dO'rRO_#bi!T#bi#o#bi#q#bi#r#bi'e#bi'}#bi(V#bi'a#bi!Q#bi!e#bio#bi!V#bi%]#bi!_#bi~O(U#bi~P#&VO(U#]O~P#&VOQ#lOZ#sOk#aOx#YOy#ZO{#[O!c#cO!d#WO!f#XO!l#lO#c#_O#d#`O#e#`O#f#`O#g#bO#h#cO#i#cO#j#rO#k#cO#m#dO#o#fO'rRO(U#]O_#bi!T#bi#q#bi#r#bi'e#bi'}#bi'a#bi!Q#bi!e#bio#bi!V#bi%]#bi!_#bi~O(V#bi~P#(wO(V#^O~P#(wOQ#lOZ#sOk#aOx#YOy#ZO{#[O!c#cO!d#WO!f#XO!l#lO#c#_O#d#`O#e#`O#f#`O#g#bO#h#cO#i#cO#j#rO#k#cO#m#dO#o#fO#q#hO'rRO(U#]O(V#^O~O_#bi!T#bi#r#bi'e#bi'}#bi'a#bi!Q#bi!e#bio#bi!V#bi%]#bi!_#bi~P#+iOQ[XZ[Xk[Xx[Xy[X{[X!c[X!d[X!f[X!l[X#T[X#`dX#c[X#d[X#e[X#f[X#g[X#h[X#i[X#j[X#k[X#m[X#o[X#q[X#r[X#w[X'r[X'}[X(U[X(V[X!T[X!U[X~O#u[X~P#.SOQ#lOZ;mOk;aOx#YOy#ZO{#[O!c;cO!d#WO!f#XO!l#lO#c;_O#d;`O#e;`O#f;`O#g;bO#h;cO#i;cO#j;lO#k;cO#m;dO#o;fO#q;hO#r;iO'rRO'}#jO(U#]O(V#^O~O#u-`O~P#0aOQ'uXZ'uXk'uXx'uXy'uX{'uX!c'uX!d'uX!f'uX!l'uX#c'uX#d'uX#e'uX#f'uX#g'uX#h'uX#i'uX#j'uX#m'uX#o'uX#q'uX#r'uX'r'uX'}'uX(U'uX(V'uX!T'uX~O#T;nO#w;nO#k'uX#u'uX!U'uX~P#2_O_'Qa!T'Qa'e'Qa'a'Qa!e'Qao'Qa!Q'Qa!V'Qa%]'Qa!_'Qa~P!-ROQ#biZ#bi_#bik#biy#bi!T#bi!c#bi!d#bi!f#bi!l#bi#c#bi#d#bi#e#bi#f#bi#g#bi#h#bi#i#bi#j#bi#k#bi#m#bi#o#bi#q#bi#r#bi'e#bi'r#bi'}#bi'a#bi!Q#bi!e#bio#bi!V#bi%]#bi!_#bi~P!G[O_#vi!T#vi'e#vi'a#vi!Q#vi!e#vio#vi!V#vi%]#vi!_#vi~P!-RO$S-cO$U-cO~O$S-dO$U-dO~O!_(VO#T-eO!V$YX$P$YX$S$YX$U$YX$]$YX~O!S-fO~O!V(YO$P-hO$S(XO$U(XO$]-iO~O!T;jO!U'tX~P#0aO!U-jO~O$]-lO~OS(hO'c(iO'd-oO~O]-rOl-rO!Q-sO~O!TdX!_dX!edX!e$oX'}dX~P!$|O!e-yO~P!G[O!T-zO!_#UO'}'SO!e([X~O!e.PO~O!S(yO'j$tO!e([P~O#`.RO~O!Q$oX!T$oX!_$vX~P!$|O!T.SO!Q(]X~P!G[O!_.UO~O!Q.WO~Ok.[O!_#UO!f$mO'n$bO'}'SO~O'j.^O~O!_)yO~O_$pO!T.bO'e$pO~O!U.dO~P!(wO!Z.eO![.eO'k$vO's)TO~O{.gO's)TO~O#P.hO~O'j%^Oe'VX!T'VX~O!T)dOe'oa~Oe.mO~Ox.nOy.nO{.oOPua(Uua(Vua!Tua#Tua~Oeua#uua~P#>mOx(mO{(nOP$ha(U$ha(V$ha!T$ha#T$ha~Oe$ha#u$ha~P#?cOx(mO{(nOP$ja(U$ja(V$ja!T$ja#T$ja~Oe$ja#u$ja~P#@UO].pO~O#`.qO~Oe$xa!T$xa#T$xa#u$xa~P!&VO#`.tO~OP,{O!V&cO!q,zO%],yO~O]$SOk$TOl$SOm$SOr$dOt$eOv;oO{$[O!V$]O!a=`O!f$XO#_;xO#|$iO$i;rO$k;uO$n$jO'n$bO'r$UO~Oi.{O'j.zO~P#AvO!_)yO!V'ma_'ma!T'ma'e'ma~O#`/RO~OZ[X!TdX!UdX~O!T/SO!U(dX~O!U/UO~OZ/VO~O]/XO'j*RO~O!V%OO'j$tO^'_X!T'_X~O!T*WO^(ca~O!e/[O~P!-RO]/^O~OZ/_O~O^/`O~O!T*dO_(`a'e(`a~O#T/fO~OP/iO!V$]O~O's'lO!U(aP~OP/sO!V/oO!q/rO%]/qO'n$bO~OZ/}O!T/{O!U(bX~O!U0OO~O^0QO_$pO'e$pO~O]0RO~O]0SO'j!|O~O#k0TO%}0UO~P1nO#T#tO#k0TO%}0UO~O_0VO~P$}O_0XO~O&W0]OQ&UiR&UiX&Ui]&Ui_&Uib&Uic&Uii&Uik&Uil&Uim&Uir&Uit&Uiv&Ui{&Ui!O&Ui!P&Ui!V&Ui!a&Ui!f&Ui!i&Ui!j&Ui!k&Ui!l&Ui!m&Ui!p&Ui!u&Ui#l&Ui#|&Ui$Q&Ui%[&Ui%^&Ui%`&Ui%a&Ui%d&Ui%f&Ui%i&Ui%j&Ui%l&Ui%y&Ui&P&Ui&R&Ui&T&Ui&V&Ui&Y&Ui&`&Ui&f&Ui&h&Ui&j&Ui&l&Ui&n&Ui'a&Ui'j&Ui'r&Ui'|&Ui(Z&Ui!U&Ui`&Ui&]&Ui~O`0cO!U0aO&]0bO~P`O!VTO!f0eO~O&d+aOQ&_iR&_iX&_i]&_i_&_ib&_ic&_ii&_ik&_il&_im&_ir&_it&_iv&_i{&_i!O&_i!P&_i!V&_i!a&_i!f&_i!i&_i!j&_i!k&_i!l&_i!m&_i!p&_i!u&_i#l&_i#|&_i$Q&_i%[&_i%^&_i%`&_i%a&_i%d&_i%f&_i%i&_i%j&_i%l&_i%y&_i&P&_i&R&_i&T&_i&V&_i&Y&_i&`&_i&f&_i&h&_i&j&_i&l&_i&n&_i'a&_i'j&_i'r&_i'|&_i(Z&_i!U&_i&W&_i`&_i&]&_i~O!Q0kO~O!T!Xa!U!Xa~P#0aO!S0rO!Y&bO!Z&ZO![&ZO!T&vX!U&vX~P!AQO!T+rO!U'wa~O!T&|X!U&|X~P!2fO!T+uO!U(Ta~O!Y0{O!Z0zO![0zO!u;WO!y1OO!z0}O!{0}O!|0|O#P1PO#Q1PO'|+zO~P!AQO_$pO!_#UO!f$mO!l1UO#T1SO'e$pO'n$bO'}'SO~O]&VOl&VO{+nO's)TO'|+zO~O_+}O!U1XO!Y,QO!Z+|O![+|O!u;WO!y,UO!z,SO!{,TO!|,RO#P,VO#Q,VO'|+zO~P!AQO!Z0zO![0zO'|+zO~P!AQO!Y0{O!Z0zO![0zO'|+zO~P!AQO!VTO!Y0{O!Z0zO![0zO!|0|O#P1PO#Q1PO'|+zO~P!AQO!Y0{O!Z0zO![0zO!z0}O!{0}O!|0|O#P1PO#Q1PO'|+zO~P!AQO!V&cO~O!V&cO~P!G[O!T#pOo$ga~O!Q&ui!T&ui~P!-RO!T&rO!Q'vi~O!T&yO!Q(Ri~O!Q(Si!T(Si~P!-RO!T'WO!e(Oi~O!T(Pi!e(Pi_(Pi'e(Pi~P!-RO#T1eO!T(Pi!e(Pi_(Pi'e(Pi~O{%WO!V%XO!uXO#^1hO#_1gO'j$tO~O{%WO!V%XO#_1gO'j$tO~OP1pO!V&cO!q1oO%]1nO~OP1pO!V&cO!q1oO%]1nO'n$bO~O#`uaQuaZua_uakua!cua!dua!fua!lua#cua#dua#eua#fua#gua#hua#iua#jua#kua#mua#oua#qua#rua'eua'rua'}ua!eua!Qua'aua!Vuaoua%]ua!_ua~P#>mO#`$haQ$haZ$ha_$hak$hay$ha!c$ha!d$ha!f$ha!l$ha#c$ha#d$ha#e$ha#f$ha#g$ha#h$ha#i$ha#j$ha#k$ha#m$ha#o$ha#q$ha#r$ha'e$ha'r$ha'}$ha!e$ha!Q$ha'a$ha!V$hao$ha%]$ha!_$ha~P#?cO#`$jaQ$jaZ$ja_$jak$jay$ja!c$ja!d$ja!f$ja!l$ja#c$ja#d$ja#e$ja#f$ja#g$ja#h$ja#i$ja#j$ja#k$ja#m$ja#o$ja#q$ja#r$ja'e$ja'r$ja'}$ja!e$ja!Q$ja'a$ja!V$jao$ja%]$ja!_$ja~P#@UO#`$xaQ$xaZ$xa_$xak$xay$xa!T$xa!c$xa!d$xa!f$xa!l$xa#c$xa#d$xa#e$xa#f$xa#g$xa#h$xa#i$xa#j$xa#k$xa#m$xa#o$xa#q$xa#r$xa'e$xa'r$xa'}$xa!e$xa!Q$xa'a$xa!V$xa#T$xao$xa%]$xa!_$xa~P!G[O_#Wq!T#Wq'e#Wq'a#Wq!Q#Wq!e#Wqo#Wq!V#Wq%]#Wq!_#Wq~P!-ROe&wX!T&wX~PKhO!T-UOe'ya~O!S1xO!T&xX!e&xX~P$}O!T-XO!e'za~O!T-XO!e'za~P!-RO!Q1{O~O#u!ha!U!ha~PBtO#u!`a!T!`a!U!`a~P#0aO!V2^O$QbO$Z2_O~O!U2cO~Oo2dO~P!G[O_$dq!T$dq'e$dq'a$dq!Q$dq!e$dqo$dq!V$dq%]$dq!_$dq~P!-RO!Q2eO~O]-rOl-rO~Ox(mO{(nO(V(rOP%Ti(U%Ti!T%Ti#T%Ti~Oe%Ti#u%Ti~P$9POx(mO{(nOP%Vi(U%Vi(V%Vi!T%Vi#T%Vi~Oe%Vi#u%Vi~P$9rO'}#jO~P!G[O!S2hO'j$tO!T'RX!e'RX~O!T-zO!e([a~O!T-zO!_#UO!e([a~O!T-zO!_#UO'}'SO!e([a~Oe$qi!T$qi#T$qi#u$qi~P!&VO!S2pO'j)OO!Q'TX!T'TX~P!&tO!T.SO!Q(]a~O!T.SO!Q(]a~P!G[O!_#UO~O!_#UO#k2xO~Ok2{O!_#UO'}'SO~Oe'pi!T'pi~P!&VO#T3OOe'pi!T'pi~P!&VO!e3RO~O_$eq!T$eq'e$eq'a$eq!Q$eq!e$eqo$eq!V$eq%]$eq!_$eq~P!-RO!T3VO!V(^X~P!G[O!V&cO%]1nO~O!V&cO%]1nO~P!G[O!V$oX%Q[X_$oX!T$oX'e$oX~P!$|O%Q3XOPhXxhX{hX!VhX(UhX(VhX_hX!ThX'ehX~O%Q3XO~O]3_O%^3`O'j*RO!T'^X!U'^X~O!T/SO!U(da~OZ3dO~O^3eO~O]3hO~O!Q3iO~O_$pO'e$pO~P!G[O!V$]O~P!G[O!T3nO#T3pO!U(aX~O!U3qO~O]&VOl&VO{3sO!Y4OO!Z3wO![3wO!u;WO!y3}O!z3|O!{3|O#P3{O#Q,VO'k$vO's)TO'|+zO~O!U3zO~P$BTOP4VO!V/oO!q4UO%]4TO~OP4VO!V/oO!q4UO%]4TO'n$bO~O'j!|O!T']X!U']X~O!T/{O!U(ba~O]4aO's4`O~O]4bO~O^4dO~O!e4gO~P$}O_4iO~O_4iO~P$}O#k4kO%}4lO~PExO`0cO!U4pO&]0bO~P`O!_4rO~O!_4tO!T'xi!U'xi!_'xi!f'xi'n'xi~O!T#]i!U#]i~P#0aO#T4uO!T#]i!U#]i~O!T!Xi!U!Xi~P#0aO!Q4vO~O]!tal!ta!Y!ta!Z!ta![!ta!y!ta!z!ta!{!ta!|!ta#P!ta#Q!ta'k!ta's!ta'|!ta~PGQO_$pO!_#UO!f$mO!l5OO#T4|O'e$pO'n$bO'}'SO~O!Z5QO![5QO'|+zO~P!AQO!Y5RO!Z5QO![5QO'|+zO~P!AQO!Y5RO!Z5QO![5QO!|5TO#P5UO#Q5UO'|+zO~P!AQO!Y5RO!Z5QO![5QO!z5VO!{5VO!|5TO#P5UO#Q5UO'|+zO~P!AQO_$pO#T4|O'e$pO~O_$pO!_#UO#T4|O'e$pO~O_$pO!_#UO!l5OO#T4|O'e$pO'}'SO~O!T'WO!e(Oq~O!T(Pq!e(Pq_(Pq'e(Pq~P!-RO{%WO!V%XO#_5aO'j$tO~O!V&cO%]5cO~O!V&cO%]5cO~P!G[OP5hO!V&cO!q5gO%]5cO~O#`%TiQ%TiZ%Ti_%Tik%Tiy%Ti!c%Ti!d%Ti!f%Ti!l%Ti#c%Ti#d%Ti#e%Ti#f%Ti#g%Ti#h%Ti#i%Ti#j%Ti#k%Ti#m%Ti#o%Ti#q%Ti#r%Ti'e%Ti'r%Ti'}%Ti!e%Ti!Q%Ti'a%Ti!V%Tio%Ti%]%Ti!_%Ti~P$9PO#`%ViQ%ViZ%Vi_%Vik%Viy%Vi!c%Vi!d%Vi!f%Vi!l%Vi#c%Vi#d%Vi#e%Vi#f%Vi#g%Vi#h%Vi#i%Vi#j%Vi#k%Vi#m%Vi#o%Vi#q%Vi#r%Vi'e%Vi'r%Vi'}%Vi!e%Vi!Q%Vi'a%Vi!V%Vio%Vi%]%Vi!_%Vi~P$9rO#`$qiQ$qiZ$qi_$qik$qiy$qi!T$qi!c$qi!d$qi!f$qi!l$qi#c$qi#d$qi#e$qi#f$qi#g$qi#h$qi#i$qi#j$qi#k$qi#m$qi#o$qi#q$qi#r$qi'e$qi'r$qi'}$qi!e$qi!Q$qi'a$qi!V$qi#T$qio$qi%]$qi!_$qi~P!G[Oe&wa!T&wa~P!&VO!T&xa!e&xa~P!-RO!T-XO!e'zi~O#u#Wi!T#Wi!U#Wi~P#0aOQ#lOx#YOy#ZO{#[O!d#WO!f#XO!l#lO'rROZ#bik#bi!c#bi#d#bi#e#bi#f#bi#g#bi#h#bi#i#bi#j#bi#k#bi#m#bi#o#bi#q#bi#r#bi#u#bi'}#bi(U#bi(V#bi!T#bi!U#bi~O#c#bi~P%&nO#c;_O~P%&nOQ#lOx#YOy#ZO{#[O!d#WO!f#XO!l#lO#c;_O#d;`O#e;`O#f;`O'rROZ#bi!c#bi#g#bi#h#bi#i#bi#j#bi#k#bi#m#bi#o#bi#q#bi#r#bi#u#bi'}#bi(U#bi(V#bi!T#bi!U#bi~Ok#bi~P%(yOk;aO~P%(yOQ#lOk;aOx#YOy#ZO{#[O!d#WO!f#XO!l#lO#c;_O#d;`O#e;`O#f;`O#g;bO'rRO#m#bi#o#bi#q#bi#r#bi#u#bi'}#bi(U#bi(V#bi!T#bi!U#bi~OZ#bi!c#bi#h#bi#i#bi#j#bi#k#bi~P%+UOZ;mO!c;cO#h;cO#i;cO#j;lO#k;cO~P%+UOQ#lOZ;mOk;aOx#YOy#ZO{#[O!c;cO!d#WO!f#XO!l#lO#c;_O#d;`O#e;`O#f;`O#g;bO#h;cO#i;cO#j;lO#k;cO#m;dO'rRO#o#bi#q#bi#r#bi#u#bi'}#bi(V#bi!T#bi!U#bi~O(U#bi~P%-pO(U#]O~P%-pOQ#lOZ;mOk;aOx#YOy#ZO{#[O!c;cO!d#WO!f#XO!l#lO#c;_O#d;`O#e;`O#f;`O#g;bO#h;cO#i;cO#j;lO#k;cO#m;dO#o;fO'rRO(U#]O#q#bi#r#bi#u#bi'}#bi!T#bi!U#bi~O(V#bi~P%/{O(V#^O~P%/{OQ#lOZ;mOk;aOx#YOy#ZO{#[O!c;cO!d#WO!f#XO!l#lO#c;_O#d;`O#e;`O#f;`O#g;bO#h;cO#i;cO#j;lO#k;cO#m;dO#o;fO#q;hO'rRO(U#]O(V#^O~O#r#bi#u#bi'}#bi!T#bi!U#bi~P%2WO_#sy!T#sy'e#sy'a#sy!Q#sy!e#syo#sy!V#sy%]#sy!_#sy~P!-ROP=oOx(mO{(nO(U(pO(V(rO~OQ#biZ#bik#biy#bi!c#bi!d#bi!f#bi!l#bi#c#bi#d#bi#e#bi#f#bi#g#bi#h#bi#i#bi#j#bi#k#bi#m#bi#o#bi#q#bi#r#bi#u#bi'r#bi'}#bi!T#bi!U#bi~P%5OO#u'qX!U'qX~P!HZO#u#vi!T#vi!U#vi~P#0aO!U5tO~O!T'Qa!U'Qa~P#0aO!_#UO'}'SO!T'Ra!e'Ra~O!T-zO!e([i~O!T-zO!_#UO!e([i~Oe$qq!T$qq#T$qq#u$qq~P!&VO!Q'Ta!T'Ta~P!G[O!_5{O~O!T.SO!Q(]i~P!G[O!T.SO!Q(]i~O!Q6PO~O!_#UO#k6UO~Ok6VO!_#UO'}'SO~O!Q6XO~Oe$sq!T$sq#T$sq#u$sq~P!&VO_$ey!T$ey'e$ey'a$ey!Q$ey!e$eyo$ey!V$ey%]$ey!_$ey~P!-RO!T3VO!V(^a~O_#Wy!T#Wy'e#Wy'a#Wy!Q#Wy!e#Wyo#Wy!V#Wy%]#Wy!_#Wy~P!-ROZ6^O~O]6`O'j*RO~O!T/SO!U(di~O]6cO~O^6dO~O!_4tO~O's'lO!T'YX!U'YX~O!T3nO!U(aa~O!f$mO'n$bO_'xX!_'xX!l'xX#T'xX'e'xX'}'xX~O'j6mO~P,RO!u;WO!y6oO!z6nO!{6nO#P1PO#Q1PO~P$%_O_$pO!_#UO!l1UO#T1SO'e$pO'}'SO~O!U6rO~P$BTO]&VOl&VO{6sO's)TO'|+zO~O!Y6wO!Z6vO![6vO#P1PO#Q1PO'|+zO~P!AQO!Y6wO!Z6vO![6vO!z6xO!{6xO#P1PO#Q1PO'|+zO~P!AQO!Z6vO![6vO'k$vO's)TO'|+zO~O!V/oO~O!V/oO%]6zO~O!V/oO%]6zO~P!G[OP7PO!V/oO!q7OO%]6zO~OZ7UO!T']a!U']a~O!T/{O!U(bi~O]7XO~O!e7YO~O!e7ZO~O!e7[O~O!e7[O~P$}O_7^O~O!_7aO~O!e7bO~O!T(Si!U(Si~P#0aO_$pO#T7iO'e$pO~O_$pO!_#UO#T7iO'e$pO~O!Z7mO![7mO'|+zO~P!AQO_$pO!_#UO!f$mO!l7nO#T7iO'e$pO'n$bO'}'SO~O!Y7oO!Z7mO![7mO'|+zO~P!AQO!Y7oO!Z7mO![7mO!|7rO#P7sO#Q7sO'|+zO~P!AQO_$pO!_#UO!l7nO#T7iO'e$pO'}'SO~O_$pO'e$pO~P!-RO!T'WO!e(Oy~O!T(Py!e(Py_(Py'e(Py~P!-RO!V&cO%]7xO~O!V&cO%]7xO~P!G[O#`$qqQ$qqZ$qq_$qqk$qqy$qq!T$qq!c$qq!d$qq!f$qq!l$qq#c$qq#d$qq#e$qq#f$qq#g$qq#h$qq#i$qq#j$qq#k$qq#m$qq#o$qq#q$qq#r$qq'e$qq'r$qq'}$qq!e$qq!Q$qq'a$qq!V$qq#T$qqo$qq%]$qq!_$qq~P!G[O#`$sqQ$sqZ$sq_$sqk$sqy$sq!T$sq!c$sq!d$sq!f$sq!l$sq#c$sq#d$sq#e$sq#f$sq#g$sq#h$sq#i$sq#j$sq#k$sq#m$sq#o$sq#q$sq#r$sq'e$sq'r$sq'}$sq!e$sq!Q$sq'a$sq!V$sq#T$sqo$sq%]$sq!_$sq~P!G[O!T&xi!e&xi~P!-RO#u#Wq!T#Wq!U#Wq~P#0aOx.nOy.nO{.oOPua(Uua(Vua!Uua~OQuaZuakua!cua!dua!fua!lua#cua#dua#eua#fua#gua#hua#iua#jua#kua#mua#oua#qua#rua#uua'rua'}ua!Tua~P%LmOx(mO{(nOP$ha(U$ha(V$ha!U$ha~OQ$haZ$hak$hay$ha!c$ha!d$ha!f$ha!l$ha#c$ha#d$ha#e$ha#f$ha#g$ha#h$ha#i$ha#j$ha#k$ha#m$ha#o$ha#q$ha#r$ha#u$ha'r$ha'}$ha!T$ha~P%NtOx(mO{(nOP$ja(U$ja(V$ja!U$ja~OQ$jaZ$jak$jay$ja!c$ja!d$ja!f$ja!l$ja#c$ja#d$ja#e$ja#f$ja#g$ja#h$ja#i$ja#j$ja#k$ja#m$ja#o$ja#q$ja#r$ja#u$ja'r$ja'}$ja!T$ja~P&!{OQ$xaZ$xak$xay$xa!c$xa!d$xa!f$xa!l$xa#c$xa#d$xa#e$xa#f$xa#g$xa#h$xa#i$xa#j$xa#k$xa#m$xa#o$xa#q$xa#r$xa#u$xa'r$xa'}$xa!T$xa!U$xa~P%5OO#u$dq!T$dq!U$dq~P#0aO#u$eq!T$eq!U$eq~P#0aO!U8RO~O#u8SO~P!&VO!_#UO!T'Ri!e'Ri~O!_#UO'}'SO!T'Ri!e'Ri~O!T-zO!e([q~O!Q'Ti!T'Ti~P!G[O!T.SO!Q(]q~O!Q8YO~P!G[O!Q8YO~Oe'py!T'py~P!&VO!T'Wa!V'Wa~P!G[O!V%Pq_%Pq!T%Pq'e%Pq~P!G[OZ8_O~O!T/SO!U(dq~O]8bO~O#T8cO!T'Ya!U'Ya~O!T3nO!U(ai~P#0aOQ[XZ[Xk[Xx[Xy[X{[X!Q[X!T[X!c[X!d[X!f[X!l[X#T[X#`dX#c[X#d[X#e[X#f[X#g[X#h[X#i[X#j[X#k[X#m[X#o[X#q[X#r[X#w[X'r[X'}[X(U[X(V[X~O!_$}X#k$}X~P&*pO#P5UO#Q5UO~P$%_O!z8gO!{8gO#P5UO#Q5UO~P$%_O!Z8jO![8jO'k$vO's)TO'|+zO~O!Y8mO!Z8jO![8jO#P5UO#Q5UO'|+zO~P!AQO!V/oO%]8pO~O!V/oO%]8pO~P!G[O]8wO's8vO~O!T/{O!U(bq~O!e8yO~O!e8yO~P$}O!e8{O~O!e8|O~O#T9OO!T#]y!U#]y~O!T#]y!U#]y~P#0aO_$pO#T9RO'e$pO~O_$pO!_#UO#T9RO'e$pO~O!Z9WO![9WO'|+zO~P!AQO_$pO!_#UO!l9XO#T9RO'e$pO'}'SO~O!f$mO'n$bO~P&0|O!Y9YO!Z9WO![9WO'|+zO~P!AQO!V&cO%]9^O~O!V&cO%]9^O~P!G[O#u#sy!T#sy!U#sy~P#0aOQ$qiZ$qik$qiy$qi!c$qi!d$qi!f$qi!l$qi#c$qi#d$qi#e$qi#f$qi#g$qi#h$qi#i$qi#j$qi#k$qi#m$qi#o$qi#q$qi#r$qi#u$qi'r$qi'}$qi!T$qi!U$qi~P%5OOx(mO{(nO(V(rOP%Ti(U%Ti!U%Ti~OQ%TiZ%Tik%Tiy%Ti!c%Ti!d%Ti!f%Ti!l%Ti#c%Ti#d%Ti#e%Ti#f%Ti#g%Ti#h%Ti#i%Ti#j%Ti#k%Ti#m%Ti#o%Ti#q%Ti#r%Ti#u%Ti'r%Ti'}%Ti!T%Ti~P&4cOx(mO{(nOP%Vi(U%Vi(V%Vi!U%Vi~OQ%ViZ%Vik%Viy%Vi!c%Vi!d%Vi!f%Vi!l%Vi#c%Vi#d%Vi#e%Vi#f%Vi#g%Vi#h%Vi#i%Vi#j%Vi#k%Vi#m%Vi#o%Vi#q%Vi#r%Vi#u%Vi'r%Vi'}%Vi!T%Vi~P&6jO#u$ey!T$ey!U$ey~P#0aO#u#Wy!T#Wy!U#Wy~P#0aO!_#UO!T'Rq!e'Rq~O!T-zO!e([y~O!Q'Tq!T'Tq~P!G[O!Q9dO~P!G[O!T/SO!U(dy~O!T3nO!U(aq~O#P7sO#Q7sO~P$%_O!Z9nO![9nO'k$vO's)TO'|+zO~O!V/oO%]9qO~O!V/oO%]9qO~P!G[O!e9tO~O_$pO#T9zO'e$pO~O_$pO!_#UO#T9zO'e$pO~O!Z9}O![9}O'|+zO~P!AQO_$pO!_#UO!l:OO#T9zO'e$pO'}'SO~OQ$qqZ$qqk$qqy$qq!c$qq!d$qq!f$qq!l$qq#c$qq#d$qq#e$qq#f$qq#g$qq#h$qq#i$qq#j$qq#k$qq#m$qq#o$qq#q$qq#r$qq#u$qq'r$qq'}$qq!T$qq!U$qq~P%5OOQ$sqZ$sqk$sqy$sq!c$sq!d$sq!f$sq!l$sq#c$sq#d$sq#e$sq#f$sq#g$sq#h$sq#i$sq#j$sq#k$sq#m$sq#o$sq#q$sq#r$sq#u$sq'r$sq'}$sq!T$sq!U$sq~P%5OOe%X!Z!T%X!Z#T%X!Z#u%X!Z~P!&VO!T'Yq!U'Yq~P#0aO!T#]!Z!U#]!Z~P#0aO_$pO#T:aO'e$pO~O_$pO!_#UO#T:aO'e$pO~O#`%X!ZQ%X!ZZ%X!Z_%X!Zk%X!Zy%X!Z!T%X!Z!c%X!Z!d%X!Z!f%X!Z!l%X!Z#c%X!Z#d%X!Z#e%X!Z#f%X!Z#g%X!Z#h%X!Z#i%X!Z#j%X!Z#k%X!Z#m%X!Z#o%X!Z#q%X!Z#r%X!Z'e%X!Z'r%X!Z'}%X!Z!e%X!Z!Q%X!Z'a%X!Z!V%X!Z#T%X!Zo%X!Z%]%X!Z!_%X!Z~P!G[O_$pO#T:oO'e$pO~OP=nOx(mO{(nO(U(pO(V(rO~O]#Sal#Sa!U#Sa!Y#Sa!Z#Sa![#Sa!u#Sa!y#Sa!z#Sa!{#Sa#P#Sa#Q#Sa'k#Sa's#Sa'|#Sa~P&D[OQ%X!ZZ%X!Zk%X!Zy%X!Z!c%X!Z!d%X!Z!f%X!Z!l%X!Z#c%X!Z#d%X!Z#e%X!Z#f%X!Z#g%X!Z#h%X!Z#i%X!Z#j%X!Z#k%X!Z#m%X!Z#o%X!Z#q%X!Z#r%X!Z#u%X!Z'r%X!Z'}%X!Z!T%X!Z!U%X!Z~P%5OO]ualua!Yua!Zua![ua!uua!yua!zua!{ua#Pua#Qua'kua'sua'|ua~P%LmO]$hal$ha!Y$ha!Z$ha![$ha!u$ha!y$ha!z$ha!{$ha#P$ha#Q$ha'k$ha's$ha'|$ha~P%NtO]$jal$ja!Y$ja!Z$ja![$ja!u$ja!y$ja!z$ja!{$ja#P$ja#Q$ja'k$ja's$ja'|$ja~P&!{O]$xal$xa!U$xa!Y$xa!Z$xa![$xa!u$xa!y$xa!z$xa!{$xa#P$xa#Q$xa'k$xa's$xa'|$xa~P&D[O]%Til%Ti!Y%Ti!Z%Ti![%Ti!u%Ti!y%Ti!z%Ti!{%Ti#P%Ti#Q%Ti'k%Ti's%Ti'|%Ti~P&4cO]%Vil%Vi!Y%Vi!Z%Vi![%Vi!u%Vi!y%Vi!z%Vi!{%Vi#P%Vi#Q%Vi'k%Vi's%Vi'|%Vi~P&6jO]$qil$qi!U$qi!Y$qi!Z$qi![$qi!u$qi!y$qi!z$qi!{$qi#P$qi#Q$qi'k$qi's$qi'|$qi~P&D[O]$qql$qq!U$qq!Y$qq!Z$qq![$qq!u$qq!y$qq!z$qq!{$qq#P$qq#Q$qq'k$qq's$qq'|$qq~P&D[O]$sql$sq!U$sq!Y$sq!Z$sq![$sq!u$sq!y$sq!z$sq!{$sq#P$sq#Q$sq'k$sq's$sq'|$sq~P&D[O]%X!Zl%X!Z!U%X!Z!Y%X!Z!Z%X!Z![%X!Z!u%X!Z!y%X!Z!z%X!Z!{%X!Z#P%X!Z#Q%X!Z'k%X!Z's%X!Z'|%X!Z~P&D[Oo'tX~P/WO!QdX!TdX#TdX~P&*pOQ[XZ[Xk[Xx[Xy[X{[X!T[X!TdX!c[X!d[X!f[X!l[X#T[X#TdX#`dX#c[X#d[X#e[X#f[X#g[X#h[X#i[X#j[X#k[X#m[X#o[X#q[X#r[X#w[X'r[X'}[X(U[X(V[X~O!_dX!e[X!edX'}dX~P'$ZOQ;VOR;VO]gOb=ZOc!`OigOk;VOlgOmgOrgOt;VOv;VO{SO!OgO!PgO!VTO!a;YO!fVO!i;VO!j;VO!k;VO!l;VO!m;VO!p!_O#|!bO$QbO'j'|O'rRO'|WO(Z=XO~O]$SOi$cOk$TOl$SOm$SOr$dOt$eOv;pO{$[O!V$]O!a=aO!f$XO#_;yO#|$iO$i;sO$k;vO$n$jO'j'dO'n$bO'r$UO~O!T;jO!U$ga~O]$SOi$cOk$TOl$SOm$SOr$dOt$eOv;qO{$[O!V$]O!a=bO!f$XO#_;zO#|$iO$i;tO$k;wO$n$jO'j'dO'n$bO'r$UO~O#l(TO~P'*^O!U[X!UdX~P'$ZO!_;^O~O#`;]O~O!_#UO#`;]O~O#T;nO~O#k;cO~O#T;{O!T(SX!U(SX~O#T;nO!T(QX!U(QX~O#`;|O~Oe<OO~P!&VO#`<VO~O#`<WO~O#`<XO~O!_#UO#`<YO~O!_#UO#`;|O~O#u<ZO~P#0aO#`<[O~O#`<]O~O#`<^O~O#`<_O~O#`<`O~O#`<aO~O#`<bO~O#`<cO~O!Q<dO~O#u<eO~P!&VO#u<fO~P!&VO#u<gO~P!&VO!Q<hO~P!G[O!Q<hO~O!Q<iO~P!G[O!_#UO#k=gO~O!_#UO#k=iO~O$Q~!d!y!{!|#P#^#_#j(Z$i$k$n%Q%[%]%^%d%f%i%j%l%n~UT$Q(Z#d!P'g'k#el#c#fkx'h's'h'j$S$U$S~",goto:"$(n(hPPPPPPPP(iP(yP*tPPPP.mPP/SP4y9R9fP9fPPP9fP;l9fP9fP9fP;pPP;vP<a@}PPPARPPPPARC|PPPDSE|PARPHdPPPPJbARPPPPPLlARPP! z!#O!#SP!#s!#w!#sPPPP!&|!(wPP!)P!*VP!#OARAR!-m!0q!5r!5r!9cPPP!9jARPPPPPPPPPPP!<iP!=|PPAR!?]PARPARARARARPAR!@tPP!CvP!FtP!Fx!GQ!GU!GUP!CsP!GY!GYP!JWP!J[ARAR!Jb!M_9fP9fP9f9fP!Ni9f9f#!y9f#%v9f#(Q9f9f#(n#+Q#+Q#+U#+^#+Q#+jP#+QP9f#,f9f#.T9f9f.mPPP#/vPP#0`#0`P#0`P#0u#0`PP#0{P#0rP#0r#1_!({#0r#1|#2S#2V(i#2Y(iP#2a#2a#2aP(iP(iP(iP(iPP(iP#2g#2jP#2j(iP#2nP#2qP(iP(iP(iP(iP(iP(i(iP#2w#3R#3X#3_#3m#3s#3y#4T#4Z#5U#5e#5k#5}#6T#6Z#6i#7O#8w#9V#9]#9c#9i#9o#9y#:P#:V#:a#:s#:yPPPPPPPP#;PPP#;s#?TP#@o#@v#AOPP#Fp#If$ o$ r$ u$#h$#k$#nPP$#t$#x$$q$%q$%u$&ZPP$&_$&e$&iP$&l$&p$&s$'f$'|$(R$(U$(X$(_$(b$(f$(jmlOTn!R!s$o%t%v%w%y+X+^0]0`Q${qQ%StQ%l}S&Z!]+rQ&j!`S)V$])[Q*P$|Q*^%UQ*x%fQ+x&bS+|&c,OQ,`&kQ.e)^Q/z*y[0z+y,Q,R,S,T,US3w/o3yW5Q0{0|0}1OU6v3|3}4OU7m5R5T5VS8j6w6xS9W7o7rQ9n8mR9}9Y%Q`OPSTUVno!R!W!c!g!j!s!}#T#X#[#_#`#a#b#c#d#e#f#g#h#i#p#t$o%Q%m%p%t%v%w%y%}&W&e&p&r&x'T'f'j'n(l)o)v*c+T+X+^+n,Z,e,n,z-X-`.o.t/R/r0T0U0V0X0]0`0b1S1e1o1x3s4U4i4k4l4|5g6s7O7^7i9R9z:a:oS#PX;W!l(O#k#|&[(b+j+m-f0r2^3p4u8c9O;V;Y;];_;`;a;b;c;d;e;f;g;h;i;j;n;{;|<O<Y<Z<b<c=[Q)g$fQ*U%OQ*z%iQ+R%qQ-O;oQ.|)yQ/X*VQ0S+PQ3_/SQ4^/{Q5m;qQ6`3`R:q;ppiOTn}!R!s$o%k%t%v%w%y+X+^0]0`R*|%m&j[OPTUnor!R!W!a!c!s!}#T#X#[#_#`#a#b#c#d#e#f#g#h#i#k#p#t#|$o%Q%m%p%q%t%v%w%y%}&W&e&r&x'T'f'j'n(b(l)o)v*c+T+X+^+j+m+n,Z,e,n,z-X-`-f.o.t/R/r0T0U0V0X0]0`0b0r1S1e1o1x2^3p3s4U4i4k4l4u4|5g6s7O7^7i8c9O9R9z:a:o;V;Y;];_;`;a;b;c;d;e;f;g;h;i;j;n;{;|<O<Y<Z<b<c=Z=[[!lSV!g!j&[&pQ$upQ$zqS%Pt%U!U%Yvw!v!x!{$m%W&y'Q'R'W*a*b*d+V+k,i,l,p,q,s0e1g1h4t5aQ%b{Q&g!_Q&i!`Q'_#RS(x$X(|S*O${$|Q*S%OQ*s%dQ*w%fS,_&j&kQ,}'`Q.O(yQ/Q*PQ/W*VQ/Y*WQ/]*[Q/u*tS/y*x*yQ1a,`Q2g-zQ3^/SQ3b/VQ3g/_Q4]/zQ5x2hQ6_3`Q6b3dQ8^6^R9f8_x$Ze#W$g$h$l(q(s({)b)c-U.R.q2f3O8S=X=d=e=f!^$xq!`$z${$|&Y&i&j&k)U*O*P+o+{,_,`.]/Q0w0y1V1a2z5P5S7l7q9U9{:bQ)x$uQ*i%_Q*l%`Q*v%fQ,|'_Q/t*sU/x*w*x*yQ1q,}Q4W/uS4[/y/zS6l3r3vQ7T4]U8h6p6t6uU9l8i8k8lQ:W9mQ:i:X#b=]#U#r#s$X$[&f(h(t)R)u)w)y*h*k,[,y,{.S.U/f/i/q/s1n1p2p2x3V3X4T4V5c5h5{6U6z7P7x8p9^9q;r;u;x<P<S<V<[<_<e=g=i=m=n=od=^;^;s;v;y<Q<T<W<]<`<fg=_;l;m;t;w;z<R<U<X<^<a<gW$`e$b)d=XS%_x%kQ%`yQ%azR*g%]%X$_e#U#W#r#s$X$[$g$h$l&f(h(q(s(t({)R)b)c)u)w)y*h*k,[,y,{-U.R.S.U.q/f/i/q/s1n1p2f2p2x3O3V3X4T4V5c5h5{6U6z7P7x8S8p9^9q;^;l;m;r;s;t;u;v;w;x;y;z<P<Q<R<S<T<U<V<W<X<[<]<^<_<`<a<e<f<g=X=d=e=f=g=i=m=n=oT(i$U(jX)h$f;o;p;qU&_!]%X+uS'm#Y#ZQ*Z%RS,u'Z'[Q/j*mQ3P.nR6h3n&pgOPSTUVno!R!W!c!g!j!s!}#T#X#[#_#`#a#b#c#d#e#f#g#h#i#k#p#t#|$o%Q%m%p%q%t%v%w%y%}&W&[&e&p&r&x'T'f'j'n(b(l)o)v*c+T+X+^+j+m+n,Z,e,n,z-X-`-f.o.t/R/r0T0U0V0X0]0`0b0r1S1e1o1x2^3p3s4U4i4k4l4u4|5g6s7O7^7i8c9O9R9z:a:o;V;Y;];_;`;a;b;c;d;e;f;g;h;i;j;n;{;|<O<Y<Z<b<c=[$a#o_!i!t$s&o&u'b'i'q'r's't'u'v'w'x'y'z'{'}(Q(U(`*Y+p,c,h,m-T-Z-_-a-p.r0l0o1d1w1|1}2O2P2Q2R2S2T2U2V2W2X2Y2]2b3T3[4x5Y5_5k5l5q5r6j7d7g7{8P8Q9Q9h9u9w:_:m:z;X<wT!dR!e&qgOPSTUVno!R!W!c!g!j!s!}#T#X#[#_#`#a#b#c#d#e#f#g#h#i#k#p#t#|$o%Q%m%p%q%t%v%w%y%}&W&[&e&p&r&x'T'f'j'n(b(l)o)v*c+T+X+^+j+m+n,Z,e,n,z-X-`-f.o.t/R/r0T0U0V0X0]0`0b0r1S1e1o1x2^3p3s4U4i4k4l4u4|5g6s7O7^7i8c9O9R9z:a:o;V;Y;];_;`;a;b;c;d;e;f;g;h;i;j;n;{;|<O<Y<Z<b<c=[Q&]!]R0s+r!n&V!]&Z&b&c+r+x+y+|,O,Q,R,S,T,U,V0z0{0|0}1O1P3t3{5Q5R5T5U5V6n6o7m7o7r7s8g9W9Y9}S)U$])[S.])V)^Q.f)_Q/l*oQ2z.eQ2}.hS3r/o3yS6p3w4OS6t3|3}S8i6v6wQ8k6xS9m8j8mR:X9nllOTn!R!s$o%t%v%w%y+X+^0]0`Q%{!US'a#T;]Q)|$yQ*q%bQ*r%cQ,]&hS-S'f;|S.s)o<YQ/O)}Q/n*pQ0d+`Q0f+aQ0n+lQ1Y,SQ1_,^S3U.t<bQ3Y/PS3]/R<cQ4w0qQ5X1QQ5[1`Q6]3ZQ7e4yQ7f4zQ7t5]Q8}7bQ9S7kQ9x9TQ:^9yQ:l:`R:y:n$[#n_!i!t&o&u'b'i'q'r's't'u'v'w'x'y'z'{'}(Q(U(`*Y+p,c,h,m-T-Z-_-p.r0l0o1d1w1|1}2O2P2Q2R2S2T2U2V2W2X2Y2]2b3T3[4x5Y5_5k5l5q5r6j7d7g7{8P8Q9Q9h9u9w:_:m:z;X<wS'^#O0xU)a$^'e2[T)s$s-a$[#m_!i!t&o&u'b'i'q'r's't'u'v'w'x'y'z'{'}(Q(U(`*Y+p,c,h,m-T-Z-_-p.r0l0o1d1w1|1}2O2P2Q2R2S2T2U2V2W2X2Y2]2b3T3[4x5Y5_5k5l5q5r6j7d7g7{8P8Q9Q9h9u9w:_:m:z;X<wS']#O0xS'o#Z#nS)r$s-aS,v'['^Q-b(PQ.u)sR1i,w&pgOPSTUVno!R!W!c!g!j!s!}#T#X#[#_#`#a#b#c#d#e#f#g#h#i#k#p#t#|$o%Q%m%p%q%t%v%w%y%}&W&[&e&p&r&x'T'f'j'n(b(l)o)v*c+T+X+^+j+m+n,Z,e,n,z-X-`-f.o.t/R/r0T0U0V0X0]0`0b0r1S1e1o1x2^3p3s4U4i4k4l4u4|5g6s7O7^7i8c9O9R9z:a:o;V;Y;];_;`;a;b;c;d;e;f;g;h;i;j;n;{;|<O<Y<Z<b<c=[S#PX;WQ%v!PQ%w!QQ%y!SQ%z!TR0[+[Q&d!_Q)t$uQ,Y&gS,x'_)xS1[,W,XY1m,|,}.w.x.yS5Z1]1^W5b1j1k1l1qU7w5d5e5fU9[7v7y7zQ:P9]R:d:QT+}&c,O!]YOTVZn}!R!s!v$m$o%k%m%t%v%w%y&c'W+X+^+y,O,p/o0]0`3t3yT#PX;W%SsOPSTUVno!R!W!c!g!j!s!}#T#X#[#_#`#a#b#c#d#e#f#g#h#i#p#t$o%Q%m%p%q%t%v%w%y%}&W&e&p&r&x'T'f'j'n(l)o)v*c+T+X+^+n,Z,e,n,z-X-`.o.t/R/r0T0U0V0X0]0`0b1S1e1o1x3s4U4i4k4l4|5g6s7O7^7i9R9z:a:oS'm#Y#ZS,u'Z'[!m<m#k#|&[(b+j+m-f0r2^3p4u8c9O;V;Y;];_;`;a;b;c;d;e;f;g;h;i;j;n;{;|<O<Y<Z<b<c=[S+{&c,OW0y+y,S,T,UU1V+|,Q,RU1Z,V3t3{S3v/o3yU5P0z0{0|S5S0}1OU5W1P6n6oS6p3w4OS6u3|3}U7l5Q5R5TS7p5U8gQ7q5VS8i6v6wQ8l6xU9U7m7o7rQ9Z7sS9m8j8mS9{9W9YQ:X9nR:b9}S+}&c,OT3x/o3yS'V!w0YQ-}(xQ.Z)UU1U+{3u3vQ2l.OS2u.[.fU5O0y1Z6uQ5w2gS6S2{2}U7n5S5W8lQ8U5xQ8]6VS9X7p7qR:O9ZQ#V^S'U!w0YQ)p$nQ)z$wQ*Q$}Q,o'VQ-|(xQ.Y)UQ.`)XQ.}){Q/v*uU1T+{3u3vS2k-}.OS2t.Z.fQ2w._Q2y.aQ4Y/wW4}0y1U1Z6uQ5v2gQ5z2lS6O2u2}Q6T2|Q7R4ZW7j5O5S5W8lS8T5w5xS8X6P<dQ8Z6SQ8e6kQ8t7SU9V7n7p7qQ9b8US9c8Y<hQ9e8]Q9j8fQ9s8uS9|9X9ZS:S9d<iQ:U9kQ:c:OQ:g:VQ:v:hQ;P:wQ<p<kQ=O<uQ=P<vQ=Q=cR=V=h%S]OPSTUVno!R!W!c!g!j!s!}#T#X#[#_#`#a#b#c#d#e#f#g#h#i#p#t$o%Q%m%p%q%t%v%w%y%}&W&e&p&r&x'T'f'j'n(l)o)v*c+T+X+^+n,Z,e,n,z-X-`.o.t/R/r0T0U0V0X0]0`0b1S1e1o1x3s4U4i4k4l4|5g6s7O7^7i9R9z:a:oS#Vr!a!l<j#k#|&[(b+j+m-f0r2^3p4u8c9O;V;Y;];_;`;a;b;c;d;e;f;g;h;i;j;n;{;|<O<Y<Z<b<c=[R<p=Z%S^OPSTUVno!R!W!c!g!j!s!}#T#X#[#_#`#a#b#c#d#e#f#g#h#i#p#t$o%Q%m%p%q%t%v%w%y%}&W&e&p&r&x'T'f'j'n(l)o)v*c+T+X+^+n,Z,e,n,z-X-`.o.t/R/r0T0U0V0X0]0`0b1S1e1o1x3s4U4i4k4l4|5g6s7O7^7i9R9z:a:oQ$nf!^$wq!`$z${$|&Y&i&j&k)U*O*P+o+{,_,`.]/Q0w0y1V1a2z5P5S7l7q9U9{:bS$}r!aQ){$xQ*u%fW/w*v*w*x*yU4Z/x/y/zS6k3r3vS7S4[4]W8f6l6p6t6uQ8u7TW9k8h8i8k8lS:V9l9mS:h:W:XQ:w:i!l<k#k#|&[(b+j+m-f0r2^3p4u8c9O;V;Y;];_;`;a;b;c;d;e;f;g;h;i;j;n;{;|<O<Y<Z<b<c=[Q<u=YR<v=Z$vaOPTUno!R!W!c!s!}#T#X#[#_#`#a#b#c#d#e#f#g#h#i#p#t$o%Q%m%p%t%v%w%y%}&W&e&r&x'T'f'j'n(l)o)v*c+T+X+^+n,Z,e,n,z-X-`.o.t/R/r0T0U0V0X0]0`0b1S1e1o1x3s4U4i4k4l4|5g6s7O7^7i9R9z:a:oY!qSV!g!j&p!U%Yvw!v!x!{$m%W&y'Q'R'W*a*b*d+V+k,i,l,p,q,s0e1g1h4t5aQ+S%q!j<l#k#|(b+j+m-f0r2^3p4u8c9O;V;Y;];_;`;a;b;c;d;e;f;g;h;i;j;n;{;|<O<Y<Z<b<c=[R<o&[S&`!]%XR0u+u%Q`OPSTUVno!R!W!c!g!j!s!}#T#X#[#_#`#a#b#c#d#e#f#g#h#i#p#t$o%Q%m%p%t%v%w%y%}&W&e&p&r&x'T'f'j'n(l)o)v*c+T+X+^+n,Z,e,n,z-X-`.o.t/R/r0T0U0V0X0]0`0b1S1e1o1x3s4U4i4k4l4|5g6s7O7^7i9R9z:a:o!l(O#k#|&[(b+j+m-f0r2^3p4u8c9O;V;Y;];_;`;a;b;c;d;e;f;g;h;i;j;n;{;|<O<Y<Z<b<c=[R+R%q!j#e_!i$s&o&u'b'i'x'y'z'{(Q(U*Y,c,h,m-T-Z-p.r1d1w2Y3T3[5Y5_5k7g9Q9w:_:m:z;X!T;e'}(`+p-a0l0o1|2U2V2W2X2]2b4x5l5q5r6j7d7{8P8Q9h9u<w!f#g_!i$s&o&u'b'i'z'{(Q(U*Y,c,h,m-T-Z-p.r1d1w2Y3T3[5Y5_5k7g9Q9w:_:m:z;X!P;g'}(`+p-a0l0o1|2W2X2]2b4x5l5q5r6j7d7{8P8Q9h9u<w!b#k_!i$s&o&u'b'i(Q(U*Y,c,h,m-T-Z-p.r1d1w2Y3T3[5Y5_5k7g9Q9w:_:m:z;XQ2f-xz=['}(`+p-a0l0o1|2]2b4x5l5q5r6j7d7{8P8Q9h9u<wQ=d=jQ=e=kR=f=l&pgOPSTUVno!R!W!c!g!j!s!}#T#X#[#_#`#a#b#c#d#e#f#g#h#i#k#p#t#|$o%Q%m%p%q%t%v%w%y%}&W&[&e&p&r&x'T'f'j'n(b(l)o)v*c+T+X+^+j+m+n,Z,e,n,z-X-`-f.o.t/R/r0T0U0V0X0]0`0b0r1S1e1o1x2^3p3s4U4i4k4l4u4|5g6s7O7^7i8c9O9R9z:a:o;V;Y;];_;`;a;b;c;d;e;f;g;h;i;j;n;{;|<O<Y<Z<b<c=[S#}d$OR2_-e&wcOPSTUVdno!R!W!c!g!j!s!}#T#X#[#_#`#a#b#c#d#e#f#g#h#i#k#p#t#|$O$o%Q%m%p%q%t%v%w%y%}&W&[&e&p&r&x'T'f'j'n(b(l)o)v*c+T+X+^+j+m+n,Z,e,n,z-X-`-e-f.o.t/R/r0T0U0V0X0]0`0b0r1S1e1o1x2^3p3s4U4i4k4l4u4|5g6s7O7^7i8c9O9R9z:a:o;V;Y;];_;`;a;b;c;d;e;f;g;h;i;j;n;{;|<O<Y<Z<b<c=[T#yb$PS#wb$PT(X#z(]T#xb$PT(Z#z(]&wdOPSTUVdno!R!W!c!g!j!s!}#T#X#[#_#`#a#b#c#d#e#f#g#h#i#k#p#t#|$O$o%Q%m%p%q%t%v%w%y%}&W&[&e&p&r&x'T'f'j'n(b(l)o)v*c+T+X+^+j+m+n,Z,e,n,z-X-`-e-f.o.t/R/r0T0U0V0X0]0`0b0r1S1e1o1x2^3p3s4U4i4k4l4u4|5g6s7O7^7i8c9O9R9z:a:o;V;Y;];_;`;a;b;c;d;e;f;g;h;i;j;n;{;|<O<Y<Z<b<c=[T#}d$OQ$QdR(d$O%SfOPSTUVno!R!W!c!g!j!s!}#T#X#[#_#`#a#b#c#d#e#f#g#h#i#p#t$o%Q%m%p%q%t%v%w%y%}&W&e&p&r&x'T'f'j'n(l)o)v*c+T+X+^+n,Z,e,n,z-X-`.o.t/R/r0T0U0V0X0]0`0b1S1e1o1x3s4U4i4k4l4|5g6s7O7^7i9R9z:a:o!m=Y#k#|&[(b+j+m-f0r2^3p4u8c9O;V;Y;];_;`;a;b;c;d;e;f;g;h;i;j;n;{;|<O<Y<Z<b<c=[#ahOPTVn!R!W!c!s!}#[#|$o%m%p%q%t%v%w%y%}&W&e'n(b)v*c+T+X+^+n,Z,z-f.o/r0T0U0V0X0]0`0b1o2^3s4U4i4k4l5g6s7O7^!^$^e#W$g$h$l(q(s({)b)c-U.R.q2f3O8S;^;s;v;y<Q<T<W<]<`<f=X=d=e=f#b'e#U#r#s$X$[&f(h(t)R)u)w)y*h*k,[,y,{.S.U/f/i/q/s1n1p2p2x3V3X4T4V5c5h5{6U6z7P7x8p9^9q;r;u;x<P<S<V<[<_<e=g=i=m=n=oQ)l$jQ-q(mg2[;l;m;t;w;z<R<U<X<^<a<gx$Ye#W$g$h$l(q(s({)b)c-U.R.q2f3O8S=X=d=e=fQ(}$ZS)X$])[Q)m$kQ.a)Y#b<r#U#r#s$X$[&f(h(t)R)u)w)y*h*k,[,y,{.S.U/f/i/q/s1n1p2p2x3V3X4T4V5c5h5{6U6z7P7x8p9^9q;r;u;x<P<S<V<[<_<e=g=i=m=n=od<s;^;s;v;y<Q<T<W<]<`<ff<t;l;m;t;w;z<R<U<X<^<a<gQ<x=]Q<y=^Q<z=_Q<{=`Q<|=aR<}=b!^$^e#W$g$h$l(q(s({)b)c-U.R.q2f3O8S;^;s;v;y<Q<T<W<]<`<f=X=d=e=f#b'e#U#r#s$X$[&f(h(t)R)u)w)y*h*k,[,y,{.S.U/f/i/q/s1n1p2p2x3V3X4T4V5c5h5{6U6z7P7x8p9^9q;r;u;x<P<S<V<[<_<e=g=i=m=n=og2[;l;m;t;w;z<R<U<X<^<a<gljOTn!R!s$o%t%v%w%y+X+^0]0`Q)Q$[Q+g&QQ+h&SR2o.S%W$_e#U#W#r#s$X$[$g$h$l&f(h(q(s(t({)R)b)c)u)w)y*h*k,[,y,{-U.R.S.U.q/f/i/q/s1n1p2f2p2x3O3V3X4T4V5c5h5{6U6z7P7x8S8p9^9q;^;l;m;r;s;t;u;v;w;x;y;z<P<Q<R<S<T<U<V<W<X<[<]<^<_<`<a<e<f<g=X=d=e=f=g=i=m=n=oQ*j%`Q/h*lQ3l/gR6g3mT)Z$])[S)Z$])[T3x/o3yQ._)WQ2|.gQ=c3sR=h6sQ)z$wQ.`)XQ.}){Q/v*uQ4Y/wQ7R4ZQ8e6kQ8t7SQ9j8fQ9s8uQ:U9kQ:g:VQ:v:hR;P:wp(q$V'g)n.Q.i.j1u2m3S5u6W9a<q=R=S=T!p<P'c(S(w)P,X-R-m-x.V.v.y/e/g1^1l1t2n2r3k3m4R5f5i5j5|6Q6Y6[6}7z8W8[8r:R=U=W=j=k=l[<Q:e:t:};R;S;U]<R2Z5p7|9_9`:pr(s$V'g)n-v.Q.i.j1u2m3S5u6W9a<q=R=S=T!r<S'c(S(w)P,X-R-m-x.V.v.y/e/g1^1l1r1t2n2r3k3m4R5f5i5j5|6Q6Y6[6}7z8W8[8r:R=U=W=j=k=l^<T:e:t:{:};R;S;U_<U2Z5p7|7}9_9`:ppiOTn}!R!s$o%k%t%v%w%y+X+^0]0`Q%h|R+T%qpiOTn}!R!s$o%k%t%v%w%y+X+^0]0`R%h|Q*n%aR/d*gqiOTn}!R!s$o%k%t%v%w%y+X+^0]0`Q/p*sS4S/t/uW6y4P4Q4R4WU8o6{6|6}U9o8n8q8rQ:Y9pR:j:ZQ%o}R*}%kR4a/}R8w7US%Pt%UR/Y*WQ%t!OR+X%uR+_%zT0^+^0`R+c%{Q+b%{R0g+cQnOQ!sTT$rn!sQ(j$UR-n(jQ!eRR&m!eQ!hSU&s!h&t,fQ&t!iR,f&uQ+s&]R0t+sQ-V'gR1v-VQ-Y'iS1y-Y1zR1z-ZQ,O&cR1W,OrZOTn}!R!s$o%k%m%t%v%w%y+X+^0]0`S!vV$mY#QZ!v+y,p3tS+y&c,OQ,p'WT3t/o3yS!nS%WU&z!n&{,gQ&{!oR,g&vQ+v&`R0v+vQ'X!yQ,j'PW,t'X,j1b5^Q1b,kR5^1cQ(]#zR-g(]Q$OdR(c$OQ#q_U(R#q,b;kQ,b;XR;k(`Q-{(xW2i-{2j5y8VU2j-|-}.OS5y2k2lR8V5z$m(o$V'c'g(S(w)P)i)j)n,X-P-Q-R-m-v-w-x.Q.V.i.j.v.y/e/g1^1l1r1s1t1u2Z2m2n2r3S3k3m4R5f5i5j5n5o5p5u5|6Q6W6Y6[6}7z7|7}8O8W8[8r9_9`9a:R:e:p:r:s:t:{:|:};R;S;U<q=R=S=T=U=W=j=k=lQ.T)PU2q.T2s5}Q2s.VR5}2rQ)[$]R.c)[Q)e$aR.l)eQ3W.vR6Z3WQ*e%ZR/c*eQ3o/jS6i3o8dR8d6jQ*p%bR/m*pQ3y/oR6q3yQ/|*zS4_/|7VR7V4aQ/T*SW3a/T3c6a8`Q3c/WQ6a3bR8`6bQ*X%PR/Z*XQ0`+^R4o0`WmOTn!sQ%x!RQ)q$oQ+W%tQ+Y%vQ+Z%wQ+]%yQ0Z+XS0^+^0`R4n0]Q$qkQ%|!VQ&P!XQ&R!YQ&T!ZQ*`%VQ*f%[Q*|%oQ+e&OQ.b)ZS0P*}+QQ0h+dQ0i+gQ0j+hU1R+{3u3vQ3f/^Q3j/eQ4X/vQ4c0RQ4m0[Y4{0y1T1U1Z6uQ6e3hQ6f3kQ7Q4YQ7W4b[7h4}5O5S5W5Y8lQ8a6cQ8s7RQ8x7XY9P7g7j7n7p7qQ9g8bQ9i8eQ9r8tW9v9Q9V9X9ZQ:T9jQ:[9sU:]9w9|:OQ:f:US:k:_:cQ:u:gQ:x:mQ;O:vQ;Q:zR;T;PQ$yqQ&h!`U)}$z${$|Q+l&YU,^&i&j&kQ.X)US/P*O*PQ0q+oQ1Q+{S1`,_,`Q2v.]Q3Z/QQ4y0wS4z0y1VQ5]1aQ6R2zS7k5P5SS9T7l7qQ9y9UQ:`9{R:n:bS$We=XR)f$bU$ae$b=XR.k)dQ$VeS'c#U)yQ'g#WS(S#r#sQ(w$XQ)P$[Q)i$gQ)j$hQ)n$lQ,X&fQ-P;rQ-Q;uQ-R;xQ-m(hQ-v(qQ-w(sQ-x(tQ.Q({Q.V)RQ.i)bQ.j)cf.v)u,y/q1n4T5c6z7x8p9^9qQ.y)wQ/e*hQ/g*kQ1^,[Q1l,{Q1r<PQ1s<SQ1t<VQ1u-US2Z;l;mQ2m.RQ2n.SQ2r.UQ3S.qQ3k/fQ3m/iQ4R/sQ5f1pQ5i<[Q5j<_Q5n;tQ5o;wQ5p;zQ5u2fQ5|2pQ6Q2xQ6W3OQ6Y3VQ6[3XQ6}4VQ7z5hQ7|<XQ7}<RQ8O<UQ8W5{Q8[6UQ8r7PQ9_<^Q9`<aQ9a8SQ:R<eQ:e;^Q:p<gQ:r;sQ:s;vQ:t;yQ:{<QQ:|<TQ:}<WQ;R<]Q;S<`Q;U<fQ<q=XQ=R=dQ=S=eQ=T=fQ=U=gQ=W=iQ=j=mQ=k=nR=l=olkOTn!R!s$o%t%v%w%y+X+^0]0`Q!^PS!uV!}Q&O!WQ&l!cQ'p#[Q(a#|S+Q%m%pQ+U%qQ+d%}Q+i&WQ,W&eQ-]'nQ-k(bQ.x)vQ/a*cQ0W+TU0p+n3s6sQ1],ZQ1k,zQ2a-fQ3Q.oQ4Q/rQ4e0TQ4f0UQ4h0VQ4j0XQ4q0bQ5e1oQ5s2^Q6|4UQ7]4iQ7_4kQ7`4lQ7y5gQ8q7OR8z7^#U_OPTVn!R!W!s!}#[$o%m%p%q%t%v%w%y%}&W&e'n)v*c+T+X+^+n,Z,z.o/r0T0U0V0X0]0`0b1o3s4U4i4k4l5g6s7O7^Q!iSQ!tUQ$soS&o!g&rQ&u!jQ'b#TQ'i#XQ'q#_Q'r#`Q's#aQ't#bQ'u#cQ'v#dQ'w#eQ'x#fQ'y#gQ'z#hQ'{#iQ'}#kQ(Q#pQ(U#tW(`#|(b-f2^Q*Y%QS+p&[0rS,c&p,eQ,h&xQ,m'TQ-T'fQ-Z'jQ-_;VQ-a;YQ-p(lQ.r)oQ0l+jQ0o+mQ1d,nQ1w-XQ1|;]Q1};_Q2O;`Q2P;aQ2Q;bQ2R;cQ2S;dQ2T;eQ2U;fQ2V;gQ2W;hQ2X;iQ2Y-`Q2];nQ2b;jQ3T.tQ3[/RQ4x;{Q5Y1SQ5_1eQ5k1xQ5l;|Q5q<OQ5r<YQ6j3pQ7d4uQ7g4|Q7{<ZQ8P<bQ8Q<cQ9Q7iQ9h8cQ9u9OQ9w9RQ:_9zQ:m:aQ:z:oQ;X!cR<w=[R!kSR&^!]S&Y!]+rS+o&Z&bS+{&c,OQ0w+xW0y+y,S,T,UU1V+|,Q,RY1Z,V3t3{3|3}S3u/o3yU5P0z0{0|S5S0}1OW5W1P6n6o6xU7l5Q5R5TS7p5U8gQ7q5VU9U7m7o7rQ9Z7sS9{9W9YR:b9}R'h#WR'k#XQ#OXR0x;WT!zV$mS!yV$mU%Zvw+VU'P!v!x!{S,k'Q'RQ,r'WQ/b*dQ1c,lU1f,p,q,sS5`1g1hR7u5a`!mS!g!j%W&p&y*a,it!wVvw!v!x!{$m'Q'R'W*d,l,p,q,s1g1h5aQ0Y+VQ0m+kQ4s0eQ7c4tT<n&[*bT!pS%WS!oS%WS&q!g&yS&v!j*aS+q&[*bT,d&p,iT&a!]%XQ#zbR(f$PT([#z(]R2`-eT(z$X(|R)S$[Q.w)uQ1j,yQ4P/qQ5d1nQ6{4TQ7v5cQ8n6zQ9]7xQ9p8pQ:Q9^R:Z9qllOTn!R!s$o%t%v%w%y+X+^0]0`Q%n}R*|%kV%[vw+VR/k*mR*{%iQ%TtR*_%UR*T%OT%r!O%uT%s!O%uT0_+^0`",nodeNames:"\u26A0 extends ArithOp ArithOp InterpolationStart LineComment BlockComment Script ExportDeclaration export Star as VariableName String from ; default FunctionDeclaration async function VariableDefinition > TypeParamList TypeDefinition ThisType this LiteralType ArithOp Number BooleanLiteral TemplateType InterpolationEnd Interpolation NullType null VoidType void TypeofType typeof MemberExpression . ?. PropertyName [ TemplateString Interpolation super RegExp ] ArrayExpression Spread , } { ObjectExpression Property async get set PropertyDefinition Block : NewExpression new TypeArgList CompareOp < ) ( ArgList UnaryExpression await yield delete LogicOp BitOp ParenthesizedExpression ClassExpression class extends ClassBody MethodDeclaration Decorator @ MemberExpression PrivatePropertyName CallExpression Privacy static abstract override PrivatePropertyDefinition PropertyDeclaration readonly accessor Optional TypeAnnotation Equals StaticBlock FunctionExpression ArrowFunction ParamList ParamList ArrayPattern ObjectPattern PatternProperty Privacy readonly Arrow MemberExpression BinaryExpression ArithOp ArithOp ArithOp ArithOp BitOp CompareOp instanceof satisfies in const CompareOp BitOp BitOp BitOp LogicOp LogicOp ConditionalExpression LogicOp LogicOp AssignmentExpression UpdateOp PostfixExpression CallExpression TaggedTemplateExpression DynamicImport import ImportMeta JSXElement JSXSelfCloseEndTag JSXStartTag JSXSelfClosingTag JSXIdentifier JSXBuiltin JSXIdentifier JSXNamespacedName JSXMemberExpression JSXSpreadAttribute JSXAttribute JSXAttributeValue JSXEscape JSXEndTag JSXOpenTag JSXFragmentTag JSXText JSXEscape JSXStartCloseTag JSXCloseTag PrefixCast ArrowFunction TypeParamList SequenceExpression KeyofType keyof UniqueType unique ImportType InferredType infer TypeName ParenthesizedType FunctionSignature ParamList NewSignature IndexedType TupleType Label ArrayType ReadonlyType ObjectType MethodType PropertyType IndexSignature PropertyDefinition CallSignature TypePredicate is NewSignature new UnionType LogicOp IntersectionType LogicOp ConditionalType ParameterizedType ClassDeclaration abstract implements type VariableDeclaration let var TypeAliasDeclaration InterfaceDeclaration interface EnumDeclaration enum EnumBody NamespaceDeclaration namespace module AmbientDeclaration declare GlobalDeclaration global ClassDeclaration ClassBody MethodDeclaration AmbientFunctionDeclaration ExportGroup VariableName VariableName ImportDeclaration ImportGroup ForStatement for ForSpec ForInSpec ForOfSpec of WhileStatement while WithStatement with DoStatement do IfStatement if else SwitchStatement switch SwitchBody CaseLabel case DefaultLabel TryStatement try CatchClause catch FinallyClause finally ReturnStatement return ThrowStatement throw BreakStatement break ContinueStatement continue DebuggerStatement debugger LabeledStatement ExpressionStatement SingleExpression",maxTerm:345,context:y4,nodeProps:[["closedBy",4,"InterpolationEnd",43,"]",53,"}",68,")",140,"JSXSelfCloseEndTag JSXEndTag",156,"JSXEndTag"],["group",-26,8,15,17,60,195,199,202,203,205,208,211,222,224,230,232,234,236,239,245,251,253,255,257,259,261,262,"Statement",-30,12,13,25,28,29,34,44,46,47,49,54,62,70,76,77,99,100,109,110,127,130,132,133,134,135,137,138,158,159,161,"Expression",-23,24,26,30,33,35,37,162,164,166,167,169,170,171,173,174,175,177,178,179,189,191,193,194,"Type",-3,81,92,98,"ClassItem"],["openedBy",31,"InterpolationStart",48,"[",52,"{",67,"(",139,"JSXStartTag",151,"JSXStartTag JSXStartCloseTag"]],propSources:[S4],skippedNodes:[0,5,6],repeatNodeCount:29,tokenData:"#2k~R!bOX%ZXY%uYZ'kZ[%u[]%Z]^'k^p%Zpq%uqr(Rrs)mst7]tu9guv<avw=bwx>lxyJcyzJyz{Ka{|Lm|}MW}!OLm!O!PMn!P!Q!$v!Q!R!Er!R![!G_![!]!Nc!]!^!N{!^!_# c!_!`#!`!`!a##d!a!b#%s!b!c#'h!c!}9g!}#O#(O#O#P%Z#P#Q#(f#Q#R#(|#R#S9g#S#T#)g#T#o#)}#o#p#,w#p#q#,|#q#r#-j#r#s#.S#s$f%Z$f$g%u$g#BY9g#BY#BZ#.j#BZ$IS9g$IS$I_#.j$I_$I|9g$I|$I}#1X$I}$JO#1X$JO$JT9g$JT$JU#.j$JU$KV9g$KV$KW#.j$KW&FU9g&FU&FV#.j&FV;'S9g;'S;=`<Z<%l?HT9g?HT?HU#.j?HUO9gW%`T$`WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%ZW%rP;=`<%l%Z7Z%|i$`W'g7ROX%ZXY%uYZ%ZZ[%u[p%Zpq%uq!^%Z!_#o%Z#p$f%Z$f$g%u$g#BY%Z#BY#BZ%u#BZ$IS%Z$IS$I_%u$I_$JT%Z$JT$JU%u$JU$KV%Z$KV$KW%u$KW&FU%Z&FU&FV%u&FV;'S%Z;'S;=`%o<%l?HT%Z?HT?HU%u?HUO%Z7Z'rT$`W'h7RO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z&y(YU$`W!l&qO!^%Z!_!`(l!`#o%Z#p;'S%Z;'S;=`%o<%lO%Z&t(sU#m&l$`WO!^%Z!_!`)V!`#o%Z#p;'S%Z;'S;=`%o<%lO%Z&t)^T#m&l$`WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z1i)t]$`W]&ZOY)mYZ*mZr)mrs,js!^)m!^!_-S!_#O)m#O#P1q#P#o)m#o#p-S#p;'S)m;'S;=`7V<%lO)m,^*rX$`WOr*mrs+_s!^*m!^!_+u!_#o*m#o#p+u#p;'S*m;'S;=`,d<%lO*m,^+fT$Z,U$`WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z,U+xTOr+urs,Xs;'S+u;'S;=`,^<%lO+u,U,^O$Z,U,U,aP;=`<%l+u,^,gP;=`<%l*m1i,sT$Z,U$`W]&ZO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z1a-XX]&ZOY-SYZ+uZr-Srs-ts#O-S#O#P-{#P;'S-S;'S;=`1k<%lO-S1a-{O$Z,U]&Z1a.OUOr-Srs.bs;'S-S;'S;=`0y;=`<%l/R<%lO-S1a.iW$Z,U]&ZOY/RZr/Rrs/ps#O/R#O#P/u#P;'S/R;'S;=`0s<%lO/R&Z/WW]&ZOY/RZr/Rrs/ps#O/R#O#P/u#P;'S/R;'S;=`0s<%lO/R&Z/uO]&Z&Z/xRO;'S/R;'S;=`0R;=`O/R&Z0WX]&ZOY/RZr/Rrs/ps#O/R#O#P/u#P;'S/R;'S;=`0s;=`<%l/R<%lO/R&Z0vP;=`<%l/R1a1OX]&ZOY/RZr/Rrs/ps#O/R#O#P/u#P;'S/R;'S;=`0s;=`<%l-S<%lO/R1a1nP;=`<%l-S1i1vY$`WOr)mrs2fs!^)m!^!_-S!_#o)m#o#p-S#p;'S)m;'S;=`6e;=`<%l/R<%lO)m1i2o]$Z,U$`W]&ZOY3hYZ%ZZr3hrs4hs!^3h!^!_/R!_#O3h#O#P5O#P#o3h#o#p/R#p;'S3h;'S;=`6_<%lO3h&c3o]$`W]&ZOY3hYZ%ZZr3hrs4hs!^3h!^!_/R!_#O3h#O#P5O#P#o3h#o#p/R#p;'S3h;'S;=`6_<%lO3h&c4oT$`W]&ZO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z&c5TW$`WO!^3h!^!_/R!_#o3h#o#p/R#p;'S3h;'S;=`5m;=`<%l/R<%lO3h&c5rX]&ZOY/RZr/Rrs/ps#O/R#O#P/u#P;'S/R;'S;=`0s;=`<%l3h<%lO/R&c6bP;=`<%l3h1i6jX]&ZOY/RZr/Rrs/ps#O/R#O#P/u#P;'S/R;'S;=`0s;=`<%l)m<%lO/R1i7YP;=`<%l)m#]7b]$`WOt%Ztu8Zu!^%Z!_!c%Z!c!}8Z!}#R%Z#R#S8Z#S#T%Z#T#o8Z#p$g%Z$g;'S8Z;'S;=`9a<%lO8Z#]8b_$`W'|#TOt%Ztu8Zu!Q%Z!Q![8Z![!^%Z!_!c%Z!c!}8Z!}#R%Z#R#S8Z#S#T%Z#T#o8Z#p$g%Z$g;'S8Z;'S;=`9a<%lO8Z#]9dP;=`<%l8Z,T9ra$`W's#S'j)s$SSOt%Ztu9gu}%Z}!O:w!O!Q%Z!Q![9g![!^%Z!_!c%Z!c!}9g!}#R%Z#R#S9g#S#T%Z#T#o9g#p$g%Z$g;'S9g;'S;=`<Z<%lO9g[;Oa$`W$SSOt%Ztu:wu}%Z}!O:w!O!Q%Z!Q![:w![!^%Z!_!c%Z!c!}:w!}#R%Z#R#S:w#S#T%Z#T#o:w#p$g%Z$g;'S:w;'S;=`<T<%lO:w[<WP;=`<%l:w,T<^P;=`<%l9g&t<hU$`W#e&lO!^%Z!_!`<z!`#o%Z#p;'S%Z;'S;=`%o<%lO%Z&t=RT$`W#w&lO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z(h=iW(V(`$`WOv%Zvw>Rw!^%Z!_!`<z!`#o%Z#p;'S%Z;'S;=`%o<%lO%Z&t>YU$`W#q&lO!^%Z!_!`<z!`#o%Z#p;'S%Z;'S;=`%o<%lO%Z1i>s]$`W]&ZOY>lYZ?lZw>lwx,jx!^>l!^!_@|!_#O>l#O#PE_#P#o>l#o#p@|#p;'S>l;'S;=`J]<%lO>l,^?qX$`WOw?lwx+_x!^?l!^!_@^!_#o?l#o#p@^#p;'S?l;'S;=`@v<%lO?l,U@aTOw@^wx,Xx;'S@^;'S;=`@p<%lO@^,U@sP;=`<%l@^,^@yP;=`<%l?l1aARX]&ZOY@|YZ@^Zw@|wx-tx#O@|#O#PAn#P;'S@|;'S;=`EX<%lO@|1aAqUOw@|wxBTx;'S@|;'S;=`Dg;=`<%lBt<%lO@|1aB[W$Z,U]&ZOYBtZwBtwx/px#OBt#O#PCc#P;'SBt;'S;=`Da<%lOBt&ZByW]&ZOYBtZwBtwx/px#OBt#O#PCc#P;'SBt;'S;=`Da<%lOBt&ZCfRO;'SBt;'S;=`Co;=`OBt&ZCtX]&ZOYBtZwBtwx/px#OBt#O#PCc#P;'SBt;'S;=`Da;=`<%lBt<%lOBt&ZDdP;=`<%lBt1aDlX]&ZOYBtZwBtwx/px#OBt#O#PCc#P;'SBt;'S;=`Da;=`<%l@|<%lOBt1aE[P;=`<%l@|1iEdY$`WOw>lwxFSx!^>l!^!_@|!_#o>l#o#p@|#p;'S>l;'S;=`Ik;=`<%lBt<%lO>l1iF]]$Z,U$`W]&ZOYGUYZ%ZZwGUwx4hx!^GU!^!_Bt!_#OGU#O#PHU#P#oGU#o#pBt#p;'SGU;'S;=`Ie<%lOGU&cG]]$`W]&ZOYGUYZ%ZZwGUwx4hx!^GU!^!_Bt!_#OGU#O#PHU#P#oGU#o#pBt#p;'SGU;'S;=`Ie<%lOGU&cHZW$`WO!^GU!^!_Bt!_#oGU#o#pBt#p;'SGU;'S;=`Hs;=`<%lBt<%lOGU&cHxX]&ZOYBtZwBtwx/px#OBt#O#PCc#P;'SBt;'S;=`Da;=`<%lGU<%lOBt&cIhP;=`<%lGU1iIpX]&ZOYBtZwBtwx/px#OBt#O#PCc#P;'SBt;'S;=`Da;=`<%l>l<%lOBt1iJ`P;=`<%l>l,TJjT!f+{$`WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z$PKQT!e#w$`WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z)ZKjW$`W'k#e#f&lOz%Zz{LS{!^%Z!_!`<z!`#o%Z#p;'S%Z;'S;=`%o<%lO%Z&tLZU$`W#c&lO!^%Z!_!`<z!`#o%Z#p;'S%Z;'S;=`%o<%lO%Z*qLtU$`Wk*iO!^%Z!_!`<z!`#o%Z#p;'S%Z;'S;=`%o<%lO%Z,TM_T!T+{$`WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z,TMuX$`Wx(dO!O%Z!O!PNb!P!Q%Z!Q![! d![!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z$oNgV$`WO!O%Z!O!PN|!P!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z$o! TT!S$g$`WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z&c! k]$`Wl&ZO!Q%Z!Q![! d![!^%Z!_!g%Z!g!h!!d!h#R%Z#R#S! d#S#X%Z#X#Y!!d#Y#o%Z#p;'S%Z;'S;=`%o<%lO%Z&c!!i]$`WO{%Z{|!#b|}%Z}!O!#b!O!Q%Z!Q![!$S![!^%Z!_#R%Z#R#S!$S#S#o%Z#p;'S%Z;'S;=`%o<%lO%Z&c!#gX$`WO!Q%Z!Q![!$S![!^%Z!_#R%Z#R#S!$S#S#o%Z#p;'S%Z;'S;=`%o<%lO%Z&c!$ZX$`Wl&ZO!Q%Z!Q![!$S![!^%Z!_#R%Z#R#S!$S#S#o%Z#p;'S%Z;'S;=`%o<%lO%Z7Z!$}b$`W#d&lOY!&VYZ%ZZz!&Vz{!-n{!P!&V!P!Q!BV!Q!^!&V!^!_!(f!_!`!Ch!`!a!Dm!a!}!&V!}#O!+T#O#P!,v#P#o!&V#o#p!(f#p;'S!&V;'S;=`!-h<%lO!&VX!&^^$`W!PPOY!&VYZ%ZZ!P!&V!P!Q!'Y!Q!^!&V!^!_!(f!_!}!&V!}#O!+T#O#P!,v#P#o!&V#o#p!(f#p;'S!&V;'S;=`!-h<%lO!&VX!'aa$`W!PPO!^%Z!_#Z%Z#Z#[!'Y#[#]%Z#]#^!'Y#^#a%Z#a#b!'Y#b#g%Z#g#h!'Y#h#i%Z#i#j!'Y#j#m%Z#m#n!'Y#n#o%Z#p;'S%Z;'S;=`%o<%lO%ZP!(kX!PPOY!(fZ!P!(f!P!Q!)W!Q!}!(f!}#O!)o#O#P!*n#P;'S!(f;'S;=`!*}<%lO!(fP!)]U!PP#Z#[!)W#]#^!)W#a#b!)W#g#h!)W#i#j!)W#m#n!)WP!)rVOY!)oZ#O!)o#O#P!*X#P#Q!(f#Q;'S!)o;'S;=`!*h<%lO!)oP!*[SOY!)oZ;'S!)o;'S;=`!*h<%lO!)oP!*kP;=`<%l!)oP!*qSOY!(fZ;'S!(f;'S;=`!*}<%lO!(fP!+QP;=`<%l!(fX!+Y[$`WOY!+TYZ%ZZ!^!+T!^!_!)o!_#O!+T#O#P!,O#P#Q!&V#Q#o!+T#o#p!)o#p;'S!+T;'S;=`!,p<%lO!+TX!,TX$`WOY!+TYZ%ZZ!^!+T!^!_!)o!_#o!+T#o#p!)o#p;'S!+T;'S;=`!,p<%lO!+TX!,sP;=`<%l!+TX!,{X$`WOY!&VYZ%ZZ!^!&V!^!_!(f!_#o!&V#o#p!(f#p;'S!&V;'S;=`!-h<%lO!&VX!-kP;=`<%l!&V7Z!-u`$`W!PPOY!-nYZ!.wZz!-nz{!2U{!P!-n!P!Q!@m!Q!^!-n!^!_!4m!_!}!-n!}#O!;l#O#P!?o#P#o!-n#o#p!4m#p;'S!-n;'S;=`!@g<%lO!-n7Z!.|X$`WOz!.wz{!/i{!^!.w!^!_!0w!_#o!.w#o#p!0w#p;'S!.w;'S;=`!2O<%lO!.w7Z!/nZ$`WOz!.wz{!/i{!P!.w!P!Q!0a!Q!^!.w!^!_!0w!_#o!.w#o#p!0w#p;'S!.w;'S;=`!2O<%lO!.w7Z!0hT$`WU7RO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z7R!0zTOz!0wz{!1Z{;'S!0w;'S;=`!1x<%lO!0w7R!1^VOz!0wz{!1Z{!P!0w!P!Q!1s!Q;'S!0w;'S;=`!1x<%lO!0w7R!1xOU7R7R!1{P;=`<%l!0w7Z!2RP;=`<%l!.w7Z!2]`$`W!PPOY!-nYZ!.wZz!-nz{!2U{!P!-n!P!Q!3_!Q!^!-n!^!_!4m!_!}!-n!}#O!;l#O#P!?o#P#o!-n#o#p!4m#p;'S!-n;'S;=`!@g<%lO!-n7Z!3ha$`WU7R!PPO!^%Z!_#Z%Z#Z#[!'Y#[#]%Z#]#^!'Y#^#a%Z#a#b!'Y#b#g%Z#g#h!'Y#h#i%Z#i#j!'Y#j#m%Z#m#n!'Y#n#o%Z#p;'S%Z;'S;=`%o<%lO%Z7R!4r[!PPOY!4mYZ!0wZz!4mz{!5h{!P!4m!P!Q!:b!Q!}!4m!}#O!6|#O#P!9r#P;'S!4m;'S;=`!:[<%lO!4m7R!5m[!PPOY!4mYZ!0wZz!4mz{!5h{!P!4m!P!Q!6c!Q!}!4m!}#O!6|#O#P!9r#P;'S!4m;'S;=`!:[<%lO!4m7R!6jUU7R!PP#Z#[!)W#]#^!)W#a#b!)W#g#h!)W#i#j!)W#m#n!)W7R!7PYOY!6|YZ!0wZz!6|z{!7o{#O!6|#O#P!9S#P#Q!4m#Q;'S!6|;'S;=`!9l<%lO!6|7R!7r[OY!6|YZ!0wZz!6|z{!7o{!P!6|!P!Q!8h!Q#O!6|#O#P!9S#P#Q!4m#Q;'S!6|;'S;=`!9l<%lO!6|7R!8mVU7ROY!)oZ#O!)o#O#P!*X#P#Q!(f#Q;'S!)o;'S;=`!*h<%lO!)o7R!9VVOY!6|YZ!0wZz!6|z{!7o{;'S!6|;'S;=`!9l<%lO!6|7R!9oP;=`<%l!6|7R!9uVOY!4mYZ!0wZz!4mz{!5h{;'S!4m;'S;=`!:[<%lO!4m7R!:_P;=`<%l!4m7R!:ga!PPOz!0wz{!1Z{#Z!0w#Z#[!:b#[#]!0w#]#^!:b#^#a!0w#a#b!:b#b#g!0w#g#h!:b#h#i!0w#i#j!:b#j#m!0w#m#n!:b#n;'S!0w;'S;=`!1x<%lO!0w7Z!;q^$`WOY!;lYZ!.wZz!;lz{!<m{!^!;l!^!_!6|!_#O!;l#O#P!>q#P#Q!-n#Q#o!;l#o#p!6|#p;'S!;l;'S;=`!?i<%lO!;l7Z!<r`$`WOY!;lYZ!.wZz!;lz{!<m{!P!;l!P!Q!=t!Q!^!;l!^!_!6|!_#O!;l#O#P!>q#P#Q!-n#Q#o!;l#o#p!6|#p;'S!;l;'S;=`!?i<%lO!;l7Z!={[$`WU7ROY!+TYZ%ZZ!^!+T!^!_!)o!_#O!+T#O#P!,O#P#Q!&V#Q#o!+T#o#p!)o#p;'S!+T;'S;=`!,p<%lO!+T7Z!>vZ$`WOY!;lYZ!.wZz!;lz{!<m{!^!;l!^!_!6|!_#o!;l#o#p!6|#p;'S!;l;'S;=`!?i<%lO!;l7Z!?lP;=`<%l!;l7Z!?tZ$`WOY!-nYZ!.wZz!-nz{!2U{!^!-n!^!_!4m!_#o!-n#o#p!4m#p;'S!-n;'S;=`!@g<%lO!-n7Z!@jP;=`<%l!-n7Z!@te$`W!PPOz!.wz{!/i{!^!.w!^!_!0w!_#Z!.w#Z#[!@m#[#]!.w#]#^!@m#^#a!.w#a#b!@m#b#g!.w#g#h!@m#h#i!.w#i#j!@m#j#m!.w#m#n!@m#n#o!.w#o#p!0w#p;'S!.w;'S;=`!2O<%lO!.w7Z!B^X$`WT7ROY!BVYZ%ZZ!^!BV!^!_!By!_#o!BV#o#p!By#p;'S!BV;'S;=`!Cb<%lO!BV7R!COST7ROY!ByZ;'S!By;'S;=`!C[<%lO!By7R!C_P;=`<%l!By7Z!CeP;=`<%l!BV&u!Cq^$`W#w&l!PPOY!&VYZ%ZZ!P!&V!P!Q!'Y!Q!^!&V!^!_!(f!_!}!&V!}#O!+T#O#P!,v#P#o!&V#o#p!(f#p;'S!&V;'S;=`!-h<%lO!&V]!Dv^$PS$`W!PPOY!&VYZ%ZZ!P!&V!P!Q!'Y!Q!^!&V!^!_!(f!_!}!&V!}#O!+T#O#P!,v#P#o!&V#o#p!(f#p;'S!&V;'S;=`!-h<%lO!&V&c!Eyf$`Wl&ZO!O%Z!O!P! d!P!Q%Z!Q![!G_![!^%Z!_!g%Z!g!h!!d!h#R%Z#R#S!G_#S#U%Z#U#V!IR#V#X%Z#X#Y!!d#Y#b%Z#b#c!Hk#c#d!Js#d#l%Z#l#m!L_#m#o%Z#p;'S%Z;'S;=`%o<%lO%Z&c!Gfa$`Wl&ZO!O%Z!O!P! d!P!Q%Z!Q![!G_![!^%Z!_!g%Z!g!h!!d!h#R%Z#R#S!G_#S#X%Z#X#Y!!d#Y#b%Z#b#c!Hk#c#o%Z#p;'S%Z;'S;=`%o<%lO%Z&c!HrT$`Wl&ZO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z&c!IWY$`WO!Q%Z!Q!R!Iv!R!S!Iv!S!^%Z!_#R%Z#R#S!Iv#S#o%Z#p;'S%Z;'S;=`%o<%lO%Z&c!I}[$`Wl&ZO!Q%Z!Q!R!Iv!R!S!Iv!S!^%Z!_#R%Z#R#S!Iv#S#b%Z#b#c!Hk#c#o%Z#p;'S%Z;'S;=`%o<%lO%Z&c!JxX$`WO!Q%Z!Q!Y!Ke!Y!^%Z!_#R%Z#R#S!Ke#S#o%Z#p;'S%Z;'S;=`%o<%lO%Z&c!KlZ$`Wl&ZO!Q%Z!Q!Y!Ke!Y!^%Z!_#R%Z#R#S!Ke#S#b%Z#b#c!Hk#c#o%Z#p;'S%Z;'S;=`%o<%lO%Z&c!Ld]$`WO!Q%Z!Q![!M]![!^%Z!_!c%Z!c!i!M]!i#R%Z#R#S!M]#S#T%Z#T#Z!M]#Z#o%Z#p;'S%Z;'S;=`%o<%lO%Z&c!Md_$`Wl&ZO!Q%Z!Q![!M]![!^%Z!_!c%Z!c!i!M]!i#R%Z#R#S!M]#S#T%Z#T#Z!M]#Z#b%Z#b#c!Hk#c#o%Z#p;'S%Z;'S;=`%o<%lO%Z(m!NlT!_V$`W#u(^O!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z!P# ST_w$`WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z6i# nR'n$Y!c(O$Q,_(ZP!P!Q# w!^!_# |!_!`#!ZW# |O$bW&l#!RP#g&l!_!`#!U&l#!ZO#w&l&l#!`O#h&l(m#!gV#T(e$`WO!^%Z!_!`(l!`!a#!|!a#o%Z#p;'S%Z;'S;=`%o<%lO%Z&u##TT#`&m$`WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z(m##oVe!s#h&l$]S$`WO!^%Z!_!`#$U!`!a#$l!a#o%Z#p;'S%Z;'S;=`%o<%lO%Z&t#$]T#h&l$`WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z&t#$sV#g&l$`WO!^%Z!_!`<z!`!a#%Y!a#o%Z#p;'S%Z;'S;=`%o<%lO%Z&t#%aU#g&l$`WO!^%Z!_!`<z!`#o%Z#p;'S%Z;'S;=`%o<%lO%Z(m#%zX'}&q$`WO!O%Z!O!P#&g!P!^%Z!_!a%Z!a!b#&}!b#o%Z#p;'S%Z;'S;=`%o<%lO%Z(i#&nTy(a$`WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z&t#'UU$`W#r&lO!^%Z!_!`<z!`#o%Z#p;'S%Z;'S;=`%o<%lO%Z#_#'oT!u#V$`WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z,P#(VT{+w$`WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z$P#(mT!Q#w$`WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z&t#)TU#o&l$`WO!^%Z!_!`<z!`#o%Z#p;'S%Z;'S;=`%o<%lO%Z){#)nT$`W'r)sO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z,T#*Ya$`W's#S'j)s$USOt%Ztu#)}u}%Z}!O#+_!O!Q%Z!Q![#)}![!^%Z!_!c%Z!c!}#)}!}#R%Z#R#S#)}#S#T%Z#T#o#)}#p$g%Z$g;'S#)};'S;=`#,q<%lO#)}[#+fa$`W$USOt%Ztu#+_u}%Z}!O#+_!O!Q%Z!Q![#+_![!^%Z!_!c%Z!c!}#+_!}#R%Z#R#S#+_#S#T%Z#T#o#+_#p$g%Z$g;'S#+_;'S;=`#,k<%lO#+_[#,nP;=`<%l#+_,T#,tP;=`<%l#)}~#,|O!V~(h#-TV(U(`$`WO!^%Z!_!`<z!`#o%Z#p#q#&}#q;'S%Z;'S;=`%o<%lO%Z(}#-sT!U(soQ$`WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%ZX#.ZT!mP$`WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z7Z#.wt$`W'g7R's#S'j)s$SSOX%ZXY%uYZ%ZZ[%u[p%Zpq%uqt%Ztu9gu}%Z}!O:w!O!Q%Z!Q![9g![!^%Z!_!c%Z!c!}9g!}#R%Z#R#S9g#S#T%Z#T#o9g#p$f%Z$f$g%u$g#BY9g#BY#BZ#.j#BZ$IS9g$IS$I_#.j$I_$JT9g$JT$JU#.j$JU$KV9g$KV$KW#.j$KW&FU9g&FU&FV#.j&FV;'S9g;'S;=`<Z<%l?HT9g?HT?HU#.j?HUO9g7Z#1fa$`W'h7R's#S'j)s$SSOt%Ztu9gu}%Z}!O:w!O!Q%Z!Q![9g![!^%Z!_!c%Z!c!}9g!}#R%Z#R#S9g#S#T%Z#T#o9g#p$g%Z$g;'S9g;'S;=`<Z<%lO9g",tokenizers:[x4,v4,w4,_4,0,1,2,3,4,5,6,7,8,9,b4],topRules:{Script:[0,7],SingleExpression:[1,263]},dialects:{jsx:13404,ts:13406},dynamicPrecedences:{159:1,187:1},specialized:[{term:302,get:n=>k4[n]||-1},{term:311,get:n=>T4[n]||-1},{term:65,get:n=>E4[n]||-1}],tokenPrec:13429}),A4=[Qr("function ${name}(${params}) {\n	${}\n}",{label:"function",detail:"definition",type:"keyword"}),Qr("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n	${}\n}",{label:"for",detail:"loop",type:"keyword"}),Qr("for (let ${name} of ${collection}) {\n	${}\n}",{label:"for",detail:"of loop",type:"keyword"}),Qr("do {\n	${}\n} while (${})",{label:"do",detail:"loop",type:"keyword"}),Qr("while (${}) {\n	${}\n}",{label:"while",detail:"loop",type:"keyword"}),Qr(`try {
	\${}
} catch (\${error}) {
	\${}
}`,{label:"try",detail:"/ catch block",type:"keyword"}),Qr("if (${}) {\n	${}\n}",{label:"if",detail:"block",type:"keyword"}),Qr(`if (\${}) {
	\${}
} else {
	\${}
}`,{label:"if",detail:"/ else block",type:"keyword"}),Qr(`class \${name} {
	constructor(\${params}) {
		\${}
	}
}`,{label:"class",detail:"definition",type:"keyword"}),Qr('import {${names}} from "${module}"\n${}',{label:"import",detail:"named",type:"keyword"}),Qr('import ${name} from "${module}"\n${}',{label:"import",detail:"default",type:"keyword"})],k1=new u3,jC=new Set(["Script","Block","FunctionExpression","FunctionDeclaration","ArrowFunction","MethodDeclaration","ForStatement"]);function ll(n){return(e,t)=>{let r=e.node.getChild("VariableDefinition");return r&&t(r,n),!0}}const P4=["FunctionDeclaration"],R4={FunctionDeclaration:ll("function"),ClassDeclaration:ll("class"),ClassExpression:()=>!0,EnumDeclaration:ll("constant"),TypeAliasDeclaration:ll("type"),NamespaceDeclaration:ll("namespace"),VariableDefinition(n,e){n.matchContext(P4)||e(n,"variable")},TypeDefinition(n,e){e(n,"type")},__proto__:null};function qC(n,e){let t=k1.get(e);if(t)return t;let r=[],i=!0;function s(o,a){let l=n.sliceString(o.from,o.to);r.push({label:l,type:a})}return e.cursor(Mt.IncludeAnonymous).iterate(o=>{if(i)i=!1;else if(o.name){let a=R4[o.name];if(a&&a(o,s)||jC.has(o.name))return!1}else if(o.to-o.from>8192){for(let a of qC(n,o.node))r.push(a);return!1}}),k1.set(e,r),r}const T1=/^[\w$\xa1-\uffff][\w$\d\xa1-\uffff]*$/,XC=["TemplateString","String","RegExp","LineComment","BlockComment","VariableDefinition","TypeDefinition","Label","PropertyDefinition","PropertyName","PrivatePropertyDefinition","PrivatePropertyName"];function I4(n){let e=an(n.state).resolveInner(n.pos,-1);if(XC.indexOf(e.name)>-1)return null;let t=e.name=="VariableName"||e.to-e.from<20&&T1.test(n.state.sliceDoc(e.from,e.to));if(!t&&!n.explicit)return null;let r=[];for(let i=e;i;i=i.parent)jC.has(i.name)&&(r=r.concat(qC(n.state.doc,i)));return{options:r,from:t?e.from:n.pos,validFor:T1}}const $i=pa.define({name:"javascript",parser:C4.configure({props:[$c.add({IfStatement:fh({except:/^\s*({|else\b)/}),TryStatement:fh({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:D3,SwitchBody:n=>{let e=n.textAfter,t=/^\s*\}/.test(e),r=/^\s*(case|default)\b/.test(e);return n.baseIndent+(t?0:r?1:2)*n.unit},Block:L3({closing:"}"}),ArrowFunction:n=>n.baseIndent+n.unit,"TemplateString BlockComment":()=>null,"Statement Property":fh({except:/^{/}),JSXElement(n){let e=/^\s*<\//.test(n.textAfter);return n.lineIndent(n.node.from)+(e?0:n.unit)},JSXEscape(n){let e=/\s*\}/.test(n.textAfter);return n.lineIndent(n.node.from)+(e?0:n.unit)},"JSXOpenTag JSXSelfClosingTag"(n){return n.column(n.node.from)+n.unit}}),nd.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression":SE,BlockComment(n){return{from:n.from+2,to:n.to-2}}})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}}),zC=$i.configure({dialect:"ts"},"typescript"),HC=$i.configure({dialect:"jsx"}),ZC=$i.configure({dialect:"jsx ts"},"typescript"),Q4="break case const continue default delete export extends false finally in instanceof let new return static super switch this throw true typeof var yield".split(" ").map(n=>({label:n,type:"keyword"}));function N4(n={}){let e=n.jsx?n.typescript?ZC:HC:n.typescript?zC:$i;return new ic(e,[$i.data.of({autocomplete:aU(XC,oU(A4.concat(Q4)))}),$i.data.of({autocomplete:I4}),n.jsx?D4:[]])}function E1(n,e,t=n.length){if(!e)return"";let r=e.getChild("JSXIdentifier");return r?n.sliceString(r.from,Math.min(r.to,t)):""}const L4=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),D4=Xe.inputHandler.of((n,e,t,r)=>{if((L4?n.composing:n.compositionStarted)||n.state.readOnly||e!=t||r!=">"&&r!="/"||!$i.isActiveAt(n.state,e,-1))return!1;let{state:i}=n,s=i.changeByRange(o=>{var a,l,c;let{head:u}=o,h=an(i).resolveInner(u,-1),f;if(h.name=="JSXStartTag"&&(h=h.parent),r==">"&&h.name=="JSXFragmentTag")return{range:Oe.cursor(u+1),changes:{from:u,insert:"><>"}};if(r==">"&&h.name=="JSXIdentifier"){if(((l=(a=h.parent)===null||a===void 0?void 0:a.lastChild)===null||l===void 0?void 0:l.name)!="JSXEndTag"&&(f=E1(i.doc,h.parent,u)))return{range:Oe.cursor(u+1),changes:{from:u,insert:`></${f}>`}}}else if(r=="/"&&h.name=="JSXFragmentTag"){let p=h.parent,d=p==null?void 0:p.parent;if(p.from==u-1&&((c=d.lastChild)===null||c===void 0?void 0:c.name)!="JSXEndTag"&&(f=E1(i.doc,d==null?void 0:d.firstChild,u))){let m=`/${f}>`;return{range:Oe.cursor(u+m.length),changes:{from:u,insert:m}}}}return{range:o}});return s.changes.empty?!1:(n.dispatch(s,{userEvent:"input.type",scrollIntoView:!0}),!0)}),cl=["_blank","_self","_top","_parent"],sm=["ascii","utf-8","utf-16","latin1","latin1"],om=["get","post","put","delete"],am=["application/x-www-form-urlencoded","multipart/form-data","text/plain"],rr=["true","false"],Ue={},M4={a:{attrs:{href:null,ping:null,type:null,media:null,target:cl,hreflang:null}},abbr:Ue,address:Ue,area:{attrs:{alt:null,coords:null,href:null,target:null,ping:null,media:null,hreflang:null,type:null,shape:["default","rect","circle","poly"]}},article:Ue,aside:Ue,audio:{attrs:{src:null,mediagroup:null,crossorigin:["anonymous","use-credentials"],preload:["none","metadata","auto"],autoplay:["autoplay"],loop:["loop"],controls:["controls"]}},b:Ue,base:{attrs:{href:null,target:cl}},bdi:Ue,bdo:Ue,blockquote:{attrs:{cite:null}},body:Ue,br:Ue,button:{attrs:{form:null,formaction:null,name:null,value:null,autofocus:["autofocus"],disabled:["autofocus"],formenctype:am,formmethod:om,formnovalidate:["novalidate"],formtarget:cl,type:["submit","reset","button"]}},canvas:{attrs:{width:null,height:null}},caption:Ue,center:Ue,cite:Ue,code:Ue,col:{attrs:{span:null}},colgroup:{attrs:{span:null}},command:{attrs:{type:["command","checkbox","radio"],label:null,icon:null,radiogroup:null,command:null,title:null,disabled:["disabled"],checked:["checked"]}},data:{attrs:{value:null}},datagrid:{attrs:{disabled:["disabled"],multiple:["multiple"]}},datalist:{attrs:{data:null}},dd:Ue,del:{attrs:{cite:null,datetime:null}},details:{attrs:{open:["open"]}},dfn:Ue,div:Ue,dl:Ue,dt:Ue,em:Ue,embed:{attrs:{src:null,type:null,width:null,height:null}},eventsource:{attrs:{src:null}},fieldset:{attrs:{disabled:["disabled"],form:null,name:null}},figcaption:Ue,figure:Ue,footer:Ue,form:{attrs:{action:null,name:null,"accept-charset":sm,autocomplete:["on","off"],enctype:am,method:om,novalidate:["novalidate"],target:cl}},h1:Ue,h2:Ue,h3:Ue,h4:Ue,h5:Ue,h6:Ue,head:{children:["title","base","link","style","meta","script","noscript","command"]},header:Ue,hgroup:Ue,hr:Ue,html:{attrs:{manifest:null}},i:Ue,iframe:{attrs:{src:null,srcdoc:null,name:null,width:null,height:null,sandbox:["allow-top-navigation","allow-same-origin","allow-forms","allow-scripts"],seamless:["seamless"]}},img:{attrs:{alt:null,src:null,ismap:null,usemap:null,width:null,height:null,crossorigin:["anonymous","use-credentials"]}},input:{attrs:{alt:null,dirname:null,form:null,formaction:null,height:null,list:null,max:null,maxlength:null,min:null,name:null,pattern:null,placeholder:null,size:null,src:null,step:null,value:null,width:null,accept:["audio/*","video/*","image/*"],autocomplete:["on","off"],autofocus:["autofocus"],checked:["checked"],disabled:["disabled"],formenctype:am,formmethod:om,formnovalidate:["novalidate"],formtarget:cl,multiple:["multiple"],readonly:["readonly"],required:["required"],type:["hidden","text","search","tel","url","email","password","datetime","date","month","week","time","datetime-local","number","range","color","checkbox","radio","file","submit","image","reset","button"]}},ins:{attrs:{cite:null,datetime:null}},kbd:Ue,keygen:{attrs:{challenge:null,form:null,name:null,autofocus:["autofocus"],disabled:["disabled"],keytype:["RSA"]}},label:{attrs:{for:null,form:null}},legend:Ue,li:{attrs:{value:null}},link:{attrs:{href:null,type:null,hreflang:null,media:null,sizes:["all","16x16","16x16 32x32","16x16 32x32 64x64"]}},map:{attrs:{name:null}},mark:Ue,menu:{attrs:{label:null,type:["list","context","toolbar"]}},meta:{attrs:{content:null,charset:sm,name:["viewport","application-name","author","description","generator","keywords"],"http-equiv":["content-language","content-type","default-style","refresh"]}},meter:{attrs:{value:null,min:null,low:null,high:null,max:null,optimum:null}},nav:Ue,noscript:Ue,object:{attrs:{data:null,type:null,name:null,usemap:null,form:null,width:null,height:null,typemustmatch:["typemustmatch"]}},ol:{attrs:{reversed:["reversed"],start:null,type:["1","a","A","i","I"]},children:["li","script","template","ul","ol"]},optgroup:{attrs:{disabled:["disabled"],label:null}},option:{attrs:{disabled:["disabled"],label:null,selected:["selected"],value:null}},output:{attrs:{for:null,form:null,name:null}},p:Ue,param:{attrs:{name:null,value:null}},pre:Ue,progress:{attrs:{value:null,max:null}},q:{attrs:{cite:null}},rp:Ue,rt:Ue,ruby:Ue,samp:Ue,script:{attrs:{type:["text/javascript"],src:null,async:["async"],defer:["defer"],charset:sm}},section:Ue,select:{attrs:{form:null,name:null,size:null,autofocus:["autofocus"],disabled:["disabled"],multiple:["multiple"]}},slot:{attrs:{name:null}},small:Ue,source:{attrs:{src:null,type:null,media:null}},span:Ue,strong:Ue,style:{attrs:{type:["text/css"],media:null,scoped:null}},sub:Ue,summary:Ue,sup:Ue,table:Ue,tbody:Ue,td:{attrs:{colspan:null,rowspan:null,headers:null}},template:Ue,textarea:{attrs:{dirname:null,form:null,maxlength:null,name:null,placeholder:null,rows:null,cols:null,autofocus:["autofocus"],disabled:["disabled"],readonly:["readonly"],required:["required"],wrap:["soft","hard"]}},tfoot:Ue,th:{attrs:{colspan:null,rowspan:null,headers:null,scope:["row","col","rowgroup","colgroup"]}},thead:Ue,time:{attrs:{datetime:null}},title:Ue,tr:Ue,track:{attrs:{src:null,label:null,default:null,kind:["subtitles","captions","descriptions","chapters","metadata"],srclang:null}},ul:{children:["li","script","template","ul","ol"]},var:Ue,video:{attrs:{src:null,poster:null,width:null,height:null,crossorigin:["anonymous","use-credentials"],preload:["auto","metadata","none"],autoplay:["autoplay"],mediagroup:["movie"],muted:["muted"],controls:["controls"]}},wbr:Ue},$4={accesskey:null,class:null,contenteditable:rr,contextmenu:null,dir:["ltr","rtl","auto"],draggable:["true","false","auto"],dropzone:["copy","move","link","string:","file:"],hidden:["hidden"],id:null,inert:["inert"],itemid:null,itemprop:null,itemref:null,itemscope:["itemscope"],itemtype:null,lang:["ar","bn","de","en-GB","en-US","es","fr","hi","id","ja","pa","pt","ru","tr","zh"],spellcheck:rr,autocorrect:rr,autocapitalize:rr,style:null,tabindex:null,title:null,translate:["yes","no"],onclick:null,rel:["stylesheet","alternate","author","bookmark","help","license","next","nofollow","noreferrer","prefetch","prev","search","tag"],role:"alert application article banner button cell checkbox complementary contentinfo dialog document feed figure form grid gridcell heading img list listbox listitem main navigation region row rowgroup search switch tab table tabpanel textbox timer".split(" "),"aria-activedescendant":null,"aria-atomic":rr,"aria-autocomplete":["inline","list","both","none"],"aria-busy":rr,"aria-checked":["true","false","mixed","undefined"],"aria-controls":null,"aria-describedby":null,"aria-disabled":rr,"aria-dropeffect":null,"aria-expanded":["true","false","undefined"],"aria-flowto":null,"aria-grabbed":["true","false","undefined"],"aria-haspopup":rr,"aria-hidden":rr,"aria-invalid":["true","false","grammar","spelling"],"aria-label":null,"aria-labelledby":null,"aria-level":null,"aria-live":["off","polite","assertive"],"aria-multiline":rr,"aria-multiselectable":rr,"aria-owns":null,"aria-posinset":null,"aria-pressed":["true","false","mixed","undefined"],"aria-readonly":rr,"aria-relevant":null,"aria-required":rr,"aria-selected":["true","false","undefined"],"aria-setsize":null,"aria-sort":["ascending","descending","none","other"],"aria-valuemax":null,"aria-valuemin":null,"aria-valuenow":null,"aria-valuetext":null};class ff{constructor(e,t){this.tags=Object.assign(Object.assign({},M4),e),this.globalAttrs=Object.assign(Object.assign({},$4),t),this.allTags=Object.keys(this.tags),this.globalAttrNames=Object.keys(this.globalAttrs)}}ff.default=new ff;function ba(n,e,t=n.length){if(!e)return"";let r=e.firstChild,i=r&&r.getChild("TagName");return i?n.sliceString(i.from,Math.min(i.to,t)):""}function ud(n,e=!1){for(let t=n.parent;t;t=t.parent)if(t.name=="Element")if(e)e=!1;else return t;return null}function GC(n,e,t){let r=t.tags[ba(n,ud(e,!0))];return(r==null?void 0:r.children)||t.allTags}function Fy(n,e){let t=[];for(let r=e;r=ud(r);){let i=ba(n,r);if(i&&r.lastChild.name=="CloseTag")break;i&&t.indexOf(i)<0&&(e.name=="EndTag"||e.from>=r.firstChild.to)&&t.push(i)}return t}const YC=/^[:\-\.\w\u00b7-\uffff]*$/;function C1(n,e,t,r,i){let s=/\s*>/.test(n.sliceDoc(i,i+5))?"":">";return{from:r,to:i,options:GC(n.doc,t,e).map(o=>({label:o,type:"type"})).concat(Fy(n.doc,t).map((o,a)=>({label:"/"+o,apply:"/"+o+s,type:"type",boost:99-a}))),validFor:/^\/?[:\-\.\w\u00b7-\uffff]*$/}}function A1(n,e,t,r){let i=/\s*>/.test(n.sliceDoc(r,r+5))?"":">";return{from:t,to:r,options:Fy(n.doc,e).map((s,o)=>({label:s,apply:s+i,type:"type",boost:99-o})),validFor:YC}}function B4(n,e,t,r){let i=[],s=0;for(let o of GC(n.doc,t,e))i.push({label:"<"+o,type:"type"});for(let o of Fy(n.doc,t))i.push({label:"</"+o+">",type:"type",boost:99-s++});return{from:r,to:r,options:i,validFor:/^<\/?[:\-\.\w\u00b7-\uffff]*$/}}function F4(n,e,t,r,i){let s=ud(t),o=s?e.tags[ba(n.doc,s)]:null,a=o&&o.attrs?Object.keys(o.attrs).concat(e.globalAttrNames):e.globalAttrNames;return{from:r,to:i,options:a.map(l=>({label:l,type:"property"})),validFor:YC}}function U4(n,e,t,r,i){var s;let o=(s=t.parent)===null||s===void 0?void 0:s.getChild("AttributeName"),a=[],l;if(o){let c=n.sliceDoc(o.from,o.to),u=e.globalAttrs[c];if(!u){let h=ud(t),f=h?e.tags[ba(n.doc,h)]:null;u=(f==null?void 0:f.attrs)&&f.attrs[c]}if(u){let h=n.sliceDoc(r,i).toLowerCase(),f='"',p='"';/^['"]/.test(h)?(l=h[0]=='"'?/^[^"]*$/:/^[^']*$/,f="",p=n.sliceDoc(i,i+1)==h[0]?"":h[0],h=h.slice(1),r++):l=/^[^\s<>='"]*$/;for(let d of u)a.push({label:d,apply:f+d+p,type:"constant"})}}return{from:r,to:i,options:a,validFor:l}}function V4(n,e){let{state:t,pos:r}=e,i=an(t).resolveInner(r),s=i.resolve(r,-1);for(let o=r,a;i==s&&(a=s.childBefore(o));){let l=a.lastChild;if(!l||!l.type.isError||l.from<l.to)break;i=s=a,o=l.from}return s.name=="TagName"?s.parent&&/CloseTag$/.test(s.parent.name)?A1(t,s,s.from,r):C1(t,n,s,s.from,r):s.name=="StartTag"?C1(t,n,s,r,r):s.name=="StartCloseTag"||s.name=="IncompleteCloseTag"?A1(t,s,r,r):e.explicit&&(s.name=="OpenTag"||s.name=="SelfClosingTag")||s.name=="AttributeName"?F4(t,n,s,s.name=="AttributeName"?s.from:r,r):s.name=="Is"||s.name=="AttributeValue"||s.name=="UnquotedAttributeValue"?U4(t,n,s,s.name=="Is"?r:s.from,r):e.explicit&&(i.name=="Element"||i.name=="Text"||i.name=="Document")?B4(t,n,s,r):null}function W4(n){let{extraTags:e,extraGlobalAttributes:t}=n,r=t||e?new ff(e,t):ff.default;return i=>V4(r,i)}const KC=[{tag:"script",attrs:n=>n.type=="text/typescript"||n.lang=="ts",parser:zC.parser},{tag:"script",attrs:n=>n.type=="text/babel"||n.type=="text/jsx",parser:HC.parser},{tag:"script",attrs:n=>n.type=="text/typescript-jsx",parser:ZC.parser},{tag:"script",attrs(n){return!n.type||/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i.test(n.type)},parser:$i.parser},{tag:"style",attrs(n){return(!n.lang||n.lang=="css")&&(!n.type||/^(text\/)?(x-)?(stylesheet|css)$/i.test(n.type))},parser:hf.parser}],JC=[{name:"style",parser:hf.parser.configure({top:"Styles"})}].concat("beforeunload copy cut dragstart dragover dragleave dragenter dragend drag paste focus blur change click load mousedown mouseenter mouseleave mouseup keydown keyup resize scroll unload".split(" ").map(n=>({name:"on"+n,parser:$i.parser}))),gh=pa.define({name:"html",parser:R6.configure({props:[$c.add({Element(n){let e=/^(\s*)(<\/)?/.exec(n.textAfter);return n.node.to<=n.pos+e[0].length?n.continue():n.lineIndent(n.node.from)+(e[2]?0:n.unit)},"OpenTag CloseTag SelfClosingTag"(n){return n.column(n.node.from)+n.unit},Document(n){if(n.pos+/\s*/.exec(n.textAfter)[0].length<n.node.to)return n.continue();let e=null,t;for(let r=n.node;;){let i=r.lastChild;if(!i||i.name!="Element"||i.to!=r.to)break;e=r=i}return e&&!((t=e.lastChild)&&(t.name=="CloseTag"||t.name=="SelfClosingTag"))?n.lineIndent(e.from)+n.unit:null}}),nd.add({Element(n){let e=n.firstChild,t=n.lastChild;return!e||e.name!="OpenTag"?null:{from:e.to,to:t.name=="CloseTag"?t.from:n.to}}})],wrap:FC(KC,JC)}),languageData:{commentTokens:{block:{open:"<!--",close:"-->"}},indentOnInput:/^\s*<\/\w+\W$/,wordChars:"-._"}});function j4(n={}){let e="",t;n.matchClosingTags===!1&&(e="noMatch"),n.selfClosingTags===!0&&(e=(e?e+" ":"")+"selfClosing"),(n.nestedLanguages&&n.nestedLanguages.length||n.nestedAttributes&&n.nestedAttributes.length)&&(t=FC((n.nestedLanguages||[]).concat(KC),(n.nestedAttributes||[]).concat(JC)));let r=t||e?gh.configure({dialect:e,wrap:t}):gh;return new ic(r,[gh.data.of({autocomplete:W4(n)}),n.autoCloseTags!==!1?q4:[],N4().support,J6().support])}const q4=Xe.inputHandler.of((n,e,t,r)=>{if(n.composing||n.state.readOnly||e!=t||r!=">"&&r!="/"||!gh.isActiveAt(n.state,e,-1))return!1;let{state:i}=n,s=i.changeByRange(o=>{var a,l,c;let{head:u}=o,h=an(i).resolveInner(u,-1),f;if((h.name=="TagName"||h.name=="StartTag")&&(h=h.parent),r==">"&&h.name=="OpenTag"){if(((l=(a=h.parent)===null||a===void 0?void 0:a.lastChild)===null||l===void 0?void 0:l.name)!="CloseTag"&&(f=ba(i.doc,h.parent,u))){let p=n.state.doc.sliceString(u,u+1)===">",d=`${p?"":">"}</${f}>`;return{range:Oe.cursor(u+1),changes:{from:u+(p?1:0),insert:d}}}}else if(r=="/"&&h.name=="OpenTag"){let p=h.parent,d=p==null?void 0:p.parent;if(p.from==u-1&&((c=d.lastChild)===null||c===void 0?void 0:c.name)!="CloseTag"&&(f=ba(i.doc,d,u))){let m=n.state.doc.sliceString(u,u+1)===">",y=`/${f}${m?"":">"}`,w=u+y.length+(m?1:0);return{range:Oe.cursor(w),changes:{from:u,insert:y}}}}return{range:o}});return s.changes.empty?!1:(n.dispatch(s,{userEvent:"input.type",scrollIntoView:!0}),!0)}),eA=bE({block:{open:"<!--",close:"-->"}}),tA=QU.configure({props:[nd.add(n=>{if(!(!n.is("Block")||n.is("Document")))return(e,t)=>({from:t.doc.lineAt(e.from).to,to:e.to})}),$c.add({Document:()=>null}),da.add({Document:eA})]});function Uy(n){return new wr(eA,n,[],"markdown")}const X4=Uy(tA),z4=tA.configure([UU,WU,VU,jU]),nA=Uy(z4);function H4(n,e){return t=>{if(t&&n){let r=null;if(t=/\S*/.exec(t)[0],typeof n=="function"?r=n(t):r=Gh.matchLanguageName(n,t,!0),r instanceof Gh)return r.support?r.support.language.parser:rc.getSkippingParser(r.load());if(r)return r.parser}return e?e.parser:null}}class Uu{constructor(e,t,r,i,s,o,a){this.node=e,this.from=t,this.to=r,this.spaceBefore=i,this.spaceAfter=s,this.type=o,this.item=a}blank(e,t=!0){let r=this.spaceBefore+(this.node.name=="Blockquote"?">":"");if(e!=null){for(;r.length<e;)r+=" ";return r}else{for(let i=this.to-this.from-r.length-this.spaceAfter.length;i>0;i--)r+=" ";return r+(t?this.spaceAfter:"")}}marker(e,t){let r=this.node.name=="OrderedList"?String(+iA(this.item,e)[2]+t):"";return this.spaceBefore+r+this.type+this.spaceAfter}}function rA(n,e){let t=[];for(let i=n;i&&i.name!="Document";i=i.parent)(i.name=="ListItem"||i.name=="Blockquote"||i.name=="FencedCode")&&t.push(i);let r=[];for(let i=t.length-1;i>=0;i--){let s=t[i],o,a=e.lineAt(s.from),l=s.from-a.from;if(s.name=="FencedCode")r.push(new Uu(s,l,l,"","","",null));else if(s.name=="Blockquote"&&(o=/^[ \t]*>( ?)/.exec(a.text.slice(l))))r.push(new Uu(s,l,l+o[0].length,"",o[1],">",null));else if(s.name=="ListItem"&&s.parent.name=="OrderedList"&&(o=/^([ \t]*)\d+([.)])([ \t]*)/.exec(a.text.slice(l)))){let c=o[3],u=o[0].length;c.length>=4&&(c=c.slice(0,c.length-4),u-=4),r.push(new Uu(s.parent,l,l+u,o[1],c,o[2],s))}else if(s.name=="ListItem"&&s.parent.name=="BulletList"&&(o=/^([ \t]*)([-+*])([ \t]{1,4}\[[ xX]\])?([ \t]+)/.exec(a.text.slice(l)))){let c=o[4],u=o[0].length;c.length>4&&(c=c.slice(0,c.length-4),u-=4);let h=o[2];o[3]&&(h+=o[3].replace(/[xX]/," ")),r.push(new Uu(s.parent,l,l+u,o[1],c,h,s))}}return r}function iA(n,e){return/^(\s*)(\d+)(?=[.)])/.exec(e.sliceString(n.from,n.from+10))}function lm(n,e,t,r=0){for(let i=-1,s=n;;){if(s.name=="ListItem"){let a=iA(s,e),l=+a[2];if(i>=0){if(l!=i+1)return;t.push({from:s.from+a[1].length,to:s.from+a[0].length,insert:String(i+2+r)})}i=l}let o=s.nextSibling;if(!o)break;s=o}}const Z4=({state:n,dispatch:e})=>{let t=an(n),{doc:r}=n,i=null,s=n.changeByRange(o=>{if(!o.empty||!nA.isActiveAt(n,o.from))return i={range:o};let a=o.from,l=r.lineAt(a),c=rA(t.resolveInner(a,-1),r);for(;c.length&&c[c.length-1].from>a-l.from;)c.pop();if(!c.length)return i={range:o};let u=c[c.length-1];if(u.to-u.spaceAfter.length>a-l.from)return i={range:o};let h=a>=u.to-u.spaceAfter.length&&!/\S/.test(l.text.slice(u.to));if(u.item&&h)if(u.node.firstChild.to>=a||l.from>0&&!/[^\s>]/.test(r.lineAt(l.from-1).text)){let y=c.length>1?c[c.length-2]:null,w,b="";y&&y.item?(w=l.from+y.from,b=y.marker(r,1)):w=l.from+(y?y.to:0);let O=[{from:w,to:a,insert:b}];return u.node.name=="OrderedList"&&lm(u.item,r,O,-2),y&&y.node.name=="OrderedList"&&lm(y.item,r,O),{range:Oe.cursor(w+b.length),changes:O}}else{let y="";for(let w=0,b=c.length-2;w<=b;w++)y+=c[w].blank(w<b?c[w+1].from-y.length:null,w<b);return y+=n.lineBreak,{range:Oe.cursor(a+y.length),changes:{from:l.from,insert:y}}}if(u.node.name=="Blockquote"&&h&&l.from){let y=r.lineAt(l.from-1),w=/>\s*$/.exec(y.text);if(w&&w.index==u.from){let b=n.changes([{from:y.from+w.index,to:y.to},{from:l.from+u.from,to:l.to}]);return{range:o.map(b),changes:b}}}let f=[];u.node.name=="OrderedList"&&lm(u.item,r,f);let p=u.item&&u.item.from<l.from,d="";if(!p||/^[\s\d.)\-+*>]*/.exec(l.text)[0].length>=u.to)for(let y=0,w=c.length-1;y<=w;y++)d+=y==w&&!p?c[y].marker(r,1):c[y].blank(y<w?c[y+1].from-d.length:null);let m=a;for(;m>l.from&&/\s/.test(l.text.charAt(m-l.from-1));)m--;return d=n.lineBreak+d,f.push({from:m,to:a,insert:d}),{range:Oe.cursor(m+d.length),changes:f}});return i?!1:(e(n.update(s,{scrollIntoView:!0,userEvent:"input"})),!0)};function P1(n){return n.name=="QuoteMark"||n.name=="ListMark"}function G4(n,e){let t=n.resolveInner(e,-1),r=e;P1(t)&&(r=t.from,t=t.parent);for(let i;i=t.childBefore(r);)if(P1(i))r=i.from;else if(i.name=="OrderedList"||i.name=="BulletList")t=i.lastChild,r=t.to;else break;return t}const Y4=({state:n,dispatch:e})=>{let t=an(n),r=null,i=n.changeByRange(s=>{let o=s.from,{doc:a}=n;if(s.empty&&nA.isActiveAt(n,s.from)){let l=a.lineAt(o),c=rA(G4(t,o),a);if(c.length){let u=c[c.length-1],h=u.to-u.spaceAfter.length+(u.spaceAfter?1:0);if(o-l.from>h&&!/\S/.test(l.text.slice(h,o-l.from)))return{range:Oe.cursor(l.from+h),changes:{from:l.from+h,to:o}};if(o-l.from==h){let f=l.from+u.from;if(u.item&&u.node.from<u.item.from&&/\S/.test(l.text.slice(u.from,u.to)))return{range:s,changes:{from:f,to:l.from+u.to,insert:u.blank(u.to-u.from)}};if(f<o)return{range:Oe.cursor(f),changes:{from:f,to:o}}}}}return r={range:s}});return r?!1:(e(n.update(i,{scrollIntoView:!0,userEvent:"delete"})),!0)},K4=[{key:"Enter",run:Z4},{key:"Backspace",run:Y4}],R1=j4({matchClosingTags:!1});function I1(n={}){let{codeLanguages:e,defaultCodeLanguage:t,addKeymap:r=!0,base:{parser:i}=X4}=n;if(!(i instanceof cd))throw new RangeError("Base parser provided to `markdown` should be a Markdown parser");let s=n.extensions?[n.extensions]:[],o=[R1.support],a;t instanceof ic?(o.push(t.support),a=t.language):t&&(a=t);let l=e||a?H4(e,a):void 0;return s.push(LU({codeParser:l,htmlParser:R1.language.parser})),r&&o.push(yo.high(ec.of(K4))),new ic(Uy(i.configure(s)),o)}const Oh=()=>{const n=Sn(pr);for(let e=1;e<1e4;e++)if(!n.chapters.has(String(e)))return String(e);return 1e4},tO=({spacelines:n=2,key:e,title:t="",group:r="",flags:i=[],content:s})=>{let o=`
`.repeat(n);return o+=t?`### ${t} {#${e}}`:`### ${e}`,i&&i.length>0&&(o+=`
`+i.map(a=>`![][flag-${a}]`).join(" ")),r&&(o+=`
[group]:<> ("${r}")`),s&&(o+=`
${s}`),o},J4=n=>(n>0||String(n)==="0")&&Math.floor(n)===+n,sA=n=>{const e=Sn(qa),t=Sn(pr);if(!J4(n))return t.chapters.get(String(e)).contentEnd;const r=Math.floor(n);for(let i=r;i>=0;i--)if(t.chapters.has(String(i)))return t.chapters.get(String(i)).contentEnd;for(let i=r;i<1e4;i++)if(t.chapters.has(String(i)))return t.chapters.get(String(i)).start-1;return t.chapters.get(String(e))},df=(n,e)=>{yt.flush();const t=it().state.doc.line(sA(n)+1).to;it().dispatch({changes:{from:t,to:t,insert:`
`+e}}),yt.flush()},yh=wt.define(),bh=[],Vy=$n(!1),va=(n,e=!0)=>{const t=it(),r=Sn(pr),i=Sn(qa);r.chapters.has(n)||(df(n,tO({key:n,group:i?r.chapters.get(i).group:""})),yt.flush()),e&&(bh.push(i),Vy.set(!0)),Br.set(!1),t.dispatch({selection:{anchor:t.state.doc.line(r.chapters.get(n).contentEnd+1).to},effects:[yh.of("subviewUpdate"),Xe.scrollIntoView(t.state.doc.line(r.chapters.get(n).contentStart+1).to,{y:"start",yMargin:20})]}),t.focus()},e8=()=>{bh.length!=0&&(bh.length==1&&Vy.set(!1),va(bh.pop(),!1))},nO=[],rO=qi.define(),t8=qi.define(),n8=et.define(),oA=et.define({combine(n){return Zf(n,{minDepth:100,newGroupDelay:500},{minDepth:Math.max,newGroupDelay:Math.min})}});function r8(n){let e=0;return n.iterChangedRanges((t,r)=>e=r),e}const aA=Er.define({create(){return Ko.empty},update(n,e){let t=e.state.facet(oA),r=e.annotation(rO);if(r){let l=e.docChanged?Oe.single(r8(e.changes)):void 0,c=Zn.fromTransaction(e,l),u=r.side,h=u==0?n.undone:n.done;return c?h=pf(h,h.length,t.minDepth,c):h=cA(h,e.startState.selection),new Ko(u==0?r.rest:h,u==0?h:r.rest)}let i=e.annotation(t8);if((i=="full"||i=="before")&&(n=n.isolate()),e.annotation(zt.addToHistory)===!1)return e.changes.empty?n:n.addMapping(e.changes.desc);let s=Zn.fromTransaction(e),o=e.annotation(zt.time),a=e.annotation(zt.userEvent);return s?n=n.addChanges(s,o,a,t.newGroupDelay,t.minDepth):e.selection&&(n=n.addSelection(e.startState.selection,o,a,t.newGroupDelay)),(i=="full"||i=="after")&&(n=n.isolate()),n},toJSON(n){return{done:n.done.map(e=>e.toJSON()),undone:n.undone.map(e=>e.toJSON())}},fromJSON(n){return new Ko(n.done.map(Zn.fromJSON),n.undone.map(Zn.fromJSON))}});function Q1(n={}){return[aA,oA.of(n),Xe.domEventHandlers({beforeinput(e,t){let r=e.inputType=="historyUndo"?fd:e.inputType=="historyRedo"?uc:null;return r?(e.preventDefault(),r(t)):!1}})]}function hd(n,e){return function({state:t,dispatch:r}){if(!e&&t.readOnly)return!1;let i=t.field(aA,!1);if(!i)return!1;let s=i.pop(n,t,e);return s?(r(s),!0):!1}}const fd=hd(0,!1),uc=hd(1,!1),i8=hd(0,!0),s8=hd(1,!0);class Zn{constructor(e,t,r,i,s){this.changes=e,this.effects=t,this.mapped=r,this.startSelection=i,this.selectionsAfter=s}setSelAfter(e){return new Zn(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,r;return{changes:(e=this.changes)==null?void 0:e.toJSON(),mapped:(t=this.mapped)==null?void 0:t.toJSON(),startSelection:(r=this.startSelection)==null?void 0:r.toJSON(),selectionsAfter:this.selectionsAfter.map(i=>i.toJSON())}}static fromJSON(e){return new Zn(e.changes&&en.fromJSON(e.changes),[],e.mapped&&oi.fromJSON(e.mapped),e.startSelection&&Oe.fromJSON(e.startSelection),e.selectionsAfter.map(Oe.fromJSON))}static fromTransaction(e,t){let r=yr;for(let i of e.startState.facet(n8)){let s=i(e);s.length&&(r=r.concat(s))}return!r.length&&e.changes.empty?null:new Zn(e.changes.invert(e.startState.doc),r,void 0,t||e.startState.selection,yr)}static selection(e){return new Zn(void 0,yr,void 0,void 0,e)}}function pf(n,e,t,r){let i=e+1>t+20?e-t-1:0,s=n.slice(i,e);return s.push(r),s}function o8(n,e){let t=[],r=!1;return n.iterChangedRanges((i,s)=>t.push(i,s)),e.iterChangedRanges((i,s,o,a)=>{for(let l=0;l<t.length;){let c=t[l++],u=t[l++];a>=c&&o<=u&&(r=!0)}}),r}function a8(n,e){return n.ranges.length==e.ranges.length&&n.ranges.filter((t,r)=>t.empty!=e.ranges[r].empty).length===0}function lA(n,e){return n.length?e.length?n.concat(e):n:e}const yr=[],l8=200;function cA(n,e){if(n.length){let t=n[n.length-1],r=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-l8));return r.length&&r[r.length-1].eq(e)?n:(r.push(e),pf(n,n.length-1,1e9,t.setSelAfter(r)))}else return[Zn.selection([e])]}function c8(n){let e=n[n.length-1],t=n.slice();return t[n.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function cm(n,e){if(!n.length)return n;let t=n.length,r=yr;for(;t;){let i=u8(n[t-1],e,r);if(i.changes&&!i.changes.empty||i.effects.length){let s=n.slice(0,t);return s[t-1]=i,s}else e=i.mapped,t--,r=i.selectionsAfter}return r.length?[Zn.selection(r)]:yr}function u8(n,e,t){let r=lA(n.selectionsAfter.length?n.selectionsAfter.map(a=>a.map(e)):yr,t);if(!n.changes)return Zn.selection(r);let i=n.changes.map(e),s=e.mapDesc(n.changes,!0),o=n.mapped?n.mapped.composeDesc(s):s;return new Zn(i,wt.mapEffects(n.effects,e),o,n.startSelection.map(s),r)}const h8=/^(input\.type|delete)($|\.)/,Hs=class{constructor(e,t,r=0,i=void 0){this.done=e,this.undone=t,this.prevTime=r,this.prevUserEvent=i}isolate(){return this.prevTime?new Hs(this.done,this.undone):this}addChanges(e,t,r,i,s){let o=this.done,a=o[o.length-1];return a&&a.changes&&!a.changes.empty&&e.changes&&(!r||h8.test(r))&&(!a.selectionsAfter.length&&t-this.prevTime<i&&o8(a.changes,e.changes)||r=="input.type.compose")?(o=pf(o,o.length-1,s,new Zn(e.changes.compose(a.changes),lA(e.effects,a.effects),a.mapped,a.startSelection,yr)),nO.forEach(l=>l(!1))):(o=pf(o,o.length,s,e),nO.forEach(l=>l(!0))),new Hs(o,yr,t,r)}addSelection(e,t,r,i){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:yr;return s.length>0&&t-this.prevTime<i&&r==this.prevUserEvent&&r&&/^select($|\.)/.test(r)&&a8(s[s.length-1],e)?this:new Hs(cA(this.done,e),this.undone,t,r)}addMapping(e){return new Hs(cm(this.done,e),cm(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,r){let i=e==0?this.done:this.undone;if(i.length==0)return null;let s=i[i.length-1];if(r&&s.selectionsAfter.length)return t.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:rO.of({side:e,rest:c8(i)}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let o=i.length==1?yr:i.slice(0,i.length-1);return s.mapped&&(o=cm(o,s.mapped)),t.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:rO.of({side:e,rest:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}};let Ko=Hs;lu(Ko,"empty",new Hs(yr,yr));const N1=[{key:"Mod-z",run:fd,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:uc,preventDefault:!0},{linux:"Ctrl-Shift-z",run:uc,preventDefault:!0},{key:"Mod-u",run:i8,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:s8,preventDefault:!0}],Vt=window.ISVSCODE,hi=Vt?acquireVsCodeApi():null,uA=[];let iO=!0,jo;const f8=n=>{if(uA.forEach(e=>e(n)),n.text===""||n.text!=null){if(iO)jo=n.text,cP({book:n.text,cursor:{row:0,column:0}}),iO=!1;else{if(jo&&jo==n.text)return;const e=Math.min(Sn(Bi).to+it().state.doc.length-n.text.length,n.text.length);jo=n.text,it().dispatch({selection:{anchor:e},effects:[Xe.scrollIntoView(e)],changes:{from:0,to:it().state.doc.length,insert:n.text}})}hi.setState({text:n.text})}};if(Vt){let n=!0;nO.push(e=>{e&&(n=!0),n&&(hi.postMessage({type:"addUndo"}),n=!1)}),window.addEventListener("message",e=>{const t=e.data;switch(t.type){case"update":f8(t);return;case"undo":fd({state:it().state,dispatch:it().dispatch});return;case"redo":uc({state:it().state,dispatch:it().dispatch});return}}),yt.subscribe(e=>{if(!iO){if(jo&&e===jo)return;hi.postMessage({type:"updateBook",book:Sn(yt)})}})}const d8=()=>{hi.getState(),hi.postMessage({type:"askUpdate"})},hA="mage-settings",p8=window.VSCODESettings||JSON.parse(localStorage.getItem(hA)||"{}"),mf={theme:"light",font:"Arial",fontSize:"12",pageWidth:"108",pageZoom:"120",titleHighlight:"2",justifyText:"1",lineSpacing:"140%",lineMargin:"4",dateFormat:"yyyymmdd-hhmmss",singleChapterMode:"1",countChars:"2"},hr={},m8=n=>{var t;const e=$n((t=p8[n])!=null?t:mf[n]);return hr[n]=e,e};Object.keys(mf).forEach(n=>m8(n));const g8=Vr(Object.values(hr),n=>{const e=Object.keys(hr),t={};for(let r=0;r<n.length;r++)t[e[r]]=n[r];return t});let fA=!1;uA.push(n=>{if(n.settings!==void 0){try{const e=JSON.parse(n.settings);Object.keys(mf).forEach(t=>{var r;return hr[t].set((r=e[t])!=null?r:mf[t])})}catch{}fA=!0}});Vt&&hi.postMessage({type:"askSettings"});g8.subscribe(n=>{Vt?fA&&hi.postMessage({type:"setSettings",settings:JSON.stringify(n)}):localStorage.setItem(hA,JSON.stringify(n))});const dA="main-editor",Bi=uy(10,{from:0,to:0}),vh=$n([0,1/0]),Vu=tt.mark({class:"cm-mage-workinglink"}),Wu=tt.mark({class:"cm-mage-brokenlink"}),O8=tt.mark({class:"cm-mage-code"}),y8=tt.mark({class:"cm-mage-heading"}),b8=tt.mark({class:"cm-mage-booktitle"}),v8=tt.mark({class:"cm-mage-group"}),w8=tt.mark({class:"cm-mage-flag"}),_8=tt.mark({class:"cm-mage-HTMLi"}),x8=tt.mark({class:"cm-mage-HTMLb"}),S8=tt.mark({class:"cm-mage-HTMLu"}),xl=n=>n.includes("(#")?n.substring(n.indexOf("(#")+2,n.lastIndexOf(")")).trim():n.substring(n.indexOf("[")+1,n.indexOf("]")).trim(),L1=n=>{let e=[];for(let{from:t,to:r}of n.visibleRanges)an(n.state).iterate({from:t,to:r,enter:i=>{if(i.name=="Link"){const s=n.state.doc.sliceString(i.from,i.to);if(s==="[group]")e.push(v8.range(i.from,i.to));else if(Ri.properties.disableShortLinks=="true"){if(s.includes("(#")){const o=xl(s),a=Ri.chapters.has(o)?Vu:Wu;e.push(a.range(i.from,i.to))}}else{const o=s.indexOf("][");if(o!=-1){const a=xl(s.substring(0,o+1)),l=Ri.chapters.has(a)?Vu:Wu;e.push(l.range(i.from,i.from+o+1));const c=xl(s.substring(o+1)),u=Ri.chapters.has(c)?Vu:Wu;e.push(u.range(i.from+o+1,i.to))}else{const a=xl(s),l=Ri.chapters.has(a)?Vu:Wu;e.push(l.range(i.from,i.to))}}}else if(i.name=="ATXHeading1")e.push(b8.range(i.from,i.to));else if(i.name=="ATXHeading3")e.push(y8.range(i.from,i.to));else if(i.name=="InlineCode"||i.name=="FencedCode")e.push(O8.range(i.from,i.to));else if(i.name=="Image")n.state.doc.sliceString(i.from,i.to).includes("][flag-")&&e.push(w8.range(i.from,i.to));else if(i.name=="HTMLTag"){const s=n.state.doc.sliceString(i.from,i.to);s=="<i>"||s=="</i>"?e.push(_8.range(i.from,i.to)):s=="<b>"||s=="</b>"?e.push(x8.range(i.from,i.to)):(s=="<u>"||s=="</u>")&&e.push(S8.range(i.from,i.to))}}});return tt.set(e)},D1=Tr.fromClass(class{constructor(n){lu(this,"decorations");lu(this,"editor");this.decorations=L1(n),this.editor=n}update(n){if(String(Sn(hr.singleChapterMode))==="2")if(console.log("preventing update"),n.transactions.map(e=>e.effects).some(e=>e.some(t=>t.value==="subviewUpdate")))Bi.set(n.view.state.selection.main);else{const e=Sn(vh),{from:t,to:r}=n.view.state.selection.main,i=Math.min(e[1],Math.max(t,e[0])),s=Math.max(e[0],Math.min(r,e[1]));if(i!==t||s!==r){setTimeout(()=>this.editor.dispatch({selection:Oe.create([Oe.range(i,s)])}));return}else Bi.lazySet(n.view.state.selection.main)}else console.log("allowing ",Sn(hr.singleChapterMode)),Bi.lazySet(n.view.state.selection.main);(n.docChanged||n.viewportChanged)&&(yt.set(n.view.state.doc.toString()),this.decorations=L1(n.view))}},{decorations:n=>n.decorations,eventHandlers:{mousedown:(n,e)=>{let t=n.target;if(t.classList.contains("tok-link")&&(t=t.parentElement),t.classList.contains("cm-mage-workinglink")||t.classList.contains("cm-mage-brokenlink")){const r=xl(t.innerText.trim());return va(r),n.preventDefault(),n.stopPropagation(),!1}}}}),wh=$n(null),k8=tt.replace({}),T8=()=>{let n=new xs;const e=Sn(wh);if(!e)return n.finish();for(let[t,r]of e)n.add(t,r,k8);return n.finish()},M1=Er.define({create(){return tt.none},update(n,e){return T8()},provide:n=>Xe.decorations.from(n)}),pA=n=>{const e=Vt?[d_(),Q1(),l_(),m_(),I1(),j_(),Xe.lineWrapping,P_(E_),Xe.contentAttributes.of({spellcheck:"true"}),D1,M1,ec.of([...F_,...X_,U_])]:[d_(),Q1(),l_(),m_(),I1(),j_(),Xe.lineWrapping,P_(E_),Xe.contentAttributes.of({spellcheck:"true"}),D1,M1,ec.of([...F_,...X_,...N1,{...N1[1],key:"Mod-Shift-z"},U_])],t=new Xe({doc:n,parent:document.getElementById(dA),extensions:e});return window.editor=t,window.$bookIndex=Ri,[t,e]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mA={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _e=function(n,e){if(!n)throw Ba(e)},Ba=function(n){return new Error("Firebase Database ("+mA.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gA=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},E8=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[t++],o=n[t++],a=n[t++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Wy={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],o=i+1<n.length,a=o?n[i+1]:0,l=i+2<n.length,c=l?n[i+2]:0,u=s>>2,h=(s&3)<<4|a>>4;let f=(a&15)<<2|c>>6,p=c&63;l||(p=64,o||(f=64)),r.push(t[u],t[h],t[f],t[p])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(gA(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):E8(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;const c=i<n.length?t[n.charAt(i)]:64;++i;const h=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||c==null||h==null)throw Error();const f=s<<2|a>>4;if(r.push(f),c!==64){const p=a<<4&240|c>>2;if(r.push(p),h!==64){const d=c<<6&192|h;r.push(d)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},OA=function(n){const e=gA(n);return Wy.encodeByteArray(e,!0)},gf=function(n){return OA(n).replace(/\./g,"")},sO=function(n){try{return Wy.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C8(n){return hc(void 0,n)}function hc(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!A8(t)||(n[t]=hc(n[t],e[t]));return n}function A8(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P8(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function yA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(P8())}function R8(){return typeof self=="object"&&self.self===self}function I8(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function bA(){return mA.NODE_ADMIN===!0}function Q8(){return typeof indexedDB=="object"}function N8(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}function L8(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D8=()=>L8().__FIREBASE_DEFAULTS__,M8=()=>{if(typeof process>"u"||typeof process.env>"u")return;const n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},$8=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&sO(n[1]);return e&&JSON.parse(e)},B8=()=>{try{return D8()||M8()||$8()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},F8=()=>{var n;return(n=B8())===null||n===void 0?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U8(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n),a="";return[gf(JSON.stringify(t)),gf(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V8="FirebaseError";class Fa extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=V8,Object.setPrototypeOf(this,Fa.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,dd.prototype.create)}}class dd{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?W8(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Fa(i,a,r)}}function W8(n,e){return n.replace(j8,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const j8=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fc(n){return JSON.parse(n)}function tn(n){return JSON.stringify(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vA=function(n){let e={},t={},r={},i="";try{const s=n.split(".");e=fc(sO(s[0])||""),t=fc(sO(s[1])||""),i=s[2],r=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:r,signature:i}},q8=function(n){const e=vA(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},X8=function(n){const e=vA(n).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fr(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function uo(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function oO(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Of(n,e,t){const r={};for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=e.call(t,n[i],i,n));return r}function aO(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],o=e[i];if($1(s)&&$1(o)){if(!aO(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function $1(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z8(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H8{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const r=this.W_;if(typeof e=="string")for(let h=0;h<16;h++)r[h]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let h=0;h<16;h++)r[h]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let h=16;h<80;h++){const f=r[h-3]^r[h-8]^r[h-14]^r[h-16];r[h]=(f<<1|f>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],c,u;for(let h=0;h<80;h++){h<40?h<20?(c=a^s&(o^a),u=1518500249):(c=s^o^a,u=1859775393):h<60?(c=s&o|a&(s|o),u=2400959708):(c=s^o^a,u=3395469782);const f=(i<<5|i>>>27)+c+l+u+r[h]&4294967295;l=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=f}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);const r=t-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<t;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<t;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<t;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=t}digest(){const e=[];let t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=t&255,t/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function Z8(n,e){const t=new G8(n,e);return t.subscribe.bind(t)}class G8{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");Y8(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=um),i.error===void 0&&(i.error=um),i.complete===void 0&&(i.complete=um);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Y8(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function um(){}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ke=function(n,e,t,r){let i;if(r<e?i="at least "+e:r>t&&(i=t===0?"none":"no more than "+t),i){const s=n+" failed: Was called with "+r+(r===1?" argument.":" arguments.")+" Expects "+i+".";throw new Error(s)}};function Yn(n,e){return`${n} failed: ${e} argument `}function fn(n,e,t,r){if(!(r&&!t)&&typeof t!="function")throw new Error(Yn(n,e)+"must be a valid function.")}function B1(n,e,t,r){if(!(r&&!t)&&(typeof t!="object"||t===null))throw new Error(Yn(n,e)+"must be a valid context object.")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K8=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,_e(r<n.length,"Surrogate pair missing trail surrogate.");const o=n.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):i<65536?(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},pd=function(n){let e=0;for(let t=0;t<n.length;t++){const r=n.charCodeAt(t);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,t++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mr(n){return n&&n._delegate?n._delegate:n}class Es{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ws="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new Hn;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(eV(e))try{this.getOrInitializeService({instanceIdentifier:Ws})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Ws){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ws){return this.instances.has(e)}getOptions(e=Ws){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(!!r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:J8(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ws){return this.component?this.component.multipleInstances?e:Ws:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function J8(n){return n===Ws?void 0:n}function eV(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new wA(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jy=[];var xt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(xt||(xt={}));const xA={debug:xt.DEBUG,verbose:xt.VERBOSE,info:xt.INFO,warn:xt.WARN,error:xt.ERROR,silent:xt.SILENT},tV=xt.INFO,nV={[xt.DEBUG]:"log",[xt.VERBOSE]:"log",[xt.INFO]:"info",[xt.WARN]:"warn",[xt.ERROR]:"error"},rV=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=nV[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class md{constructor(e){this.name=e,this._logLevel=tV,this._logHandler=rV,this._userLogHandler=null,jy.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in xt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?xA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,xt.DEBUG,...e),this._logHandler(this,xt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,xt.VERBOSE,...e),this._logHandler(this,xt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,xt.INFO,...e),this._logHandler(this,xt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,xt.WARN,...e),this._logHandler(this,xt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,xt.ERROR,...e),this._logHandler(this,xt.ERROR,...e)}}function iV(n){jy.forEach(e=>{e.setLogLevel(n)})}function sV(n,e){for(const t of jy){let r=null;e&&e.level&&(r=xA[e.level]),n===null?t.userLogHandler=null:t.userLogHandler=(i,s,...o)=>{const a=o.map(l=>{if(l==null)return null;if(typeof l=="string")return l;if(typeof l=="number"||typeof l=="boolean")return l.toString();if(l instanceof Error)return l.message;try{return JSON.stringify(l)}catch{return null}}).filter(l=>l).join(" ");s>=(r!=null?r:i.logLevel)&&n({level:xt[s].toLowerCase(),message:a,args:o,type:i.name})}}}const oV=(n,e)=>e.some(t=>n instanceof t);let F1,U1;function aV(){return F1||(F1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function lV(){return U1||(U1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const SA=new WeakMap,lO=new WeakMap,kA=new WeakMap,hm=new WeakMap,qy=new WeakMap;function cV(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(ms(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&SA.set(t,n)}).catch(()=>{}),qy.set(e,n),e}function uV(n){if(lO.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});lO.set(n,e)}let cO={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return lO.get(n);if(e==="objectStoreNames")return n.objectStoreNames||kA.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ms(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function hV(n){cO=n(cO)}function fV(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(fm(this),e,...t);return kA.set(r,e.sort?e.sort():[e]),ms(r)}:lV().includes(n)?function(...e){return n.apply(fm(this),e),ms(SA.get(this))}:function(...e){return ms(n.apply(fm(this),e))}}function dV(n){return typeof n=="function"?fV(n):(n instanceof IDBTransaction&&uV(n),oV(n,aV())?new Proxy(n,cO):n)}function ms(n){if(n instanceof IDBRequest)return cV(n);if(hm.has(n))return hm.get(n);const e=dV(n);return e!==n&&(hm.set(n,e),qy.set(e,n)),e}const fm=n=>qy.get(n);function pV(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(n,e),a=ms(o);return r&&o.addEventListener("upgradeneeded",l=>{r(ms(o.result),l.oldVersion,l.newVersion,ms(o.transaction))}),t&&o.addEventListener("blocked",()=>t()),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}const mV=["get","getKey","getAll","getAllKeys","count"],gV=["put","add","delete","clear"],dm=new Map;function V1(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(dm.get(e))return dm.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=gV.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||mV.includes(t)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[t](...a),i&&l.done]))[0]};return dm.set(e,s),s}hV(n=>({...n,get:(e,t,r)=>V1(e,t)||n.get(e,t,r),has:(e,t)=>!!V1(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OV{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(yV(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function yV(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const uO="@firebase/app",W1="0.8.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ho=new md("@firebase/app"),bV="@firebase/app-compat",vV="@firebase/analytics-compat",wV="@firebase/analytics",_V="@firebase/app-check-compat",xV="@firebase/app-check",SV="@firebase/auth",kV="@firebase/auth-compat",TV="@firebase/database",EV="@firebase/database-compat",CV="@firebase/functions",AV="@firebase/functions-compat",PV="@firebase/installations",RV="@firebase/installations-compat",IV="@firebase/messaging",QV="@firebase/messaging-compat",NV="@firebase/performance",LV="@firebase/performance-compat",DV="@firebase/remote-config",MV="@firebase/remote-config-compat",$V="@firebase/storage",BV="@firebase/storage-compat",FV="@firebase/firestore",UV="@firebase/firestore-compat",VV="firebase",WV="9.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cs="[DEFAULT]",jV={[uO]:"fire-core",[bV]:"fire-core-compat",[wV]:"fire-analytics",[vV]:"fire-analytics-compat",[xV]:"fire-app-check",[_V]:"fire-app-check-compat",[SV]:"fire-auth",[kV]:"fire-auth-compat",[TV]:"fire-rtdb",[EV]:"fire-rtdb-compat",[CV]:"fire-fn",[AV]:"fire-fn-compat",[PV]:"fire-iid",[RV]:"fire-iid-compat",[IV]:"fire-fcm",[QV]:"fire-fcm-compat",[NV]:"fire-perf",[LV]:"fire-perf-compat",[DV]:"fire-rc",[MV]:"fire-rc-compat",[$V]:"fire-gcs",[BV]:"fire-gcs-compat",[FV]:"fire-fst",[UV]:"fire-fst-compat","fire-js":"fire-js",[VV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const As=new Map,dc=new Map;function yf(n,e){try{n.container.addComponent(e)}catch(t){ho.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function TA(n,e){n.container.addOrOverwriteComponent(e)}function wa(n){const e=n.name;if(dc.has(e))return ho.debug(`There were multiple attempts to register component ${e}.`),!1;dc.set(e,n);for(const t of As.values())yf(t,n);return!0}function EA(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function qV(n,e,t=Cs){EA(n,e).clearInstance(t)}function XV(){dc.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zV={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Fi=new dd("app","Firebase",zV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HV{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Es("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Fi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xy=WV;function zy(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Cs,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Fi.create("bad-app-name",{appName:String(i)});if(t||(t=F8()),!t)throw Fi.create("no-options");const s=As.get(i);if(s){if(aO(t,s.options)&&aO(r,s.config))return s;throw Fi.create("duplicate-app",{appName:i})}const o=new _A(i);for(const l of dc.values())o.addComponent(l);const a=new HV(t,r,o);return As.set(i,a),a}function ZV(n=Cs){const e=As.get(n);if(!e&&n===Cs)return zy();if(!e)throw Fi.create("no-app",{appName:n});return e}function GV(){return Array.from(As.values())}async function CA(n){const e=n.name;As.has(e)&&(As.delete(e),await Promise.all(n.container.getProviders().map(t=>t.delete())),n.isDeleted=!0)}function gs(n,e,t){var r;let i=(r=jV[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ho.warn(a.join(" "));return}wa(new Es(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function AA(n,e){if(n!==null&&typeof n!="function")throw Fi.create("invalid-log-argument");sV(n,e)}function PA(n){iV(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YV="firebase-heartbeat-database",KV=1,pc="firebase-heartbeat-store";let pm=null;function RA(){return pm||(pm=pV(YV,KV,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(pc)}}}).catch(n=>{throw Fi.create("idb-open",{originalErrorMessage:n.message})})),pm}async function JV(n){var e;try{return(await RA()).transaction(pc).objectStore(pc).get(IA(n))}catch(t){if(t instanceof Fa)ho.warn(t.message);else{const r=Fi.create("idb-get",{originalErrorMessage:(e=t)===null||e===void 0?void 0:e.message});ho.warn(r.message)}}}async function j1(n,e){var t;try{const i=(await RA()).transaction(pc,"readwrite");return await i.objectStore(pc).put(e,IA(n)),i.done}catch(r){if(r instanceof Fa)ho.warn(r.message);else{const i=Fi.create("idb-set",{originalErrorMessage:(t=r)===null||t===void 0?void 0:t.message});ho.warn(i.message)}}}function IA(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eW=1024,tW=30*24*60*60*1e3;class nW{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new iW(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=q1();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const s=new Date(i.date).valueOf();return Date.now()-s<=tW}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=q1(),{heartbeatsToSend:t,unsentEntries:r}=rW(this._heartbeatsCache.heartbeats),i=gf(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function q1(){return new Date().toISOString().substring(0,10)}function rW(n,e=eW){const t=[];let r=n.slice();for(const i of n){const s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),X1(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),X1(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class iW{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Q8()?N8().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await JV(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return j1(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return j1(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function X1(n){return gf(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sW(n){wa(new Es("platform-logger",e=>new OV(e),"PRIVATE")),wa(new Es("heartbeat",e=>new nW(e),"PRIVATE")),gs(uO,W1,n),gs(uO,W1,"esm2017"),gs("fire-js","")}sW("");const oW=Object.freeze(Object.defineProperty({__proto__:null,SDK_VERSION:Xy,_DEFAULT_ENTRY_NAME:Cs,_addComponent:yf,_addOrOverwriteComponent:TA,_apps:As,_clearComponents:XV,_components:dc,_getProvider:EA,_registerComponent:wa,_removeServiceInstance:qV,deleteApp:CA,getApp:ZV,getApps:GV,initializeApp:zy,onLog:AA,registerVersion:gs,setLogLevel:PA,FirebaseError:Fa},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aW{constructor(e,t){this._delegate=e,this.firebase=t,yf(e,new Es("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),CA(this._delegate)))}_getService(e,t=Cs){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:t})}_removeServiceInstance(e,t=Cs){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){yf(this._delegate,e)}_addOrOverwriteComponent(e){TA(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lW={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance."},z1=new dd("app-compat","Firebase",lW);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cW(n){const e={},t={__esModule:!0,initializeApp:s,app:i,registerVersion:gs,setLogLevel:PA,onLog:AA,apps:null,SDK_VERSION:Xy,INTERNAL:{registerComponent:a,removeApp:r,useAsService:l,modularAPIs:oW}};t.default=t,Object.defineProperty(t,"apps",{get:o});function r(c){delete e[c]}function i(c){if(c=c||Cs,!fr(e,c))throw z1.create("no-app",{appName:c});return e[c]}i.App=n;function s(c,u={}){const h=zy(c,u);if(fr(e,h.name))return e[h.name];const f=new n(h,t);return e[h.name]=f,f}function o(){return Object.keys(e).map(c=>e[c])}function a(c){const u=c.name,h=u.replace("-compat","");if(wa(c)&&c.type==="PUBLIC"){const f=(p=i())=>{if(typeof p[h]!="function")throw z1.create("invalid-app-argument",{appName:u});return p[h]()};c.serviceProps!==void 0&&hc(f,c.serviceProps),t[h]=f,n.prototype[h]=function(...p){return this._getService.bind(this,u).apply(this,c.multipleInstances?p:[])}}return c.type==="PUBLIC"?t[h]:null}function l(c,u){return u==="serverAuth"?null:u}return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QA(){const n=cW(aW);n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:QA,extendNamespace:e,createSubscribe:Z8,ErrorFactory:dd,deepExtend:hc});function e(t){hc(n,t)}return n}const uW=QA();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H1=new md("@firebase/app-compat"),hW="@firebase/app-compat",fW="0.1.39";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dW(n){gs(hW,fW,n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(R8()&&self.firebase!==void 0){H1.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);const n=self.firebase.SDK_VERSION;n&&n.indexOf("LITE")>=0&&H1.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}const mc=uW;dW();var pW="firebase",mW="9.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */mc.registerVersion(pW,mW,"app-compat");const Z1="@firebase/database",G1="0.13.10";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let NA="";function LA(n){NA=n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gW{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),tn(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:fc(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OW{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return fr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DA=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new gW(e)}}catch{}return new OW},Ks=DA("localStorage"),hO=DA("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jo=new md("@firebase/database"),MA=function(){let n=1;return function(){return n++}}(),$A=function(n){const e=K8(n),t=new H8;t.update(e);const r=t.digest();return Wy.encodeByteArray(r)},Uc=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Uc.apply(null,r):typeof r=="object"?e+=tn(r):e+=r,e+=" "}return e};let ro=null,Y1=!0;const BA=function(n,e){_e(!e||n===!0||n===!1,"Can't turn on custom loggers persistently."),n===!0?(Jo.logLevel=xt.VERBOSE,ro=Jo.log.bind(Jo),e&&hO.set("logging_enabled",!0)):typeof n=="function"?ro=n:(ro=null,hO.remove("logging_enabled"))},pn=function(...n){if(Y1===!0&&(Y1=!1,ro===null&&hO.get("logging_enabled")===!0&&BA(!0)),ro){const e=Uc.apply(null,n);ro(e)}},Vc=function(n){return function(...e){pn(n,...e)}},fO=function(...n){const e="FIREBASE INTERNAL ERROR: "+Uc(...n);Jo.error(e)},fi=function(...n){const e=`FIREBASE FATAL ERROR: ${Uc(...n)}`;throw Jo.error(e),new Error(e)},Mn=function(...n){const e="FIREBASE WARNING: "+Uc(...n);Jo.warn(e)},yW=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Mn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},gd=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},bW=function(n){if(document.readyState==="complete")n();else{let e=!1;const t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},Xi="[MIN_NAME]",di="[MAX_NAME]",wo=function(n,e){if(n===e)return 0;if(n===Xi||e===di)return-1;if(e===Xi||n===di)return 1;{const t=bf(n),r=bf(e);return t!==null?r!==null?t-r===0?n.length-e.length:t-r:-1:r!==null?1:n<e?-1:1}},vW=function(n,e){return n===e?0:n<e?-1:1},ul=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+tn(e))},Hy=function(n){if(typeof n!="object"||n===null)return tn(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)r!==0&&(t+=","),t+=tn(e[r]),t+=":",t+=Hy(n[e[r]]);return t+="}",t},FA=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)i+e>t?r.push(n.substring(i,t)):r.push(n.substring(i,i+e));return r};function gn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const UA=function(n){_e(!gd(n),"Invalid JSON number");const e=11,t=52,r=(1<<e-1)-1;let i,s,o,a,l;n===0?(s=0,o=0,i=1/n===-1/0?1:0):(i=n<0,n=Math.abs(n),n>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=a+r,o=Math.round(n*Math.pow(2,t-a)-Math.pow(2,t))):(s=0,o=Math.round(n/Math.pow(2,1-r-t))));const c=[];for(l=t;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(i?1:0),c.reverse();const u=c.join("");let h="";for(l=0;l<64;l+=8){let f=parseInt(u.substr(l,8),2).toString(16);f.length===1&&(f="0"+f),h=h+f}return h.toLowerCase()},wW=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},_W=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function xW(n,e){let t="Unknown Error";n==="too_big"?t="The data requested exceeds the maximum size that can be accessed with a single request.":n==="permission_denied"?t="Client doesn't have permission to access the desired data.":n==="unavailable"&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}const SW=new RegExp("^-?(0*)\\d{1,10}$"),VA=-2147483648,Zy=2147483647,bf=function(n){if(SW.test(n)){const e=Number(n);if(e>=VA&&e<=Zy)return e}return null},Ua=function(n){try{n()}catch(e){setTimeout(()=>{const t=e.stack||"";throw Mn("Exception was thrown by user callback.",t),e},Math.floor(0))}},kW=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Il=function(n,e){const t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TW{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t==null?void 0:t.getImmediate({optional:!0}),this.appCheck||t==null||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Mn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EW{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(pn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Mn(e)}}class ea{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}ea.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gy="5",WA="v",jA="s",qA="r",XA="f",zA=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,HA="ls",ZA="p",dO="ac",GA="websocket",YA="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(e,t,r,i,s=!1,o="",a=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ks.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ks.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function CW(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function JA(n,e,t){_e(typeof e=="string","typeof type must == string"),_e(typeof t=="object","typeof params must == object");let r;if(e===GA)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===YA)r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);CW(n)&&(t.ns=n.namespace);const i=[];return gn(t,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AW{constructor(){this.counters_={}}incrementCounter(e,t=1){fr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return C8(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mm={},gm={};function Yy(n){const e=n.toString();return mm[e]||(mm[e]=new AW),mm[e]}function PW(n,e){const t=n.toString();return gm[t]||(gm[t]=e()),gm[t]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RW{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Ua(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K1="start",IW="close",QW="pLPCommand",NW="pRTLPCB",e2="id",t2="pw",n2="ser",LW="cb",DW="seg",MW="ts",$W="d",BW="dframe",r2=1870,i2=30,FW=r2-i2,UW=25e3,VW=3e4;class hs{constructor(e,t,r,i,s,o,a){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Vc(e),this.stats_=Yy(t),this.urlFn=l=>(this.appCheckToken&&(l[dO]=this.appCheckToken),JA(t,YA,l))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new RW(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(VW)),bW(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Ky((...s)=>{const[o,a,l,c,u]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===K1)this.id=a,this.password=l;else if(o===IW)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[K1]="t",r[n2]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[LW]=this.scriptTagHolder.uniqueCallbackIdentifier),r[WA]=Gy,this.transportSessionId&&(r[jA]=this.transportSessionId),this.lastSessionId&&(r[HA]=this.lastSessionId),this.applicationId&&(r[ZA]=this.applicationId),this.appCheckToken&&(r[dO]=this.appCheckToken),typeof location<"u"&&location.hostname&&zA.test(location.hostname)&&(r[qA]=XA);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){hs.forceAllow_=!0}static forceDisallow(){hs.forceDisallow_=!0}static isAvailable(){return hs.forceAllow_?!0:!hs.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!wW()&&!_W()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=tn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=OA(t),i=FA(r,FW);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const r={};r[BW]="t",r[e2]=e,r[t2]=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=tn(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Ky{constructor(e,t,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=MA(),window[QW+this.uniqueCallbackIdentifier]=e,window[NW+this.uniqueCallbackIdentifier]=t,this.myIFrame=Ky.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){pn("frame writing exception"),a.stack&&pn(a.stack),pn(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||pn("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[e2]=this.myID,e[t2]=this.myPW,e[n2]=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+i2+r.length<=r2;){const o=this.pendingSegs.shift();r=r+"&"+DW+i+"="+o.seg+"&"+MW+i+"="+o.ts+"&"+$W+i+"="+o.d,i++}return t=t+r,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(UW)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{pn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WW=16384,jW=45e3;let vf=null;typeof MozWebSocket<"u"?vf=MozWebSocket:typeof WebSocket<"u"&&(vf=WebSocket);class br{constructor(e,t,r,i,s,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Vc(this.connId),this.stats_=Yy(t),this.connURL=br.connectionURL_(t,o,a,i,r),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,r,i,s){const o={};return o[WA]=Gy,typeof location<"u"&&location.hostname&&zA.test(location.hostname)&&(o[qA]=XA),t&&(o[jA]=t),r&&(o[HA]=r),i&&(o[dO]=i),s&&(o[ZA]=s),JA(e,GA,o)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ks.set("previous_websocket_failure",!0);try{let r;bA(),this.mySock=new vf(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){br.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(t);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&vf!==null&&!br.forceDisallow_}static previouslyFailed(){return Ks.isInMemoryStorage||Ks.get("previous_websocket_failure")===!0}markConnectionHealthy(){Ks.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const t=this.frames.join("");this.frames=null;const r=fc(t);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(_e(this.frames===null,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(t);else{const r=this.extractFrameCount_(t);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const t=tn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=FA(t,WW);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(jW))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}br.responsesRequiredToBeHealthy=2;br.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[hs,br]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const t=br&&br.isAvailable();let r=t&&!br.previouslyFailed();if(e.webSocketOnly&&(t||Mn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[br];else{const i=this.transports_=[];for(const s of _a.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);_a.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}_a.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qW=6e4,XW=5e3,zW=10*1024,HW=100*1024,Om="t",J1="d",ZW="s",ex="r",GW="e",tx="o",nx="a",rx="n",ix="p",YW="h";class KW{constructor(e,t,r,i,s,o,a,l,c,u){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Vc("c:"+this.id+":"),this.transportManager_=new _a(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Il(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>HW?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>zW?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Om in e){const t=e[Om];t===nx?this.upgradeIfSecondaryHealthy_():t===ex?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===tx&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=ul("t",e),r=ul("d",e);if(t==="c")this.onSecondaryControl_(r);else if(t==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:ix,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:nx,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:rx,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=ul("t",e),r=ul("d",e);t==="c"?this.onControl_(r):t==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=ul(Om,e);if(J1 in e){const r=e[J1];if(t===YW)this.onHandshake_(r);else if(t===rx){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===ZW?this.onConnectionShutdown_(r):t===ex?this.onReset_(r):t===GW?fO("Server Error: "+r):t===tx?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):fO("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Gy!==r&&Mn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Il(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(qW))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Il(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(XW))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:ix,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ks.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(e){this.allowedEvents_=e,this.listeners_={},_e(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){_e(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf extends o2{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!yA()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new wf}getInitialEvent(e){return _e(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sx=32,ox=768;class bt{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}}function pt(){return new bt("")}function st(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Ps(n){return n.pieces_.length-n.pieceNum_}function St(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new bt(n.pieces_,e)}function Jy(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function JW(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function gc(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function a2(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new bt(e,0)}function $t(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof bt)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new bt(t,0)}function ot(n){return n.pieceNum_>=n.pieces_.length}function qn(n,e){const t=st(n),r=st(e);if(t===null)return e;if(t===r)return qn(St(n),St(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function ej(n,e){const t=gc(n,0),r=gc(e,0);for(let i=0;i<t.length&&i<r.length;i++){const s=wo(t[i],r[i]);if(s!==0)return s}return t.length===r.length?0:t.length<r.length?-1:1}function e0(n,e){if(Ps(n)!==Ps(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function _r(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Ps(n)>Ps(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class tj{constructor(e,t){this.errorPrefix_=t,this.parts_=gc(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=pd(this.parts_[r]);l2(this)}}function nj(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=pd(e),l2(n)}function rj(n){const e=n.parts_.pop();n.byteLength_-=pd(e),n.parts_.length>0&&(n.byteLength_-=1)}function l2(n){if(n.byteLength_>ox)throw new Error(n.errorPrefix_+"has a key path longer than "+ox+" bytes ("+n.byteLength_+").");if(n.parts_.length>sx)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+sx+") or object contains a cycle "+js(n))}function js(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0 extends o2{constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new t0}getInitialEvent(e){return _e(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hl=1e3,ij=60*5*1e3,ax=30*1e3,sj=1.3,oj=3e4,aj="server_kill",lx=3;class Ui extends s2{constructor(e,t,r,i,s,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=Ui.nextPersistentConnectionId_++,this.log_=Vc("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=hl,this.maxReconnectDelay_=ij,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!bA())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");t0.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&wf.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,r){const i=++this.requestNumber_,s={r:i,a:e,b:t};this.log_(tn(s)),_e(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const t=new Hn,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?t.resolve(a):t.reject(a)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),t.promise}listen(e,t,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),_e(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),_e(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:t,query:e,tag:r};this.listens.get(o).set(s,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(r)})}sendListen_(e){const t=e.query,r=t._path.toString(),i=t._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=t._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,a=>{const l=a.d,c=a.s;Ui.warnOnListenWarnings_(l,t),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",a),c!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(c,l))})}static warnOnListenWarnings_(e,t){if(e&&typeof e=="object"&&fr(e,"w")){const r=uo(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+t._queryParams.getIndex().toString()+'"',s=t._path.toString();Mn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||X8(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=ax)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=q8(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(t,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,r=e.d||"error";t==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,r)})}unlisten(e,t){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),_e(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,t)}sendUnlisten_(e,t,r,i){this.log_("Unlisten on "+e+" for "+t);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:r})}onDisconnectMerge(e,t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:r})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,r,i){const s={p:t,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,t,r,i){this.putInternal("p",e,t,r,i)}merge(e,t,r,i){this.putInternal("m",e,t,r,i)}putInternal(e,t,r,i,s){this.initConnection_();const o={p:t,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,r,s=>{this.log_(t+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+tn(e));const t=e.r,r=this.requestCBHash_[t];r&&(delete this.requestCBHash_[t],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),e==="d"?this.onDataUpdate_(t.p,t.d,!1,t.t):e==="m"?this.onDataUpdate_(t.p,t.d,!0,t.t):e==="c"?this.onListenRevoked_(t.p,t.q):e==="ac"?this.onAuthRevoked_(t.s,t.d):e==="apc"?this.onAppCheckRevoked_(t.s,t.d):e==="sd"?this.onSecurityDebugPacket_(t):fO("Unrecognized action received from server: "+tn(e)+`
Are you using the latest client?`)}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){_e(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=hl,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=hl,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>oj&&(this.reconnectDelay_=hl),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*sj)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+Ui.nextConnectionId_++,s=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,r())},c=function(h){_e(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(h)};this.realtime_={close:l,sendRequest:c};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[h,f]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);o?pn("getToken() completed but was canceled"):(pn("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=f&&f.token,a=new KW(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,r,p=>{Mn(p+" ("+this.repoInfo_.toString()+")"),this.interrupt(aj)},s))}catch(h){this.log_("Failed to get token: "+h),o||(this.repoInfo_.nodeAdmin&&Mn(h),l())}}}interrupt(e){pn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){pn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],oO(this.interruptReasons_)&&(this.reconnectDelay_=hl,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let r;t?r=t.map(s=>Hy(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,t){const r=new bt(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(t),s.delete(t),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,t){pn("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=lx&&(this.reconnectDelay_=ax,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){pn("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=lx&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";e["sdk."+t+"."+NA.replace(/\./g,"-")]=1,yA()?e["framework.cordova"]=1:I8()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=wf.getInstance().currentlyOnline();return oO(this.interruptReasons_)&&e}}Ui.nextPersistentConnectionId_=0;Ui.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new lt(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new lt(Xi,e),i=new lt(Xi,t);return this.compare(r,i)!==0}minPost(){return lt.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ju;class c2 extends Od{static get __EMPTY_NODE(){return ju}static set __EMPTY_NODE(e){ju=e}compare(e,t){return wo(e.name,t.name)}isDefinedOn(e){throw Ba("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return lt.MIN}maxPost(){return new lt(di,ju)}makePost(e,t){return _e(typeof e=="string","KeyIndex indexValue must always be a string."),new lt(e,ju)}toString(){return".key"}}const li=new c2;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=t?r(e.key,t):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class dn{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r!=null?r:dn.RED,this.left=i!=null?i:Gn.EMPTY_NODE,this.right=s!=null?s:Gn.EMPTY_NODE}copy(e,t,r,i,s){return new dn(e!=null?e:this.key,t!=null?t:this.value,r!=null?r:this.color,i!=null?i:this.left,s!=null?s:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i=i.copy(null,t,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return Gn.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let r,i;if(r=this,t(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),t(e,r.key)===0){if(r.right.isEmpty())return Gn.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,dn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,dn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}dn.RED=!0;dn.BLACK=!1;class lj{copy(e,t,r,i,s){return this}insert(e,t,r){return new dn(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Gn{constructor(e,t=Gn.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Gn(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,dn.BLACK,null,null))}remove(e){return new Gn(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,dn.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),t===0)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();)if(t=this.comparator_(e,r.key),t===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else t<0?r=r.left:t>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new qu(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new qu(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new qu(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new qu(this.root_,null,this.comparator_,!0,e)}}Gn.EMPTY_NODE=new lj;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cj(n,e){return wo(n.name,e.name)}function n0(n,e){return wo(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pO;function uj(n){pO=n}const u2=function(n){return typeof n=="number"?"number:"+UA(n):"string:"+n},h2=function(n){if(n.isLeafNode()){const e=n.val();_e(typeof e=="string"||typeof e=="number"||typeof e=="object"&&fr(e,".sv"),"Priority must be a string or number.")}else _e(n===pO||n.isEmpty(),"priority of unexpected type.");_e(n===pO||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cx;class hn{constructor(e,t=hn.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,_e(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),h2(this.priorityNode_)}static set __childrenNodeConstructor(e){cx=e}static get __childrenNodeConstructor(){return cx}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new hn(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:hn.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return ot(e)?this:st(e)===".priority"?this.priorityNode_:hn.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return e===".priority"?this.updatePriority(t):t.isEmpty()&&e!==".priority"?this:hn.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const r=st(e);return r===null?t:t.isEmpty()&&r!==".priority"?this:(_e(r!==".priority"||Ps(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,hn.__childrenNodeConstructor.EMPTY_NODE.updateChild(St(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+u2(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",t==="number"?e+=UA(this.value_):e+=this.value_,this.lazyHash_=$A(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===hn.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof hn.__childrenNodeConstructor?-1:(_e(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,r=typeof this.value_,i=hn.VALUE_TYPE_ORDER.indexOf(t),s=hn.VALUE_TYPE_ORDER.indexOf(r);return _e(i>=0,"Unknown leaf type: "+t),_e(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}else return!1}}hn.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let f2,d2;function hj(n){f2=n}function fj(n){d2=n}class dj extends Od{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return s===0?wo(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return lt.MIN}maxPost(){return new lt(di,new hn("[PRIORITY-POST]",d2))}makePost(e,t){const r=f2(e);return new lt(t,new hn("[PRIORITY-POST]",r))}toString(){return".priority"}}const At=new dj;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pj=Math.log(2);class mj{constructor(e){const t=s=>parseInt(Math.log(s)/pj,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const _f=function(n,e,t,r){n.sort(e);const i=function(l,c){const u=c-l;let h,f;if(u===0)return null;if(u===1)return h=n[l],f=t?t(h):h,new dn(f,h.node,dn.BLACK,null,null);{const p=parseInt(u/2,10)+l,d=i(l,p),m=i(p+1,c);return h=n[p],f=t?t(h):h,new dn(f,h.node,dn.BLACK,d,m)}},s=function(l){let c=null,u=null,h=n.length;const f=function(d,m){const y=h-d,w=h;h-=d;const b=i(y+1,w),O=n[y],v=t?t(O):O;p(new dn(v,O.node,m,null,b))},p=function(d){c?(c.left=d,c=d):(u=d,c=d)};for(let d=0;d<l.count;++d){const m=l.nextBitIsOne(),y=Math.pow(2,l.count-(d+1));m?f(y,dn.BLACK):(f(y,dn.BLACK),f(y,dn.RED))}return u},o=new mj(n.length),a=s(o);return new Gn(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ym;const Mo={};class Li{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return _e(Mo&&At,"ChildrenNode.ts has not been loaded"),ym=ym||new Li({".priority":Mo},{".priority":At}),ym}get(e){const t=uo(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Gn?t:null}hasIndex(e){return fr(this.indexSet_,e.toString())}addIndex(e,t){_e(e!==li,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=t.getIterator(lt.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=_f(r,e.getCompare()):a=Mo;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const u=Object.assign({},this.indexes_);return u[l]=a,new Li(u,c)}addToIndexes(e,t){const r=Of(this.indexes_,(i,s)=>{const o=uo(this.indexSet_,s);if(_e(o,"Missing index implementation for "+s),i===Mo)if(o.isDefinedOn(e.node)){const a=[],l=t.getIterator(lt.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),_f(a,o.getCompare())}else return Mo;else{const a=t.get(e.name);let l=i;return a&&(l=l.remove(new lt(e.name,a))),l.insert(e,e.node)}});return new Li(r,this.indexSet_)}removeFromIndexes(e,t){const r=Of(this.indexes_,i=>{if(i===Mo)return i;{const s=t.get(e.name);return s?i.remove(new lt(e.name,s)):i}});return new Li(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fl;class Ge{constructor(e,t,r){this.children_=e,this.priorityNode_=t,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&h2(this.priorityNode_),this.children_.isEmpty()&&_e(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return fl||(fl=new Ge(new Gn(n0),null,Li.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||fl}updatePriority(e){return this.children_.isEmpty()?this:new Ge(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const t=this.children_.get(e);return t===null?fl:t}}getChild(e){const t=st(e);return t===null?this:this.getImmediateChild(t).getChild(St(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,t){if(_e(t,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(t);{const r=new lt(e,t);let i,s;t.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,t),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?fl:this.priorityNode_;return new Ge(i,o,s)}}updateChild(e,t){const r=st(e);if(r===null)return t;{_e(st(e)!==".priority"||Ps(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(St(e),t);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let r=0,i=0,s=!0;if(this.forEachChild(At,(o,a)=>{t[o]=a.val(e),r++,s&&Ge.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const a in t)o[a]=t[a];return o}else return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+u2(this.getPriority().val())+":"),this.forEachChild(At,(t,r)=>{const i=r.hash();i!==""&&(e+=":"+t+":"+i)}),this.lazyHash_=e===""?"":$A(e)}return this.lazyHash_}getPredecessorChildName(e,t,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new lt(e,t));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const r=t.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new lt(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const r=t.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new lt(t,this.children_.get(t)):null}forEachChild(e,t){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>t(i.name,i.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const r=this.resolveIndex_(t);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,lt.Wrap);let s=i.peek();for(;s!=null&&t.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const r=this.resolveIndex_(t);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,lt.Wrap);let s=i.peek();for(;s!=null&&t.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Wc?-1:0}withIndex(e){if(e===li||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new Ge(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===li||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority()))if(this.children_.count()===t.children_.count()){const r=this.getIterator(At),i=t.getIterator(At);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===li?null:this.indexMap_.get(e.toString())}}Ge.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class gj extends Ge{constructor(){super(new Gn(n0),Ge.EMPTY_NODE,Li.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ge.EMPTY_NODE}isEmpty(){return!1}}const Wc=new gj;Object.defineProperties(lt,{MIN:{value:new lt(Xi,Ge.EMPTY_NODE)},MAX:{value:new lt(di,Wc)}});c2.__EMPTY_NODE=Ge.EMPTY_NODE;hn.__childrenNodeConstructor=Ge;uj(Wc);fj(Wc);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oj=!0;function Ut(n,e=null){if(n===null)return Ge.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),_e(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){const t=n;return new hn(t,Ut(e))}if(!(n instanceof Array)&&Oj){const t=[];let r=!1;if(gn(n,(o,a)=>{if(o.substring(0,1)!=="."){const l=Ut(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),t.push(new lt(o,l)))}}),t.length===0)return Ge.EMPTY_NODE;const s=_f(t,cj,o=>o.name,n0);if(r){const o=_f(t,At.getCompare());return new Ge(s,Ut(e),new Li({".priority":o},{".priority":At}))}else return new Ge(s,Ut(e),Li.Default)}else{let t=Ge.EMPTY_NODE;return gn(n,(r,i)=>{if(fr(n,r)&&r.substring(0,1)!=="."){const s=Ut(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(Ut(e))}}hj(Ut);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0 extends Od{constructor(e){super(),this.indexPath_=e,_e(!ot(e)&&st(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return s===0?wo(e.name,t.name):s}makePost(e,t){const r=Ut(e),i=Ge.EMPTY_NODE.updateChild(this.indexPath_,r);return new lt(t,i)}maxPost(){const e=Ge.EMPTY_NODE.updateChild(this.indexPath_,Wc);return new lt(di,e)}toString(){return gc(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yj extends Od{compare(e,t){const r=e.node.compareTo(t.node);return r===0?wo(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return lt.MIN}maxPost(){return lt.MAX}makePost(e,t){const r=Ut(e);return new lt(t,r)}toString(){return".value"}}const i0=new yj;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xa="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",mO="-",p2="z",m2=786,bj=function(){let n=0;const e=[];return function(t){const r=t===n;n=t;let i;const s=new Array(8);for(i=7;i>=0;i--)s[i]=xa.charAt(t%64),t=Math.floor(t/64);_e(t===0,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)o+=xa.charAt(e[i]);return _e(o.length===20,"nextPushId: Length should be 20."),o}}(),ux=function(n){if(n===""+Zy)return mO;const e=bf(n);if(e!=null)return""+(e+1);const t=new Array(n.length);for(let o=0;o<t.length;o++)t[o]=n.charAt(o);if(t.length<m2)return t.push(mO),t.join("");let r=t.length-1;for(;r>=0&&t[r]===p2;)r--;if(r===-1)return di;const i=t[r],s=xa.charAt(xa.indexOf(i)+1);return t[r]=s,t.slice(0,r+1).join("")},hx=function(n){if(n===""+VA)return Xi;const e=bf(n);if(e!=null)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return t[t.length-1]===mO?t.length===1?""+Zy:(delete t[t.length-1],t.join("")):(t[t.length-1]=xa.charAt(xa.indexOf(t[t.length-1])-1),t.join("")+p2.repeat(m2-t.length))};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g2(n){return{type:"value",snapshotNode:n}}function Sa(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Oc(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function yc(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function vj(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0{constructor(e){this.index_=e}updateChild(e,t,r,i,s,o){_e(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(t);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(t)?o.trackChildChange(Oc(t,a)):_e(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Sa(t,r)):o.trackChildChange(yc(t,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return r!=null&&(e.isLeafNode()||e.forEachChild(At,(i,s)=>{t.hasChild(i)||r.trackChildChange(Oc(i,s))}),t.isLeafNode()||t.forEachChild(At,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(yc(i,s,o))}else r.trackChildChange(Sa(i,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Ge.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e){this.indexedFilter_=new s0(e.getIndex()),this.index_=e.getIndex(),this.startPost_=bc.getStartPost_(e),this.endPost_=bc.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,s,o){return this.matches(new lt(t,r))||(r=Ge.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,s,o)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Ge.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Ge.EMPTY_NODE);const s=this;return t.forEachChild(At,(o,a)=>{s.matches(new lt(o,a))||(i=i.updateImmediateChild(o,Ge.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wj{constructor(e){this.rangedFilter_=new bc(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,s,o){return this.rangedFilter_.matches(new lt(t,r))||(r=Ge.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,s,o):this.fullLimitUpdateChild_(e,t,r,s,o)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Ge.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<t.numChildren()&&t.isIndexed(this.index_)){i=Ge.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const a=s.getNext();let l;if(this.reverse_?l=this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:l=this.index_.compare(a,this.rangedFilter_.getEndPost())<=0,l)i=i.updateImmediateChild(a.name,a.node),o++;else break}}else{i=t.withIndex(this.index_),i=i.updatePriority(Ge.EMPTY_NODE);let s,o,a,l;if(this.reverse_){l=i.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),o=this.rangedFilter_.getStartPost();const h=this.index_.getCompare();a=(f,p)=>h(p,f)}else l=i.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),o=this.rangedFilter_.getEndPost(),a=this.index_.getCompare();let c=0,u=!1;for(;l.hasNext();){const h=l.getNext();!u&&a(s,h)<=0&&(u=!0),u&&c<this.limit_&&a(h,o)<=0?c++:i=i.updateImmediateChild(h.name,Ge.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,s){let o;if(this.reverse_){const h=this.index_.getCompare();o=(f,p)=>h(p,f)}else o=this.index_.getCompare();const a=e;_e(a.numChildren()===this.limit_,"");const l=new lt(t,r),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(l);if(a.hasChild(t)){const h=a.getImmediateChild(t);let f=i.getChildAfterChild(this.index_,c,this.reverse_);for(;f!=null&&(f.name===t||a.hasChild(f.name));)f=i.getChildAfterChild(this.index_,f,this.reverse_);const p=f==null?1:o(f,l);if(u&&!r.isEmpty()&&p>=0)return s!=null&&s.trackChildChange(yc(t,r,h)),a.updateImmediateChild(t,r);{s!=null&&s.trackChildChange(Oc(t,h));const m=a.updateImmediateChild(t,Ge.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(s!=null&&s.trackChildChange(Sa(f.name,f.node)),m.updateImmediateChild(f.name,f.node)):m}}else return r.isEmpty()?e:u&&o(c,l)>=0?(s!=null&&(s.trackChildChange(Oc(c.name,c.node)),s.trackChildChange(Sa(t,r))),a.updateImmediateChild(t,r).updateImmediateChild(c.name,Ge.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=At}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return _e(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return _e(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Xi}hasEnd(){return this.endSet_}getIndexEndValue(){return _e(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return _e(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:di}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return _e(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===At}copy(){const e=new yd;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function _j(n){return n.loadsAllData()?new s0(n.getIndex()):n.hasLimit()?new wj(n):new bc(n)}function xj(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}function Sj(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}function gO(n,e,t){const r=n.copy();return r.startSet_=!0,e===void 0&&(e=null),r.indexStartValue_=e,t!=null?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function kj(n,e,t){let r;if(n.index_===li)typeof e=="string"&&(e=ux(e)),r=gO(n,e,t);else{let i;t==null?i=di:i=ux(t),r=gO(n,e,i)}return r.startAfterSet_=!0,r}function OO(n,e,t){const r=n.copy();return r.endSet_=!0,e===void 0&&(e=null),r.indexEndValue_=e,t!==void 0?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function Tj(n,e,t){let r,i;return n.index_===li?(typeof e=="string"&&(e=hx(e)),i=OO(n,e,t)):(t==null?r=Xi:r=hx(t),i=OO(n,e,r)),i.endBeforeSet_=!0,i}function bd(n,e){const t=n.copy();return t.index_=e,t}function fx(n){const e={};if(n.isDefault())return e;let t;return n.index_===At?t="$priority":n.index_===i0?t="$value":n.index_===li?t="$key":(_e(n.index_ instanceof r0,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=tn(t),n.startSet_&&(e.startAt=tn(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+tn(n.indexStartName_))),n.endSet_&&(e.endAt=tn(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+tn(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function dx(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==At&&(e.i=n.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf extends s2{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Vc("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(_e(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=xf.getListenId_(e,r),a={};this.listens_[o]=a;const l=fx(e._queryParams);this.restRequest_(s+".json",l,(c,u)=>{let h=u;if(c===404&&(h=null,c=null),c===null&&this.onDataUpdate_(s,h,!1,r),uo(this.listens_,o)===a){let f;c?c===401?f="permission_denied":f="rest_error:"+c:f="ok",i(f,null)}})}unlisten(e,t){const r=xf.getListenId_(e,t);delete this.listens_[r]}get(e){const t=fx(e._queryParams),r=e._path.toString(),i=new Hn;return this.restRequest_(r+".json",t,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+z8(t);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=fc(a.responseText)}catch{Mn("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else a.status!==401&&a.status!==404&&Mn("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ej{constructor(){this.rootNode_=Ge.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sf(){return{value:null,children:new Map}}function Va(n,e,t){if(ot(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{const r=st(e);n.children.has(r)||n.children.set(r,Sf());const i=n.children.get(r);e=St(e),Va(i,e,t)}}function yO(n,e){if(ot(e))return n.value=null,n.children.clear(),!0;if(n.value!==null){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(At,(r,i)=>{Va(n,new bt(r),i)}),yO(n,e)}}else if(n.children.size>0){const t=st(e);return e=St(e),n.children.has(t)&&yO(n.children.get(t),e)&&n.children.delete(t),n.children.size===0}else return!0}function bO(n,e,t){n.value!==null?t(e,n.value):Cj(n,(r,i)=>{const s=new bt(e.toString()+"/"+r);bO(i,s,t)})}function Cj(n,e){n.children.forEach((t,r)=>{e(r,t)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aj{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&gn(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const px=10*1e3,Pj=30*1e3,Rj=5*60*1e3;class Ij{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Aj(e);const r=px+(Pj-px)*Math.random();Il(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;gn(e,(i,s)=>{s>0&&fr(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),Il(this.reportStats_.bind(this),Math.floor(Math.random()*2*Rj))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $r;(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})($r||($r={}));function o0(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function a0(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function l0(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=$r.ACK_USER_WRITE,this.source=o0()}operationForChild(e){if(ot(this.path)){if(this.affectedTree.value!=null)return _e(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new bt(e));return new kf(pt(),t,this.revert)}}else return _e(st(this.path)===e,"operationForChild called for unrelated child."),new kf(St(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e,t){this.source=e,this.path=t,this.type=$r.LISTEN_COMPLETE}operationForChild(e){return ot(this.path)?new vc(this.source,pt()):new vc(this.source,St(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=$r.OVERWRITE}operationForChild(e){return ot(this.path)?new fo(this.source,pt(),this.snap.getImmediateChild(e)):new fo(this.source,St(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=$r.MERGE}operationForChild(e){if(ot(this.path)){const t=this.children.subtree(new bt(e));return t.isEmpty()?null:t.value?new fo(this.source,pt(),t.value):new ka(this.source,pt(),t)}else return _e(st(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new ka(this.source,St(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ot(e))return this.isFullyInitialized()&&!this.filtered_;const t=st(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qj{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Nj(n,e,t,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(vj(o.childName,o.snapshotNode))}),dl(n,i,"child_removed",e,r,t),dl(n,i,"child_added",e,r,t),dl(n,i,"child_moved",s,r,t),dl(n,i,"child_changed",e,r,t),dl(n,i,"value",e,r,t),i}function dl(n,e,t,r,i,s){const o=r.filter(a=>a.type===t);o.sort((a,l)=>Dj(n,a,l)),o.forEach(a=>{const l=Lj(n,a,s);i.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,n.query_))})})}function Lj(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function Dj(n,e,t){if(e.childName==null||t.childName==null)throw Ba("Should only compare child_ events.");const r=new lt(e.childName,e.snapshotNode),i=new lt(t.childName,t.snapshotNode);return n.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vd(n,e){return{eventCache:n,serverCache:e}}function Ql(n,e,t,r){return vd(new Rs(e,t,r),n.serverCache)}function O2(n,e,t,r){return vd(n.eventCache,new Rs(e,t,r))}function Tf(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function po(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bm;const Mj=()=>(bm||(bm=new Gn(vW)),bm);class Ct{constructor(e,t=Mj()){this.value=e,this.children=t}static fromObject(e){let t=new Ct(null);return gn(e,(r,i)=>{t=t.set(new bt(r),i)}),t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:pt(),value:this.value};if(ot(e))return null;{const r=st(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(St(e),t);return s!=null?{path:$t(new bt(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ot(e))return this;{const t=st(e),r=this.children.get(t);return r!==null?r.subtree(St(e)):new Ct(null)}}set(e,t){if(ot(e))return new Ct(t,this.children);{const r=st(e),s=(this.children.get(r)||new Ct(null)).set(St(e),t),o=this.children.insert(r,s);return new Ct(this.value,o)}}remove(e){if(ot(e))return this.children.isEmpty()?new Ct(null):new Ct(null,this.children);{const t=st(e),r=this.children.get(t);if(r){const i=r.remove(St(e));let s;return i.isEmpty()?s=this.children.remove(t):s=this.children.insert(t,i),this.value===null&&s.isEmpty()?new Ct(null):new Ct(this.value,s)}else return this}}get(e){if(ot(e))return this.value;{const t=st(e),r=this.children.get(t);return r?r.get(St(e)):null}}setTree(e,t){if(ot(e))return t;{const r=st(e),s=(this.children.get(r)||new Ct(null)).setTree(St(e),t);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new Ct(this.value,o)}}fold(e){return this.fold_(pt(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_($t(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,pt(),t)}findOnPath_(e,t,r){const i=this.value?r(t,this.value):!1;if(i)return i;if(ot(e))return null;{const s=st(e),o=this.children.get(s);return o?o.findOnPath_(St(e),$t(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,pt(),t)}foreachOnPath_(e,t,r){if(ot(e))return this;{this.value&&r(t,this.value);const i=st(e),s=this.children.get(i);return s?s.foreachOnPath_(St(e),$t(t,i),r):new Ct(null)}}foreach(e){this.foreach_(pt(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_($t(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e){this.writeTree_=e}static empty(){return new Ur(new Ct(null))}}function Nl(n,e,t){if(ot(e))return new Ur(new Ct(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=qn(i,e);return s=s.updateChild(o,t),new Ur(n.writeTree_.set(i,s))}else{const i=new Ct(t),s=n.writeTree_.setTree(e,i);return new Ur(s)}}}function vO(n,e,t){let r=n;return gn(t,(i,s)=>{r=Nl(r,$t(e,i),s)}),r}function mx(n,e){if(ot(e))return Ur.empty();{const t=n.writeTree_.setTree(e,new Ct(null));return new Ur(t)}}function wO(n,e){return _o(n,e)!=null}function _o(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(qn(t.path,e)):null}function gx(n){const e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(At,(r,i)=>{e.push(new lt(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new lt(r,i.value))}),e}function Os(n,e){if(ot(e))return n;{const t=_o(n,e);return t!=null?new Ur(new Ct(t)):new Ur(n.writeTree_.subtree(e))}}function _O(n){return n.writeTree_.isEmpty()}function Ta(n,e){return y2(pt(),n.writeTree_,e)}function y2(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(_e(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):t=y2($t(n,i),s,t)}),!t.getChild(n).isEmpty()&&r!==null&&(t=t.updateChild($t(n,".priority"),r)),t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wd(n,e){return _2(e,n)}function $j(n,e,t,r,i){_e(r>n.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=Nl(n.visibleWrites,e,t)),n.lastWriteId=r}function Bj(n,e,t,r){_e(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=vO(n.visibleWrites,e,t),n.lastWriteId=r}function Fj(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}function Uj(n,e){const t=n.allWrites.findIndex(a=>a.writeId===e);_e(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,o=n.allWrites.length-1;for(;i&&o>=0;){const a=n.allWrites[o];a.visible&&(o>=t&&Vj(a,r.path)?i=!1:_r(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return Wj(n),!0;if(r.snap)n.visibleWrites=mx(n.visibleWrites,r.path);else{const a=r.children;gn(a,l=>{n.visibleWrites=mx(n.visibleWrites,$t(r.path,l))})}return!0}else return!1}function Vj(n,e){if(n.snap)return _r(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&_r($t(n.path,t),e))return!0;return!1}function Wj(n){n.visibleWrites=b2(n.allWrites,jj,pt()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function jj(n){return n.visible}function b2(n,e,t){let r=Ur.empty();for(let i=0;i<n.length;++i){const s=n[i];if(e(s)){const o=s.path;let a;if(s.snap)_r(t,o)?(a=qn(t,o),r=Nl(r,a,s.snap)):_r(o,t)&&(a=qn(o,t),r=Nl(r,pt(),s.snap.getChild(a)));else if(s.children){if(_r(t,o))a=qn(t,o),r=vO(r,a,s.children);else if(_r(o,t))if(a=qn(o,t),ot(a))r=vO(r,pt(),s.children);else{const l=uo(s.children,st(a));if(l){const c=l.getChild(St(a));r=Nl(r,pt(),c)}}}else throw Ba("WriteRecord should have .snap or .children")}}return r}function v2(n,e,t,r,i){if(!r&&!i){const s=_o(n.visibleWrites,e);if(s!=null)return s;{const o=Os(n.visibleWrites,e);if(_O(o))return t;if(t==null&&!wO(o,pt()))return null;{const a=t||Ge.EMPTY_NODE;return Ta(o,a)}}}else{const s=Os(n.visibleWrites,e);if(!i&&_O(s))return t;if(!i&&t==null&&!wO(s,pt()))return null;{const o=function(c){return(c.visible||i)&&(!r||!~r.indexOf(c.writeId))&&(_r(c.path,e)||_r(e,c.path))},a=b2(n.allWrites,o,e),l=t||Ge.EMPTY_NODE;return Ta(a,l)}}}function qj(n,e,t){let r=Ge.EMPTY_NODE;const i=_o(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(At,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(t){const s=Os(n.visibleWrites,e);return t.forEachChild(At,(o,a)=>{const l=Ta(Os(s,new bt(o)),a);r=r.updateImmediateChild(o,l)}),gx(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=Os(n.visibleWrites,e);return gx(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function Xj(n,e,t,r,i){_e(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=$t(e,t);if(wO(n.visibleWrites,s))return null;{const o=Os(n.visibleWrites,s);return _O(o)?i.getChild(t):Ta(o,i.getChild(t))}}function zj(n,e,t,r){const i=$t(e,t),s=_o(n.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(t)){const o=Os(n.visibleWrites,i);return Ta(o,r.getNode().getImmediateChild(t))}else return null}function Hj(n,e){return _o(n.visibleWrites,e)}function Zj(n,e,t,r,i,s,o){let a;const l=Os(n.visibleWrites,e),c=_o(l,pt());if(c!=null)a=c;else if(t!=null)a=Ta(l,t);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const u=[],h=o.getCompare(),f=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let p=f.getNext();for(;p&&u.length<i;)h(p,r)!==0&&u.push(p),p=f.getNext();return u}else return[]}function Gj(){return{visibleWrites:Ur.empty(),allWrites:[],lastWriteId:-1}}function Ef(n,e,t,r){return v2(n.writeTree,n.treePath,e,t,r)}function c0(n,e){return qj(n.writeTree,n.treePath,e)}function Ox(n,e,t,r){return Xj(n.writeTree,n.treePath,e,t,r)}function Cf(n,e){return Hj(n.writeTree,$t(n.treePath,e))}function Yj(n,e,t,r,i,s){return Zj(n.writeTree,n.treePath,e,t,r,i,s)}function u0(n,e,t){return zj(n.writeTree,n.treePath,e,t)}function w2(n,e){return _2($t(n.treePath,e),n.writeTree)}function _2(n,e){return{treePath:n,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kj{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;_e(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),_e(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(t==="child_added"&&s==="child_removed")this.changeMap.set(r,yc(r,e.snapshotNode,i.snapshotNode));else if(t==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(t==="child_removed"&&s==="child_changed")this.changeMap.set(r,Oc(r,i.oldSnap));else if(t==="child_changed"&&s==="child_added")this.changeMap.set(r,Sa(r,e.snapshotNode));else if(t==="child_changed"&&s==="child_changed")this.changeMap.set(r,yc(r,e.snapshotNode,i.oldSnap));else throw Ba("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jj{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}}const x2=new Jj;class h0{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new Rs(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return u0(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:po(this.viewCache_),s=Yj(this.writes_,i,t,1,r,e);return s.length===0?null:s[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eq(n){return{filter:n}}function tq(n,e){_e(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),_e(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function nq(n,e,t,r,i){const s=new Kj;let o,a;if(t.type===$r.OVERWRITE){const c=t;c.source.fromUser?o=xO(n,e,c.path,c.snap,r,i,s):(_e(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!ot(c.path),o=Af(n,e,c.path,c.snap,r,i,a,s))}else if(t.type===$r.MERGE){const c=t;c.source.fromUser?o=iq(n,e,c.path,c.children,r,i,s):(_e(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=SO(n,e,c.path,c.children,r,i,a,s))}else if(t.type===$r.ACK_USER_WRITE){const c=t;c.revert?o=aq(n,e,c.path,r,i,s):o=sq(n,e,c.path,c.affectedTree,r,i,s)}else if(t.type===$r.LISTEN_COMPLETE)o=oq(n,e,t.path,r,s);else throw Ba("Unknown operation type: "+t.type);const l=s.getChanges();return rq(e,o,l),{viewCache:o,changes:l}}function rq(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Tf(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(g2(Tf(e)))}}function S2(n,e,t,r,i,s){const o=e.eventCache;if(Cf(r,t)!=null)return e;{let a,l;if(ot(t))if(_e(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=po(e),u=c instanceof Ge?c:Ge.EMPTY_NODE,h=c0(r,u);a=n.filter.updateFullNode(e.eventCache.getNode(),h,s)}else{const c=Ef(r,po(e));a=n.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const c=st(t);if(c===".priority"){_e(Ps(t)===1,"Can't have a priority with additional path components");const u=o.getNode();l=e.serverCache.getNode();const h=Ox(r,t,u,l);h!=null?a=n.filter.updatePriority(u,h):a=o.getNode()}else{const u=St(t);let h;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const f=Ox(r,t,o.getNode(),l);f!=null?h=o.getNode().getImmediateChild(c).updateChild(u,f):h=o.getNode().getImmediateChild(c)}else h=u0(r,c,e.serverCache);h!=null?a=n.filter.updateChild(o.getNode(),c,h,u,i,s):a=o.getNode()}}return Ql(e,a,o.isFullyInitialized()||ot(t),n.filter.filtersNodes())}}function Af(n,e,t,r,i,s,o,a){const l=e.serverCache;let c;const u=o?n.filter:n.filter.getIndexedFilter();if(ot(t))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){const p=l.getNode().updateChild(t,r);c=u.updateFullNode(l.getNode(),p,null)}else{const p=st(t);if(!l.isCompleteForPath(t)&&Ps(t)>1)return e;const d=St(t),y=l.getNode().getImmediateChild(p).updateChild(d,r);p===".priority"?c=u.updatePriority(l.getNode(),y):c=u.updateChild(l.getNode(),p,y,d,x2,null)}const h=O2(e,c,l.isFullyInitialized()||ot(t),u.filtersNodes()),f=new h0(i,h,s);return S2(n,h,t,i,f,a)}function xO(n,e,t,r,i,s,o){const a=e.eventCache;let l,c;const u=new h0(i,e,s);if(ot(t))c=n.filter.updateFullNode(e.eventCache.getNode(),r,o),l=Ql(e,c,!0,n.filter.filtersNodes());else{const h=st(t);if(h===".priority")c=n.filter.updatePriority(e.eventCache.getNode(),r),l=Ql(e,c,a.isFullyInitialized(),a.isFiltered());else{const f=St(t),p=a.getNode().getImmediateChild(h);let d;if(ot(f))d=r;else{const m=u.getCompleteChild(h);m!=null?Jy(f)===".priority"&&m.getChild(a2(f)).isEmpty()?d=m:d=m.updateChild(f,r):d=Ge.EMPTY_NODE}if(p.equals(d))l=e;else{const m=n.filter.updateChild(a.getNode(),h,d,f,u,o);l=Ql(e,m,a.isFullyInitialized(),n.filter.filtersNodes())}}}return l}function yx(n,e){return n.eventCache.isCompleteForChild(e)}function iq(n,e,t,r,i,s,o){let a=e;return r.foreach((l,c)=>{const u=$t(t,l);yx(e,st(u))&&(a=xO(n,a,u,c,i,s,o))}),r.foreach((l,c)=>{const u=$t(t,l);yx(e,st(u))||(a=xO(n,a,u,c,i,s,o))}),a}function bx(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function SO(n,e,t,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;ot(t)?c=r:c=new Ct(null).setTree(t,r);const u=e.serverCache.getNode();return c.children.inorderTraversal((h,f)=>{if(u.hasChild(h)){const p=e.serverCache.getNode().getImmediateChild(h),d=bx(n,p,f);l=Af(n,l,new bt(h),d,i,s,o,a)}}),c.children.inorderTraversal((h,f)=>{const p=!e.serverCache.isCompleteForChild(h)&&f.value===null;if(!u.hasChild(h)&&!p){const d=e.serverCache.getNode().getImmediateChild(h),m=bx(n,d,f);l=Af(n,l,new bt(h),m,i,s,o,a)}}),l}function sq(n,e,t,r,i,s,o){if(Cf(i,t)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(r.value!=null){if(ot(t)&&l.isFullyInitialized()||l.isCompleteForPath(t))return Af(n,e,t,l.getNode().getChild(t),i,s,a,o);if(ot(t)){let c=new Ct(null);return l.getNode().forEachChild(li,(u,h)=>{c=c.set(new bt(u),h)}),SO(n,e,t,c,i,s,a,o)}else return e}else{let c=new Ct(null);return r.foreach((u,h)=>{const f=$t(t,u);l.isCompleteForPath(f)&&(c=c.set(u,l.getNode().getChild(f)))}),SO(n,e,t,c,i,s,a,o)}}function oq(n,e,t,r,i){const s=e.serverCache,o=O2(e,s.getNode(),s.isFullyInitialized()||ot(t),s.isFiltered());return S2(n,o,t,r,x2,i)}function aq(n,e,t,r,i,s){let o;if(Cf(r,t)!=null)return e;{const a=new h0(r,e,i),l=e.eventCache.getNode();let c;if(ot(t)||st(t)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=Ef(r,po(e));else{const h=e.serverCache.getNode();_e(h instanceof Ge,"serverChildren would be complete if leaf node"),u=c0(r,h)}u=u,c=n.filter.updateFullNode(l,u,s)}else{const u=st(t);let h=u0(r,u,e.serverCache);h==null&&e.serverCache.isCompleteForChild(u)&&(h=l.getImmediateChild(u)),h!=null?c=n.filter.updateChild(l,u,h,St(t),a,s):e.eventCache.getNode().hasChild(u)?c=n.filter.updateChild(l,u,Ge.EMPTY_NODE,St(t),a,s):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Ef(r,po(e)),o.isLeafNode()&&(c=n.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||Cf(r,pt())!=null,Ql(e,c,o,n.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lq{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new s0(r.getIndex()),s=_j(r);this.processor_=eq(s);const o=t.serverCache,a=t.eventCache,l=i.updateFullNode(Ge.EMPTY_NODE,o.getNode(),null),c=s.updateFullNode(Ge.EMPTY_NODE,a.getNode(),null),u=new Rs(l,o.isFullyInitialized(),i.filtersNodes()),h=new Rs(c,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=vd(h,u),this.eventGenerator_=new Qj(this.query_)}get query(){return this.query_}}function cq(n){return n.viewCache_.serverCache.getNode()}function uq(n){return Tf(n.viewCache_)}function hq(n,e){const t=po(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!ot(e)&&!t.getImmediateChild(st(e)).isEmpty())?t.getChild(e):null}function vx(n){return n.eventRegistrations_.length===0}function fq(n,e){n.eventRegistrations_.push(e)}function wx(n,e,t){const r=[];if(t){_e(e==null,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(t,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<n.eventRegistrations_.length;++s){const o=n.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(s+1));break}}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function _x(n,e,t,r){e.type===$r.MERGE&&e.source.queryId!==null&&(_e(po(n.viewCache_),"We should always have a full cache before handling merges"),_e(Tf(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,s=nq(n.processor_,i,e,t,r);return tq(n.processor_,s.viewCache),_e(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,k2(n,s.changes,s.viewCache.eventCache.getNode(),null)}function dq(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(At,(s,o)=>{r.push(Sa(s,o))}),t.isFullyInitialized()&&r.push(g2(t.getNode())),k2(n,r,t.getNode(),e)}function k2(n,e,t,r){const i=r?[r]:n.eventRegistrations_;return Nj(n.eventGenerator_,e,t,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pf;class T2{constructor(){this.views=new Map}}function pq(n){_e(!Pf,"__referenceConstructor has already been defined"),Pf=n}function mq(){return _e(Pf,"Reference.ts has not been loaded"),Pf}function gq(n){return n.views.size===0}function f0(n,e,t,r){const i=e.source.queryId;if(i!==null){const s=n.views.get(i);return _e(s!=null,"SyncTree gave us an op for an invalid query."),_x(s,e,t,r)}else{let s=[];for(const o of n.views.values())s=s.concat(_x(o,e,t,r));return s}}function E2(n,e,t,r,i){const s=e._queryIdentifier,o=n.views.get(s);if(!o){let a=Ef(t,i?r:null),l=!1;a?l=!0:r instanceof Ge?(a=c0(t,r),l=!1):(a=Ge.EMPTY_NODE,l=!1);const c=vd(new Rs(a,l,!1),new Rs(r,i,!1));return new lq(e,c)}return o}function Oq(n,e,t,r,i,s){const o=E2(n,e,r,i,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,o),fq(o,t),dq(o,t)}function yq(n,e,t,r){const i=e._queryIdentifier,s=[];let o=[];const a=Is(n);if(i==="default")for(const[l,c]of n.views.entries())o=o.concat(wx(c,t,r)),vx(c)&&(n.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{const l=n.views.get(i);l&&(o=o.concat(wx(l,t,r)),vx(l)&&(n.views.delete(i),l.query._queryParams.loadsAllData()||s.push(l.query)))}return a&&!Is(n)&&s.push(new(mq())(e._repo,e._path)),{removed:s,events:o}}function C2(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function ys(n,e){let t=null;for(const r of n.views.values())t=t||hq(r,e);return t}function A2(n,e){if(e._queryParams.loadsAllData())return _d(n);{const r=e._queryIdentifier;return n.views.get(r)}}function P2(n,e){return A2(n,e)!=null}function Is(n){return _d(n)!=null}function _d(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rf;function bq(n){_e(!Rf,"__referenceConstructor has already been defined"),Rf=n}function vq(){return _e(Rf,"Reference.ts has not been loaded"),Rf}let wq=1;class xx{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Ct(null),this.pendingWriteTree_=Gj(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function d0(n,e,t,r,i){return $j(n.pendingWriteTree_,e,t,r,i),i?Wa(n,new fo(o0(),e,t)):[]}function _q(n,e,t,r){Bj(n.pendingWriteTree_,e,t,r);const i=Ct.fromObject(t);return Wa(n,new ka(o0(),e,i))}function fs(n,e,t=!1){const r=Fj(n.pendingWriteTree_,e);if(Uj(n.pendingWriteTree_,e)){let s=new Ct(null);return r.snap!=null?s=s.set(pt(),!0):gn(r.children,o=>{s=s.set(new bt(o),!0)}),Wa(n,new kf(r.path,s,t))}else return[]}function jc(n,e,t){return Wa(n,new fo(a0(),e,t))}function xq(n,e,t){const r=Ct.fromObject(t);return Wa(n,new ka(a0(),e,r))}function Sq(n,e){return Wa(n,new vc(a0(),e))}function kq(n,e,t){const r=p0(n,t);if(r){const i=m0(r),s=i.path,o=i.queryId,a=qn(s,e),l=new vc(l0(o),a);return g0(n,s,l)}else return[]}function If(n,e,t,r,i=!1){const s=e._path,o=n.syncPointTree_.get(s);let a=[];if(o&&(e._queryIdentifier==="default"||P2(o,e))){const l=yq(o,e,t,r);gq(o)&&(n.syncPointTree_=n.syncPointTree_.remove(s));const c=l.removed;if(a=l.events,!i){const u=c.findIndex(f=>f._queryParams.loadsAllData())!==-1,h=n.syncPointTree_.findOnPath(s,(f,p)=>Is(p));if(u&&!h){const f=n.syncPointTree_.subtree(s);if(!f.isEmpty()){const p=Cq(f);for(let d=0;d<p.length;++d){const m=p[d],y=m.query,w=N2(n,m);n.listenProvider_.startListening(Ll(y),wc(n,y),w.hashFn,w.onComplete)}}}!h&&c.length>0&&!r&&(u?n.listenProvider_.stopListening(Ll(e),null):c.forEach(f=>{const p=n.queryToTagMap.get(Sd(f));n.listenProvider_.stopListening(Ll(f),p)}))}Aq(n,c)}return a}function R2(n,e,t,r){const i=p0(n,r);if(i!=null){const s=m0(i),o=s.path,a=s.queryId,l=qn(o,e),c=new fo(l0(a),l,t);return g0(n,o,c)}else return[]}function Tq(n,e,t,r){const i=p0(n,r);if(i){const s=m0(i),o=s.path,a=s.queryId,l=qn(o,e),c=Ct.fromObject(t),u=new ka(l0(a),l,c);return g0(n,o,u)}else return[]}function kO(n,e,t,r=!1){const i=e._path;let s=null,o=!1;n.syncPointTree_.foreachOnPath(i,(f,p)=>{const d=qn(f,i);s=s||ys(p,d),o=o||Is(p)});let a=n.syncPointTree_.get(i);a?(o=o||Is(a),s=s||ys(a,pt())):(a=new T2,n.syncPointTree_=n.syncPointTree_.set(i,a));let l;s!=null?l=!0:(l=!1,s=Ge.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((p,d)=>{const m=ys(d,pt());m&&(s=s.updateImmediateChild(p,m))}));const c=P2(a,e);if(!c&&!e._queryParams.loadsAllData()){const f=Sd(e);_e(!n.queryToTagMap.has(f),"View does not exist, but we have a tag");const p=Pq();n.queryToTagMap.set(f,p),n.tagToQueryMap.set(p,f)}const u=wd(n.pendingWriteTree_,i);let h=Oq(a,e,t,u,s,l);if(!c&&!o&&!r){const f=A2(a,e);h=h.concat(Rq(n,e,f))}return h}function xd(n,e,t){const i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(o,a)=>{const l=qn(o,e),c=ys(a,l);if(c)return c});return v2(i,e,s,t,!0)}function Eq(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(c,u)=>{const h=qn(c,t);r=r||ys(u,h)});let i=n.syncPointTree_.get(t);i?r=r||ys(i,pt()):(i=new T2,n.syncPointTree_=n.syncPointTree_.set(t,i));const s=r!=null,o=s?new Rs(r,!0,!1):null,a=wd(n.pendingWriteTree_,e._path),l=E2(i,e,a,s?o.getNode():Ge.EMPTY_NODE,s);return uq(l)}function Wa(n,e){return I2(e,n.syncPointTree_,null,wd(n.pendingWriteTree_,pt()))}function I2(n,e,t,r){if(ot(n.path))return Q2(n,e,t,r);{const i=e.get(pt());t==null&&i!=null&&(t=ys(i,pt()));let s=[];const o=st(n.path),a=n.operationForChild(o),l=e.children.get(o);if(l&&a){const c=t?t.getImmediateChild(o):null,u=w2(r,o);s=s.concat(I2(a,l,c,u))}return i&&(s=s.concat(f0(i,n,r,t))),s}}function Q2(n,e,t,r){const i=e.get(pt());t==null&&i!=null&&(t=ys(i,pt()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=t?t.getImmediateChild(o):null,c=w2(r,o),u=n.operationForChild(o);u&&(s=s.concat(Q2(u,a,l,c)))}),i&&(s=s.concat(f0(i,n,r,t))),s}function N2(n,e){const t=e.query,r=wc(n,t);return{hashFn:()=>(cq(e)||Ge.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?kq(n,t._path,r):Sq(n,t._path);{const s=xW(i,t);return If(n,t,null,s)}}}}function wc(n,e){const t=Sd(e);return n.queryToTagMap.get(t)}function Sd(n){return n._path.toString()+"$"+n._queryIdentifier}function p0(n,e){return n.tagToQueryMap.get(e)}function m0(n){const e=n.indexOf("$");return _e(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new bt(n.substr(0,e))}}function g0(n,e,t){const r=n.syncPointTree_.get(e);_e(r,"Missing sync point for query tag that we're tracking");const i=wd(n.pendingWriteTree_,e);return f0(r,t,i,null)}function Cq(n){return n.fold((e,t,r)=>{if(t&&Is(t))return[_d(t)];{let i=[];return t&&(i=C2(t)),gn(r,(s,o)=>{i=i.concat(o)}),i}})}function Ll(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(vq())(n._repo,n._path):n}function Aq(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=Sd(r),s=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(s)}}}function Pq(){return wq++}function Rq(n,e,t){const r=e._path,i=wc(n,e),s=N2(n,t),o=n.listenProvider_.startListening(Ll(e),i,s.hashFn,s.onComplete),a=n.syncPointTree_.subtree(r);if(i)_e(!Is(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((c,u,h)=>{if(!ot(c)&&u&&Is(u))return[_d(u).query];{let f=[];return u&&(f=f.concat(C2(u).map(p=>p.query))),gn(h,(p,d)=>{f=f.concat(d)}),f}});for(let c=0;c<l.length;++c){const u=l[c];n.listenProvider_.stopListening(Ll(u),wc(n,u))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new O0(t)}node(){return this.node_}}class y0{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=$t(this.path_,e);return new y0(this.syncTree_,t)}node(){return xd(this.syncTree_,this.path_)}}const Iq=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},Sx=function(n,e,t){if(!n||typeof n!="object")return n;if(_e(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return Qq(n[".sv"],e,t);if(typeof n[".sv"]=="object")return Nq(n[".sv"],e);_e(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},Qq=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:_e(!1,"Unexpected server value: "+n)}},Nq=function(n,e,t){n.hasOwnProperty("increment")||_e(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;typeof r!="number"&&_e(!1,"Unexpected increment value: "+r);const i=e.node();if(_e(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},L2=function(n,e,t,r){return v0(e,new y0(t,n),r)},b0=function(n,e,t){return v0(n,new O0(e),t)};function v0(n,e,t){const r=n.getPriority().val(),i=Sx(r,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const o=n,a=Sx(o.getValue(),e,t);return a!==o.getValue()||i!==o.getPriority().val()?new hn(a,Ut(i)):n}else{const o=n;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new hn(i))),o.forEachChild(At,(a,l)=>{const c=v0(l,e.getImmediateChild(a),t);c!==l&&(s=s.updateImmediateChild(a,c))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function kd(n,e){let t=e instanceof bt?e:new bt(e),r=n,i=st(t);for(;i!==null;){const s=uo(r.node.children,i)||{children:{},childCount:0};r=new w0(i,r,s),t=St(t),i=st(t)}return r}function xo(n){return n.node.value}function _0(n,e){n.node.value=e,TO(n)}function D2(n){return n.node.childCount>0}function Lq(n){return xo(n)===void 0&&!D2(n)}function Td(n,e){gn(n.node.children,(t,r)=>{e(new w0(t,n,r))})}function M2(n,e,t,r){t&&!r&&e(n),Td(n,i=>{M2(i,e,!0,r)}),t&&r&&e(n)}function Dq(n,e,t){let r=t?n:n.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function qc(n){return new bt(n.parent===null?n.name:qc(n.parent)+"/"+n.name)}function TO(n){n.parent!==null&&Mq(n.parent,n.name,n)}function Mq(n,e,t){const r=Lq(t),i=fr(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,TO(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,TO(n))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $q=/[\[\].#$\/\u0000-\u001F\u007F]/,Bq=/[\[\].#$\u0000-\u001F\u007F]/,vm=10*1024*1024,Ed=function(n){return typeof n=="string"&&n.length!==0&&!$q.test(n)},$2=function(n){return typeof n=="string"&&n.length!==0&&!Bq.test(n)},Fq=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),$2(n)},_c=function(n){return n===null||typeof n=="string"||typeof n=="number"&&!gd(n)||n&&typeof n=="object"&&fr(n,".sv")},pi=function(n,e,t,r){r&&e===void 0||Xc(Yn(n,"value"),e,t)},Xc=function(n,e,t){const r=t instanceof bt?new tj(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+js(r));if(typeof e=="function")throw new Error(n+"contains a function "+js(r)+" with contents = "+e.toString());if(gd(e))throw new Error(n+"contains "+e.toString()+" "+js(r));if(typeof e=="string"&&e.length>vm/3&&pd(e)>vm)throw new Error(n+"contains a string greater than "+vm+" utf8 bytes "+js(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(gn(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!Ed(o)))throw new Error(n+" contains an invalid key ("+o+") "+js(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);nj(r,o),Xc(n,a,r),rj(r)}),i&&s)throw new Error(n+' contains ".value" child '+js(r)+" in addition to actual children.")}},Uq=function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const s=gc(r);for(let o=0;o<s.length;o++)if(!(s[o]===".priority"&&o===s.length-1)){if(!Ed(s[o]))throw new Error(n+"contains an invalid key ("+s[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(ej);let i=null;for(t=0;t<e.length;t++){if(r=e[t],i!==null&&_r(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},B2=function(n,e,t,r){if(r&&e===void 0)return;const i=Yn(n,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];gn(e,(o,a)=>{const l=new bt(o);if(Xc(i,a,$t(t,l)),Jy(l)===".priority"&&!_c(a))throw new Error(i+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(l)}),Uq(i,s)},x0=function(n,e,t){if(!(t&&e===void 0)){if(gd(e))throw new Error(Yn(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!_c(e))throw new Error(Yn(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},zc=function(n,e,t,r){if(!(r&&t===void 0)&&!Ed(t))throw new Error(Yn(n,e)+'was an invalid key = "'+t+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},xc=function(n,e,t,r){if(!(r&&t===void 0)&&!$2(t))throw new Error(Yn(n,e)+'was an invalid path = "'+t+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},Vq=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),xc(n,e,t,r)},xr=function(n,e){if(st(e)===".info")throw new Error(n+" failed = Can't modify data under /.info/")},F2=function(n,e){const t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Ed(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!Fq(t))throw new Error(Yn(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wq{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Cd(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();t!==null&&!e0(s,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)}function U2(n,e,t){Cd(n,t),V2(n,r=>e0(r,e))}function dr(n,e,t){Cd(n,t),V2(n,r=>_r(r,e)||_r(e,r))}function V2(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];if(i){const s=i.path;e(s)?(jq(n.eventLists_[r]),n.eventLists_[r]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function jq(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(t!==null){n.events[e]=null;const r=t.getEventRunner();ro&&pn("event: "+t.toString()),Ua(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W2="repo_interrupt",qq=25;class Xq{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Wq,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Sf(),this.transactionQueueTree_=new w0,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function zq(n,e,t){if(n.stats_=Yy(n.repoInfo_),n.forceRestClient_||kW())n.server_=new xf(n.repoInfo_,(r,i,s,o)=>{kx(n,r,i,s,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>Tx(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{tn(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Ui(n.repoInfo_,e,(r,i,s,o)=>{kx(n,r,i,s,o)},r=>{Tx(n,r)},r=>{Hq(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=PW(n.repoInfo_,()=>new Ij(n.stats_,n.server_)),n.infoData_=new Ej,n.infoSyncTree_=new xx({startListening:(r,i,s,o)=>{let a=[];const l=n.infoData_.getNode(r._path);return l.isEmpty()||(a=jc(n.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),S0(n,"connected",!1),n.serverSyncTree_=new xx({startListening:(r,i,s,o)=>(n.server_.listen(r,s,i,(a,l)=>{const c=o(a,l);dr(n.eventQueue_,r._path,c)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}function j2(n){const t=n.infoData_.getNode(new bt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function Hc(n){return Iq({timestamp:j2(n)})}function kx(n,e,t,r,i){n.dataUpdateCount++;const s=new bt(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let o=[];if(i)if(r){const l=Of(t,c=>Ut(c));o=Tq(n.serverSyncTree_,s,l,i)}else{const l=Ut(t);o=R2(n.serverSyncTree_,s,l,i)}else if(r){const l=Of(t,c=>Ut(c));o=xq(n.serverSyncTree_,s,l)}else{const l=Ut(t);o=jc(n.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=Ea(n,s)),dr(n.eventQueue_,a,o)}function Tx(n,e){S0(n,"connected",e),e===!1&&Yq(n)}function Hq(n,e){gn(e,(t,r)=>{S0(n,t,r)})}function S0(n,e,t){const r=new bt("/.info/"+e),i=Ut(t);n.infoData_.updateSnapshot(r,i);const s=jc(n.infoSyncTree_,r,i);dr(n.eventQueue_,r,s)}function Ad(n){return n.nextWriteId_++}function Zq(n,e,t){const r=Eq(n.serverSyncTree_,e);return r!=null?Promise.resolve(r):n.server_.get(e).then(i=>{const s=Ut(i).withIndex(e._queryParams.getIndex());kO(n.serverSyncTree_,e,t,!0);let o;if(e._queryParams.loadsAllData())o=jc(n.serverSyncTree_,e._path,s);else{const a=wc(n.serverSyncTree_,e);o=R2(n.serverSyncTree_,e._path,s,a)}return dr(n.eventQueue_,e._path,o),If(n.serverSyncTree_,e,t,null,!0),s},i=>(ja(n,"get for query "+tn(e)+" failed: "+i),Promise.reject(new Error(i))))}function k0(n,e,t,r,i){ja(n,"set",{path:e.toString(),value:t,priority:r});const s=Hc(n),o=Ut(t,r),a=xd(n.serverSyncTree_,e),l=b0(o,a,s),c=Ad(n),u=d0(n.serverSyncTree_,e,l,c,!0);Cd(n.eventQueue_,u),n.server_.put(e.toString(),o.val(!0),(f,p)=>{const d=f==="ok";d||Mn("set at "+e+" failed: "+f);const m=fs(n.serverSyncTree_,c,!d);dr(n.eventQueue_,e,m),Qs(n,i,f,p)});const h=E0(n,e);Ea(n,h),dr(n.eventQueue_,h,[])}function Gq(n,e,t,r){ja(n,"update",{path:e.toString(),value:t});let i=!0;const s=Hc(n),o={};if(gn(t,(a,l)=>{i=!1,o[a]=L2($t(e,a),Ut(l),n.serverSyncTree_,s)}),i)pn("update() called with empty data.  Don't do anything."),Qs(n,r,"ok",void 0);else{const a=Ad(n),l=_q(n.serverSyncTree_,e,o,a);Cd(n.eventQueue_,l),n.server_.merge(e.toString(),t,(c,u)=>{const h=c==="ok";h||Mn("update at "+e+" failed: "+c);const f=fs(n.serverSyncTree_,a,!h),p=f.length>0?Ea(n,e):e;dr(n.eventQueue_,p,f),Qs(n,r,c,u)}),gn(t,c=>{const u=E0(n,$t(e,c));Ea(n,u)}),dr(n.eventQueue_,e,[])}}function Yq(n){ja(n,"onDisconnectEvents");const e=Hc(n),t=Sf();bO(n.onDisconnect_,pt(),(i,s)=>{const o=L2(i,s,n.serverSyncTree_,e);Va(t,i,o)});let r=[];bO(t,pt(),(i,s)=>{r=r.concat(jc(n.serverSyncTree_,i,s));const o=E0(n,i);Ea(n,o)}),n.onDisconnect_=Sf(),dr(n.eventQueue_,pt(),r)}function Kq(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{r==="ok"&&yO(n.onDisconnect_,e),Qs(n,t,r,i)})}function Ex(n,e,t,r){const i=Ut(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(s,o)=>{s==="ok"&&Va(n.onDisconnect_,e,i),Qs(n,r,s,o)})}function Jq(n,e,t,r,i){const s=Ut(t,r);n.server_.onDisconnectPut(e.toString(),s.val(!0),(o,a)=>{o==="ok"&&Va(n.onDisconnect_,e,s),Qs(n,i,o,a)})}function eX(n,e,t,r){if(oO(t)){pn("onDisconnect().update() called with empty data.  Don't do anything."),Qs(n,r,"ok",void 0);return}n.server_.onDisconnectMerge(e.toString(),t,(i,s)=>{i==="ok"&&gn(t,(o,a)=>{const l=Ut(a);Va(n.onDisconnect_,$t(e,o),l)}),Qs(n,r,i,s)})}function tX(n,e,t){let r;st(e._path)===".info"?r=kO(n.infoSyncTree_,e,t):r=kO(n.serverSyncTree_,e,t),U2(n.eventQueue_,e._path,r)}function EO(n,e,t){let r;st(e._path)===".info"?r=If(n.infoSyncTree_,e,t):r=If(n.serverSyncTree_,e,t),U2(n.eventQueue_,e._path,r)}function q2(n){n.persistentConnection_&&n.persistentConnection_.interrupt(W2)}function nX(n){n.persistentConnection_&&n.persistentConnection_.resume(W2)}function ja(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),pn(t,...e)}function Qs(n,e,t,r){e&&Ua(()=>{if(t==="ok")e(null);else{const i=(t||"error").toUpperCase();let s=i;r&&(s+=": "+r);const o=new Error(s);o.code=i,e(o)}})}function rX(n,e,t,r,i,s){ja(n,"transaction on "+e);const o={path:e,update:t,onComplete:r,status:null,order:MA(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=T0(n,e,void 0);o.currentInputSnapshot=a;const l=o.update(a.val());if(l===void 0)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{Xc("transaction failed: Data returned ",l,o.path),o.status=0;const c=kd(n.transactionQueueTree_,e),u=xo(c)||[];u.push(o),_0(c,u);let h;typeof l=="object"&&l!==null&&fr(l,".priority")?(h=uo(l,".priority"),_e(_c(h),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):h=(xd(n.serverSyncTree_,e)||Ge.EMPTY_NODE).getPriority().val();const f=Hc(n),p=Ut(l,h),d=b0(p,a,f);o.currentOutputSnapshotRaw=p,o.currentOutputSnapshotResolved=d,o.currentWriteId=Ad(n);const m=d0(n.serverSyncTree_,e,d,o.currentWriteId,o.applyLocally);dr(n.eventQueue_,e,m),Pd(n,n.transactionQueueTree_)}}function T0(n,e,t){return xd(n.serverSyncTree_,e,t)||Ge.EMPTY_NODE}function Pd(n,e=n.transactionQueueTree_){if(e||Rd(n,e),xo(e)){const t=z2(n,e);_e(t.length>0,"Sending zero length transaction queue"),t.every(i=>i.status===0)&&iX(n,qc(e),t)}else D2(e)&&Td(e,t=>{Pd(n,t)})}function iX(n,e,t){const r=t.map(c=>c.currentWriteId),i=T0(n,e,r);let s=i;const o=i.hash();for(let c=0;c<t.length;c++){const u=t[c];_e(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const h=qn(e,u.path);s=s.updateChild(h,u.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;n.server_.put(l.toString(),a,c=>{ja(n,"transaction put response",{path:l.toString(),status:c});let u=[];if(c==="ok"){const h=[];for(let f=0;f<t.length;f++)t[f].status=2,u=u.concat(fs(n.serverSyncTree_,t[f].currentWriteId)),t[f].onComplete&&h.push(()=>t[f].onComplete(null,!0,t[f].currentOutputSnapshotResolved)),t[f].unwatcher();Rd(n,kd(n.transactionQueueTree_,e)),Pd(n,n.transactionQueueTree_),dr(n.eventQueue_,e,u);for(let f=0;f<h.length;f++)Ua(h[f])}else{if(c==="datastale")for(let h=0;h<t.length;h++)t[h].status===3?t[h].status=4:t[h].status=0;else{Mn("transaction at "+l.toString()+" failed: "+c);for(let h=0;h<t.length;h++)t[h].status=4,t[h].abortReason=c}Ea(n,e)}},o)}function Ea(n,e){const t=X2(n,e),r=qc(t),i=z2(n,t);return sX(n,i,r),r}function sX(n,e,t){if(e.length===0)return;const r=[];let i=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=qn(t,l.path);let u=!1,h;if(_e(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)u=!0,h=l.abortReason,i=i.concat(fs(n.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=qq)u=!0,h="maxretry",i=i.concat(fs(n.serverSyncTree_,l.currentWriteId,!0));else{const f=T0(n,l.path,o);l.currentInputSnapshot=f;const p=e[a].update(f.val());if(p!==void 0){Xc("transaction failed: Data returned ",p,l.path);let d=Ut(p);typeof p=="object"&&p!=null&&fr(p,".priority")||(d=d.updatePriority(f.getPriority()));const y=l.currentWriteId,w=Hc(n),b=b0(d,f,w);l.currentOutputSnapshotRaw=d,l.currentOutputSnapshotResolved=b,l.currentWriteId=Ad(n),o.splice(o.indexOf(y),1),i=i.concat(d0(n.serverSyncTree_,l.path,b,l.currentWriteId,l.applyLocally)),i=i.concat(fs(n.serverSyncTree_,y,!0))}else u=!0,h="nodata",i=i.concat(fs(n.serverSyncTree_,l.currentWriteId,!0))}dr(n.eventQueue_,t,i),i=[],u&&(e[a].status=2,function(f){setTimeout(f,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(h==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(h),!1,null))))}Rd(n,n.transactionQueueTree_);for(let a=0;a<r.length;a++)Ua(r[a]);Pd(n,n.transactionQueueTree_)}function X2(n,e){let t,r=n.transactionQueueTree_;for(t=st(e);t!==null&&xo(r)===void 0;)r=kd(r,t),e=St(e),t=st(e);return r}function z2(n,e){const t=[];return H2(n,e,t),t.sort((r,i)=>r.order-i.order),t}function H2(n,e,t){const r=xo(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);Td(e,i=>{H2(n,i,t)})}function Rd(n,e){const t=xo(e);if(t){let r=0;for(let i=0;i<t.length;i++)t[i].status!==2&&(t[r]=t[i],r++);t.length=r,_0(e,t.length>0?t:void 0)}Td(e,r=>{Rd(n,r)})}function E0(n,e){const t=qc(X2(n,e)),r=kd(n.transactionQueueTree_,e);return Dq(r,i=>{wm(n,i)}),wm(n,r),M2(r,i=>{wm(n,i)}),t}function wm(n,e){const t=xo(e);if(t){const r=[];let i=[],s=-1;for(let o=0;o<t.length;o++)t[o].status===3||(t[o].status===1?(_e(s===o-1,"All SENT items should be at beginning of queue."),s=o,t[o].status=3,t[o].abortReason="set"):(_e(t[o].status===0,"Unexpected transaction status in abort"),t[o].unwatcher(),i=i.concat(fs(n.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&r.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?_0(e,void 0):t.length=s+1,dr(n.eventQueue_,qc(e),i);for(let o=0;o<r.length;o++)Ua(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oX(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function aX(n){const e={};n.charAt(0)==="?"&&(n=n.substring(1));for(const t of n.split("&")){if(t.length===0)continue;const r=t.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Mn(`Invalid query segment '${t}' in query '${n}'`)}return e}const CO=function(n,e){const t=lX(n),r=t.namespace;t.domain==="firebase.com"&&fi(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&t.domain!=="localhost"&&fi("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||yW();const i=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new KA(t.host,t.secure,r,i,e,"",r!==t.subdomain),path:new bt(t.pathString)}},lX=function(n){let e="",t="",r="",i="",s="",o=!0,a="https",l=443;if(typeof n=="string"){let c=n.indexOf("//");c>=0&&(a=n.substring(0,c-1),n=n.substring(c+2));let u=n.indexOf("/");u===-1&&(u=n.length);let h=n.indexOf("?");h===-1&&(h=n.length),e=n.substring(0,Math.min(u,h)),u<h&&(i=oX(n.substring(u,h)));const f=aX(n.substring(Math.min(n.length,h)));c=e.indexOf(":"),c>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;const p=e.slice(0,c);if(p.toLowerCase()==="localhost")t="localhost";else if(p.split(".").length<=2)t=p;else{const d=e.indexOf(".");r=e.substring(0,d).toLowerCase(),t=e.substring(d+1),s=r}"ns"in f&&(s=f.ns)}return{host:e,port:l,domain:t,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+tn(this.snapshot.exportVal())}}class G2{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return _e(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cX{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new Hn;return Kq(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){xr("OnDisconnect.remove",this._path);const e=new Hn;return Ex(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){xr("OnDisconnect.set",this._path),pi("OnDisconnect.set",e,this._path,!1);const t=new Hn;return Ex(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){xr("OnDisconnect.setWithPriority",this._path),pi("OnDisconnect.setWithPriority",e,this._path,!1),x0("OnDisconnect.setWithPriority",t,!1);const r=new Hn;return Jq(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){xr("OnDisconnect.update",this._path),B2("OnDisconnect.update",e,this._path,!1);const t=new Hn;return eX(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return ot(this._path)?null:Jy(this._path)}get ref(){return new Pr(this._repo,this._path)}get _queryIdentifier(){const e=dx(this._queryParams),t=Hy(e);return t==="{}"?"default":t}get _queryObject(){return dx(this._queryParams)}isEqual(e){if(e=mr(e),!(e instanceof Kn))return!1;const t=this._repo===e._repo,r=e0(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return t&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+JW(this._path)}}function Id(n,e){if(n._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function Ds(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===li){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Xi)throw new Error(r);if(typeof e!="string")throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==di)throw new Error(r);if(typeof t!="string")throw new Error(i)}}else if(n.getIndex()===At){if(e!=null&&!_c(e)||t!=null&&!_c(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(_e(n.getIndex()instanceof r0||n.getIndex()===i0,"unknown index type."),e!=null&&typeof e=="object"||t!=null&&typeof t=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Qd(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Pr extends Kn{constructor(e,t){super(e,t,new yd,!1)}get parent(){const e=a2(this._path);return e===null?null:new Pr(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class mo{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new bt(e),r=go(this.ref,e);return new mo(this._node.getChild(t),r,At)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new mo(i,go(this.ref,r),At)))}hasChild(e){const t=new bt(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Y2(n,e){return n=mr(n),n._checkNotDeleted("ref"),e!==void 0?go(n._root,e):n._root}function Cx(n,e){n=mr(n),n._checkNotDeleted("refFromURL");const t=CO(e,n._repo.repoInfo_.nodeAdmin);F2("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&fi("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),Y2(n,t.path.toString())}function go(n,e){return n=mr(n),st(n._path)===null?Vq("child","path",e,!1):xc("child","path",e,!1),new Pr(n._repo,$t(n._path,e))}function uX(n,e){n=mr(n),xr("push",n._path),pi("push",e,n._path,!0);const t=j2(n._repo),r=bj(t),i=go(n,r),s=go(n,r);let o;return e!=null?o=A0(s,e).then(()=>s):o=Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}function hX(n){return xr("remove",n._path),A0(n,null)}function A0(n,e){n=mr(n),xr("set",n._path),pi("set",e,n._path,!1);const t=new Hn;return k0(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function fX(n,e){n=mr(n),xr("setPriority",n._path),x0("setPriority",e,!1);const t=new Hn;return k0(n._repo,$t(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}function dX(n,e,t){if(xr("setWithPriority",n._path),pi("setWithPriority",e,n._path,!1),x0("setWithPriority",t,!1),n.key===".length"||n.key===".keys")throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new Hn;return k0(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}function pX(n,e){B2("update",e,n._path,!1);const t=new Hn;return Gq(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function mX(n){n=mr(n);const e=new C0(()=>{}),t=new Zc(e);return Zq(n._repo,n,t).then(r=>new mo(r,new Pr(n._repo,n._path),n._queryParams.getIndex()))}class Zc{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,t){const r=t._queryParams.getIndex();return new Z2("value",this,new mo(e.snapshotNode,new Pr(t._repo,t._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new G2(this,e,t):null}matches(e){return e instanceof Zc?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class Nd{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t=e==="children_added"?"child_added":e;return t=t==="children_removed"?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new G2(this,e,t):null}createEvent(e,t){_e(e.childName!=null,"Child events should have a childName.");const r=go(new Pr(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new Z2(e.type,this,new mo(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Nd?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function Gc(n,e,t,r,i){let s;if(typeof r=="object"&&(s=void 0,i=r),typeof r=="function"&&(s=r),i&&i.onlyOnce){const l=t,c=(u,h)=>{EO(n._repo,n,a),l(u,h)};c.userCallback=t.userCallback,c.context=t.context,t=c}const o=new C0(t,s||void 0),a=e==="value"?new Zc(o):new Nd(e,o);return tX(n._repo,n,a),()=>EO(n._repo,n,a)}function AO(n,e,t,r){return Gc(n,"value",e,t,r)}function Ax(n,e,t,r){return Gc(n,"child_added",e,t,r)}function Px(n,e,t,r){return Gc(n,"child_changed",e,t,r)}function Rx(n,e,t,r){return Gc(n,"child_moved",e,t,r)}function Ix(n,e,t,r){return Gc(n,"child_removed",e,t,r)}function Qx(n,e,t){let r=null;const i=t?new C0(t):null;e==="value"?r=new Zc(i):e&&(r=new Nd(e,i)),EO(n._repo,n,r)}class Xr{}class K2 extends Xr{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){pi("endAt",this._value,e._path,!0);const t=OO(e._queryParams,this._value,this._key);if(Qd(t),Ds(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Kn(e._repo,e._path,t,e._orderByCalled)}}function gX(n,e){return zc("endAt","key",e,!0),new K2(n,e)}class OX extends Xr{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){pi("endBefore",this._value,e._path,!1);const t=Tj(e._queryParams,this._value,this._key);if(Qd(t),Ds(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Kn(e._repo,e._path,t,e._orderByCalled)}}function yX(n,e){return zc("endBefore","key",e,!0),new OX(n,e)}class J2 extends Xr{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){pi("startAt",this._value,e._path,!0);const t=gO(e._queryParams,this._value,this._key);if(Qd(t),Ds(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Kn(e._repo,e._path,t,e._orderByCalled)}}function bX(n=null,e){return zc("startAt","key",e,!0),new J2(n,e)}class vX extends Xr{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){pi("startAfter",this._value,e._path,!1);const t=kj(e._queryParams,this._value,this._key);if(Qd(t),Ds(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Kn(e._repo,e._path,t,e._orderByCalled)}}function wX(n,e){return zc("startAfter","key",e,!0),new vX(n,e)}class _X extends Xr{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Kn(e._repo,e._path,xj(e._queryParams,this._limit),e._orderByCalled)}}function xX(n){if(typeof n!="number"||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new _X(n)}class SX extends Xr{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Kn(e._repo,e._path,Sj(e._queryParams,this._limit),e._orderByCalled)}}function kX(n){if(typeof n!="number"||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new SX(n)}class TX extends Xr{constructor(e){super(),this._path=e}_apply(e){Id(e,"orderByChild");const t=new bt(this._path);if(ot(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new r0(t),i=bd(e._queryParams,r);return Ds(i),new Kn(e._repo,e._path,i,!0)}}function EX(n){if(n==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(n==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(n==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return xc("orderByChild","path",n,!1),new TX(n)}class CX extends Xr{_apply(e){Id(e,"orderByKey");const t=bd(e._queryParams,li);return Ds(t),new Kn(e._repo,e._path,t,!0)}}function AX(){return new CX}class PX extends Xr{_apply(e){Id(e,"orderByPriority");const t=bd(e._queryParams,At);return Ds(t),new Kn(e._repo,e._path,t,!0)}}function RX(){return new PX}class IX extends Xr{_apply(e){Id(e,"orderByValue");const t=bd(e._queryParams,i0);return Ds(t),new Kn(e._repo,e._path,t,!0)}}function QX(){return new IX}class NX extends Xr{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(pi("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new K2(this._value,this._key)._apply(new J2(this._value,this._key)._apply(e))}}function LX(n,e){return zc("equalTo","key",e,!0),new NX(n,e)}function Lr(n,...e){let t=mr(n);for(const r of e)t=r._apply(t);return t}pq(Pr);bq(Pr);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DX="FIREBASE_DATABASE_EMULATOR_HOST",PO={};let MX=!1;function $X(n,e,t,r){n.repoInfo_=new KA(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}function eP(n,e,t,r,i){let s=r||n.options.databaseURL;s===void 0&&(n.options.projectId||fi("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),pn("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let o=CO(s,i),a=o.repoInfo,l,c;typeof process<"u"&&process.env&&(c=process.env[DX]),c?(l=!0,s=`http://${c}?ns=${a.namespace}`,o=CO(s,i),a=o.repoInfo):l=!o.repoInfo.secure;const u=i&&l?new ea(ea.OWNER):new EW(n.name,n.options,e);F2("Invalid Firebase Database URL",o),ot(o.path)||fi("Database URL must point to the root of a Firebase Database (not including a child path).");const h=FX(a,n,u,new TW(n.name,t));return new UX(h,n)}function BX(n,e){const t=PO[e];(!t||t[n.key]!==n)&&fi(`Database ${e}(${n.repoInfo_}) has already been deleted.`),q2(n),delete t[n.key]}function FX(n,e,t,r){let i=PO[e.name];i||(i={},PO[e.name]=i);let s=i[n.toURLString()];return s&&fi("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Xq(n,MX,t,r),i[n.toURLString()]=s,s}class UX{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(zq(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Pr(this._repo,pt())),this._rootInternal}_delete(){return this._rootInternal!==null&&(BX(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&fi("Cannot call "+e+" on a deleted database.")}}function tP(){_a.IS_TRANSPORT_INITIALIZED&&Mn("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function VX(){tP(),hs.forceDisallow()}function WX(){tP(),br.forceDisallow(),hs.forceAllow()}function jX(n,e,t,r={}){n=mr(n),n._checkNotDeleted("useEmulator"),n._instanceStarted&&fi("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&fi('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new ea(ea.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:U8(r.mockUserToken,n.app.options.projectId);s=new ea(o)}$X(i,e,t,s)}function qX(n){n=mr(n),n._checkNotDeleted("goOffline"),q2(n._repo)}function XX(n){n=mr(n),n._checkNotDeleted("goOnline"),nX(n._repo)}function zX(n,e){BA(n,e)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HX(n){LA(Xy),wa(new Es("database",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return eP(r,i,s,t)},"PUBLIC").setMultipleInstances(!0)),gs(Z1,G1,n),gs(Z1,G1,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZX={".sv":"timestamp"};function GX(){return ZX}function YX(n){return{".sv":{increment:n}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KX{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}function JX(n,e,t){var r;if(n=mr(n),xr("Reference.transaction",n._path),n.key===".length"||n.key===".keys")throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=(r=t==null?void 0:t.applyLocally)!==null&&r!==void 0?r:!0,s=new Hn,o=(l,c,u)=>{let h=null;l?s.reject(l):(h=new mo(u,new Pr(n._repo,n._path),At),s.resolve(new KX(c,h)))},a=AO(n,()=>{});return rX(n._repo,n._path,e,o,a,i),s.promise}Ui.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};Ui.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};HX();const ez="@firebase/database-compat",tz="0.2.10";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nz=new md("@firebase/database-compat"),nP=function(n){const e="FIREBASE WARNING: "+n;nz.warn(e)};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rz=function(n,e,t,r){if(!(r&&t===void 0)&&typeof t!="boolean")throw new Error(Yn(n,e)+"must be a boolean.")},iz=function(n,e,t){if(!(t&&e===void 0))switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Yn(n,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sz{constructor(e){this._delegate=e}cancel(e){Ke("OnDisconnect.cancel",0,1,arguments.length),fn("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){Ke("OnDisconnect.remove",0,1,arguments.length),fn("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){Ke("OnDisconnect.set",1,2,arguments.length),fn("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){Ke("OnDisconnect.setWithPriority",2,3,arguments.length),fn("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),s=>r(s)),i}update(e,t){if(Ke("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,nP("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}fn("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oz{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return Ke("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(e,t){this._database=e,this._delegate=t}val(){return Ke("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return Ke("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return Ke("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return Ke("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return Ke("DataSnapshot.child",0,1,arguments.length),e=String(e),xc("DataSnapshot.child","path",e,!1),new bs(this._database,this._delegate.child(e))}hasChild(e){return Ke("DataSnapshot.hasChild",1,1,arguments.length),xc("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return Ke("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return Ke("DataSnapshot.forEach",1,1,arguments.length),fn("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new bs(this._database,t)))}hasChildren(){return Ke("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return Ke("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return Ke("DataSnapshot.ref",0,0,arguments.length),new cr(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class yn{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var s;Ke("Query.on",2,4,arguments.length),fn("Query.on","callback",t,!1);const o=yn.getCancelAndContextArgs_("Query.on",r,i),a=(c,u)=>{t.call(o.context,new bs(this.database,c),u)};a.userCallback=t,a.context=o.context;const l=(s=o.cancel)===null||s===void 0?void 0:s.bind(o.context);switch(e){case"value":return AO(this._delegate,a,l),t;case"child_added":return Ax(this._delegate,a,l),t;case"child_removed":return Ix(this._delegate,a,l),t;case"child_changed":return Px(this._delegate,a,l),t;case"child_moved":return Rx(this._delegate,a,l),t;default:throw new Error(Yn("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if(Ke("Query.off",0,3,arguments.length),iz("Query.off",e,!0),fn("Query.off","callback",t,!0),B1("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,Qx(this._delegate,e,i)}else Qx(this._delegate,e)}get(){return mX(this._delegate).then(e=>new bs(this.database,e))}once(e,t,r,i){Ke("Query.once",1,4,arguments.length),fn("Query.once","callback",t,!0);const s=yn.getCancelAndContextArgs_("Query.once",r,i),o=new Hn,a=(c,u)=>{const h=new bs(this.database,c);t&&t.call(s.context,h,u),o.resolve(h)};a.userCallback=t,a.context=s.context;const l=c=>{s.cancel&&s.cancel.call(s.context,c),o.reject(c)};switch(e){case"value":AO(this._delegate,a,l,{onlyOnce:!0});break;case"child_added":Ax(this._delegate,a,l,{onlyOnce:!0});break;case"child_removed":Ix(this._delegate,a,l,{onlyOnce:!0});break;case"child_changed":Px(this._delegate,a,l,{onlyOnce:!0});break;case"child_moved":Rx(this._delegate,a,l,{onlyOnce:!0});break;default:throw new Error(Yn("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return o.promise}limitToFirst(e){return Ke("Query.limitToFirst",1,1,arguments.length),new yn(this.database,Lr(this._delegate,xX(e)))}limitToLast(e){return Ke("Query.limitToLast",1,1,arguments.length),new yn(this.database,Lr(this._delegate,kX(e)))}orderByChild(e){return Ke("Query.orderByChild",1,1,arguments.length),new yn(this.database,Lr(this._delegate,EX(e)))}orderByKey(){return Ke("Query.orderByKey",0,0,arguments.length),new yn(this.database,Lr(this._delegate,AX()))}orderByPriority(){return Ke("Query.orderByPriority",0,0,arguments.length),new yn(this.database,Lr(this._delegate,RX()))}orderByValue(){return Ke("Query.orderByValue",0,0,arguments.length),new yn(this.database,Lr(this._delegate,QX()))}startAt(e=null,t){return Ke("Query.startAt",0,2,arguments.length),new yn(this.database,Lr(this._delegate,bX(e,t)))}startAfter(e=null,t){return Ke("Query.startAfter",0,2,arguments.length),new yn(this.database,Lr(this._delegate,wX(e,t)))}endAt(e=null,t){return Ke("Query.endAt",0,2,arguments.length),new yn(this.database,Lr(this._delegate,gX(e,t)))}endBefore(e=null,t){return Ke("Query.endBefore",0,2,arguments.length),new yn(this.database,Lr(this._delegate,yX(e,t)))}equalTo(e,t){return Ke("Query.equalTo",1,2,arguments.length),new yn(this.database,Lr(this._delegate,LX(e,t)))}toString(){return Ke("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return Ke("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if(Ke("Query.isEqual",1,1,arguments.length),!(e instanceof yn)){const t="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(t)}return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,fn(e,"cancel",i.cancel,!0),i.context=r,B1(e,"context",i.context,!0);else if(t)if(typeof t=="object"&&t!==null)i.context=t;else if(typeof t=="function")i.cancel=t;else throw new Error(Yn(e,"cancelOrContext")+" must either be a cancel callback or a context object.");return i}get ref(){return new cr(this.database,new Pr(this._delegate._repo,this._delegate._path))}}class cr extends yn{constructor(e,t){super(e,new Kn(t._repo,t._path,new yd,!1)),this.database=e,this._delegate=t}getKey(){return Ke("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return Ke("Reference.child",1,1,arguments.length),typeof e=="number"&&(e=String(e)),new cr(this.database,go(this._delegate,e))}getParent(){Ke("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new cr(this.database,e):null}getRoot(){return Ke("Reference.root",0,0,arguments.length),new cr(this.database,this._delegate.root)}set(e,t){Ke("Reference.set",1,2,arguments.length),fn("Reference.set","onComplete",t,!0);const r=A0(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if(Ke("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,nP("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}xr("Reference.update",this._delegate._path),fn("Reference.update","onComplete",t,!0);const r=pX(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){Ke("Reference.setWithPriority",2,3,arguments.length),fn("Reference.setWithPriority","onComplete",r,!0);const i=dX(this._delegate,e,t);return r&&i.then(()=>r(null),s=>r(s)),i}remove(e){Ke("Reference.remove",0,1,arguments.length),fn("Reference.remove","onComplete",e,!0);const t=hX(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){Ke("Reference.transaction",1,3,arguments.length),fn("Reference.transaction","transactionUpdate",e,!1),fn("Reference.transaction","onComplete",t,!0),rz("Reference.transaction","applyLocally",r,!0);const i=JX(this._delegate,e,{applyLocally:r}).then(s=>new oz(s.committed,new bs(this.database,s.snapshot)));return t&&i.then(s=>t(null,s.committed,s.snapshot),s=>t(s,!1,null)),i}setPriority(e,t){Ke("Reference.setPriority",1,2,arguments.length),fn("Reference.setPriority","onComplete",t,!0);const r=fX(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){Ke("Reference.push",0,2,arguments.length),fn("Reference.push","onComplete",t,!0);const r=uX(this._delegate,e),i=r.then(o=>new cr(this.database,o));t&&i.then(()=>t(null),o=>t(o));const s=new cr(this.database,r);return s.then=i.then.bind(i),s.catch=i.catch.bind(i,void 0),s}onDisconnect(){return xr("Reference.onDisconnect",this._delegate._path),new sz(new cX(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:VX,forceLongPolling:WX}}useEmulator(e,t,r={}){jX(this._delegate,e,t,r)}ref(e){if(Ke("database.ref",0,1,arguments.length),e instanceof cr){const t=Cx(this._delegate,e.toString());return new cr(this,t)}else{const t=Y2(this._delegate,e);return new cr(this,t)}}refFromURL(e){Ke("database.refFromURL",1,1,arguments.length);const r=Cx(this._delegate,e);return new cr(this,r)}goOffline(){return Ke("database.goOffline",0,0,arguments.length),qX(this._delegate)}goOnline(){return Ke("database.goOnline",0,0,arguments.length),XX(this._delegate)}}Sc.ServerValue={TIMESTAMP:GX(),increment:n=>YX(n)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function az({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:s=!1}){LA(t);const o=new wA("auth-internal",new _A("database-standalone"));return o.setComponent(new Es("auth-internal",()=>r,"PRIVATE")),{instance:new Sc(eP(n,o,void 0,e,s),n),namespace:i}}var lz=Object.freeze({__proto__:null,initStandalone:az});/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cz=Sc.ServerValue;function uz(n){n.INTERNAL.registerComponent(new Es("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new Sc(i,r)},"PUBLIC").setServiceProps({Reference:cr,Query:yn,Database:Sc,DataSnapshot:bs,enableLogging:zX,INTERNAL:lz,ServerValue:cz}).setMultipleInstances(!0)),n.registerVersion(ez,tz)}uz(mc);const be={};be.makeEventEmitter=function(n,e){n.prototype.allowedEvents_=e,n.prototype.on=function(t,r,i){this.validateEventType_(t),this.eventListeners_=this.eventListeners_||{},this.eventListeners_[t]=this.eventListeners_[t]||[],this.eventListeners_[t].push({callback:r,context:i})},n.prototype.off=function(t,r){this.validateEventType_(t),this.eventListeners_=this.eventListeners_||{};for(var i=this.eventListeners_[t]||[],s=0;s<i.length;s++)if(i[s].callback===r){i.splice(s,1);return}},n.prototype.trigger=function(t){this.eventListeners_=this.eventListeners_||{};for(var r=this.eventListeners_[t]||[],i=0;i<r.length;i++)r[i].callback.apply(r[i].context,Array.prototype.slice.call(arguments,1))},n.prototype.validateEventType_=function(t){if(this.allowedEvents_){for(var r=!1,i=0;i<this.allowedEvents_.length;i++)if(this.allowedEvents_[i]===t){r=!0;break}if(!r)throw new Error('Unknown event "'+t+'"')}}};be.elt=function(n,e,t){var r=document.createElement(n);if(typeof e=="string")be.setTextContent(r,e);else if(e)for(var i=0;i<e.length;++i)r.appendChild(e[i]);for(var s in t||{})r.setAttribute(s,t[s]);return r};be.setTextContent=function(n,e){n.innerHTML="",n.appendChild(document.createTextNode(e))};be.on=function(n,e,t,r){n.addEventListener?n.addEventListener(e,t,r||!1):n.attachEvent&&n.attachEvent("on"+e,t)};be.off=function(n,e,t,r){n.removeEventListener?n.removeEventListener(e,t,r||!1):n.detachEvent&&n.detachEvent("on"+e,t)};be.preventDefault=function(n){n.preventDefault?n.preventDefault():n.returnValue=!1};be.stopPropagation=function(n){n.stopPropagation?n.stopPropagation():n.cancelBubble=!0};be.stopEvent=function(n){be.preventDefault(n),be.stopPropagation(n)};be.stopEventAnd=function(n){return function(e){return n(e),be.stopEvent(e),!1}};be.trim=function(n){return n.replace(/^\s+/g,"").replace(/\s+$/g,"")};be.stringEndsWith=function(n,e){for(var t=typeof e=="string"?[e]:e,r=0;r<t.length;r++){var e=t[r];if(n.indexOf(e,n.length-e.length)!==-1)return!0}return!1};be.assert=function(e,t){if(!e)throw new Error(t||"assertion error")};be.log=function(){if(typeof console<"u"&&typeof console.log<"u"){for(var n=["Firepad:"],e=0;e<arguments.length;e++)n.push(arguments[e]);console.log.apply(console,n)}};const Sl=function(){function n(e){this.type=e,this.chars=null,this.text=null,this.attributes=null,e==="insert"?(this.text=arguments[1],be.assert(typeof this.text=="string"),this.attributes=arguments[2]||{},be.assert(typeof this.attributes=="object")):e==="delete"?(this.chars=arguments[1],be.assert(typeof this.chars=="number")):e==="retain"&&(this.chars=arguments[1],be.assert(typeof this.chars=="number"),this.attributes=arguments[2]||{},be.assert(typeof this.attributes=="object"))}return n.prototype.isInsert=function(){return this.type==="insert"},n.prototype.isDelete=function(){return this.type==="delete"},n.prototype.isRetain=function(){return this.type==="retain"},n.prototype.equals=function(e){return this.type===e.type&&this.text===e.text&&this.chars===e.chars&&this.attributesEqual(e.attributes)},n.prototype.attributesEqual=function(e){for(var t in this.attributes)if(this.attributes[t]!==e[t])return!1;for(t in e)if(this.attributes[t]!==e[t])return!1;return!0},n.prototype.hasEmptyAttributes=function(){var e=!0;for(var t in this.attributes){e=!1;break}return e},n}(),jt=function(){function n(){if(!this||this.constructor!==n)return new n;this.ops=[],this.baseLength=0,this.targetLength=0}n.prototype.equals=function(r){if(this.baseLength!==r.baseLength||this.targetLength!==r.targetLength||this.ops.length!==r.ops.length)return!1;for(var i=0;i<this.ops.length;i++)if(!this.ops[i].equals(r.ops[i]))return!1;return!0},n.prototype.retain=function(r,i){if(typeof r!="number"||r<0)throw new Error("retain expects a positive integer.");if(r===0)return this;this.baseLength+=r,this.targetLength+=r,i=i||{};var s=this.ops.length>0?this.ops[this.ops.length-1]:null;return s&&s.isRetain()&&s.attributesEqual(i)?s.chars+=r:this.ops.push(new Sl("retain",r,i)),this},n.prototype.insert=function(r,i){if(typeof r!="string")throw new Error("insert expects a string");if(r==="")return this;i=i||{},this.targetLength+=r.length;var s=this.ops.length>0?this.ops[this.ops.length-1]:null,o=this.ops.length>1?this.ops[this.ops.length-2]:null;return s&&s.isInsert()&&s.attributesEqual(i)?s.text+=r:s&&s.isDelete()?o&&o.isInsert()&&o.attributesEqual(i)?o.text+=r:(this.ops[this.ops.length-1]=new Sl("insert",r,i),this.ops.push(s)):this.ops.push(new Sl("insert",r,i)),this},n.prototype.delete=function(r){if(typeof r=="string"&&(r=r.length),typeof r!="number"||r<0)throw new Error("delete expects a positive integer or a string");if(r===0)return this;this.baseLength+=r;var i=this.ops.length>0?this.ops[this.ops.length-1]:null;return i&&i.isDelete()?i.chars+=r:this.ops.push(new Sl("delete",r)),this},n.prototype.isNoop=function(){return this.ops.length===0||this.ops.length===1&&this.ops[0].isRetain()&&this.ops[0].hasEmptyAttributes()},n.prototype.clone=function(){for(var r=new n,i=0;i<this.ops.length;i++)this.ops[i].isRetain()?r.retain(this.ops[i].chars,this.ops[i].attributes):this.ops[i].isInsert()?r.insert(this.ops[i].text,this.ops[i].attributes):r.delete(this.ops[i].chars);return r},n.prototype.toString=function(){var r=Array.prototype.map||function(i){for(var s=this,o=[],a=0,l=s.length;a<l;a++)o[a]=i(s[a]);return o};return r.call(this.ops,function(i){return i.isRetain()?"retain "+i.chars:i.isInsert()?"insert '"+i.text+"'":"delete "+i.chars}).join(", ")},n.prototype.toJSON=function(){for(var r=[],i=0;i<this.ops.length;i++)this.ops[i].hasEmptyAttributes()||r.push(this.ops[i].attributes),this.ops[i].type==="retain"?r.push(this.ops[i].chars):this.ops[i].type==="insert"?r.push(this.ops[i].text):this.ops[i].type==="delete"&&r.push(-this.ops[i].chars);return r.length===0&&r.push(0),r},n.fromJSON=function(r){for(var i=new n,s=0,o=r.length;s<o;s++){var a=r[s],l={};typeof a=="object"&&(l=a,s++,a=r[s]),typeof a=="number"?a>0?i.retain(a,l):i.delete(-a):(be.assert(typeof a=="string"),i.insert(a,l))}return i},n.prototype.apply=function(r,i,s){var o=this;if(i=i||[],s=s||[],r.length!==o.baseLength)throw new Error("The operation's base length must be equal to the string's length.");for(var a=[],l=0,c,u,h=0,f=this.ops,p=0,d=f.length;p<d;p++){var m=f[p];if(m.isRetain()){if(h+m.chars>r.length)throw new Error("Operation can't retain more characters than are left in the string.");for(a[l++]=r.slice(h,h+m.chars),c=0;c<m.chars;c++){var y=i[h+c]||{},w={};for(u in y)w[u]=y[u],be.assert(w[u]!==!1);for(u in m.attributes)m.attributes[u]===!1?delete w[u]:w[u]=m.attributes[u],be.assert(w[u]!==!1);s.push(w)}h+=m.chars}else if(m.isInsert())for(a[l++]=m.text,c=0;c<m.text.length;c++){var b={};for(u in m.attributes)b[u]=m.attributes[u],be.assert(b[u]!==!1);s.push(b)}else h+=m.chars}if(h!==r.length)throw new Error("The operation didn't operate on the whole string.");var O=a.join("");return be.assert(O.length===s.length),O},n.prototype.invert=function(r){for(var i=0,s=new n,o=this.ops,a=0,l=o.length;a<l;a++){var c=o[a];c.isRetain()?(s.retain(c.chars),i+=c.chars):c.isInsert()?s.delete(c.text.length):(s.insert(r.slice(i,i+c.chars)),i+=c.chars)}return s},n.prototype.compose=function(r){var i=this;if(i.targetLength!==r.baseLength)throw new Error("The base length of the second operation has to be the target length of the first operation");function s(d,m,y){var w={},b;for(b in d)w[b]=d[b];for(b in m)y&&m[b]===!1?delete w[b]:w[b]=m[b];return w}for(var o=new n,a=i.clone().ops,l=r.clone().ops,c=0,u=0,h=a[c++],f=l[u++],p;!(typeof h>"u"&&typeof f>"u");){if(h&&h.isDelete()){o.delete(h.chars),h=a[c++];continue}if(f&&f.isInsert()){o.insert(f.text,f.attributes),f=l[u++];continue}if(typeof h>"u")throw new Error("Cannot compose operations: first operation is too short.");if(typeof f>"u")throw new Error("Cannot compose operations: first operation is too long.");if(h.isRetain()&&f.isRetain())p=s(h.attributes,f.attributes),h.chars>f.chars?(o.retain(f.chars,p),h.chars-=f.chars,f=l[u++]):h.chars===f.chars?(o.retain(h.chars,p),h=a[c++],f=l[u++]):(o.retain(h.chars,p),f.chars-=h.chars,h=a[c++]);else if(h.isInsert()&&f.isDelete())h.text.length>f.chars?(h.text=h.text.slice(f.chars),f=l[u++]):h.text.length===f.chars?(h=a[c++],f=l[u++]):(f.chars-=h.text.length,h=a[c++]);else if(h.isInsert()&&f.isRetain())p=s(h.attributes,f.attributes,!0),h.text.length>f.chars?(o.insert(h.text.slice(0,f.chars),p),h.text=h.text.slice(f.chars),f=l[u++]):h.text.length===f.chars?(o.insert(h.text,p),h=a[c++],f=l[u++]):(o.insert(h.text,p),f.chars-=h.text.length,h=a[c++]);else if(h.isRetain()&&f.isDelete())h.chars>f.chars?(o.delete(f.chars),h.chars-=f.chars,f=l[u++]):h.chars===f.chars?(o.delete(f.chars),h=a[c++],f=l[u++]):(o.delete(h.chars),f.chars-=h.chars,h=a[c++]);else throw new Error("This shouldn't happen: op1: "+JSON.stringify(h)+", op2: "+JSON.stringify(f))}return o};function e(r){var i=r.ops;switch(i.length){case 1:return i[0];case 2:return i[0].isRetain()?i[1]:i[1].isRetain()?i[0]:null;case 3:if(i[0].isRetain()&&i[2].isRetain())return i[1]}return null}function t(r){return r.ops[0].isRetain()?r.ops[0].chars:0}return n.prototype.shouldBeComposedWith=function(r){if(this.isNoop()||r.isNoop())return!0;var i=t(this),s=t(r),o=e(this),a=e(r);return!o||!a?!1:o.isInsert()&&a.isInsert()?i+o.text.length===s:o.isDelete()&&a.isDelete()?s+a.chars===i||i===s:!1},n.prototype.shouldBeComposedWithInverted=function(r){if(this.isNoop()||r.isNoop())return!0;var i=t(this),s=t(r),o=e(this),a=e(r);return!o||!a?!1:o.isInsert()&&a.isInsert()?i+o.text.length===s||i===s:o.isDelete()&&a.isDelete()?s+a.chars===i:!1},n.transformAttributes=function(r,i){var s={},o={},a,l={};for(a in r)l[a]=!0;for(a in i)l[a]=!0;for(a in l){var c=r[a],u=i[a];be.assert(c!=null||u!=null),c==null?o[a]=u:u==null?s[a]=c:c===u||(s[a]=c)}return[s,o]},n.transform=function(r,i){if(r.baseLength!==i.baseLength)throw new Error("Both operations have to have the same base length");for(var s=new n,o=new n,a=r.clone().ops,l=i.clone().ops,c=0,u=0,h=a[c++],f=l[u++];!(typeof h>"u"&&typeof f>"u");){if(h&&h.isInsert()){s.insert(h.text,h.attributes),o.retain(h.text.length),h=a[c++];continue}if(f&&f.isInsert()){s.retain(f.text.length),o.insert(f.text,f.attributes),f=l[u++];continue}if(typeof h>"u")throw new Error("Cannot transform operations: first operation is too short.");if(typeof f>"u")throw new Error("Cannot transform operations: first operation is too long.");var p;if(h.isRetain()&&f.isRetain()){var d=n.transformAttributes(h.attributes,f.attributes);h.chars>f.chars?(p=f.chars,h.chars-=f.chars,f=l[u++]):h.chars===f.chars?(p=f.chars,h=a[c++],f=l[u++]):(p=h.chars,f.chars-=h.chars,h=a[c++]),s.retain(p,d[0]),o.retain(p,d[1])}else if(h.isDelete()&&f.isDelete())h.chars>f.chars?(h.chars-=f.chars,f=l[u++]):h.chars===f.chars?(h=a[c++],f=l[u++]):(f.chars-=h.chars,h=a[c++]);else if(h.isDelete()&&f.isRetain())h.chars>f.chars?(p=f.chars,h.chars-=f.chars,f=l[u++]):h.chars===f.chars?(p=f.chars,h=a[c++],f=l[u++]):(p=h.chars,f.chars-=h.chars,h=a[c++]),s.delete(p);else if(h.isRetain()&&f.isDelete())h.chars>f.chars?(p=f.chars,h.chars-=f.chars,f=l[u++]):h.chars===f.chars?(p=h.chars,h=a[c++],f=l[u++]):(p=h.chars,f.chars-=h.chars,h=a[c++]),o.delete(p);else throw new Error("The two operations aren't compatible")}return[s,o]},n.prototype.transform=function(r){return n.transform(this,r)},n}(),hz=function(n){var e=100;function t(a,l,c){this.ref_=a,this.ready_=!1,this.firebaseCallbacks_=[],this.zombie_=!1,this.document_=new jt,this.revision_=0,this.pendingReceivedRevisions_={};var u=this;if(l){this.setUserId(l),this.setColor(c);var h=a.root.child(".info/connected");this.firebaseOn_(h,"value",function(f){f.val()===!0&&u.initializeUserData_()},this),this.on("ready",function(){u.monitorCursors_()})}else this.userId_=a.push().key;setTimeout(function(){u.monitorHistory_()},0)}be.makeEventEmitter(t,["ready","cursor","operation","ack","retry"]),t.prototype.dispose=function(){var a=this;if(this.removeFirebaseCallbacks_(),this.handleInitialRevisions_=()=>{},!this.ready_){this.on("ready",function(){a.dispose()});return}this.userRef_&&(this.userRef_.child("cursor").remove(),this.userRef_.child("color").remove()),this.ref_=null,this.document_=null,this.zombie_=!0},t.prototype.setUserId=function(a){this.userRef_&&(this.userRef_.child("cursor").remove(),this.userRef_.child("cursor").onDisconnect().cancel(),this.userRef_.child("color").remove(),this.userRef_.child("color").onDisconnect().cancel()),this.userId_=a,this.userRef_=this.ref_.child("users").child(a),this.initializeUserData_()},t.prototype.isHistoryEmpty=function(){return r(this.ready_,"Not ready yet."),this.revision_===0},t.prototype.sendOperation=function(a,l){var c=this;if(!this.ready_){this.on("ready",function(){c.trigger("retry")});return}r(this.document_.targetLength===a.baseLength,"sendOperation() called with invalid operation.");var u=s(this.revision_);function h(f,p){c.ref_.child("history").child(f).transaction(function(d){if(d===null)return p},function(d,m,y){if(d)if(d.message==="disconnect")c.sent_&&c.sent_.id===f?setTimeout(function(){h(f,p)},0):l&&l(d,!1);else throw be.log("Transaction failure!",d),d;else l&&l(null,m)},!1)}this.sent_={id:u,op:a},h(u,{a:c.userId_,o:a.toJSON(),t:mc.database.ServerValue.TIMESTAMP})},t.prototype.sendCursor=function(a){this.userRef_.child("cursor").set(a),this.cursor_=a},t.prototype.setColor=function(a){this.userRef_.child("color").set(a),this.color_=a},t.prototype.getDocument=function(){return this.document_},t.prototype.registerCallbacks=function(a){for(var l in a)this.on(l,a[l])},t.prototype.initializeUserData_=function(){this.userRef_.child("cursor").onDisconnect().remove(),this.userRef_.child("color").onDisconnect().remove(),this.sendCursor(this.cursor_||null),this.setColor(this.color_||null)},t.prototype.monitorCursors_=function(){var a=this.ref_.child("users"),l=this;function c(u){var h=u.key,f=u.val();l.trigger("cursor",h,f.cursor,f.color)}this.firebaseOn_(a,"child_added",c),this.firebaseOn_(a,"child_changed",c),this.firebaseOn_(a,"child_removed",function(u){var h=u.key;l.trigger("cursor",h,null)})},t.prototype.monitorHistory_=function(){var a=this;this.ref_.child("checkpoint").once("value",function(l){if(!a.zombie_){var c=l.child("id").val(),u=l.child("o").val(),h=l.child("a").val();u!=null&&c!=null&&h!==null?(a.pendingReceivedRevisions_[c]={o:u,a:h},a.checkpointRevision_=o(c),a.monitorHistoryStartingAt_(a.checkpointRevision_+1)):(a.checkpointRevision_=0,a.monitorHistoryStartingAt_(a.checkpointRevision_))}})},t.prototype.monitorHistoryStartingAt_=function(a){var l=this.ref_.child("history").startAt(null,s(a)),c=this;setTimeout(function(){c.firebaseOn_(l,"child_added",function(u){var h=u.key;c.pendingReceivedRevisions_[h]=u.val(),c.ready_&&c.handlePendingReceivedRevisions_()}),l.once("value",function(){c.handleInitialRevisions_()})},0)},t.prototype.handleInitialRevisions_=function(){r(!this.ready_,"Should not be called multiple times."),this.revision_=this.checkpointRevision_;for(var a=s(this.revision_),l=this.pendingReceivedRevisions_;l[a]!=null;){var c=this.parseRevision_(l[a]);c?this.document_=this.document_.compose(c.operation):be.log("Invalid operation.",this.ref_.toString(),a,l[a]),delete l[a],this.revision_++,a=s(this.revision_)}this.trigger("operation",this.document_),this.ready_=!0;var u=this;setTimeout(function(){u.trigger("ready")},0)},t.prototype.handlePendingReceivedRevisions_=function(){for(var a=this.pendingReceivedRevisions_,l=s(this.revision_),c=!1;a[l]!=null;){this.revision_++;var u=this.parseRevision_(a[l]);u?(this.document_=this.document_.compose(u.operation),this.sent_&&l===this.sent_.id?this.sent_.op.equals(u.operation)&&u.author===this.userId_?(this.revision_%e===0&&this.saveCheckpoint_(),this.sent_=null,this.trigger("ack")):(c=!0,this.trigger("operation",u.operation)):this.trigger("operation",u.operation)):be.log("Invalid operation.",this.ref_.toString(),l,a[l]),delete a[l],l=s(this.revision_)}c&&(this.sent_=null,this.trigger("retry"))},t.prototype.parseRevision_=function(a){if(typeof a!="object"||typeof a.a!="string"||typeof a.o!="object")return null;var l=null;try{l=jt.fromJSON(a.o)}catch{return null}return l.baseLength!==this.document_.targetLength?null:{author:a.a,operation:l}},t.prototype.saveCheckpoint_=function(){this.ref_.child("checkpoint").set({a:this.userId_,o:this.document_.toJSON(),id:s(this.revision_-1)})},t.prototype.firebaseOn_=function(a,l,c,u){return this.firebaseCallbacks_.push({ref:a,eventType:l,callback:c,context:u}),a.on(l,c,u),c},t.prototype.firebaseOff_=function(a,l,c,u){a.off(l,c,u);for(var h=0;h<this.firebaseCallbacks_.length;h++){var f=this.firebaseCallbacks_[h];if(f.ref===a&&f.eventType===l&&f.callback===c&&f.context===u){this.firebaseCallbacks_.splice(h,1);break}}},t.prototype.removeFirebaseCallbacks_=function(){for(var a=0;a<this.firebaseCallbacks_.length;a++){var l=this.firebaseCallbacks_[a];l.ref.off(l.eventType,l.callback,l.context)}this.firebaseCallbacks_=[]};function r(a,l){if(!a)throw new Error(l||"assertion error")}var i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function s(a){if(a===0)return"A0";for(var l="";a>0;){var c=a%i.length;l=i[c]+l,a-=c,a/=i.length}var u=i[l.length+9];return u+l}function o(a){r(a.length>0&&a[0]===i[a.length+8]);for(var l=0,c=1;c<a.length;c++)l*=i.length,l+=i.indexOf(a[c]);return l}return t}(),Pe={BOLD:"b",ITALIC:"i",UNDERLINE:"u",STRIKE:"s",FONT:"f",FONT_SIZE:"fs",COLOR:"c",BACKGROUND_COLOR:"bc",ENTITY_SENTINEL:"ent",LINE_SENTINEL:"l",LINE_INDENT:"li",LINE_ALIGN:"la",LIST_TYPE:"lt"},Qf={LINE_SENTINEL_CHARACTER:"\uE000",ENTITY_SENTINEL_CHARACTER:"\uE001"},ta=function(){var n=Pe.ENTITY_SENTINEL,e=n+"_";function t(r,i){if(!(this instanceof t))return new t(r,i);this.type=r,this.info=i||{}}return t.prototype.toAttributes=function(){var r={};r[n]=this.type;for(var i in this.info)r[e+i]=this.info[i];return r},t.fromAttributes=function(r){var i=r[n],s={};for(var o in r)o.indexOf(e)===0&&(s[o.substr(e.length)]=r[o]);return new t(i,s)},t}(),RO=()=>window.document,fz=function(){function n(){this.entities_={};var e=["src","alt","width","height","style","class"];this.register("img",{render:function(t){be.assert(t.src,"image entity should have 'src'!");for(var r=["src","alt","width","height","style","class"],i="<img ",s=0;s<r.length;s++){var o=r[s];o in t&&(i+=" "+o+'="'+t[o]+'"')}return i+=">",i},fromElement:function(t){for(var r={},i=0;i<e.length;i++){var s=e[i];t.hasAttribute(s)&&(r[s]=t.getAttribute(s))}return r}})}return n.prototype.register=function(e,t){be.assert(t.render,"Entity options should include a 'render' function!"),be.assert(t.fromElement,"Entity options should include a 'fromElement' function!"),this.entities_[e]=t},n.prototype.renderToElement=function(e,t){return this.tryRenderToElement_(e,"render",t)},n.prototype.exportToElement=function(e){var t=this.tryRenderToElement_(e,"export")||this.tryRenderToElement_(e,"getHtml")||this.tryRenderToElement_(e,"render");return t.setAttribute("data-firepad-entity",e.type),t},n.prototype.updateElement=function(e,t){var r=e.type,i=e.info;this.entities_[r]&&typeof this.entities_[r].update<"u"&&this.entities_[r].update(i,t)},n.prototype.fromElement=function(e){var t=e.getAttribute("data-firepad-entity");if(t||(t=e.nodeName.toLowerCase()),t&&this.entities_[t]){var r=this.entities_[t].fromElement(e);return new ta(t,r)}},n.prototype.tryRenderToElement_=function(e,t,r){var i=e.type,s=e.info;if(this.entities_[i]&&this.entities_[i][t]){var o=RO(),a=this.entities_[i][t](s,r,o);if(a){if(typeof a=="string"){var l=RO().createElement("div");return l.innerHTML=a,l.childNodes[0]}else if(typeof a=="object")return be.assert(typeof a.nodeType<"u","Error rendering "+i+" entity.  render() function must return an html string or a DOM element."),a}}},n.prototype.entitySupportsUpdate=function(e){return this.entities_[e]&&this.entities_[e].update},n}(),kc=function(){function n(e){if(!(this instanceof n))return new n(e);this.attributes=e||{},this.attributes[Pe.LINE_SENTINEL]=!0}return n.LIST_TYPE={NONE:!1,ORDERED:"o",UNORDERED:"u",TODO:"t",TODOCHECKED:"tc"},n.prototype.cloneWithNewAttribute_=function(e,t){var r={};for(var i in this.attributes)r[i]=this.attributes[i];return t===!1?delete r[e]:r[e]=t,new n(r)},n.prototype.indent=function(e){return this.cloneWithNewAttribute_(Pe.LINE_INDENT,e)},n.prototype.align=function(e){return this.cloneWithNewAttribute_(Pe.LINE_ALIGN,e)},n.prototype.listItem=function(e){return be.assert(e===!1||e==="u"||e==="o"||e==="t"||e==="tc"),this.cloneWithNewAttribute_(Pe.LIST_TYPE,e)},n.prototype.getIndent=function(){return this.attributes[Pe.LINE_INDENT]||0},n.prototype.getAlign=function(){return this.attributes[Pe.LINE_ALIGN]||0},n.prototype.getListItem=function(){return this.attributes[Pe.LIST_TYPE]||!1},n}(),Nf=function(){function n(e){if(!(this instanceof n))return new n(e);this.attributes=e||{}}return n.prototype.cloneWithNewAttribute_=function(e,t){var r={};for(var i in this.attributes)r[i]=this.attributes[i];return t===!1?delete r[e]:r[e]=t,new n(r)},n.prototype.bold=function(e){return this.cloneWithNewAttribute_(Pe.BOLD,e)},n.prototype.italic=function(e){return this.cloneWithNewAttribute_(Pe.ITALIC,e)},n.prototype.underline=function(e){return this.cloneWithNewAttribute_(Pe.UNDERLINE,e)},n.prototype.strike=function(e){return this.cloneWithNewAttribute_(Pe.STRIKE,e)},n.prototype.font=function(e){return this.cloneWithNewAttribute_(Pe.FONT,e)},n.prototype.fontSize=function(e){return this.cloneWithNewAttribute_(Pe.FONT_SIZE,e)},n.prototype.color=function(e){return this.cloneWithNewAttribute_(Pe.COLOR,e)},n.prototype.backgroundColor=function(e){return this.cloneWithNewAttribute_(Pe.BACKGROUND_COLOR,e)},n}(),Lf=function(){function n(e,t){if(!(this instanceof n))return new n(e,t);this.text=e,this.formatting=t||Nf()}return n}(),P0=function(){function n(e,t){if(!(this instanceof n))return new n(e,t);Object.prototype.toString.call(e)!=="[object Array]"&&(typeof e>"u"?e=[]:e=[e]),this.textPieces=e,this.formatting=t||kc()}return n}(),Nx=function(){var{LIST_TYPE:n}=kc;function e(u,h,f){this.listType=u||n.UNORDERED,this.lineFormatting=h||kc(),this.textFormatting=f||Nf()}e.prototype.withTextFormatting=function(u){return new e(this.listType,this.lineFormatting,u)},e.prototype.withLineFormatting=function(u){return new e(this.listType,u,this.textFormatting)},e.prototype.withListType=function(u){return new e(u,this.lineFormatting,this.textFormatting)},e.prototype.withIncreasedIndent=function(){var u=this.lineFormatting.indent(this.lineFormatting.getIndent()+1);return new e(this.listType,u,this.textFormatting)},e.prototype.withAlign=function(u){var h=this.lineFormatting.align(u);return new e(this.listType,h,this.textFormatting)};function t(){this.lines=[],this.currentLine=[],this.currentLineListItemType=null}t.prototype.newlineIfNonEmpty=function(u){this.cleanLine_(),this.currentLine.length>0&&this.newline(u)},t.prototype.newlineIfNonEmptyOrListItem=function(u){this.cleanLine_(),(this.currentLine.length>0||this.currentLineListItemType!==null)&&this.newline(u)},t.prototype.newline=function(u){this.cleanLine_();var h=u.lineFormatting;this.currentLineListItemType!==null&&(h=h.listItem(this.currentLineListItemType),this.currentLineListItemType=null),this.lines.push(P0(this.currentLine,h)),this.currentLine=[]},t.prototype.makeListItem=function(u){this.currentLineListItemType=u},t.prototype.cleanLine_=function(){if(this.currentLine.length>0){var u=this.currentLine.length-1;this.currentLine[0].text=this.currentLine[0].text.replace(/^ +/,""),this.currentLine[u].text=this.currentLine[u].text.replace(/ +$/g,"");for(var h=0;h<this.currentLine.length;h++)this.currentLine[h].text=this.currentLine[h].text.replace(/\u00a0/g," ")}this.currentLine.length===1&&this.currentLine[0].text===""&&(this.currentLine=[])};var r;function i(u,h){var f=RO().createElement("div");f.innerHTML=u,r=h;var p=new t,d=new e;return o(f,d,p),p.lines}var s=s||{ELEMENT_NODE:1,TEXT_NODE:3};function o(u,h,f){if(u.nodeType===s.ELEMENT_NODE){var p=r.fromElement(u);if(p){f.currentLine.push(new Lf(Qf.ENTITY_SENTINEL_CHARACTER,new Nf(p.toAttributes())));return}}switch(u.nodeType){case s.TEXT_NODE:var d=u.nodeValue.replace(/[ \n\t]+/g," ");f.currentLine.push(Lf(d,h.textFormatting));break;case s.ELEMENT_NODE:var m=u.getAttribute("style")||"";switch(h=c(h,m),u.nodeName.toLowerCase()){case"div":case"h1":case"h2":case"h3":case"p":f.newlineIfNonEmpty(h),a(u,h,f),f.newlineIfNonEmpty(h);break;case"center":h=h.withAlign("center"),f.newlineIfNonEmpty(h),a(u,h.withAlign("center"),f),f.newlineIfNonEmpty(h);break;case"b":case"strong":a(u,h.withTextFormatting(h.textFormatting.bold(!0)),f);break;case"u":a(u,h.withTextFormatting(h.textFormatting.underline(!0)),f);break;case"i":case"em":a(u,h.withTextFormatting(h.textFormatting.italic(!0)),f);break;case"s":a(u,h.withTextFormatting(h.textFormatting.strike(!0)),f);break;case"font":var y=u.getAttribute("face"),w=u.getAttribute("color"),b=parseInt(u.getAttribute("size"));y&&(h=h.withTextFormatting(h.textFormatting.font(y))),w&&(h=h.withTextFormatting(h.textFormatting.color(w))),b&&(h=h.withTextFormatting(h.textFormatting.fontSize(b))),a(u,h,f);break;case"br":f.newline(h);break;case"ul":f.newlineIfNonEmptyOrListItem(h);var O=u.getAttribute("class")==="firepad-todo"?n.TODO:n.UNORDERED;a(u,h.withListType(O).withIncreasedIndent(),f),f.newlineIfNonEmpty(h);break;case"ol":f.newlineIfNonEmptyOrListItem(h),a(u,h.withListType(n.ORDERED).withIncreasedIndent(),f),f.newlineIfNonEmpty(h);break;case"li":l(u,h,f);break;case"style":break;default:a(u,h,f);break}break}}function a(u,h,f){if(u.hasChildNodes())for(var p=0;p<u.childNodes.length;p++)o(u.childNodes[p],h,f)}function l(u,h,f){f.newlineIfNonEmptyOrListItem(h);var p=u.getAttribute("class")==="firepad-checked"?n.TODOCHECKED:h.listType;f.makeListItem(p);var d=f.currentLine;a(u,h,f),(d===f.currentLine||f.currentLine.length>0)&&f.newline(h)}function c(u,h){for(var f=u.textFormatting,p=u.lineFormatting,d=h.split(";"),m=0;m<d.length;m++){var y=d[m].split(":");if(y.length===2){var w=be.trim(y[0]).toLowerCase(),b=be.trim(y[1]).toLowerCase();switch(w){case"text-decoration":var O=b.indexOf("underline")>=0,v=b.indexOf("line-through")>=0;f=f.underline(O).strike(v);break;case"font-weight":var _=b==="bold"||parseInt(b)>=600;f=f.bold(_);break;case"font-style":var S=b==="italic"||b==="oblique";f=f.italic(S);break;case"color":f=f.color(b);break;case"background-color":f=f.backgroundColor(b);break;case"text-align":p=p.align(b);break;case"font-size":var R=null,N=["px","pt","%","em","xx-small","x-small","small","medium","large","x-large","xx-large","smaller","larger"];be.stringEndsWith(b,N)?R=b:parseInt(b)&&(R=parseInt(b)+"px"),R&&(f=f.fontSize(R));break;case"font-family":var T=be.trim(b.split(",")[0]);T=T.replace(/['"]/g,""),T=T.replace(/\w\S*/g,function(C){return C.charAt(0).toUpperCase()+C.substr(1).toLowerCase()}),f=f.font(T);break}}}return u.withLineFormatting(p).withTextFormatting(f)}return i}(),dz=function(){var{LIST_TYPE:n}=kc,e=`<style>ul.firepad-todo { list-style: none; margin-left: 0; padding-left: 0; } ul.firepad-todo > li { padding-left: 1em; text-indent: -1em; } ul.firepad-todo > li:before { content: "\\2610"; padding-right: 5px; } ul.firepad-todo > li.firepad-checked:before { content: "\\2611"; padding-right: 5px; }</style>
`;function t(a){return a===n.ORDERED?"<ol>":a===n.UNORDERED?"<ul>":'<ul class="firepad-todo">'}function r(a){return a===n.ORDERED?"</ol>":"</ul>"}function i(a,l){return a===l||a===n.TODO&&l===n.TODOCHECKED||a===n.TODOCHECKED&&l===n.TODO}function s(a){return a.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\u00a0/g,"&nbsp;")}function o(a,l){for(var c="",u=!0,h=[],f=!1,p=!0,d=!0,m=0,y=a.ops[m],w=!1;y;){be.assert(y.isInsert());var b=y.attributes;if(u){u=!1;var O=0,v=null,_="left";for((Pe.LINE_SENTINEL in b)&&(O=b[Pe.LINE_INDENT]||0,v=b[Pe.LIST_TYPE]||null,_=b[Pe.LINE_ALIGN]||"left"),v&&(O=O||1),f?(c+="</li>",f=!1):p||(d&&(c+="<br/>"),c+="</div>"),p=!1,be.assert(O>=0,"Indent must not be negative.");h.length>O||O===h.length&&v!==null&&!i(v,h[h.length-1]);)c+=r(h.pop());for(;h.length<O;){var S=v||n.UNORDERED;w=v==n.TODO||v==n.TODOCHECKED||w,c+=t(S),h.push(S)}var R=_!=="left"?' style="text-align:'+_+'"':"";if(v){var N="";switch(v){case n.TODOCHECKED:N=' class="firepad-checked"';break;case n.TODO:N=' class="firepad-unchecked"';break}c+="<li"+N+R+">",f=!0}else c+="<div"+R+">";d=!0}if(Pe.LINE_SENTINEL in b){y=a.ops[++m];continue}if(Pe.ENTITY_SENTINEL in b){for(var T=0;T<y.text.length;T++){var C=ta.fromAttributes(b),Q=l.exportToElement(C);c+=Q.outerHTML}y=a.ops[++m];continue}var I="",B="";for(var k in b){var j=b[k],ne,Z;k===Pe.BOLD||k===Pe.ITALIC||k===Pe.UNDERLINE||k===Pe.STRIKE?(be.assert(j===!0),ne=Z=k):k===Pe.FONT_SIZE?(ne='span style="font-size: '+j,ne+=typeof j!="string"||j.indexOf("px",j.length-2)===-1?'px"':'"',Z="span"):k===Pe.FONT?(ne='span style="font-family: '+j+'"',Z="span"):k===Pe.COLOR?(ne='span style="color: '+j+'"',Z="span"):k===Pe.BACKGROUND_COLOR?(ne='span style="background-color: '+j+'"',Z="span"):be.log(!1,"Encountered unknown attribute while rendering html: "+k),ne&&(I+="<"+ne+">"),Z&&(B="</"+Z+">"+B)}var le=y.text,oe=le.indexOf(`
`);oe>=0?(u=!0,oe<le.length-1?y=new Sl("insert",le.substr(oe+1),b):y=a.ops[++m],le=le.substr(0,oe)):y=a.ops[++m],le=le.replace(/  +/g,function(pe){return new Array(pe.length+1).join("\xA0")}).replace(/^ /,"\xA0").replace(/ $/,"\xA0"),le.length>0&&(d=!1),c+=I+s(le)+B}for(f?c+="</li>":p||(d&&(c+="&nbsp;"),c+="</div>");h.length>0;)c+=r(h.pop());return w&&(c=e+c),c}return o}(),pz=function(n,e){var t=[];function r(o,a){o instanceof Lf&&(a=o.formatting.attributes,o=o.text),t.push({string:o,attributes:a}),n=o[o.length-1]===`
`}function i(o,a){n&&r(Qf.LINE_SENTINEL_CHARACTER,o.formatting.attributes);for(var l=0;l<o.textPieces.length;l++)r(o.textPieces[l]);a&&r(`
`)}for(var s=0;s<e.length;s++)e[s]instanceof P0?i(e[s],s<e.length-1):r(e[s]);return t},Yc=function(){function n(e,t){this.position=e,this.selectionEnd=t}return n.fromJSON=function(e){return new n(e.position,e.selectionEnd)},n.prototype.equals=function(e){return this.position===e.position&&this.selectionEnd===e.selectionEnd},n.prototype.compose=function(e){return e},n.prototype.transform=function(e){function t(i){for(var s=i,o=e.ops,a=0,l=e.ops.length;a<l&&(o[a].isRetain()?i-=o[a].chars:o[a].isInsert()?s+=o[a].text.length:(s-=Math.min(i,o[a].chars),i-=o[a].chars),!(i<0));a++);return s}var r=t(this.position);return this.position===this.selectionEnd?new n(r,r):new n(r,t(this.selectionEnd))},n}(),$o=function(){function n(){this.state=t}n.prototype.setState=function(s){this.state=s},n.prototype.applyClient=function(s){this.setState(this.state.applyClient(this,s))},n.prototype.applyServer=function(s){this.setState(this.state.applyServer(this,s))},n.prototype.serverAck=function(){this.setState(this.state.serverAck(this))},n.prototype.serverRetry=function(){this.setState(this.state.serverRetry(this))},n.prototype.sendOperation=function(s){throw new Error("sendOperation must be defined in child class")},n.prototype.applyOperation=function(s){throw new Error("applyOperation must be defined in child class")};function e(){}n.Synchronized=e,e.prototype.applyClient=function(s,o){return s.sendOperation(o),new r(o)},e.prototype.applyServer=function(s,o){return s.applyOperation(o),this},e.prototype.serverAck=function(s){throw new Error("There is no pending operation.")},e.prototype.serverRetry=function(s){throw new Error("There is no pending operation.")};var t=new e;function r(s){this.outstanding=s}n.AwaitingConfirm=r,r.prototype.applyClient=function(s,o){return new i(this.outstanding,o)},r.prototype.applyServer=function(s,o){var a=this.outstanding.transform(o);return s.applyOperation(a[1]),new r(a[0])},r.prototype.serverAck=function(s){return t},r.prototype.serverRetry=function(s){return s.sendOperation(this.outstanding),this};function i(s,o){this.outstanding=s,this.buffer=o}return n.AwaitingWithBuffer=i,i.prototype.applyClient=function(s,o){var a=this.buffer.compose(o);return new i(this.outstanding,a)},i.prototype.applyServer=function(s,o){var a=this.outstanding.transform(o),l=this.buffer.transform(a[1]);return s.applyOperation(l[1]),new i(a[0],l[0])},i.prototype.serverRetry=function(s){var o=this.outstanding.compose(this.buffer);return s.sendOperation(o),new r(o)},i.prototype.serverAck=function(s){return s.sendOperation(this.buffer),new r(this.buffer)},n}(),mz=function(){var n="normal",e="undoing",t="redoing";function r(s){this.maxItems=s||50,this.state=n,this.dontCompose=!1,this.undoStack=[],this.redoStack=[]}r.prototype.add=function(s,o){if(this.state===e)this.redoStack.push(s),this.dontCompose=!0;else if(this.state===t)this.undoStack.push(s),this.dontCompose=!0;else{var a=this.undoStack;!this.dontCompose&&o&&a.length>0?a.push(s.compose(a.pop())):(a.push(s),a.length>this.maxItems&&a.shift()),this.dontCompose=!1,this.redoStack=[]}};function i(s,o){for(var a=[],l=o.constructor,c=s.length-1;c>=0;c--){var u=l.transform(s[c],o);(typeof u[0].isNoop!="function"||!u[0].isNoop())&&a.push(u[0]),o=u[1]}return a.reverse()}return r.prototype.transform=function(s){this.undoStack=i(this.undoStack,s),this.redoStack=i(this.redoStack,s)},r.prototype.performUndo=function(s){if(this.state=e,this.undoStack.length===0)throw new Error("undo not possible");s(this.undoStack.pop()),this.state=n},r.prototype.performRedo=function(s){if(this.state=t,this.redoStack.length===0)throw new Error("redo not possible");s(this.redoStack.pop()),this.state=n},r.prototype.canUndo=function(){return this.undoStack.length!==0},r.prototype.canRedo=function(){return this.redoStack.length!==0},r.prototype.isUndoing=function(){return this.state===e},r.prototype.isRedoing=function(){return this.state===t},r}(),IO=function(n){function e(s,o){this.wrapped=s,this.meta=o}e.prototype.apply=function(){return this.wrapped.apply.apply(this.wrapped,arguments)},e.prototype.invert=function(){var s=this.meta;return new e(this.wrapped.invert.apply(this.wrapped,arguments),s&&typeof s=="object"&&typeof s.invert=="function"?s.invert.apply(s,arguments):s)};function t(s,o){for(var a in s)s.hasOwnProperty(a)&&(o[a]=s[a])}function r(s,o){if(s&&typeof s=="object"){if(typeof s.compose=="function")return s.compose(o);var a={};return t(s,a),t(o,a),a}return o}e.prototype.compose=function(s){return new e(this.wrapped.compose(s.wrapped),r(this.meta,s.meta))};function i(s,o){return s&&typeof s=="object"&&typeof s.transform=="function"?s.transform(o):s}return e.transform=function(s,o){var a=s.wrapped.transform(o.wrapped);return[new e(a[0],i(s.meta,o.wrapped)),new e(a[1],i(o.meta,s.wrapped))]},e.prototype.transform=function(s){return e.transform(this,s)},e}(),rP=function(){function n(s,o){this.cursorBefore=s,this.cursorAfter=o}n.prototype.invert=function(){return new n(this.cursorAfter,this.cursorBefore)},n.prototype.compose=function(s){return new n(this.cursorBefore,s.cursorAfter)},n.prototype.transform=function(s){return new n(this.cursorBefore?this.cursorBefore.transform(s):null,this.cursorAfter?this.cursorAfter.transform(s):null)};function e(s,o){this.id=s,this.editorAdapter=o}e.prototype.setColor=function(s){this.color=s},e.prototype.updateCursor=function(s){this.removeCursor(),this.cursor=s,this.mark=this.editorAdapter.setOtherCursor(s,this.color,this.id)},e.prototype.removeCursor=function(){this.mark&&this.mark.clear()};function t(s,o){$o.call(this),this.serverAdapter=s,this.editorAdapter=o,this.undoManager=new mz,this.clients={};var a=this;this.editorAdapter.registerCallbacks({change:function(l,c){a.onChange(l,c)},cursorActivity:function(){a.onCursorActivity()},blur:function(){a.onBlur()},focus:function(){a.onFocus()}}),this.editorAdapter.registerUndo(function(){a.undo()}),this.editorAdapter.registerRedo(function(){a.redo()}),this.serverAdapter.registerCallbacks({ack:function(){a.serverAck(),a.focused&&a.state instanceof $o.Synchronized&&(a.updateCursor(),a.sendCursor(a.cursor)),a.emitStatus()},retry:function(){a.serverRetry()},operation:function(l){a.applyServer(l)},cursor:function(l,c,u){if(!(a.serverAdapter.userId_===l||!(a.state instanceof $o.Synchronized))){var h=a.getClientObject(l);c?(u&&h.setColor(u),h.updateCursor(Yc.fromJSON(c))):h.removeCursor()}}})}r(t,$o),t.prototype.getClientObject=function(s){var o=this.clients[s];return o||(this.clients[s]=new e(s,this.editorAdapter))},t.prototype.applyUnredo=function(s){this.undoManager.add(this.editorAdapter.invertOperation(s)),this.editorAdapter.applyOperation(s.wrapped),this.cursor=s.meta.cursorAfter,this.cursor&&this.editorAdapter.setCursor(this.cursor),this.applyClient(s.wrapped)},t.prototype.undo=function(){var s=this;!this.undoManager.canUndo()||this.undoManager.performUndo(function(o){s.applyUnredo(o)})},t.prototype.redo=function(){var s=this;!this.undoManager.canRedo()||this.undoManager.performRedo(function(o){s.applyUnredo(o)})},t.prototype.onChange=function(s,o){var a=this.cursor;this.updateCursor();var l=this.undoManager.undoStack.length>0&&o.shouldBeComposedWithInverted(i(this.undoManager.undoStack).wrapped),c=new n(this.cursor,a);this.undoManager.add(new IO(o,c),l),this.applyClient(s)},t.prototype.updateCursor=function(){this.cursor=this.editorAdapter.getCursor()},t.prototype.onCursorActivity=function(){var s=this.cursor;this.updateCursor(),!(!this.focused||s&&this.cursor.equals(s))&&this.sendCursor(this.cursor)},t.prototype.onBlur=function(){this.cursor=null,this.sendCursor(null),this.focused=!1},t.prototype.onFocus=function(){this.focused=!0,this.onCursorActivity()},t.prototype.sendCursor=function(s){this.state instanceof $o.AwaitingWithBuffer||this.serverAdapter.sendCursor(s)},t.prototype.sendOperation=function(s){this.serverAdapter.sendOperation(s),this.emitStatus()},t.prototype.applyOperation=function(s){this.editorAdapter.applyOperation(s),this.updateCursor(),this.undoManager.transform(new IO(s,null))},t.prototype.emitStatus=function(){var s=this;setTimeout(function(){s.trigger("synced",s.state instanceof $o.Synchronized)},0)};function r(s,o){function a(){}a.prototype=o.prototype,s.prototype=new a,s.prototype.constructor=s}function i(s){return s[s.length-1]}return t}();be.makeEventEmitter(rP,["synced"]);const iP=function(){function n(c){this.rtcm=c,this.cm=c.codeMirror,s(this,"onChange"),s(this,"onAttributesChange"),s(this,"onCursorActivity"),s(this,"onFocus"),s(this,"onBlur"),this.rtcm.on("change",this.onChange),this.rtcm.on("attributesChange",this.onAttributesChange),this.cm.on("cursorActivity",this.onCursorActivity),this.cm.on("focus",this.onFocus),this.cm.on("blur",this.onBlur)}n.prototype.detach=function(){this.rtcm.off("change",this.onChange),this.rtcm.off("attributesChange",this.onAttributesChange),this.cm.off("cursorActivity",this.onCursorActivity),this.cm.off("focus",this.onFocus),this.cm.off("blur",this.onBlur)};function e(c,u){return c.line<u.line?-1:c.line>u.line?1:c.ch<u.ch?-1:c.ch>u.ch?1:0}function t(c,u){return e(c,u)===0}function r(c){var u=c.lineCount()-1;return c.indexFromPos({line:u,ch:c.getLine(u).length})}n.operationFromCodeMirrorChanges=function(c,u){for(var h=r(u),f=new jt().retain(h),p=new jt().retain(h),d=c.length-1;d>=0;d--){var m=c[d],y=m.start,w=h-y-m.text.length;f=new jt().retain(y).delete(m.removed.length).insert(m.text,m.attributes).retain(w).compose(f),p=p.compose(new jt().retain(y).delete(m.text.length).insert(m.removed,m.removedAttributes).retain(w)),h+=m.removed.length-m.text.length}return[f,p]},n.operationFromAttributesChanges=function(c,u){for(var h=r(u),f=new jt,p=new jt,d=0,m=0;m<c.length;m++){var y=c[m],w=y.start-d;i(w>=0),f.retain(w),p.retain(w);var b=y.end-y.start;f.retain(b,y.attributes),p.retain(b,y.attributesInverse),d=y.start+b}return f.retain(h-d),p.retain(h-d),[f,p]},n.prototype.registerCallbacks=function(c){this.callbacks=c},n.prototype.onChange=function(c,u){if(u[0].origin!=="RTCMADAPTER"){var h=n.operationFromCodeMirrorChanges(u,this.cm);this.trigger("change",h[0],h[1])}},n.prototype.onAttributesChange=function(c,u){if(u[0].origin!=="RTCMADAPTER"){var h=n.operationFromAttributesChanges(u,this.cm);this.trigger("change",h[0],h[1])}},n.prototype.onCursorActivity=function(){var c=this;setTimeout(function(){c.trigger("cursorActivity")},1)},n.prototype.onFocus=function(){this.trigger("focus")},n.prototype.onBlur=function(){this.cm.somethingSelected()||this.trigger("blur")},n.prototype.getValue=function(){return this.cm.getValue()},n.prototype.getCursor=function(){var c=this.cm,u=c.getCursor(),h=c.indexFromPos(u),f;if(c.somethingSelected()){var p=c.getCursor(!0),d=t(u,p)?c.getCursor(!1):p;f=c.indexFromPos(d)}else f=h;return new Yc(h,f)},n.prototype.setCursor=function(c){this.cm.setSelection(this.cm.posFromIndex(c.position),this.cm.posFromIndex(c.selectionEnd))},n.prototype.addStyleRule=function(c){if(!(typeof document>"u"||document===null)){if(!this.addedStyleRules){this.addedStyleRules={};var u=document.createElement("style");document.documentElement.getElementsByTagName("head")[0].appendChild(u),this.addedStyleSheet=u.sheet}if(!this.addedStyleRules[c])return this.addedStyleRules[c]=!0,this.addedStyleSheet.insertRule(c,0)}},n.prototype.setOtherCursor=function(c,u,h){var f=this.cm.posFromIndex(c.position);if(!(typeof u!="string"||!u.match(/^#[a-fA-F0-9]{3,6}$/))){var p=this.rtcm.end();if(!(typeof c!="object"||typeof c.position!="number"||typeof c.selectionEnd!="number")&&!(c.position<0||c.position>p||c.selectionEnd<0||c.selectionEnd>p))if(c.position===c.selectionEnd){var d=this.cm.cursorCoords(f),m=document.createElement("span");return m.className="other-client",m.style.borderLeftWidth="2px",m.style.borderLeftStyle="solid",m.style.borderLeftColor=u,m.style.marginLeft=m.style.marginRight="-1px",m.style.height=(d.bottom-d.top)*.9+"px",m.setAttribute("data-clientid",h),m.style.zIndex=0,this.cm.setBookmark(f,{widget:m,insertLeft:!0})}else{var y="selection-"+u.replace("#",""),w=.4,b="."+y+" { background: "+a(u)+`;
 background: `+a(u,w)+";}";this.addStyleRule(b);var O,v;return c.selectionEnd>c.position?(O=f,v=this.cm.posFromIndex(c.selectionEnd)):(O=this.cm.posFromIndex(c.selectionEnd),v=f),this.cm.markText(O,v,{className:y})}}},n.prototype.trigger=function(c){var u=Array.prototype.slice.call(arguments,1),h=this.callbacks&&this.callbacks[c];h&&h.apply(this,u)},n.prototype.applyOperation=function(c){c.ops.length>10&&this.rtcm.codeMirror.getWrapperElement().setAttribute("style","display: none");for(var u=c.ops,h=0,f=0,p=u.length;f<p;f++){var d=u[f];d.isRetain()?(o(d.attributes)||this.rtcm.updateTextAttributes(h,h+d.chars,function(m){for(var y in d.attributes)d.attributes[y]===!1?delete m[y]:m[y]=d.attributes[y]},"RTCMADAPTER",!0),h+=d.chars):d.isInsert()?(this.rtcm.insertText(h,d.text,d.attributes,"RTCMADAPTER"),h+=d.text.length):d.isDelete()&&this.rtcm.removeText(h,h+d.chars,"RTCMADAPTER")}c.ops.length>10&&(this.rtcm.codeMirror.getWrapperElement().setAttribute("style",""),this.rtcm.codeMirror.refresh())},n.prototype.registerUndo=function(c){this.cm.undo=c},n.prototype.registerRedo=function(c){this.cm.redo=c},n.prototype.invertOperation=function(c){for(var u=0,h=this.rtcm.codeMirror,f,p,d=new jt,m=0;m<c.wrapped.ops.length;m++){var y=c.wrapped.ops[m];if(y.isRetain())if(o(y.attributes))d.retain(y.chars),u+=y.chars;else for(f=this.rtcm.getAttributeSpans(u,u+y.chars),p=0;p<f.length;p++){var w={};for(var b in y.attributes){var O=y.attributes[b],v=f[p].attributes[b];O===!1?v&&(w[b]=v):O!==v&&(w[b]=v||!1)}d.retain(f[p].length,w),u+=f[p].length}else if(y.isInsert())d.delete(y.text.length);else if(y.isDelete()){var _=h.getRange(h.posFromIndex(u),h.posFromIndex(u+y.chars));f=this.rtcm.getAttributeSpans(u,u+y.chars);var S=0;for(p=0;p<f.length;p++)d.insert(_.substr(S,f[p].length),f[p].attributes),S+=f[p].length;u+=y.chars}}return new IO(d,c.meta.invert())};function i(c,u){if(!c)throw new Error(u||"assertion error")}function s(c,u){var h=c[u];c[u]=function(){h.apply(c,arguments)}}function o(c){for(var u in c)return!1;return!0}function a(c,u){if(typeof c!="string")throw new TypeError("Expected a string");c=c.replace(/^#/,""),c.length===3&&(c=c[0]+c[0]+c[1]+c[1]+c[2]+c[2]);var h=parseInt(c,16),f=[h>>16,h>>8&255,h&255],p="rgb";return l(u)&&(p="rgba",f.push(u)),p+"("+f.join(",")+")"}function l(c){return c!=null}return n}(),Jr=function(){function n(e,t){this.pos=e,this.length=t}return n.prototype.end=function(){return this.pos+this.length},n}(),gz=function(){function n(o,a){if(!o)throw new Error("AnnotationList assertion failed"+(a?": "+a:""))}function e(o,a){this.pos=o,this.length=a.length,this.annotation=a.annotation,this.attachedObject_=a.attachedObject}e.prototype.getAttachedObject=function(){return this.attachedObject_};function t(o,a){this.pos=o,this.length=a.length,this.annotation=a.annotation,this.node_=a}t.prototype.attachObject=function(o){this.node_.attachedObject=o};var r={equals:function(){return!1}};function i(o){this.head_=new s(0,r),this.changeHandler_=o}i.prototype.insertAnnotatedSpan=function(o,a){this.wrapOperation_(new Jr(o.pos,0),function(l,c){n(!c||c.next===null);var u=new s(o.length,a);if(c){n(o.pos>l&&o.pos<l+c.length);var h=new s(0,r);return h.next=new s(o.pos-l,c.annotation),h.next.next=u,u.next=new s(l+c.length-o.pos,c.annotation),h.next}else return u})},i.prototype.removeSpan=function(o){o.length!==0&&this.wrapOperation_(o,function(a,l){n(l!==null);var c=new s(0,r),u=c;for(o.pos>a&&(u.next=new s(o.pos-a,l.annotation),u=u.next);o.end()>a+l.length;)a+=l.length,l=l.next;var h=a+l.length-o.end();return h>0&&(u.next=new s(h,l.annotation)),c.next})},i.prototype.updateSpan=function(o,a){o.length!==0&&this.wrapOperation_(o,function(l,c){n(c!==null);var u=new s(0,r),h=u,f=l,p=o.pos-f;for(n(p<c.length),p>0&&(h.next=new s(p,c.annotation),h=h.next,f+=h.length);c!==null&&o.end()>=l+c.length;){var d=l+c.length-f;h.next=new s(d,a(c.annotation,d)),h=h.next,l+=c.length,c=c.next,f=l}var m=o.end()-f;return m>0&&(n(m<c.length),h.next=new s(m,a(c.annotation,m)),h=h.next,f+=h.length,h.next=new s(l+c.length-f,c.annotation)),u.next})},i.prototype.wrapOperation_=function(o,a){if(o.pos<0)throw new Error("Span start cannot be negative.");var l=[],c=[],u=this.getAffectedNodes_(o),h;u.start!==null?(h=u.end.next,u.end.next=null):h=u.succ;var f=a(u.startPos,u.start),p=!1,d=!1;if(f){this.mergeNodesWithSameAnnotations_(f);var m;for(u.pred&&u.pred.annotation.equals(f.annotation)?(p=!0,f.length+=u.pred.length,u.beforePred.next=f,m=u.predPos):(u.beforeStart.next=f,m=u.startPos);f.next;)c.push(new t(m,f)),m+=f.length,f=f.next;u.succ&&u.succ.annotation.equals(f.annotation)?(f.length+=u.succ.length,d=!0,f.next=u.succ.next):f.next=h,c.push(new t(m,f))}else u.pred&&u.succ&&u.pred.annotation.equals(u.succ.annotation)?(p=!0,d=!0,f=new s(u.pred.length+u.succ.length,u.pred.annotation),u.beforePred.next=f,f.next=u.succ.next,c.push(new t(u.startPos-u.pred.length,f))):u.beforeStart.next=h;p&&l.push(new e(u.predPos,u.pred));for(var y=u.startPos,w=u.start;w!==null;)l.push(new e(y,w)),y+=w.length,w=w.next;d&&l.push(new e(y,u.succ)),this.changeHandler_(l,c)},i.prototype.getAffectedNodes_=function(o){for(var a={},l=null,c=this.head_,u=c.next,h=0;u!==null&&o.pos>=h+u.length;)h+=u.length,l=c,c=u,u=u.next;if(u===null&&!(o.length===0&&o.pos===h))throw new Error("Span start exceeds the bounds of the AnnotationList.");for(a.startPos=h,o.length===0&&o.pos===h?a.start=null:a.start=u,a.beforeStart=c,h===o.pos&&h>0?(a.pred=c,a.predPos=h-c.length,a.beforePred=l):a.pred=null;u!==null&&o.end()>h;)h+=u.length,c=u,u=u.next;if(o.end()>h)throw new Error("Span end exceeds the bounds of the AnnotationList.");return o.length===0&&o.end()===h?a.end=null:a.end=c,a.succ=h===o.end()?u:null,a},i.prototype.mergeNodesWithSameAnnotations_=function(o){if(!!o)for(var a=null,l=o;l;)a&&a.annotation.equals(l.annotation)?(a.length+=l.length,a.next=l.next):a=l,l=l.next},i.prototype.forEach=function(o){for(var a=this.head_.next;a!==null;)o(a.length,a.annotation,a.attachedObject),a=a.next},i.prototype.getAnnotatedSpansForPos=function(o){for(var a=0,l=this.head_.next,c=null;l!==null&&a+l.length<=o;)a+=l.length,c=l,l=l.next;if(l===null&&a!==o)throw new Error("pos exceeds the bounds of the AnnotationList");var u=[];return a===o&&c&&u.push(new e(a-c.length,c)),l&&u.push(new e(a,l)),u},i.prototype.getAnnotatedSpansForSpan=function(o){if(o.length===0)return[];for(var a=[],l=this.getAffectedNodes_(o),c=l.startPos,u=l.start;u!==null&&c<o.end();){var h=Math.max(c,o.pos),f=Math.min(c+u.length,o.end()),p=new Jr(h,f-h);p.annotation=u.annotation,a.push(p),c+=u.length,u=u.next}return a},i.prototype.count=function(){for(var o=0,a=this.head_.next,l=null;a!==null;)l&&n(!l.annotation.equals(a.annotation)),l=a,a=a.next,o++;return o};function s(o,a){this.length=o,this.annotation=a,this.attachedObject=null,this.next=null}return s.prototype.clone=function(){var o=new s(this.spanLength,this.annotation);return o.next=this.next,o},i}(),Oz=function(){var n="cmrt-",e="cmrt-",t={c:"color",bc:"background-color",fs:"font-size",li:function(d){return"padding-left: "+d*40+"px"}},r={};function i(d,m,y){this.codeMirror=d,this.options_=y||{},this.entityManager_=m,this.currentAttributes_=null;var w=this;this.annotationList_=new gz(function(b,O){w.onAnnotationsChanged_(b,O)}),this.initAnnotationList_(),p(this,"onCodeMirrorBeforeChange_"),p(this,"onCodeMirrorChange_"),p(this,"onCursorActivity_"),parseInt(CodeMirror.version)>=4?this.codeMirror.on("changes",this.onCodeMirrorChange_):this.codeMirror.on("change",this.onCodeMirrorChange_),this.codeMirror.on("beforeChange",this.onCodeMirrorBeforeChange_),this.codeMirror.on("cursorActivity",this.onCursorActivity_),this.changeId_=0,this.outstandingChanges_={},this.dirtyLines_=[]}be.makeEventEmitter(i,["change","attributesChange","newLine"]);var s=Qf.LINE_SENTINEL_CHARACTER,o=Qf.ENTITY_SENTINEL_CHARACTER;i.prototype.detach=function(){this.codeMirror.off("beforeChange",this.onCodeMirrorBeforeChange_),this.codeMirror.off("change",this.onCodeMirrorChange_),this.codeMirror.off("changes",this.onCodeMirrorChange_),this.codeMirror.off("cursorActivity",this.onCursorActivity_),this.clearAnnotations_()},i.prototype.toggleAttribute=function(d,m){var y=m||!0;if(this.emptySelection_()){var w=this.getCurrentAttributes_();w[d]===y?delete w[d]:w[d]=y,this.currentAttributes_=w}else{var b=this.getCurrentAttributes_(),O=b[d]!==y?y:!1;this.setAttribute(d,O)}},i.prototype.setAttribute=function(d,m){var y=this.codeMirror;if(this.emptySelection_()){var w=this.getCurrentAttributes_();m===!1?delete w[d]:w[d]=m,this.currentAttributes_=w}else this.updateTextAttributes(y.indexFromPos(y.getCursor("start")),y.indexFromPos(y.getCursor("end")),function(b){m===!1?delete b[d]:b[d]=m}),this.updateCurrentAttributes_()},i.prototype.updateTextAttributes=function(d,m,y,w,b){var O=[],v=d,_=this;this.annotationList_.updateSpan(new Jr(d,m-d),function(S,R){var N={};for(var T in S.attributes)N[T]=S.attributes[T];(!N[Pe.LINE_SENTINEL]||b)&&y(N);var C={},Q={};return _.computeChangedAttributes_(S.attributes,N,C,Q),f(C)||O.push({start:v,end:v+R,attributes:C,attributesInverse:Q,origin:w}),v+=R,new h(N)}),O.length>0&&this.trigger("attributesChange",this,O)},i.prototype.computeChangedAttributes_=function(d,m,y,w){var b={},O;for(O in d)b[O]=!0;for(O in m)b[O]=!0;for(O in b)O in m?O in d?d[O]!==m[O]&&(y[O]=m[O],w[O]=d[O]):(y[O]=m[O],w[O]=!1):(y[O]=!1,w[O]=d[O])},i.prototype.toggleLineAttribute=function(d,m){var y=this.getCurrentLineAttributes_(),w;!(d in y)||y[d]!==m?w=m:w=!1,this.setLineAttribute(d,w)},i.prototype.setLineAttribute=function(d,m){this.updateLineAttributesForSelection(function(y){m===!1?delete y[d]:y[d]=m})},i.prototype.updateLineAttributesForSelection=function(d){var m=this.codeMirror,y=m.getCursor("start"),w=m.getCursor("end"),b=y.line,O=w.line,v=m.getLine(O),_=this.areLineSentinelCharacters_(v.substr(0,w.ch));O>b&&_&&O--,this.updateLineAttributes(b,O,d)},i.prototype.updateLineAttributes=function(d,m,y){for(var w=d;w<=m;w++){var b=this.codeMirror.getLine(w),O=this.codeMirror.indexFromPos({line:w,ch:0});if(b[0]!==s){var v={};v[Pe.LINE_SENTINEL]=!0,y(v),this.insertText(O,s,v)}else this.updateTextAttributes(O,O+1,y,null,!0)}},i.prototype.replaceText=function(d,m,y,w,b){this.changeId_++;var O=e+this.changeId_;this.outstandingChanges_[O]={origOrigin:b,attributes:w};var v=this.codeMirror,_=v.posFromIndex(d),S=typeof m=="number"?v.posFromIndex(m):null;v.replaceRange(y,_,S,O)},i.prototype.insertText=function(d,m,y,w){var b=this.codeMirror,O=b.getCursor(),v=w=="RTCMADAPTER"&&!b.somethingSelected()&&d==b.indexFromPos(O);this.replaceText(d,null,m,y,w),v&&b.setCursor(O)},i.prototype.removeText=function(d,m,y){var w=this.codeMirror;w.replaceRange("",w.posFromIndex(d),w.posFromIndex(m),y)},i.prototype.insertEntityAtCursor=function(d,m,y){var w=this.codeMirror,b=w.indexFromPos(w.getCursor("head"));this.insertEntityAt(b,d,m,y)},i.prototype.insertEntityAt=function(d,m,y,w){this.codeMirror,this.insertEntity_(d,new ta(m,y),w)},i.prototype.insertEntity_=function(d,m,y){this.replaceText(d,null,o,m.toAttributes(),y)},i.prototype.getAttributeSpans=function(d,m){for(var y=[],w=this.annotationList_.getAnnotatedSpansForSpan(new Jr(d,m-d)),b=0;b<w.length;b++)y.push({length:w[b].length,attributes:w[b].annotation.attributes});return y},i.prototype.end=function(){var d=this.codeMirror.lineCount()-1;return this.codeMirror.indexFromPos({line:d,ch:this.codeMirror.getLine(d).length})},i.prototype.getRange=function(d,m){var y=this.codeMirror.posFromIndex(d),w=this.codeMirror.posFromIndex(m);return this.codeMirror.getRange(y,w)},i.prototype.initAnnotationList_=function(){var d=this.end();d!==0&&this.annotationList_.insertAnnotatedSpan(new Jr(0,d),new h)},i.prototype.onAnnotationsChanged_=function(d,m){var y,w={};this.tryToUpdateEntitiesInPlace(d,m);for(var b=0;b<d.length;b++){var O=d[b].annotation.attributes;Pe.LINE_SENTINEL in O&&(w[this.codeMirror.posFromIndex(d[b].pos).line]=!0),y=d[b].getAttachedObject(),y&&y.clear()}for(b=0;b<m.length;b++){var v=m[b].annotation,_=Pe.LINE_SENTINEL in v.attributes,S=Pe.ENTITY_SENTINEL in v.attributes,R=this.codeMirror.posFromIndex(m[b].pos);if(_)w[R.line]=!0;else if(S)this.markEntity_(m[b]);else{var N=this.getClassNameForAttributes_(v.attributes);if(N!==""){var T=this.codeMirror.posFromIndex(m[b].pos+m[b].length);y=this.codeMirror.markText(R,T,{className:N}),m[b].attachObject(y)}}}for(var C in w)this.dirtyLines_.push(this.codeMirror.getLineHandle(Number(C))),this.queueLineMarking_()},i.prototype.tryToUpdateEntitiesInPlace=function(d,m){for(var y=d.length;y--;)for(var w=d[y],b=m.length;b--;){var O=m[b];if(w.pos==O.pos&&w.length==O.length&&w.annotation.attributes.ent&&w.annotation.attributes.ent==O.annotation.attributes.ent){var v=O.annotation.attributes.ent;if(this.entityManager_.entitySupportsUpdate(v)){d.splice(y,1),m.splice(b,1);var _=w.getAttachedObject();_.update(O.annotation.attributes),O.attachObject(_)}}}},i.prototype.queueLineMarking_=function(){if(this.lineMarkTimeout_==null){var d=this;this.lineMarkTimeout_=setTimeout(function(){d.lineMarkTimeout_=null;for(var m=[],y=0;y<d.dirtyLines_.length;y++){var w=d.codeMirror.getLineNumber(d.dirtyLines_[y]);m.push(Number(w))}d.dirtyLines_=[],m.sort(function(v,_){return v-_});var b=-1;for(y=0;y<m.length;y++){var O=m[y];O>b&&(b=d.markLineSentinelCharactersForChangedLines_(O,O))}},0)}},i.prototype.addStyleWithCSS_=function(d){var m=document.getElementsByTagName("head")[0],y=document.createElement("style");y.type="text/css",y.styleSheet?y.styleSheet.cssText=d:y.appendChild(document.createTextNode(d)),m.appendChild(y)},i.prototype.getClassNameForAttributes_=function(d){var m="";for(var y in d){var w=d[y];if(y===Pe.LINE_SENTINEL)be.assert(w===!0,"LINE_SENTINEL attribute should be true if it exists.");else{var b=(this.options_.cssPrefix||n)+y;if(w!==!0){y===Pe.FONT_SIZE&&typeof w!="string"&&(w=w+"px");var O=w.toString().toLowerCase().replace(/[^a-z0-9-_]/g,"-");if(b+="-"+O,t[y]&&(r[y]||(r[y]={}),!r[y][O])){r[y][O]=!0;var v=t[y],_=typeof v=="function"?v(w):v+": "+w,S=y==Pe.LINE_INDENT?"pre."+b:"."+b;if(this.addStyleWithCSS_(S+" { "+_+" }"),y===Pe.LINE_INDENT){var S="pre.CodeMirror-line."+b;this.addStyleWithCSS_(S+" { "+_+" }")}}}m=m+" "+b}}return m},i.prototype.markEntity_=function(d){for(var m=d.annotation.attributes,y=ta.fromAttributes(m),w=this.codeMirror,b=this,O=[],v=0;v<d.length;v++){var _=w.posFromIndex(d.pos+v),S=w.posFromIndex(d.pos+v+1),R={collapsed:!0,atomic:!0,inclusiveLeft:!1,inclusiveRight:!1},N=this.createEntityHandle_(y,d.pos),T=this.entityManager_.renderToElement(y,N);T&&(R.replacedWith=T);var C=w.markText(_,S,R);O.push(C),N.setMarker(C)}d.attachObject({clear:function(){for(var Q=0;Q<O.length;Q++)O[Q].clear()},update:function(Q){for(var I=ta.fromAttributes(Q),B=0;B<O.length;B++)b.entityManager_.updateElement(I,O[B].replacedWith)}}),this.queueRefresh_()},i.prototype.queueRefresh_=function(){var d=this;this.refreshTimer_||(this.refreshTimer_=setTimeout(function(){d.codeMirror.refresh(),d.refreshTimer_=null},0))},i.prototype.createEntityHandle_=function(d,m){var y=null,w=this;function b(){if(y){var S=y.find();return S?w.codeMirror.indexFromPos(S.from):null}else return m}function O(){var S=b();S!=null&&(w.codeMirror.focus(),w.removeText(S,S+1))}function v(S){var R=Pe.ENTITY_SENTINEL,N=R+"_",T=b();w.updateTextAttributes(T,T+1,function(C){for(var Q in C)delete C[Q];C[R]=d.type;for(var I in S)C[N+I]=S[I]})}function _(S){y=S}return{find:b,remove:O,replace:v,setMarker:_}},i.prototype.lineClassRemover_=function(d){var m=this.codeMirror,y=m.getLineHandle(d);return{clear:function(){m.removeLineClass(y,"text",".*")}}},i.prototype.emptySelection_=function(){var d=this.codeMirror.getCursor("start"),m=this.codeMirror.getCursor("end");return d.line===m.line&&d.ch===m.ch},i.prototype.onCodeMirrorBeforeChange_=function(d,m){if(m.origin==="+input"||m.origin==="paste"){for(var y=[],w=0;w<m.text.length;w++){var b=m.text[w];b=b.replace(new RegExp("["+s+o+"]","g"),""),y.push(b)}m.update(m.from,m.to,y)}};function a(d,m){return d.line-m.line||d.ch-m.ch}function l(d,m){return a(d,m)<=0}function c(d){return d[d.length-1]}function u(d){if(d.length===0)return 0;for(var m=0,y=0;y<d.length;y++)m+=d[y].length;return m+d.length-1}i.prototype.onCodeMirrorChange_=function(d,m){if(typeof m.from=="object"){for(var y=[];m;)y.push(m),m=m.next;m=y}for(var w=this.convertCoordinateSystemForChanges_(m),b=[],O=0;O<w.length;O++){var v=w[O],_=v.start;v.end;var S=v.text,R=v.removed,N=v.origin;if(R.length>0){for(var T=this.annotationList_.getAnnotatedSpansForSpan(new Jr(_,R.length)),C=0,Q=0;Q<T.length;Q++){var I=T[Q];b.push({start:_,end:_+I.length,removedAttributes:I.annotation.attributes,removed:R.substr(C,I.length),attributes:{},text:"",origin:v.origin}),C+=I.length}this.annotationList_.removeSpan(new Jr(_,R.length))}if(S.length>0){var B;v.origin==="+input"||v.origin==="paste"?B=this.currentAttributes_||{}:N in this.outstandingChanges_?(B=this.outstandingChanges_[N].attributes,N=this.outstandingChanges_[N].origOrigin,delete this.outstandingChanges_[N]):B={},this.annotationList_.insertAnnotatedSpan(new Jr(_,S.length),new h(B)),b.push({start:_,end:_,removedAttributes:{},removed:"",text:S,attributes:B,origin:N})}}this.markLineSentinelCharactersForChanges_(m),b.length>0&&this.trigger("change",this,b)},i.prototype.convertCoordinateSystemForChanges_=function(d){var m=this,y=function(N){return m.codeMirror.indexFromPos(N)};function w(N,T){return function(C){return l(C,T.from)?N(C):l(T.to,C)?N({line:C.line+T.text.length-1-(T.to.line-T.from.line),ch:T.to.line<C.line?C.ch:T.text.length<=1?C.ch-(T.to.ch-T.from.ch)+u(T.text):C.ch-T.to.ch+c(T.text).length})+u(T.removed)-u(T.text):T.from.line===C.line?N(T.from)+C.ch-T.from.ch:N(T.from)+u(T.removed.slice(0,C.line-T.from.line))+1+C.ch}}for(var b=[],O=d.length-1;O>=0;O--){var v=d[O];y=w(y,v);var _=y(v.from),S=v.removed.join(`
`),R=v.text.join(`
`);b.unshift({start:_,end:_+S.length,removed:S,text:R,origin:v.origin})}return b},i.prototype.markLineSentinelCharactersForChanges_=function(d){for(var m=Number.MAX_VALUE,y=-1,w=0;w<d.length;w++){var b=d[w],O=b.from.line;b.from.ch,(b.removed.length>1||b.removed[0].indexOf(s)>=0)&&(m=Math.min(m,O),y=Math.max(y,O)),b.text.length>1?(m=Math.min(m,O),y=Math.max(y,O+b.text.length-1)):b.text[0].indexOf(s)>=0&&(m=Math.min(m,O),y=Math.max(y,O))}y=Math.min(y,this.codeMirror.lineCount()-1),this.markLineSentinelCharactersForChangedLines_(m,y)},i.prototype.markLineSentinelCharactersForChangedLines_=function(d,m){if(d<Number.MAX_VALUE)for(;d>0&&this.lineIsListItemOrIndented_(d-1);)d--;if(m>-1)for(var y=this.codeMirror.lineCount();m+1<y&&this.lineIsListItemOrIndented_(m+1);)m++;for(var w=[],b=this.codeMirror,O=d;O<=m;O++){var v=b.getLine(O),_=b.getLineHandle(O);if(b.removeLineClass(_,"text",".*"),v.length>0)for(var S=v.indexOf(s);S>=0;){for(var R=S;S<v.length&&v[S]===s;){for(var N=b.findMarksAt({line:O,ch:S}),T=0;T<N.length;T++)N[T].isForLineSentinel&&N[T].clear();S++}this.markLineSentinelCharacters_(O,R,S,w),S=v.indexOf(s,S)}else w=[]}return m},i.prototype.markLineSentinelCharacters_=function(d,m,y,w){var b=this.codeMirror,O=null,C=null,v=function(){var Q=C.find();return Q?Q.from.line:null};if(m===0){var _=this.getLineAttributes_(d),S=_[Pe.LIST_TYPE],R=_[Pe.LINE_INDENT]||0;for(S&&R===0&&(R=1);R>=w.length;)w.push(1);S==="o"?(O=this.makeOrderedListElement_(w[R]),w[R]++):S==="u"?(O=this.makeUnorderedListElement_(),w[R]=1):S==="t"?(O=this.makeTodoListElement_(!1,v),w[R]=1):S==="tc"&&(O=this.makeTodoListElement_(!0,v),w[R]=1);var N=this.getClassNameForAttributes_(_);N!==""&&this.codeMirror.addLineClass(d,"text",N),w[R+1]=1}var T={inclusiveLeft:!0,collapsed:!0};O&&(T.replacedWith=O);var C=b.markText({line:d,ch:m},{line:d,ch:y},T);C.isForLineSentinel=!0},i.prototype.makeOrderedListElement_=function(d){return be.elt("div",d+".",{class:"firepad-list-left"})},i.prototype.makeUnorderedListElement_=function(){return be.elt("div","\u2022",{class:"firepad-list-left"})},i.prototype.toggleTodo=function(d){var m=Pe.LIST_TYPE,y=this.getCurrentLineAttributes_(),w;!(m in y)||y[m]!=="t"&&y[m]!=="tc"?w="t":y[m]==="t"?w="tc":y[m]==="tc"&&(w=d?"t":!1),this.setLineAttribute(m,w)},i.prototype.makeTodoListElement_=function(d,m){var y={type:"checkbox",class:"firepad-todo-left"};d&&(y.checked=!0);var w=be.elt("input",!1,y),b=this;return be.on(w,"click",be.stopEventAnd(function(O){b.codeMirror.setCursor({line:m(),ch:1}),b.toggleTodo(!0)})),w},i.prototype.lineIsListItemOrIndented_=function(d){var m=this.getLineAttributes_(d);return(m[Pe.LIST_TYPE]||!1)!==!1||(m[Pe.LINE_INDENT]||0)!==0},i.prototype.onCursorActivity_=function(){var d=this;setTimeout(function(){d.updateCurrentAttributes_()},1)},i.prototype.getCurrentAttributes_=function(){return this.currentAttributes_||this.updateCurrentAttributes_(),this.currentAttributes_},i.prototype.updateCurrentAttributes_=function(){var d=this.codeMirror,m=d.indexFromPos(d.getCursor("anchor")),y=d.indexFromPos(d.getCursor("head")),w=y;if(m>y){for(;w<this.end();){var b=this.getRange(w,w+1);if(b!==`
`&&b!==s)break;w++}w<this.end()&&w++}else for(;w>0&&(b=this.getRange(w-1,w),!(b!==`
`&&b!==s));)w--;var O=this.annotationList_.getAnnotatedSpansForPos(w);this.currentAttributes_={};var v={};O.length>0&&!(Pe.LINE_SENTINEL in O[0].annotation.attributes)?v=O[0].annotation.attributes:O.length>1&&(be.assert(!(Pe.LINE_SENTINEL in O[1].annotation.attributes),"Cursor can't be between two line sentinel characters."),v=O[1].annotation.attributes);for(var _ in v)_!=="l"&&_!=="lt"&&_!=="li"&&_.indexOf(Pe.ENTITY_SENTINEL)!==0&&(this.currentAttributes_[_]=v[_])},i.prototype.getCurrentLineAttributes_=function(){var d=this.codeMirror,m=d.getCursor("anchor"),y=d.getCursor("head"),w=y.line;return y.ch===0&&m.line<y.line&&w--,this.getLineAttributes_(w)},i.prototype.getLineAttributes_=function(d){var m={},y=this.codeMirror.getLine(d);if(y.length>0&&y[0]===s){var w=this.codeMirror.indexFromPos({line:d,ch:0}),b=this.annotationList_.getAnnotatedSpansForSpan(new Jr(w,1));be.assert(b.length===1);for(var O in b[0].annotation.attributes)m[O]=b[0].annotation.attributes[O]}return m},i.prototype.clearAnnotations_=function(){this.annotationList_.updateSpan(new Jr(0,this.end()),function(d,m){return new h({})})},i.prototype.newline=function(){var d=this.codeMirror,m=this;if(!this.emptySelection_())d.replaceSelection(`
`,"end","+input");else{var y=d.getCursor("head").line,w=this.getLineAttributes_(y),b=w[Pe.LIST_TYPE];b&&d.getLine(y).length===1?this.updateLineAttributes(y,y,function(O){delete O[Pe.LIST_TYPE],delete O[Pe.LINE_INDENT]}):(d.replaceSelection(`
`,"end","+input"),this.updateLineAttributes(y+1,y+1,function(O){for(var v in w)O[v]=w[v];b==="tc"&&(O[Pe.LIST_TYPE]="t"),m.trigger("newLine",{line:y+1,attr:O})}))}},i.prototype.deleteLeft=function(){var d=this.codeMirror,m=d.getCursor("head"),y=this.getLineAttributes_(m.line),w=y[Pe.LIST_TYPE],b=y[Pe.LINE_INDENT],O=this.emptySelection_()&&m.ch===1;O&&w?this.updateLineAttributes(m.line,m.line,function(v){delete v[Pe.LIST_TYPE],delete v[Pe.LINE_INDENT]}):O&&b&&b>0?this.unindent():d.deleteH(-1,"char")},i.prototype.deleteRight=function(){var d=this.codeMirror,m=d.getCursor("head"),y=d.getLine(m.line),w=this.areLineSentinelCharacters_(y),b=m.line+1<d.lineCount()?d.getLine(m.line+1):"";this.emptySelection_()&&w&&b[0]===s?(d.replaceRange("",{line:m.line,ch:0},{line:m.line+1,ch:0},"+input"),d.setCursor({line:m.line,ch:0})):d.deleteH(1,"char")},i.prototype.indent=function(){this.updateLineAttributesForSelection(function(d){var m=d[Pe.LINE_INDENT],y=d[Pe.LIST_TYPE];m?d[Pe.LINE_INDENT]++:y?d[Pe.LINE_INDENT]=2:d[Pe.LINE_INDENT]=1})},i.prototype.unindent=function(){this.updateLineAttributesForSelection(function(d){var m=d[Pe.LINE_INDENT];m&&m>1?d[Pe.LINE_INDENT]=m-1:(delete d[Pe.LIST_TYPE],delete d[Pe.LINE_INDENT])})},i.prototype.getText=function(){return this.codeMirror.getValue().replace(new RegExp(s,"g"),"")},i.prototype.areLineSentinelCharacters_=function(d){for(var m=0;m<d.length;m++)if(d[m]!==s)return!1;return!0};function h(d){this.attributes=d||{}}h.prototype.equals=function(d){if(!(d instanceof h))return!1;var m;for(m in this.attributes)if(d.attributes[m]!==this.attributes[m])return!1;for(m in d.attributes)if(d.attributes[m]!==this.attributes[m])return!1;return!0};function f(d){for(var m in d)return!1;return!0}function p(d,m){var y=d[m];d[m]=function(){y.apply(d,arguments)}}return i}(),yz=function(n){function e(t){this.imageInsertionUI=t,this.element_=this.makeElement_()}return be.makeEventEmitter(e,["bold","italic","underline","strike","font","font-size","color","left","center","right","unordered-list","ordered-list","todo-list","indent-increase","indent-decrease","undo","redo","insert-image"]),e.prototype.element=function(){return this.element_},e.prototype.makeButton_=function(t,r){var i=this;r=r||t;var s=be.elt("a",[be.elt("span","",{class:"firepad-tb-"+r})],{class:"firepad-btn"});return be.on(s,"click",be.stopEventAnd(function(){i.trigger(t)})),s},e.prototype.makeElement_=function(){var t=this,r=this.makeFontDropdown_(),i=this.makeFontSizeDropdown_(),s=this.makeColorDropdown_(),o=[be.elt("div",[r],{class:"firepad-btn-group"}),be.elt("div",[i],{class:"firepad-btn-group"}),be.elt("div",[s],{class:"firepad-btn-group"}),be.elt("div",[t.makeButton_("bold"),t.makeButton_("italic"),t.makeButton_("underline"),t.makeButton_("strike","strikethrough")],{class:"firepad-btn-group"}),be.elt("div",[t.makeButton_("unordered-list","list-2"),t.makeButton_("ordered-list","numbered-list"),t.makeButton_("todo-list","list")],{class:"firepad-btn-group"}),be.elt("div",[t.makeButton_("indent-decrease"),t.makeButton_("indent-increase")],{class:"firepad-btn-group"}),be.elt("div",[t.makeButton_("left","paragraph-left"),t.makeButton_("center","paragraph-center"),t.makeButton_("right","paragraph-right")],{class:"firepad-btn-group"}),be.elt("div",[t.makeButton_("undo"),t.makeButton_("redo")],{class:"firepad-btn-group"})];t.imageInsertionUI&&o.push(be.elt("div",[t.makeButton_("insert-image")],{class:"firepad-btn-group"}));var a=be.elt("div",o,{class:"firepad-toolbar-wrapper"}),l=be.elt("div",null,{class:"firepad-toolbar"});return l.appendChild(a),l},e.prototype.makeFontDropdown_=function(){for(var t=["Arial","Comic Sans MS","Courier New","Impact","Times New Roman","Verdana"],r=[],i=0;i<t.length;i++){var s=be.elt("span",t[i]);s.setAttribute("style","font-family:"+t[i]),r.push({content:s,value:t[i]})}return this.makeDropdown_("Font","font",r)},e.prototype.makeFontSizeDropdown_=function(){for(var t=[9,10,12,14,18,24,32,42],r=[],i=0;i<t.length;i++){var s=be.elt("span",t[i].toString());s.setAttribute("style","font-size:"+t[i]+"px; line-height:"+(t[i]-6)+"px;"),r.push({content:s,value:t[i]})}return this.makeDropdown_("Size","font-size",r,"px")},e.prototype.makeColorDropdown_=function(){for(var t=["black","red","green","blue","yellow","cyan","magenta","grey"],r=[],i=0;i<t.length;i++){var s=be.elt("div");s.className="firepad-color-dropdown-item",s.setAttribute("style","background-color:"+t[i]),r.push({content:s,value:t[i]})}return this.makeDropdown_("Color","color",r)},e.prototype.makeDropdown_=function(t,r,i,s){s=s||"";var o=this,a=be.elt("a",t+" \u25BE",{class:"firepad-btn firepad-dropdown"}),l=be.elt("ul",[],{class:"firepad-dropdown-menu"});a.appendChild(l);var c=!1;function u(){c||(l.style.display="block",be.on(document,"click",f,!0),c=!0)}var h=!1;function f(){c&&(l.style.display="",be.off(document,"click",f,!0),c=!1),h=!0,setTimeout(function(){h=!1},0)}function p(w,b){typeof w!="object"&&(w=document.createTextNode(String(w)));var O=be.elt("a",[w]);be.on(O,"click",be.stopEventAnd(function(){f(),o.trigger(r,b+s)})),l.appendChild(O)}for(var d=0;d<i.length;d++){var m=i[d].content,y=i[d].value;p(m,y)}return be.on(a,"click",be.stopEventAnd(function(){h||u()})),a},e}(),sP=function(){class n{constructor(t){var r;this.onChange=this.onChange.bind(this),this.onBlur=this.onBlur.bind(this),this.onFocus=this.onFocus.bind(this),this.onCursorActivity=this.onCursorActivity.bind(this),this.ace=t,this.aceSession=this.ace.getSession(),this.aceDoc=this.aceSession.getDocument(),this.aceDoc.setNewLineMode("unix"),this.grabDocumentState(),this.ace.on("change",this.onChange),this.ace.on("blur",this.onBlur),this.ace.on("focus",this.onFocus),this.aceSession.selection.on("changeCursor",this.onCursorActivity),this.aceRange==null&&(this.aceRange=((r=ace.require)!=null?r:require)("ace/range").Range)}grabDocumentState(){return this.lastDocLines=this.aceDoc.getAllLines(),this.lastCursorRange=this.aceSession.selection.getRange()}detach(){return this.ace.removeListener("change",this.onChange),this.ace.removeListener("blur",this.onBlur),this.ace.removeListener("focus",this.onFocus),this.aceSession.selection.removeListener("changeCursor",this.onCursorActivity)}onChange(t){var r;if(!this.ignoreChanges)return r=this.operationFromACEChange(t),this.trigger("change",...r),this.grabDocumentState()}onBlur(){if(this.ace.selection.isEmpty())return this.trigger("blur")}onFocus(){return this.trigger("focus")}onCursorActivity(){return setTimeout(()=>this.trigger("cursorActivity"),0)}operationFromACEChange(t){var r,i,s,o,a,l,c;return t.data?(i=t.data,(o=i.action)==="insertLines"||o==="removeLines"?(c=i.lines.join(`
`)+`
`,i.action.replace("Lines","")):(c=i.text.replace(this.aceDoc.getNewLineCharacter(),`
`),i.action.replace("Text","")),l=this.indexFromPos(i.range.start)):(c=t.lines.join(`
`),l=this.indexFromPos(t.start)),a=this.lastDocLines.join(`
`).length-l,t.action==="remove"&&(a-=c.length),s=new jt().retain(l).insert(c).retain(a),r=new jt().retain(l).delete(c).retain(a),t.action==="remove"?[r,s]:[s,r]}applyOperationToACE(t){var r,i,s,o,a,l,c,u;for(i=0,c=t.ops,s=0,o=c.length;s<o;s++)a=c[s],a.isRetain()?i+=a.chars:a.isInsert()?(this.aceDoc.insert(this.posFromIndex(i),a.text),i+=a.text.length):a.isDelete()&&(r=this.posFromIndex(i),u=this.posFromIndex(i+a.chars),l=this.aceRange.fromPoints(r,u),this.aceDoc.remove(l));return this.grabDocumentState()}posFromIndex(t){var r,i,s,o,a;for(o=this.aceDoc.$lines,a=r=0,i=o.length;r<i&&(s=o[a],!(t<=s.length));a=++r)t-=s.length+1;return{row:a,column:t}}indexFromPos(t,r){var i,s,o,a;for(r==null&&(r=this.lastDocLines),s=0,i=o=0,a=t.row;0<=a?o<a:o>a;i=0<=a?++o:--o)s+=this.lastDocLines[i].length+1;return s+=t.column}getValue(){return this.aceDoc.getValue()}getCursor(){var t,r,i;try{i=this.indexFromPos(this.aceSession.selection.getRange().start,this.aceDoc.$lines),r=this.indexFromPos(this.aceSession.selection.getRange().end,this.aceDoc.$lines)}catch{try{i=this.indexFromPos(this.lastCursorRange.start),r=this.indexFromPos(this.lastCursorRange.end)}catch(o){t=o,console.log("Couldn't figure out the cursor range:",t,"-- setting it to 0:0."),[i,r]=[0,0]}}return i>r&&([i,r]=[r,i]),new Yc(i,r)}setCursor(t){var r,i;return i=this.posFromIndex(t.position),r=this.posFromIndex(t.selectionEnd),t.position>t.selectionEnd&&([i,r]=[r,i]),this.aceSession.selection.setSelectionRange(new this.aceRange(i.row,i.column,r.row,r.column))}setOtherCursor(t,r,i){var s,o,a,l,c,u,h;return this.otherCursors==null&&(this.otherCursors={}),a=this.otherCursors[i],a&&(a.start.detach(),a.end.detach(),this.aceSession.removeMarker(a.id)),h=this.posFromIndex(t.position),l=this.posFromIndex(t.selectionEnd),t.selectionEnd<t.position&&([h,l]=[l,h]),s=`other-client-selection-${r.replace("#","")}`,c=t.position===t.selectionEnd,c&&(s=s.replace("selection","cursor")),o=`.${s} {
  position: absolute;
  background-color: ${c?"transparent":r};
  border-left: 2px solid ${r};
}`,this.addStyleRule(o),this.otherCursors[i]=a=new this.aceRange(h.row,h.column,l.row,l.column),u=this,a.clipRows=function(){var f;return f=u.aceRange.prototype.clipRows.apply(this,arguments),f.isEmpty=function(){return!1},f},a.start=this.aceDoc.createAnchor(a.start),a.end=this.aceDoc.createAnchor(a.end),a.id=this.aceSession.addMarker(a,s,"text"),{clear:()=>(a.start.detach(),a.end.detach(),this.aceSession.removeMarker(a.id))}}addStyleRule(t){var r;if(!(typeof document>"u"||document===null)&&(this.addedStyleRules||(this.addedStyleRules={},r=document.createElement("style"),document.documentElement.getElementsByTagName("head")[0].appendChild(r),this.addedStyleSheet=r.sheet),!this.addedStyleRules[t]))return this.addedStyleRules[t]=!0,this.addedStyleSheet.insertRule(t,0)}registerCallbacks(t){this.callbacks=t}trigger(t,...r){var i,s;return(i=this.callbacks)!=null&&(s=i[t])!=null?s.apply(this,r):void 0}applyOperation(t){return t.isNoop()||(this.ignoreChanges=!0),this.applyOperationToACE(t),this.ignoreChanges=!1}registerUndo(t){return this.ace.undo=t}registerRedo(t){return this.ace.redo=t}invertOperation(t){return t.invert(this.getValue())}}return n.prototype.ignoreChanges=!1,n}();var Lx=function(e,t,r){return"."+e+` {
  position: relative;
background-color: `+t+`;
border-left: 2px solid `+r+`;
}`},Dx=function(e,t){if(typeof document>"u"||document===null)return!1;if(this.addedStyleRules.indexOf(e)===-1){var r=document.createElement("style"),i=document.createTextNode(t);r.appendChild(i),document.head.appendChild(r),this.addedStyleRules.push(e)}},oP=function(){function n(e){if(!e||typeof e.getModel!="function")throw new Error("MonacoAdapter: Incorrect Parameter Recieved in constructor, expected valid Monaco Instance");this.monaco=e,this.monacoModel=this.monaco.getModel(),this.lastDocLines=this.monacoModel.getLinesContent(),this.lastCursorRange=this.monaco.getSelection(),this.callbacks={},this.otherCursors=[],this.addedStyleRules=[],this.ignoreChanges=!1,this.onChange=this.onChange.bind(this),this.onBlur=this.onBlur.bind(this),this.onFocus=this.onFocus.bind(this),this.onCursorActivity=this.onCursorActivity.bind(this),this.changeHandler=this.monaco.onDidChangeModelContent(this.onChange),this.didBlurHandler=this.monaco.onDidBlurEditorWidget(this.onBlur),this.didFocusHandler=this.monaco.onDidFocusEditorWidget(this.onFocus),this.didChangeCursorPositionHandler=this.monaco.onDidChangeCursorPosition(this.onCursorActivity)}return n.prototype.detach=function(){this.changeHandler.dispose(),this.didBlurHandler.dispose(),this.didFocusHandler.dispose(),this.didChangeCursorPositionHandler.dispose()},n.prototype.getCursor=function(){var t=this.monaco.getSelection();(typeof t>"u"||t===null)&&(t=this.lastCursorRange);var r=t.getStartPosition(),i=t.getEndPosition(),s=this.monacoModel.getOffsetAt(r),o=this.monacoModel.getOffsetAt(i);if(s>o){var a=[o,s];s=a[0],o=a[1]}return new Yc(s,o)},n.prototype.setCursor=function(t){var r=t.position,i=t.selectionEnd,s=this.monacoModel.getPositionAt(r),o=this.monacoModel.getPositionAt(i);if(r>i){var a=[o,s];s=a[0],o=a[1]}this.monaco.setSelection(new monaco.Range(s.lineNumber,s.column,o.lineNumber,o.column))},n.prototype.setOtherCursor=function(t,r,i){if(typeof t!="object"||typeof t.position!="number"||typeof t.selectionEnd!="number"||typeof r!="string"||!r.match(/^#[a-fA-F0-9]{3,6}$/))return!1;var s=t.position,o=t.selectionEnd;if(s<0||o<0)return!1;var a=this.otherCursors.find(function(m){return m.clientID===i});a||(a={clientID:i,decoration:[]},this.otherCursors.push(a)),a.decoration=this.monaco.deltaDecorations(a.decoration,[]);var l="other-client-selection-"+r.replace("#",""),c,u;s===o?(l=l.replace("selection","cursor"),c=Lx(l,"transparent",r),u=Dx.call(this,l,c)):(c=Lx(l,r,r),u=Dx.call(this,l,c)),u==!1&&console.log(`Monaco Adapter: Failed to add some css style.
Please make sure you're running on supported environment.`);var h=this.monacoModel.getPositionAt(s),f=this.monacoModel.getPositionAt(o);if(s>o){var p=[f,h];h=p[0],f=p[1]}a.decoration=this.monaco.deltaDecorations(a.decoration,[{range:new monaco.Range(h.lineNumber,h.column,f.lineNumber,f.column),options:{className:l}}]);var d=this;return{clear:function(){a.decoration=d.monaco.deltaDecorations(a.decoration,[])}}},n.prototype.registerCallbacks=function(t){this.callbacks=Object.assign({},this.callbacks,t)},n.prototype.registerUndo=function(t){if(typeof t=="function")this.callbacks.undo=t;else throw new Error("MonacoAdapter: registerUndo method expects a callback function in parameter")},n.prototype.registerRedo=function(t){if(typeof t=="function")this.callbacks.redo=t;else throw new Error("MonacoAdapter: registerRedo method expects a callback function in parameter")},n.prototype.operationFromMonacoChanges=function(t,r,i){var s=t.text,o=t.rangeLength,a=t.rangeOffset,l=r.length+i-a,c,u,h;return s.length===0&&o>0?(h=r.slice(a,a+o),c=new jt().retain(a).delete(o).retain(l-o),u=new jt().retain(a).insert(h).retain(l-o)):s.length>0&&o>0?(h=r.slice(a,a+o),c=new jt().retain(a).delete(o).insert(s).retain(l-o),u=new jt().retain(a).delete(s.length).insert(h).retain(l-o)):(c=new jt().retain(a).insert(s).retain(l),u=new jt().retain(a).delete(s).retain(l)),[c,u]},n.prototype.onChange=function(t){var r=this;if(!this.ignoreChanges){var i=this.lastDocLines.join(this.monacoModel.getEOL()),s=0;if(!t.changes){var o=new jt().retain(i.length);this.trigger("change",o,o)}t.changes.forEach(function(a){var l=r.operationFromMonacoChanges(a,i,s);s+=l[0].targetLength-l[0].baseLength,r.trigger.apply(r,["change"].concat(l))}),this.lastDocLines=this.monacoModel.getLinesContent()}},n.prototype.trigger=function(t){if(!!this.callbacks.hasOwnProperty(t)){var r=this.callbacks[t];if(!typeof r!=="function"){var i=[];if(arguments.length>1)for(var s=1;s<arguments.length;s++)i.push(arguments[s]);r.apply(null,i)}}},n.prototype.onBlur=function(){this.monaco.getSelection().isEmpty()&&this.trigger("blur")},n.prototype.onFocus=function(){this.trigger("focus")},n.prototype.onCursorActivity=function(){var t=this;setTimeout(function(){return t.trigger("cursorActivity")},1)},n.prototype.applyOperation=function(t){t.isNoop()||(this.ignoreChanges=!0);var r=t.ops,i=0,s=this;r.forEach(function(o){if(o.isRetain())i+=o.chars;else if(o.isInsert()){var a=s.monacoModel.getPositionAt(i);s.monaco.executeEdits("my-source",[{range:new monaco.Range(a.lineNumber,a.column,a.lineNumber,a.column),text:o.text,forceMoveMarkers:!0}]),i+=o.text.length}else if(o.isDelete()){var l=s.monacoModel.getPositionAt(i),c=s.monacoModel.getPositionAt(i+o.chars);s.monaco.executeEdits("my-source",[{range:new monaco.Range(l.lineNumber,l.column,c.lineNumber,c.column),text:"",forceMoveMarkers:!0}])}}),this.lastDocLines=this.monacoModel.getLinesContent(),this.ignoreChanges=!1},n.prototype.invertOperation=function(t){t.invert(this.getValue())},n}();const bz=n=>{n.cm.dispatch({effects:wt.appendConfig.of(n.cm.constructor.updateListener.of(e=>{if(e.docChanged&&!(e.transactions[0]&&e.transactions[0].annotations.some(t=>t.type=="firepad"))){let t=0,r=new jt,i=new jt;e.changes.toJSON().forEach(s=>{if(typeof s=="number")s!=0&&(t+=s,r=r.retain(s),i=i.retain(s));else if(typeof s=="object"){const[o,...a]=s;if(o>0&&(r=r.delete(o),i=i.insert(e.startState.sliceDoc(t,t+o))),a){const l=a.join(`
`);r=r.insert(l),i=i.delete(l.length)}}}),n.trigger("change",r,i)}n.lastDocLines=n.cm.state.doc.text}))})};var vz=function(){function n(e,t={}){this.options=t,this.cm=e,this.lastDocLines=this.cm.state.doc.text,this.lastCursorRange=this.cm.state.selection.main,this.callbacks={},this.otherCursors=[],this.addedStyleRules=[],this.ignoreChanges=!1,this.onBlur=this.onBlur.bind(this),this.onFocus=this.onFocus.bind(this),this.onCursorActivity=this.onCursorActivity.bind(this),bz(this)}return n.prototype.detach=function(){},n.prototype.getCursor=function(){var t=this.cm.state.selection.main;(typeof t>"u"||t===null)&&(t=this.lastCursorRange);var r=t.from,i=t.to;if(r>i){var s=[i,r];r=s[0],i=s[1]}return new Yc(r,i)},n.prototype.setCursor=function(t){var r=t.position,i=t.selectionEnd;this.cm.dispatch({selection:{anchor:r,head:i}})},n.prototype.setOtherCursor=function(t,r,i){},n.prototype.registerCallbacks=function(t){this.callbacks=Object.assign({},this.callbacks,t)},n.prototype.registerUndo=function(t){if(typeof t=="function")this.callbacks.undo=t;else throw new Error("CodeMirror6Adapter: registerUndo method expects a callback function in parameter")},n.prototype.registerRedo=function(t){if(typeof t=="function")this.callbacks.redo=t;else throw new Error("CodeMirror6Adapter: registerRedo method expects a callback function in parameter")},n.prototype.trigger=function(t){if(!!this.callbacks.hasOwnProperty(t)){var r=this.callbacks[t];if(!typeof r!=="function"){var i=[];if(arguments.length>1)for(var s=1;s<arguments.length;s++)i.push(arguments[s]);r.apply(null,i)}}},n.prototype.onBlur=function(){this.monaco.getSelection().isEmpty()&&this.trigger("blur")},n.prototype.onFocus=function(){this.trigger("focus")},n.prototype.onCursorActivity=function(){var t=this;setTimeout(function(){return t.trigger("cursorActivity")},1)},n.prototype.applyOperation=function(t){t.isNoop()||(this.ignoreChanges=!0);var r=t.ops,i=0,s=this;r.forEach(function(o){o.isRetain()?i+=o.chars:o.isInsert()?(s.cm.dispatch({annotations:[zt.addToHistory.of(!1),new qi("firepad",!0)],changes:{from:i,to:i,insert:o.text}}),i+=o.text.length):o.isDelete()&&s.cm.dispatch({annotations:[zt.addToHistory.of(!1),new qi("firepad",!0)],changes:{from:i,to:i+o.chars,insert:""}})}),this.lastDocLines=this.cm.state.doc.text,this.ignoreChanges=!1},n.prototype.invertOperation=function(t){t.invert(this.getValue())},n}();/*!
 * Firepad is an open-source, collaborative code and text editor. It was designed
 * to be embedded inside larger applications. Since it uses Firebase as a backend,
 * it requires no server-side code and can be added to any web app simply by
 * including a couple JavaScript files.
 *
 * http://www.firepad.io/
 * License: MIT
 * Copyright: 2014 Firebase
 * With code from ot.js (Copyright 2012-2013 Tim Baumann)
 */let Ti;try{Ti=Function("return this")()}catch{Ti=window}const aP=function(){var n=Ti.CodeMirror,e=Ti.ace;Ti.monaco;function t(o,a,l){if(!(this instanceof t))return new t(o,a,l);if(!n&&!e&&!Ti.monaco&&a.type!=="CodeMirror6")throw new Error("Couldn't find CodeMirror, ACE or Monaco.  Did you forget to include codemirror.js/ace.js or import monaco?");if(this.zombie_=!1,a.type==="CodeMirror6"){if(this.codeMirror6_=this.editor_=a.editor,this.codeMirror6_.state.doc.toString()!=="")throw new Error("Can't initialize Firepad with a CodeMirror6 instance that already contains text.")}else if(n&&a instanceof n){this.codeMirror_=this.editor_=a;var c=this.codeMirror_.getValue();if(c!=="")throw new Error("Can't initialize Firepad with a CodeMirror instance that already contains text.")}else if(e&&a&&a.session instanceof e.EditSession){if(this.ace_=this.editor_=a,c=this.ace_.getValue(),c!=="")throw new Error("Can't initialize Firepad with an ACE instance that already contains text.")}else if(Ti.monaco&&a&&a instanceof Ti.monaco.constructor){if(Ti.monaco,this.monaco_=this.editor_=a,c=this.monaco_.getValue(),c!=="")throw new Error("Can't initialize Firepad with a Monaco instance that already contains text.")}else this.codeMirror_=this.editor_=new n(a);var u;this.codeMirror6_?u=this.codeMirror6_.dom:this.codeMirror_?u=this.codeMirror_.getWrapperElement():this.ace_?u=this.ace_.container:u=this.monaco_.getDomNode(),this.firepadWrapper_=be.elt("div",null,{class:"firepad"}),u.parentNode.replaceChild(this.firepadWrapper_,u),this.firepadWrapper_.appendChild(u),this.editor_.firepad=this,this.options_=l||{},this.getOption("richTextShortcuts",!1)&&(n.keyMap.richtext||this.initializeKeyMap_(),this.codeMirror_.setOption("keyMap","richtext"),this.firepadWrapper_.className+=" firepad-richtext"),this.imageInsertionUI=this.getOption("imageInsertionUI",!0),this.getOption("richTextToolbar",!1)&&(this.addToolbar_(),this.firepadWrapper_.className+=" firepad-richtext firepad-with-toolbar"),this.addPoweredByLogo_(),this.codeMirror_&&this.codeMirror_.refresh();var h=this.getOption("userId",o.push().key),f=this.getOption("userColor",r(h));this.entityManager_=new fz,this.firebaseAdapter_=new hz(o,h,f),this.codeMirror6_?this.editorAdapter_=new vz(this.codeMirror6_,this.options_):this.codeMirror_?(this.richTextCodeMirror_=new Oz(this.codeMirror_,this.entityManager_,{cssPrefix:"firepad-"}),this.editorAdapter_=new iP(this.richTextCodeMirror_)):this.ace_?this.editorAdapter_=new sP(this.ace_):this.editorAdapter_=new oP(this.monaco_),this.client_=new rP(this.firebaseAdapter_,this.editorAdapter_);var p=this;this.firebaseAdapter_.on("cursor",function(){p.trigger.apply(p,["cursor"].concat([].slice.call(arguments)))}),this.codeMirror_&&this.richTextCodeMirror_.on("newLine",function(){p.trigger.apply(p,["newLine"].concat([].slice.call(arguments)))}),this.firebaseAdapter_.on("ready",function(){p.ready_=!0,p.ace_&&p.editorAdapter_.grabDocumentState(),p.monaco_&&p.editorAdapter_.grabDocumentState();var d=p.getOption("defaultText",null);d&&p.isHistoryEmpty()&&p.setText(d),p.trigger("ready")}),this.client_.on("synced",function(d){p.trigger("synced",d)}),navigator.appName=="Microsoft Internet Explorer"&&navigator.userAgent.match(/MSIE 8\./)&&(window.onload=function(){var d=document.getElementsByTagName("head")[0],m=document.createElement("style");m.type="text/css",m.styleSheet.cssText=":before,:after{content:none !important;}",d.appendChild(m),setTimeout(function(){d.removeChild(m)},0)})}be.makeEventEmitter(t),t.fromCodeMirror=t,t.fromACE=t,t.fromMonaco=t,t.fromCodeMirror6=(o,a,...l)=>t(o,{type:"CodeMirror6",editor:a},...l),t.prototype.dispose=function(){this.zombie_=!0;var o;this.codeMirror_?o=this.codeMirror_.getWrapperElement():this.ace_?o=this.ace_.container:o=this.monaco_.getDomNode(),this.firepadWrapper_.removeChild(o),this.firepadWrapper_.parentNode.replaceChild(o,this.firepadWrapper_),this.editor_.firepad=null,this.codeMirror_&&this.codeMirror_.getOption("keyMap")==="richtext"&&this.codeMirror_.setOption("keyMap","default"),this.firebaseAdapter_.dispose(),this.editorAdapter_.detach(),this.richTextCodeMirror_&&this.richTextCodeMirror_.detach()},t.prototype.setUserId=function(o){this.firebaseAdapter_.setUserId(o)},t.prototype.setUserColor=function(o){this.firebaseAdapter_.setColor(o)},t.prototype.getText=function(){return this.assertReady_("getText"),this.codeMirror_?this.richTextCodeMirror_.getText():this.ace_?this.ace_.getSession().getDocument().getValue():this.monaco_.getModel().getValue()},t.prototype.setText=function(o){if(this.assertReady_("setText"),this.codeMirror6_)return this.codeMirror6_.dispatch({changes:{from:0,to:this.codeMirror6_.state.doc.length,insert:o}});if(this.monaco_)return this.monaco_.getModel().setValue(o);if(this.ace_)return this.ace_.getSession().getDocument().setValue(o);this.codeMirror_.getWrapperElement().style.display="none",this.codeMirror_.setValue(""),this.insertText(0,o),this.codeMirror_.getWrapperElement().style.display="",this.codeMirror_.refresh(),this.editorAdapter_.setCursor({position:0,selectionEnd:0})},t.prototype.insertTextAtCursor=function(o){this.insertText(this.codeMirror_.indexFromPos(this.codeMirror_.getCursor()),o)},t.prototype.insertText=function(o,a){be.assert(!this.ace_,"Not supported for ace yet."),be.assert(!this.monaco_,"Not supported for monaco yet."),this.assertReady_("insertText"),Object.prototype.toString.call(a)!=="[object Array]"&&(a=[a]);var l=this;l.codeMirror_.operation(function(){for(var c=o===0,u=pz(c,a),h=0;h<u.length;h++){var f=u[h].string,p=u[h].attributes;l.richTextCodeMirror_.insertText(o,f,p),o+=f.length}})},t.prototype.getOperationForSpan=function(o,a){for(var l=this.richTextCodeMirror_.getRange(o,a),c=this.richTextCodeMirror_.getAttributeSpans(o,a),u=0,h=new jt,f=0;f<c.length;f++)h.insert(l.substr(u,c[f].length),c[f].attributes),u+=c[f].length;return h},t.prototype.getHtml=function(){return this.getHtmlFromRange(null,null)},t.prototype.getHtmlFromSelection=function(){var o=this.codeMirror_.getCursor("start"),a=this.codeMirror_.getCursor("end"),l=this.codeMirror_.indexFromPos(o),c=this.codeMirror_.indexFromPos(a);return this.getHtmlFromRange(l,c)},t.prototype.getHtmlFromRange=function(o,a){this.assertReady_("getHtmlFromRange");var l=o!=null&&a!=null?this.getOperationForSpan(o,a):this.getOperationForSpan(0,this.codeMirror_.getValue().length);return dz(l,this.entityManager_)},t.prototype.insertHtml=function(o,a){var l=Nx(a,this.entityManager_);this.insertText(o,l)},t.prototype.insertHtmlAtCursor=function(o){this.insertHtml(this.codeMirror_.indexFromPos(this.codeMirror_.getCursor()),o)},t.prototype.setHtml=function(o){var a=Nx(o,this.entityManager_);this.setText(a)},t.prototype.isHistoryEmpty=function(){return this.assertReady_("isHistoryEmpty"),this.firebaseAdapter_.isHistoryEmpty()},t.prototype.bold=function(){this.richTextCodeMirror_.toggleAttribute(Pe.BOLD),this.codeMirror_.focus()},t.prototype.italic=function(){this.richTextCodeMirror_.toggleAttribute(Pe.ITALIC),this.codeMirror_.focus()},t.prototype.underline=function(){this.richTextCodeMirror_.toggleAttribute(Pe.UNDERLINE),this.codeMirror_.focus()},t.prototype.strike=function(){this.richTextCodeMirror_.toggleAttribute(Pe.STRIKE),this.codeMirror_.focus()},t.prototype.fontSize=function(o){this.richTextCodeMirror_.setAttribute(Pe.FONT_SIZE,o),this.codeMirror_.focus()},t.prototype.font=function(o){this.richTextCodeMirror_.setAttribute(Pe.FONT,o),this.codeMirror_.focus()},t.prototype.color=function(o){this.richTextCodeMirror_.setAttribute(Pe.COLOR,o),this.codeMirror_.focus()},t.prototype.highlight=function(){this.richTextCodeMirror_.toggleAttribute(Pe.BACKGROUND_COLOR,"rgba(255,255,0,.65)"),this.codeMirror_.focus()},t.prototype.align=function(o){if(o!=="left"&&o!=="center"&&o!=="right")throw new Error('align() must be passed "left", "center", or "right".');this.richTextCodeMirror_.setLineAttribute(Pe.LINE_ALIGN,o),this.codeMirror_.focus()},t.prototype.orderedList=function(){this.richTextCodeMirror_.toggleLineAttribute(Pe.LIST_TYPE,"o"),this.codeMirror_.focus()},t.prototype.unorderedList=function(){this.richTextCodeMirror_.toggleLineAttribute(Pe.LIST_TYPE,"u"),this.codeMirror_.focus()},t.prototype.todo=function(){this.richTextCodeMirror_.toggleTodo(),this.codeMirror_.focus()},t.prototype.newline=function(){this.richTextCodeMirror_.newline()},t.prototype.deleteLeft=function(){this.richTextCodeMirror_.deleteLeft()},t.prototype.deleteRight=function(){this.richTextCodeMirror_.deleteRight()},t.prototype.indent=function(){this.richTextCodeMirror_.indent(),this.codeMirror_.focus()},t.prototype.unindent=function(){this.richTextCodeMirror_.unindent(),this.codeMirror_.focus()},t.prototype.undo=function(){this.codeMirror_.undo()},t.prototype.redo=function(){this.codeMirror_.redo()},t.prototype.insertEntity=function(o,a,l){this.richTextCodeMirror_.insertEntityAtCursor(o,a,l)},t.prototype.insertEntityAt=function(o,a,l,c){this.richTextCodeMirror_.insertEntityAt(o,a,l,c)},t.prototype.registerEntity=function(o,a){this.entityManager_.register(o,a)},t.prototype.getOption=function(o,a){return o in this.options_?this.options_[o]:a},t.prototype.assertReady_=function(o){if(!this.ready_)throw new Error('You must wait for the "ready" event before calling '+o+".");if(this.zombie_)throw new Error("You can't use a Firepad after calling dispose()!  [called "+o+"]")},t.prototype.makeImageDialog_=function(){this.makeDialog_("img","Insert image url")},t.prototype.makeDialog_=function(o,a){var l=this,c=function(){var w=document.getElementById("overlay");w.style.visibility="hidden",l.firepadWrapper_.removeChild(w)},u=function(){var w=document.getElementById("overlay");w.style.visibility="hidden";var b=document.getElementById(o).value;b!==null&&l.insertEntity(o,{src:b}),l.firepadWrapper_.removeChild(w)},h=be.elt("input",null,{class:"firepad-dialog-input",id:o,type:"text",placeholder:a,autofocus:"autofocus"}),f=be.elt("a","Submit",{class:"firepad-btn",id:"submitbtn"});be.on(f,"click",be.stopEventAnd(u));var p=be.elt("a","Cancel",{class:"firepad-btn"});be.on(p,"click",be.stopEventAnd(c));var d=be.elt("div",[f,p],{class:"firepad-btn-group"}),m=be.elt("div",[h,d],{class:"firepad-dialog-div"}),y=be.elt("div",[m],{class:"firepad-dialog",id:"overlay"});this.firepadWrapper_.appendChild(y)},t.prototype.addToolbar_=function(){this.toolbar=new yz(this.imageInsertionUI),this.toolbar.on("undo",this.undo,this),this.toolbar.on("redo",this.redo,this),this.toolbar.on("bold",this.bold,this),this.toolbar.on("italic",this.italic,this),this.toolbar.on("underline",this.underline,this),this.toolbar.on("strike",this.strike,this),this.toolbar.on("font-size",this.fontSize,this),this.toolbar.on("font",this.font,this),this.toolbar.on("color",this.color,this),this.toolbar.on("left",function(){this.align("left")},this),this.toolbar.on("center",function(){this.align("center")},this),this.toolbar.on("right",function(){this.align("right")},this),this.toolbar.on("ordered-list",this.orderedList,this),this.toolbar.on("unordered-list",this.unorderedList,this),this.toolbar.on("todo-list",this.todo,this),this.toolbar.on("indent-increase",this.indent,this),this.toolbar.on("indent-decrease",this.unindent,this),this.toolbar.on("insert-image",this.makeImageDialog_,this),this.firepadWrapper_.insertBefore(this.toolbar.element(),this.firepadWrapper_.firstChild)},t.prototype.addPoweredByLogo_=function(){var o=be.elt("a",null,{class:"powered-by-firepad"});o.setAttribute("href","http://www.firepad.io/"),o.setAttribute("target","_blank"),this.firepadWrapper_.appendChild(o)},t.prototype.initializeKeyMap_=function(){function o(a){return function(l){setTimeout(function(){a.call(l.firepad)},0)}}n.keyMap.richtext={"Ctrl-B":o(this.bold),"Cmd-B":o(this.bold),"Ctrl-I":o(this.italic),"Cmd-I":o(this.italic),"Ctrl-U":o(this.underline),"Cmd-U":o(this.underline),"Ctrl-H":o(this.highlight),"Cmd-H":o(this.highlight),Enter:o(this.newline),Delete:o(this.deleteRight),Backspace:o(this.deleteLeft),Tab:o(this.indent),"Shift-Tab":o(this.unindent),fallthrough:["default"]}};function r(o){for(var a=1,l=0;l<o.length;l++)a=17*(a+o.charCodeAt(l))%360;var c=a/360;return s(c,1,.75)}function i(o,a,l){function c(u){var h=Math.round(255*u).toString(16);return h.length===1?"0"+h:h}return"#"+c(o)+c(a)+c(l)}function s(o,a,l){if(a===0)return i(l,l,l);var c=l<.5?l*(1+a):l+a-a*l,u=2*l-c,h=function(f){return f<0&&(f+=1),f>1&&(f-=1),6*f<1?u+(c-u)*6*f:2*f<1?c:3*f<2?u+(c-u)*6*(2/3-f):u};return i(h(o+1/3),h(o),h(o-1/3))}return t}();Object.assign(aP,{Formatting:Nf,Text:Lf,Entity:ta,LineFormatting:kc,Line:P0,TextOperation:jt,RichTextCodeMirrorAdapter:iP,ACEAdapter:sP,MonacoAdapter:oP});let Rt=null,_m=null;const Br=$n(!1),QO=uy(500,null),lP=$n("");let Vs=null;const qa=Vr([Bi,pr,hr.singleChapterMode],([n,e,t])=>{const[r,i]=(()=>{const s=Rt==null?void 0:Rt.state.doc.toString().length;let o=(Rt==null?void 0:Rt.state.doc.lineAt(Math.min(n.from,Math.max(0,s-1))).number)-1,a="",l=null;for(const[c,u]of e.chapters.entries())if(u.contentStart<=o)a=c,l=u;else return[a,l];return[a,l]})();return console.log("currentchapterkey ",r),(()=>{if(Rt!=null){if(String(t)!=="2"){vh.set([0,1/0]);const s=[];JSON.stringify(Vs)!==JSON.stringify(s)&&setTimeout(()=>{Vs=s,wh.set(s),Rt==null||Rt.dispatch({effects:yh.of("subviewUpdate")})});return}if(i===null){let s=(Sn(yt)||"").split(`
`).size;try{s=[...e.chapters.entries()][0][1].start}catch{}try{console.log(s);let o=Rt.state.doc.line(s);vh.set([0,o.to]);const a=[[o.to,Rt.state.doc.toString().length+1e4]];JSON.stringify(Vs)!==JSON.stringify(a)&&setTimeout(()=>{Vs=a,wh.set(a),Rt==null||Rt.dispatch({effects:yh.of("subviewUpdate")})})}catch{}return}try{let s=Rt.state.doc.line(i.contentStart+2),o=Rt.state.doc.line(i.end+1);vh.set([s.from,o.to]);const a=[[0,s.from],[o.to+1,Rt.state.doc.toString().length+1e3]];console.log(Vs,a),JSON.stringify(Vs)!==JSON.stringify(a)&&(Vs=a,setTimeout(()=>{wh.set(a),Rt==null||Rt.dispatch({effects:yh.of("subviewUpdate")})}))}catch{}}})(),r}),wz=Vr([qa,pr],([n,e])=>{if(n=="")return" ";const t=e.chapters.get(n);return n+(t.title?" - "+t.title:"")}),cP=n=>{yt.set(n.book),Bi.set({from:0,to:0}),[Rt]=pA(n.book),Lc.set(!0)},_z=n=>{try{Bi.set({from:0,to:0});let e=[];[Rt,e]=pA("");const t=mc.initializeApp(n),r=mc.database(t);window.db=r,_m=aP.fromCodeMirror6(r.ref(n.book),Rt,{defaultText:Sn(ln)("books.fire").replace("%1",n.book),recreateWith:e}),_m.on("ready",function(){Lc.set(!0)}),_m.on("synced",function(i){i?QO.set(!0):QO.lazySet(!1)})}catch(e){lP.set(e.toString())}},it=()=>Rt,xm=Zk.parse(location.hash),Ca="mage-firebase-lastsessions",rs=new cy("magebook2");rs.version(1).stores({sessions:"&id, time, preview",fireSessions:"&id, time, preview"});const uP=$n(!1),xz=async()=>(await rs.sessions.orderBy("preview").keys()).reverse().map(n=>({time:new Date(Number(n.substr(0,30))),id:n.substr(31,20),name:n.substr(52,30)})),Ld=new function(){let n;const t=fu(20),r=c=>{const u=(c.data.title||"no title").padEnd(30,"").substr(0,30);return`${String(c.time).padStart(30,"0")}-${c.id}-${u}`},i=50,s=async()=>{const c="time",u=(await rs.sessions.orderBy(c).keys()).reverse();if(u.length>i){const h=u[i];await rs.sessions.where("time").below(h).modify(function(){delete this.value})}};let o;const a=async()=>{if(xm.fsession){uP.set(!0),window.addEventListener("hashchange",()=>{window.location.reload()},!1),_z(JSON.parse(OD(decodeURIComponent(xm.fsession)))),Lc.subscribe(h=>{if(h){const f=JSON.parse(localStorage[Ca]||"{}");f[xm.fsession]={name:Ri.properties.title,time:new Date().getTime()},localStorage[Ca]=JSON.stringify(f)}});return}if(o){console.error("Session loaded twice!");return}const c=localStorage.getItem("mage-session-last");o=await(async()=>{const h="msession=";if(!c)return fu(20);if(window.location.hash&&window.location.hash.includes(h)){const f=window.location.hash.indexOf(h)+h.length;if(!(f+20>window.location.hash.length)){const p=window.location.hash.substr(f,20);if(p==c)return p;try{if(await rs.sessions.get(p))return p}catch{}}}return c||fu(20)})(),location.replace(`#msession=${o}`),window.addEventListener("hashchange",()=>{window.location.hash.includes(`#msession=${o}`)||window.location.reload()},!1),localStorage.setItem("mage-session-last",o),localStorage.setItem(`mage-lock-${o}`,t);let u;if(c==o)u=JSON.parse(localStorage.getItem("mage-session-last-data"));else try{u=await rs.sessions.get(o)}catch{}u=u||{data:{book:Sn(ln)("books.local"),cursor:{row:0,column:0}}},cP(u.data),n=Vr([yt,Bi,pr],([h,f,p])=>({book:h,cursor:f,title:p.properties.title})),n.subscribe(async h=>{if(localStorage.getItem(`mage-lock-${o}`)!=t){Dm.set({lock:!0,session:this});return}localStorage.setItem("mage-session-last",o);const f={id:o,data:h,time:new Date().getTime()};localStorage.setItem("mage-session-last-data",JSON.stringify(f));try{await rs.sessions.put({preview:r(f),...f})}catch(p){console.log(p)}}),window.onbeforeunload=h=>{yt.flush(),delete h.returnValue},setInterval(()=>yt.flush(),1e4),s()},l=async c=>{window.onbeforeunload=()=>{};const u=fu(20);localStorage.setItem("mage-session-last",u);const h={id:u,file:{name:"New"},time:new Date().getTime(),...c};localStorage.setItem("mage-session-last-data",JSON.stringify(h));try{await rs.sessions.put(h)}catch{}location.assign(`#msession=${h.id}`)};this.duplicate=async c=>{l({data:Sn(n),...c})},this.lock=()=>{localStorage.setItem(`mage-lock-${o}`,t),Dm.set({lock:!1})},Object.assign(this,{sessionName:o,load:a,open:l})},hP={md:wD,xlgc:GD,fodt:iM,docx:cM,html:dM,advanced:OM},Sz=n=>{const e=n.files[0],t=e.name,r=new FileReader;r.onload=async()=>{let i=t.substr(t.lastIndexOf(".")+1);if(i=="magebook"&&(i="md"),!["md","xlgc"].includes(i)){console.error("Unsupported format");return}const s=r.result,o=hP[i].decode(s),a=await Promise.resolve(o);Ld.open({data:{book:a,cursor:{row:0,column:0}}}),n.value=""},r.readAsText(e)},Ei=async(n,e)=>{const t=hP[n],r=mi(e);$D(r.properties.disableShortLinks&&r.properties.disableShortLinks.trim()=="true");const{encodedBook:i,mimetype:s,extension:o,blob:a=null}=await Promise.resolve(t.encode(e)),l=`-${GS.asString(Sn(hr.dateFormat),new Date)}.${o}`,c=`${r.properties.title||"magebook"}${l}`;if(i){if(Vt){hi.postMessage({type:"saveFile",suffix:l,data:i});return}const u=document.createElement("a");u.setAttribute("href",`data:${s};charset=utf-8,${encodeURIComponent(i)}`),u.setAttribute("download",c),u.style.display="none",document.body.appendChild(u),u.click(),document.body.removeChild(u);return}a&&a.then(u=>{if(Vt){let h=new FileReader;h.onload=function(){hi.postMessage({type:"saveFile",suffix:l,blob:h.result})},h.readAsDataURL(u);return}JL(u,c)})},kz="magebook",Tz="1.2.16",Ez="Luca Fabbian",Cz="luca.fabbian.1999@gmail.com",Az="Interactive fiction editor",Pz="MIT",Rz="https://librogamesland.github.io/magebook",Iz={type:"git",url:"https://github.com/librogamesland/magebook.git"},Qz=["lgl","librogamesland","librogame","gamebook","editor","rollup-plugin","vite-plugin"],Nz="index.js",Lz={docs:"docsify serve . --port 3005",version:"echo $npm_package_version",dev:"vite",build:"vite build && rm -rf ./vscode/editor && cp -r ./editor ./vscode/  && mv ./vscode/editor/assets/index.*.js ./vscode/editor/assets/index.js &&  mv ./vscode/editor/assets/index.*.css ./vscode/editor/assets/index.css",preview:"vite preview",check:"svelte-check --tsconfig ./tsconfig.json",test:"echo 'work in progress :)'"},Dz={"@codemirror/commands":"^6.1.2","@codemirror/lang-markdown":"^6.0.5","@codemirror/search":"^6.2.3","@fbraem/rollup-plugin-toml":"^0.0.3","@lucafabbian/firepad":"^1.5.20","@sveltejs/vite-plugin-svelte":"^1.3.1","@tsconfig/svelte":"^3.0.0",codemirror:"^6.0.1",dexie:"^3.2.2",docx:"^7.7.0","file-saver":"^2.0.5",firebase:"^9.14.0",jsdom:"^20.0.3",marked:"^4.2.3",puppeteer:"^19.3.0","query-string":"^7.1.1","smooth-scroll-into-view-if-needed":"^1.1.33",svelte:"^3.53.1","svelte-check":"^2.10.0","svelte-i18n":"^3.6.0","svelte-preprocess":"^4.10.7",tslib:"^2.4.1",typescript:"^4.9.3",vite:"^3.2.4"},Mz={"@codemirror/view":"^6.6.0","@types/sanitize-html":"^2.6.2","date-format":"^4.0.14","js-base64":"^3.7.3","node-fetch":"^2.6.1","sanitize-html":"^2.7.3"},qs={name:kz,version:Tz,author:Ez,email:Cz,description:Az,license:Pz,homepage:Rz,repository:Iz,keywords:Qz,main:Nz,scripts:Lz,devDependencies:Dz,dependencies:Mz},$z=""+new URL("logo.d06f15d3.png",import.meta.url).href;function Bz(n){let e,t,r,i,s,o,a,l,c,u=n[1]("about.text")+"",h,f,p=n[1]("about.contact")+"",d,m,y,w,b,O=n[1]("dialogs.ok")+"",v,_,S;return{c(){e=G("div"),t=G("h3"),t.textContent=`Magebook - v. ${qs.version}`,r=he(),i=G("img"),o=he(),a=G("br"),l=he(),c=G("p"),h=he(),f=G("p"),d=ve(p),m=ve(": "),y=G("a"),y.textContent="luca.fabbian.1999@gmail.com",w=he(),b=G("button"),v=ve(O),io(i.src,s=$z)||z(i,"src",s),z(i,"alt","Magebook logo"),z(i,"class","svelte-1qabtlc"),z(c,"class","svelte-1qabtlc"),z(y,"target","_blank"),z(y,"rel","noopener"),z(y,"href","mailto:luca.fabbian.1999@gmail.com?subject=Magebook%20-%20Segnalazione"),z(f,"class","svelte-1qabtlc"),z(b,"class","ok svelte-1qabtlc"),z(e,"class","dialog svelte-1qabtlc")},m(R,N){Ee(R,e,N),U(e,t),U(e,r),U(e,i),U(e,o),U(e,a),U(e,l),U(e,c),c.innerHTML=u,U(e,h),U(e,f),U(f,d),U(f,m),U(f,y),U(e,w),U(e,b),U(b,v),_||(S=xe(b,"click",n[3]),_=!0)},p(R,[N]){N&2&&u!==(u=R[1]("about.text")+"")&&(c.innerHTML=u),N&2&&p!==(p=R[1]("about.contact")+"")&&Te(d,p),N&2&&O!==(O=R[1]("dialogs.ok")+"")&&Te(v,O)},i:We,o:We,d(R){R&&Se(e),_=!1,S()}}}function Fz(n,e,t){let r;Me(n,ln,a=>t(1,r=a));let{params:i}=e,{callback:s}=e;const o=()=>s(!0);return n.$$set=a=>{"params"in a&&t(2,i=a.params),"callback"in a&&t(0,s=a.callback)},[s,r,i,o]}class Uz extends En{constructor(e){super(),Tn(this,e,Fz,Bz,On,{params:2,callback:0})}}function Mx(n){let e,t=n[5]("dialogs.shuffle.savecopy")+"",r,i,s;return{c(){e=G("button"),r=ve(t),z(e,"class","cancel")},m(o,a){Ee(o,e,a),U(e,r),i||(s=xe(e,"click",n[8]),i=!0)},p(o,a){a&32&&t!==(t=o[5]("dialogs.shuffle.savecopy")+"")&&Te(r,t)},d(o){o&&Se(e),i=!1,s()}}}function Vz(n){let e,t,r,i,s,o,a,l,c=n[5]("dialogs.ok")+"",u,h,f,p,d=n[5]("dialogs.cancel")+"",m,y,w,b=n[4]&&Mx(n);return{c(){e=G("div"),t=G("h3"),r=ve(n[2]),i=he(),s=G("p"),o=ve(n[3]),a=he(),l=G("button"),u=ve(c),h=he(),b&&b.c(),f=he(),p=G("button"),m=ve(d),z(l,"class","ok"),z(p,"class","cancel"),z(e,"class","dialog")},m(O,v){Ee(O,e,v),U(e,t),U(t,r),U(e,i),U(e,s),U(s,o),U(e,a),U(e,l),U(l,u),U(e,h),b&&b.m(e,null),U(e,f),U(e,p),U(p,m),y||(w=[xe(l,"click",n[7]),xe(p,"click",n[9])],y=!0)},p(O,[v]){v&4&&Te(r,O[2]),v&8&&Te(o,O[3]),v&32&&c!==(c=O[5]("dialogs.ok")+"")&&Te(u,c),O[4]?b?b.p(O,v):(b=Mx(O),b.c(),b.m(e,f)):b&&(b.d(1),b=null),v&32&&d!==(d=O[5]("dialogs.cancel")+"")&&Te(m,d)},i:We,o:We,d(O){O&&Se(e),b&&b.d(),y=!1,Wt(w)}}}function Wz(n,e,t){let r,i,s=We,o=()=>(s(),s=Tc(l,m=>t(6,i=m)),l),a;Me(n,ln,m=>t(5,a=m)),n.$$.on_destroy.push(()=>s());let{params:l}=e;o();let{callback:c}=e,u,h;const f=()=>c(!0),p=()=>Ei("md",yt.flush()),d=()=>c(!1);return n.$$set=m=>{"params"in m&&o(t(0,l=m.params)),"callback"in m&&t(1,c=m.callback)},n.$$.update=()=>{n.$$.dirty&64&&t(2,[u,h,r]=i,u,(t(3,h),t(6,i)),(t(4,r),t(6,i)))},[l,c,u,h,r,a,i,f,p,d]}class NO extends En{constructor(e){super(),Tn(this,e,Wz,Vz,On,{params:0,callback:1})}}function jz(n){let e,t,r=n[4]("dialogs.graph.loading")+"",i,s,o;return{c(){e=G("div"),t=G("p"),i=ve(r),s=he(),o=G("div"),z(o,"class","spinner-1"),z(e,"class","dialog"),kn(e,"text-align","center")},m(a,l){Ee(a,e,l),U(e,t),U(t,i),U(e,s),U(e,o)},p(a,l){l&16&&r!==(r=a[4]("dialogs.graph.loading")+"")&&Te(i,r)},d(a){a&&Se(e)}}}function qz(n){let e,t,r,i,s,o;function a(u,h){return Vt?zz:Xz}let c=a()(n);return{c(){e=G("div"),t=G("div"),r=he(),i=G("div"),c.c(),kn(t,"max-width","90vw"),kn(t,"max-height","80vh"),kn(t,"overflow","auto"),z(e,"class","imgbox svelte-m36p7x")},m(u,h){Ee(u,e,h),U(e,t),t.innerHTML=n[3],U(e,r),U(e,i),c.m(i,null),s||(o=[xe(t,"click",rN(Zz)),xe(e,"click",n[10])],s=!0)},p(u,h){h&8&&(t.innerHTML=u[3]),c.p(u,h)},d(u){u&&Se(e),c.d(),s=!1,Wt(o)}}}function Xz(n){let e,t=n[4]("dialogs.graph.open")+"",r,i,s,o=n[4]("dialogs.graph.download")+"",a,l,c;return{c(){e=G("button"),r=ve(t),i=he(),s=G("button"),a=ve(o),z(e,"class","ok"),z(s,"class","error")},m(u,h){Ee(u,e,h),U(e,r),Ee(u,i,h),Ee(u,s,h),U(s,a),l||(c=[xe(e,"click",n[8]),xe(s,"click",n[9])],l=!0)},p(u,h){h&16&&t!==(t=u[4]("dialogs.graph.open")+"")&&Te(r,t),h&16&&o!==(o=u[4]("dialogs.graph.download")+"")&&Te(a,o)},d(u){u&&Se(e),u&&Se(i),u&&Se(s),l=!1,Wt(c)}}}function zz(n){let e,t=n[4]("dialogs.graph.download")+"",r,i,s;return{c(){e=G("button"),r=ve(t),z(e,"class","error")},m(o,a){Ee(o,e,a),U(e,r),i||(s=xe(e,"click",n[7]),i=!0)},p(o,a){a&16&&t!==(t=o[4]("dialogs.graph.download")+"")&&Te(r,t)},d(o){o&&Se(e),i=!1,s()}}}function Hz(n){let e;function t(s,o){if(s[1])return qz;if(s[2])return jz}let r=t(n),i=r&&r(n);return{c(){i&&i.c(),e=Df()},m(s,o){i&&i.m(s,o),Ee(s,e,o)},p(s,[o]){r===(r=t(s))&&i?i.p(s,o):(i&&i.d(1),i=r&&r(s),i&&(i.c(),i.m(e.parentNode,e)))},i:We,o:We,d(s){i&&i.d(s),s&&Se(e)}}}const Zz=()=>{};function Gz(n,e,t){let r,i;Me(n,ln,m=>t(4,r=m)),Me(n,pr,m=>t(5,i=m));let{params:s}=e,{callback:o}=e,a=!1,l=!1,c;const u=s.subscribe(async m=>{t(1,a=!1),t(2,l=!0),await na(),setTimeout(async()=>{t(3,c=await Promise.resolve(m[0]())),t(1,a=!0)},100)});_S(u);const h=()=>{const m=`-${GS.asString(Sn(hr.dateFormat),new Date)}.svg`;hi.postMessage({type:"saveFile",suffix:m,blob:`data:image/svg+xml;base64,${$m(c)}`})},f=()=>{const m=new window.Blob([c],{type:"image/svg+xml"}),y=URL.createObjectURL(m),w=window.open(y);w.onload=()=>URL.revokeObjectURL(y)},p=()=>{const m=document.createElement("a");m.setAttribute("href",`data:image/svg+xml;base64,${$m(c)}`),m.setAttribute("download",(i.properties.title||"graph")+".svg"),m.style.display="none",document.body.appendChild(m),m.click(),document.body.removeChild(m)},d=async()=>{t(3,c=""),await na(),o(!1)};return n.$$set=m=>{"params"in m&&t(6,s=m.params),"callback"in m&&t(0,o=m.callback)},[o,a,l,c,r,i,s,h,f,p,d]}class Yz extends En{constructor(e){super(),Tn(this,e,Gz,Hz,On,{params:6,callback:0})}}const R0="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAC4jAAAuIwF4pT92AAAEgElEQVR4nH2Ua0xbZRjHS7lEkw6kAzcGjkmE4UKcCWxTMz9tGnDzi26SOMMI2cYAuRU4lF7OpTdKS1kLE1qG2zRsTpCFNZT7daW0XAuswGQf5OJHY9Qvgpy+j29LuwBznuSf8573vM/v/J/nec/LoWmas1cMTQf5x023Gk+bTA1ZjSZjlslkPO+fF4slXIZhuHtjX4CRJBnouRuN9e92Wsx3HfbRXx12G3I4bGAfs/5uHRns/qnlwWc7YgJeCsQw78sO88NMq3Xoj8kJO0xPTcLcnBPNzznB6ZwCx/gYjNut0N1lvqdSKcP3Qp/DKGobZm5vFQwP9KBR6xCamhzfXHA9cS8v/wzPni3D4uICcs5MbdlGR9iRoT7oMLcNKpWKMIlUuhtIUZR34pubhve7Le0w0Nftxum5Z53T8PTpElpdW0Pr6+seKJqbm4UJhw0ND/Zt9nSZoa31fp0nVkqS3J0OvQ8/3Lt7s7+nAw30d3lcwMz0BMJAWFlZgdXVNfA4dTqn0ZjNCkMDPWxnR7u741HrukGvO+BP3e/Q2whtlby3vq4aDeLFE+NjyDU/C64n87C0tORxCgsLLlhadMHszCSMjQ677zffBkZKbFSqFKd8HK4XSPrsCgpzBssFOWB51MJ+21gPt5uMMNjfBbOzMzCP4X29nVBVKQOaEkOTqQ41GfVbedcuA0WKz/uNbQN9DjGwv6w4Fz5J/YgNfy0MIiL4QJQKYGrSAZ6Oq1Ry2M/nQ3BwEMTERANRUrAhJvKRRCz80gskySB/yl6HlLj0ccZX6XDoUDQbzg8HPn8/XLzwOdgeD8H0pB2uZV+FNw4fhqioKIiMfB2lp19kVbIKEAnL0nzGuL6mbG9mBVPxo6i8CJKTU7YSExMhIeEo5H+dC9oqhSctqFTKIDklBZKSkuCd48fdImEp6FTS38Si8rd8Dp83xetQyYhK6murWEpazmZlZkBJUT76/o4Jg+MhJCQETA0G0OvUICQEqFJBuW+ZDKxey/wiY8gjXmN4+/mA29tGp6YtBp0ccLH/lpOEW0aWAUNWoNjYWIiOjob8vGxUX6tBhCAXGuq0WzdvqDZvaGlQyKhzXg7tawpNb29stZJOMdapl+tq5CAszQMlXY4qCAGkpJzwlAEK83OgVqeE4vwrSEETgNeCXku3yGXUK/TOP2WnEuLjIk5/cPJjjVLs0qlJVK2mWEmFAEmEAqjRMKiminbXVFGorCjbcDQ+7sPr2VeDd8bvgoWGhgZxOJwwzzjj0gWLXkOzarnoH0M1g2qrZUijFLEyaQlbrZL+dSQ25oQXwOEEvRSILx4u/smAgIDUc2lnH9RoaKAlJcBISlklU8HKcF3xB6Ag74prH4/3KZfLPYVjIvh8/ounjR8YGBiYhO9nQkP3fZF5+VLzd3dMf/b3WqCtpRks5ocb5URx78GDB67jNWexkvHHI3g83n8DsTsuXvQqViTWm1ixx94+9h5BEEVFhQXi1NS0M3guzvcuCsN4/5vyTuF0uDggBAfsOuY9c1ieWu86qf36FzbTCQMGhUSbAAAAAElFTkSuQmCC",I0="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3wENEA4tJ8wnvAAAArNJREFUOMvVlM1rVFcYxn/n3pu5MTMTM0nGdFI1IfGD+lEioSWrdllUEIrgUhBcdBORIOgfIIgiXVQoolvdFLtIiSKClW7b9MMYP5oMRieZyTidzGQy986dO3fufV1Mp02joNaNvpvznsP7/Hg4nOfAu16q2dR+bZ/Or0ihaJFOdLm7It2HToW2Xbn+MlEwd3C/Vfj+7GJev9cZ4cPu9cTULn/3f4D1TPTJwqJ/rH+48kP5pvHtut3DX0jPB39KzdIpAFkgA1ghX7Vmt1fV1Hj0S38sdZcDGxN8o22gH8BoAt0Odb8voQYAzEgs58n8gJS3DmDdghUHHBAPcMHXQe8by8DXbPqYAcdhusn5B+hY9V/a1pkjYBOYUm1tN8DoBdeAENAGRAEBPwzPskn3b+lIxWayydGaTfGJPxGUtCEn2ac8384RuCA+YEIA+DTWALy6wbPZH3OlqW4Nu2VPKcXEC8Ctn7qTxRlnvsUJHQkk8gDfAiVAGKThDL9x6xVHUTc7HkXN1iOlpJcaHH6JQ4C5n2un/VzpuLK73KBWzYMNKv4vzGsoimUjvT7a7qnS8vHUJKdXM/TVm8s3gqeHdla3xPXIPom5WT3WsZ16G9hJqABlcEWRKcRvDHbVPkvN5u9+9BWXVjO0tW/s4YycmJtJe9osn+DNgB5ujHkggWK+GKYn5I0U05lg9hEn1ur1tQfXfhc+H5QJVQl2xDfZQ6o7DpVlsB3SS2HKVgjNLYxPP5ajey/gv1GMfjpnjNYXEhVZ6hX3jilTFzort8+0jL5VNmu/qZNBVpPCRU3mL6nRtw67pIjJHEvVm6TzfxB+1bzxSqJJCIVhbsYwewkB9v9394B++YtrUkYkg8gyVyXJ5tf6vl6A3dl4mI6F84T1dqpYFIEcEXx/mbbEMXVg8Tvey3oOImsv73TtdGkAAAAASUVORK5CYII=",Q0="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAArrAAAK6wGCiw1aAAAAK3RFWHRDcmVhdGlvbiBUaW1lAERvIDMwIEp1biAyMDA1IDE0OjMyOjM5ICswMTAwRscKOAAAApFJREFUeJytlMtPE1EUxtsSFz4SjRFYGF8ERXyUUBVBKC9DsKECDSBEkQaQWh5GIjFIpPMKFh9gBFGDDxbEoMSFMW6QrRqXCMSQKDvlL0ADzMz9jp22IVMKRYiLX+bmnPN9c86dO9cgCILhf7JqwVqJmBQ5ziTyXBTPCyYNba3F1mfI88b15JYXBBl2OpLH0nff/Z6yY+THyeiRsYw99147HZZImrBAuyD63z6RHe+dN29icy4bLfR6/MxdLqCF5C0Yz4m/ra9d0ZAPjjKRG3dLTdlKsx2NbH7wviy/6Vfl4cfq/MAdeVaqZyx1G03mxnXqNWGGIufxb/ZLV4WZHTLQb3e+It+8CKXDTWr3NTAfqlRHcmsF/tSdVpBooFe1ZUl6bWiHHBelPSfz9nfBbIRcniTjio3AVQJeF8FbR2g/DzTmkeJIkHHEiMm8A116bYghxwv+1n9aY0Zw1ABkblZQEgdUWwjuU0Q+/GvHXiDLl0sy4Jc15kNgbGFx7EVDXggEZ6zRo0jfAFa0S8WFgyCXhagpNYD7OMF5GKxkn4KsjZjJjB3Va0NH5gNtT+Un9ODMdqhOs0zNVt/IBSBvKVFnKUE4C2rJJrU2WYY9BlO2xF69NtQwuLFDNWUnyB5L6tUMBZwd1FNFeF4PvGgA9VUTpCKoLdkKFe+kodqyFL021FDQHZviYw+pOZXYg0qFDTQp7B2vsveiygabFdZXrdB1K30rtjxaOm6YoYZHlIxCW5tp/FzaE/LYiIZbiD52E33pIXp7g0gqpPHytH6htdXkkaTIB3spQ1UlOV/d9qfTHTWfpr2XPo81FD7zxXIjaVY2FMN/q3/JLS8I4ruuTKIoLH5Bba3FImkiGq6HVQvWyl/gxssJlvWS8AAAAABJRU5ErkJggg==";function $x(n,e,t){const r=n.slice();return r[17]=e[t],r}function Bx(n,e,t){const r=n.slice();return r[20]=e[t],r}function Fx(n){let e,t=n[20]+"",r,i;return{c(){e=G("option"),r=ve(t),e.__value=i=n[20],e.value=e.__value},m(s,o){Ee(s,e,o),U(e,r)},p(s,o){o&16&&t!==(t=s[20]+"")&&Te(r,t),o&16&&i!==(i=s[20])&&(e.__value=i,e.value=e.__value)},d(s){s&&Se(e)}}}function Ux(n){let e,t,r,i,s,o;function a(){return n[12](n[17])}return{c(){e=G("div"),t=G("img"),i=he(),z(t,"alt",n[17]),io(t.src,r=n[6][n[17]])||z(t,"src",r),z(t,"class","svelte-1ergg8"),z(e,"class","svelte-1ergg8"),un(e,"selected",n[3][n[17]])},m(l,c){Ee(l,e,c),U(e,t),U(e,i),s||(o=xe(e,"click",a),s=!0)},p(l,c){n=l,c&8&&un(e,"selected",n[3][n[17]])},d(l){l&&Se(e),s=!1,o()}}}function Kz(n){let e,t,r=n[5]("dialogs.shuffle.title")+"",i,s,o,a=n[5]("dialogs.shuffle.hint")+"",l,c,u,h=n[5]("dialogs.shuffle.group")+"",f,p,d,m,y,w,b,O,v,_=n[5]("sidemenu.allgroup")+"",S,R,N,T=n[5]("dialogs.shuffle.flags")+"",C,Q,I,B,k,j,ne=n[5]("dialogs.ok")+"",Z,le,oe,pe=n[5]("dialogs.shuffle.savecopy")+"",P,D,H,F=n[5]("dialogs.cancel")+"",se,W,Y,ee=n[4],re=[];for(let E=0;E<ee.length;E+=1)re[E]=Fx(Bx(n,ee,E));let ie=["final","fixed","death"],V=[];for(let E=0;E<3;E+=1)V[E]=Ux($x(n,ie,E));return{c(){e=G("div"),t=G("h3"),i=ve(r),s=he(),o=G("p"),l=ve(a),c=he(),u=G("h4"),f=ve(h),p=ve(":"),d=he(),m=G("div"),y=G("input"),w=he(),b=G("span"),O=G("select"),v=G("option"),S=ve(_);for(let E=0;E<re.length;E+=1)re[E].c();R=he(),N=G("h4"),C=ve(T),Q=ve(":"),I=he(),B=G("div");for(let E=0;E<3;E+=1)V[E].c();k=he(),j=G("button"),Z=ve(ne),le=he(),oe=G("button"),P=ve(pe),D=he(),H=G("button"),se=ve(F),z(u,"class","svelte-1ergg8"),z(y,"type","text"),z(y,"class","svelte-1ergg8"),v.__value="allgroupidtag",v.value=v.__value,n[1]===void 0&&Ml(()=>n[11].call(O)),z(b,"class","select-dropdown svelte-1ergg8"),kn(b,"margin-left","5px"),z(m,"class","input svelte-1ergg8"),z(N,"class","svelte-1ergg8"),z(B,"class","flags svelte-1ergg8"),z(j,"class","ok"),z(oe,"class","cancel"),z(H,"class","cancel"),z(e,"class","dialog svelte-1ergg8")},m(E,$){Ee(E,e,$),U(e,t),U(t,i),U(e,s),U(e,o),U(o,l),U(e,c),U(e,u),U(u,f),U(u,p),U(e,d),U(e,m),U(m,y),ct(y,n[2]),U(m,w),U(m,b),U(b,O),U(O,v),U(v,S);for(let X=0;X<re.length;X+=1)re[X].m(O,null);_h(O,n[1]),U(e,R),U(e,N),U(N,C),U(N,Q),U(e,I),U(e,B);for(let X=0;X<3;X+=1)V[X].m(B,null);U(e,k),U(e,j),U(j,Z),U(e,le),U(e,oe),U(oe,P),U(e,D),U(e,H),U(H,se),W||(Y=[xe(y,"input",n[10]),xe(O,"change",n[11]),xe(j,"click",n[7]),xe(oe,"click",n[13]),xe(H,"click",n[14])],W=!0)},p(E,[$]){if($&32&&r!==(r=E[5]("dialogs.shuffle.title")+"")&&Te(i,r),$&32&&a!==(a=E[5]("dialogs.shuffle.hint")+"")&&Te(l,a),$&32&&h!==(h=E[5]("dialogs.shuffle.group")+"")&&Te(f,h),$&4&&y.value!==E[2]&&ct(y,E[2]),$&32&&_!==(_=E[5]("sidemenu.allgroup")+"")&&Te(S,_),$&16){ee=E[4];let X;for(X=0;X<ee.length;X+=1){const ue=Bx(E,ee,X);re[X]?re[X].p(ue,$):(re[X]=Fx(ue),re[X].c(),re[X].m(O,null))}for(;X<re.length;X+=1)re[X].d(1);re.length=ee.length}if($&18&&_h(O,E[1]),$&32&&T!==(T=E[5]("dialogs.shuffle.flags")+"")&&Te(C,T),$&72){ie=["final","fixed","death"];let X;for(X=0;X<3;X+=1){const ue=$x(E,ie,X);V[X]?V[X].p(ue,$):(V[X]=Ux(ue),V[X].c(),V[X].m(B,null))}for(;X<3;X+=1)V[X].d(1)}$&32&&ne!==(ne=E[5]("dialogs.ok")+"")&&Te(Z,ne),$&32&&pe!==(pe=E[5]("dialogs.shuffle.savecopy")+"")&&Te(P,pe),$&32&&F!==(F=E[5]("dialogs.cancel")+"")&&Te(se,F)},i:We,o:We,d(E){E&&Se(e),Sr(re,E),Sr(V,E),W=!1,Wt(Y)}}}function Jz(n,e,t){let r,i,s,o,a;Me(n,pr,v=>t(9,i=v)),Me(n,uP,v=>t(15,s=v)),Me(n,yt,v=>t(16,o=v)),Me(n,ln,v=>t(5,a=v));let l={death:R0,final:I0,fixed:Q0},{params:c}=e,{callback:u}=e,h="",f={final:!1,fixed:!1,death:!1},p="allgroupidtag";const d=()=>{const v=Object.keys(f).filter(R=>f[R]),_=h.split(",").map(R=>R.trim()).filter(R=>R);yt.flush();const S=qL(o,{selectedFlags:v,filter:_});if(s||Vt){it().dispatch({changes:{from:0,to:it().state.doc.length,insert:S}}),u(!1);return}Ld.open({data:{book:S,cursor:{row:0,column:0},title:i.properties.title}})};function m(){h=this.value,t(2,h),t(1,p)}function y(){p=wS(this),t(1,p),t(2,h),t(4,r),t(9,i)}const w=v=>t(3,f[v]=!f[v],f),b=()=>Ei("md",yt.flush()),O=()=>u(!1);return n.$$set=v=>{"params"in v&&t(8,c=v.params),"callback"in v&&t(0,u=v.callback)},n.$$.update=()=>{n.$$.dirty&512&&t(4,r=[...i.groups]),n.$$.dirty&6&&p!="allgroupidtag"&&(t(2,h+=p+", "),na().then(()=>{t(1,p="allgroupidtag")}))},[u,p,h,f,r,a,l,d,c,i,m,y,w,b,O]}class e9 extends En{constructor(e){super(),Tn(this,e,Jz,Kz,On,{params:8,callback:0})}}function t9(n){let e,t,r=n[1]("dialogs.newbook.new")+"",i,s,o,a=n[1]("dialogs.newbook.hint")+"",l,c,u=n[1]("dialogs.ok")+"",h,f,p,d=n[1]("dialogs.cancel")+"",m,y,w;return{c(){e=G("div"),t=G("h3"),i=ve(r),s=he(),o=G("p"),l=he(),c=G("button"),h=ve(u),f=he(),p=G("button"),m=ve(d),kn(o,"margin","1rem 0"),z(c,"class","ok"),z(p,"class","cancel"),z(e,"class","dialog")},m(b,O){Ee(b,e,O),U(e,t),U(t,i),U(e,s),U(e,o),o.innerHTML=a,U(e,l),U(e,c),U(c,h),U(e,f),U(e,p),U(p,m),y||(w=[xe(c,"click",n[4]),xe(p,"click",n[5])],y=!0)},p(b,[O]){O&2&&r!==(r=b[1]("dialogs.newbook.new")+"")&&Te(i,r),O&2&&a!==(a=b[1]("dialogs.newbook.hint")+"")&&(o.innerHTML=a),O&2&&u!==(u=b[1]("dialogs.ok")+"")&&Te(h,u),O&2&&d!==(d=b[1]("dialogs.cancel")+"")&&Te(m,d)},i:We,o:We,d(b){b&&Se(e),y=!1,Wt(w)}}}function n9(n,e,t){let r;Me(n,ln,c=>t(1,r=c));let{params:i}=e,{callback:s}=e;const o=()=>Ld.open({data:{book:r("books.local"),cursor:{row:0,column:0}}}),a=()=>o(),l=()=>s(!1);return n.$$set=c=>{"params"in c&&t(3,i=c.params),"callback"in c&&t(0,s=c.callback)},[s,r,o,i,a,l]}class r9 extends En{constructor(e){super(),Tn(this,e,n9,t9,On,{params:3,callback:0})}}function i9(n){let e,t,r,i=n[4]("dialogs.newfirebook.new")+"",s,o,a,l,c,u,h,f,p,d,m,y,w,b,O=n[4]("dialogs.newfirebook.book")+"",v,_,S,R,N,T,C=n[4]("dialogs.newfirebook.getStarted")+"",Q,I,B=n[4]("dialogs.ok")+"",k,j,ne,Z,le=n[4]("dialogs.cancel")+"",oe,pe,P;return{c(){e=G("div"),t=G("form"),r=G("h3"),s=ve(i),o=he(),a=G("div"),l=G("span"),l.textContent="apiKey:",c=he(),u=G("input"),h=he(),f=G("div"),p=G("span"),p.textContent="databaseURL:",d=he(),m=G("input"),y=he(),w=G("div"),b=G("span"),v=ve(O),_=ve(":"),S=he(),R=G("input"),N=he(),T=G("p"),Q=he(),I=G("button"),k=ve(B),ne=he(),Z=G("button"),oe=ve(le),z(l,"class","svelte-1c6ktlb"),z(u,"name","password"),z(u,"type","password"),z(u,"class","svelte-1c6ktlb"),z(a,"class","input svelte-1c6ktlb"),z(p,"class","svelte-1c6ktlb"),z(m,"name","user"),z(m,"type","text"),z(m,"class","svelte-1c6ktlb"),z(f,"class","input svelte-1c6ktlb"),z(b,"class","svelte-1c6ktlb"),z(R,"type","text"),z(R,"class","svelte-1c6ktlb"),z(w,"class","input svelte-1c6ktlb"),z(T,"class","getstarted"),kn(T,"margin","1rem 0"),I.disabled=j=!n[3]||!n[1]||!n[2],z(I,"class","ok"),z(Z,"class","cancel"),z(t,"method","post"),z(t,"action","/signin"),z(e,"class","dialog svelte-1c6ktlb")},m(D,H){Ee(D,e,H),U(e,t),U(t,r),U(r,s),U(t,o),U(t,a),U(a,l),U(a,c),U(a,u),ct(u,n[1]),U(t,h),U(t,f),U(f,p),U(f,d),U(f,m),ct(m,n[2]),U(t,y),U(t,w),U(w,b),U(b,v),U(b,_),U(w,S),U(w,R),ct(R,n[3]),U(t,N),U(t,T),T.innerHTML=C,U(t,Q),U(t,I),U(I,k),U(t,ne),U(t,Z),U(Z,oe),pe||(P=[xe(u,"input",n[8]),xe(m,"input",n[9]),xe(R,"input",n[10]),xe(I,"click",n[11]),xe(Z,"click",n[12]),xe(t,"submit",nN(n[7]))],pe=!0)},p(D,[H]){H&16&&i!==(i=D[4]("dialogs.newfirebook.new")+"")&&Te(s,i),H&2&&u.value!==D[1]&&ct(u,D[1]),H&4&&m.value!==D[2]&&ct(m,D[2]),H&16&&O!==(O=D[4]("dialogs.newfirebook.book")+"")&&Te(v,O),H&8&&R.value!==D[3]&&ct(R,D[3]),H&16&&C!==(C=D[4]("dialogs.newfirebook.getStarted")+"")&&(T.innerHTML=C),H&16&&B!==(B=D[4]("dialogs.ok")+"")&&Te(k,B),H&14&&j!==(j=!D[3]||!D[1]||!D[2])&&(I.disabled=j),H&16&&le!==(le=D[4]("dialogs.cancel")+"")&&Te(oe,le)},i:We,o:We,d(D){D&&Se(e),pe=!1,Wt(P)}}}function s9(n,e,t){let r;Me(n,ln,y=>t(4,r=y));let{params:i}=e,{callback:s}=e,o,a,l;const c=()=>{const y=encodeURIComponent($m(JSON.stringify({apiKey:o.replaceAll('",',"").replaceAll('"',"").replaceAll("apiKey:","").trim(),databaseURL:a.replaceAll('",',"").replaceAll('"',"").replaceAll("databaseURL:","").trim(),book:l})));location.assign(`#fsession=${y}`),location.reload()};function u(y){aN.call(this,n,y)}function h(){o=this.value,t(1,o)}function f(){a=this.value,t(2,a)}function p(){l=this.value,t(3,l)}const d=()=>c(),m=()=>s(!1);return n.$$set=y=>{"params"in y&&t(6,i=y.params),"callback"in y&&t(0,s=y.callback)},[s,o,a,l,r,c,i,u,h,f,p,d,m]}class o9 extends En{constructor(e){super(),Tn(this,e,s9,i9,On,{params:6,callback:0})}}function Vx(n,e,t){const r=n.slice();return r[4]=e[t][0],r[5]=e[t][1],r}function Wx(n,e,t){const r=n.slice();return r[5]=e[t],r}function a9(n){return{c:We,m:We,p:We,d:We}}function l9(n){let e,t=n[8],r=[];for(let i=0;i<t.length;i+=1)r[i]=jx(Wx(n,t,i));return{c(){e=G("ul");for(let i=0;i<r.length;i+=1)r[i].c();z(e,"class","svelte-5d1vqe")},m(i,s){Ee(i,e,s);for(let o=0;o<r.length;o+=1)r[o].m(e,null)},p(i,s){if(s&0){t=i[8];let o;for(o=0;o<t.length;o+=1){const a=Wx(i,t,o);r[o]?r[o].p(a,s):(r[o]=jx(a),r[o].c(),r[o].m(e,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=t.length}},d(i){i&&Se(e),Sr(r,i)}}}function jx(n){let e,t,r=n[5].name+"",i,s,o,a=n[5].time.toLocaleDateString()+"",l,c,u=n[5].time.toLocaleTimeString()+"",h;return{c(){e=G("li"),t=G("a"),i=ve(r),s=he(),o=G("span"),l=ve(a),c=he(),h=ve(u),z(o,"class","svelte-5d1vqe"),z(t,"href","#msession="+n[5].id),z(t,"class","svelte-5d1vqe"),z(e,"class","svelte-5d1vqe")},m(f,p){Ee(f,e,p),U(e,t),U(t,i),U(t,s),U(t,o),U(o,l),U(o,c),U(o,h)},p:We,d(f){f&&Se(e)}}}function c9(n){let e;return{c(){e=ve("Loading...")},m(t,r){Ee(t,e,r)},p:We,d(t){t&&Se(e)}}}function u9(n){let e,t=n[1]("navbar.file.recoverFire")+"",r,i,s,o=Object.entries(JSON.parse(localStorage[Ca])).sort(Xx),a=[];for(let l=0;l<o.length;l+=1)a[l]=qx(Vx(n,o,l));return{c(){e=G("h3"),r=ve(t),i=he(),s=G("ul");for(let l=0;l<a.length;l+=1)a[l].c();z(e,"class","svelte-5d1vqe"),z(s,"class","svelte-5d1vqe")},m(l,c){Ee(l,e,c),U(e,r),Ee(l,i,c),Ee(l,s,c);for(let u=0;u<a.length;u+=1)a[u].m(s,null)},p(l,c){if(c&2&&t!==(t=l[1]("navbar.file.recoverFire")+"")&&Te(r,t),c&0){o=Object.entries(JSON.parse(localStorage[Ca])).sort(Xx);let u;for(u=0;u<o.length;u+=1){const h=Vx(l,o,u);a[u]?a[u].p(h,c):(a[u]=qx(h),a[u].c(),a[u].m(s,null))}for(;u<a.length;u+=1)a[u].d(1);a.length=o.length}},d(l){l&&Se(e),l&&Se(i),l&&Se(s),Sr(a,l)}}}function qx(n){let e,t,r=n[5].name+"",i,s,o,a=new Date(n[5].time).toLocaleDateString()+"",l,c,u=new Date(n[5].time).toLocaleTimeString()+"",h;return{c(){e=G("li"),t=G("a"),i=ve(r),s=he(),o=G("span"),l=ve(a),c=he(),h=ve(u),z(o,"class","svelte-5d1vqe"),z(t,"href","#fsession="+n[4]),z(t,"class","svelte-5d1vqe"),z(e,"class","svelte-5d1vqe")},m(f,p){Ee(f,e,p),U(e,t),U(t,i),U(t,s),U(t,o),U(o,l),U(o,c),U(o,h)},p:We,d(f){f&&Se(e)}}}function h9(n){let e,t,r=n[1]("navbar.file.recover")+"",i,s,o,a,l,c=n[1]("dialogs.cancel")+"",u,h,f,p={ctx:n,current:null,token:null,hasCatch:!1,pending:c9,then:l9,catch:a9,value:8};kS(xz(),p);let d=localStorage[Ca]&&u9(n);return{c(){e=G("div"),t=G("h3"),i=ve(r),s=he(),p.block.c(),o=he(),d&&d.c(),a=he(),l=G("button"),u=ve(c),z(t,"class","svelte-5d1vqe"),z(l,"class","cancel"),z(e,"class","dialog recover")},m(m,y){Ee(m,e,y),U(e,t),U(t,i),U(e,s),p.block.m(e,p.anchor=null),p.mount=()=>e,p.anchor=o,U(e,o),d&&d.m(e,null),U(e,a),U(e,l),U(l,u),h||(f=xe(l,"click",n[3]),h=!0)},p(m,[y]){n=m,y&2&&r!==(r=n[1]("navbar.file.recover")+"")&&Te(i,r),TS(p,n,y),localStorage[Ca]&&d.p(n,y),y&2&&c!==(c=n[1]("dialogs.cancel")+"")&&Te(u,c)},i:We,o:We,d(m){m&&Se(e),p.block.d(),p.token=null,p=null,d&&d.d(),h=!1,f()}}}const Xx=([n,e],[t,r])=>r.time-e.time;function f9(n,e,t){let r;Me(n,ln,a=>t(1,r=a));let{params:i}=e,{callback:s}=e;const o=()=>s(!1);return n.$$set=a=>{"params"in a&&t(2,i=a.params),"callback"in a&&t(0,s=a.callback)},[s,r,i,o]}class d9 extends En{constructor(e){super(),Tn(this,e,f9,h9,On,{params:2,callback:0})}}function zx(n,e,t){const r=n.slice();return r[24]=e[t],r}function p9(n){return{c:We,m:We,p:We,d:We}}function m9(n){let e,t=n[39],r=[];for(let i=0;i<t.length;i+=1)r[i]=Hx(zx(n,t,i));return{c(){for(let i=0;i<r.length;i+=1)r[i].c();e=Df()},m(i,s){for(let o=0;o<r.length;o+=1)r[o].m(i,s);Ee(i,e,s)},p(i,s){if(s[0]&8388608){t=i[39];let o;for(o=0;o<t.length;o+=1){const a=zx(i,t,o);r[o]?r[o].p(a,s):(r[o]=Hx(a),r[o].c(),r[o].m(e.parentNode,e))}for(;o<r.length;o+=1)r[o].d(1);r.length=t.length}},d(i){Sr(r,i),i&&Se(e)}}}function Hx(n){let e;return{c(){e=G("option"),e.__value=n[24],e.value=e.__value},m(t,r){Ee(t,e,r)},p:We,d(t){t&&Se(e)}}}function g9(n){return{c:We,m:We,p:We,d:We}}function O9(n){let e,t,r,i,s,o,a,l,c,u,h,f,p,d,m,y,w,b,O,v,_,S,R,N,T,C,Q,I,B,k,j,ne,Z,le,oe,pe,P,D,H,F,se,W,Y,ee,re,ie,V,E,$,X,ue,ye,Re,ge,we,Ne,$e,Be,Ce,A,L,q,te,ae,ce,fe,Ie,at,vt,Ze,Et,yi,cn,bi,So,Rr,Kc,zi,Ms,Jn,vi=n[12]("dialogs.ok")+"",Hi,zr,ko,Cn={ctx:n,current:null,token:null,hasCatch:!1,pending:g9,then:m9,catch:p9,value:39};return kS(n[23],Cn),{c(){e=G("div"),t=G("h3"),t.textContent="Settings",r=he(),i=G("div"),s=G("table"),o=G("tr"),a=G("th"),a.textContent="single-chapter-mode:",l=he(),c=G("td"),u=G("input"),h=he(),f=G("tr"),p=G("th"),p.textContent="count-chars:",d=he(),m=G("td"),y=G("input"),w=he(),b=G("tr"),O=G("th"),O.textContent="font-family:",v=he(),_=G("td"),S=G("input"),R=he(),N=G("datalist"),Cn.block.c(),T=he(),C=G("tr"),Q=G("th"),Q.textContent="font-size (pt):",I=he(),B=G("td"),k=G("input"),j=he(),ne=G("tr"),Z=he(),le=G("tr"),oe=G("th"),oe.textContent="page-width (mm):",pe=he(),P=G("td"),D=G("input"),H=he(),F=G("tr"),se=G("th"),se.textContent="page-zoom (%):",W=he(),Y=G("td"),ee=G("input"),re=he(),ie=G("tr"),V=he(),E=G("tr"),$=G("th"),$.textContent="line-spacing:",X=he(),ue=G("td"),ye=G("input"),Re=he(),ge=G("tr"),we=G("th"),we.textContent="line-margin:",Ne=he(),$e=G("td"),Be=G("input"),Ce=he(),A=G("tr"),L=G("th"),L.textContent="title-highlight:",q=he(),te=G("td"),ae=G("input"),ce=he(),fe=G("tr"),Ie=G("th"),Ie.textContent="justify-text:",at=he(),vt=G("td"),Ze=G("input"),Et=he(),yi=G("tr"),cn=G("th"),cn.textContent="date-format:",bi=he(),So=G("td"),Rr=G("input"),Kc=he(),zi=G("tr"),Ms=he(),Jn=G("button"),Hi=ve(vi),z(u,"type","range"),z(u,"min","1"),z(u,"max","2"),z(u,"class","svelte-1bqqecn"),z(c,"class","svelte-1bqqecn"),z(y,"type","range"),z(y,"min","1"),z(y,"max","2"),z(y,"class","svelte-1bqqecn"),z(m,"class","svelte-1bqqecn"),z(S,"type","text"),z(S,"list","fonts"),z(S,"class","svelte-1bqqecn"),z(N,"id","fonts"),z(N,"class","svelte-1bqqecn"),z(_,"class","svelte-1bqqecn"),z(k,"type","number"),z(k,"min","2"),z(k,"max","50"),z(k,"class","svelte-1bqqecn"),z(B,"class","svelte-1bqqecn"),kn(ne,"height","15px"),z(D,"type","number"),z(D,"min","1"),z(D,"max","400"),z(D,"class","svelte-1bqqecn"),z(P,"class","svelte-1bqqecn"),z(ee,"type","number"),z(ee,"min","10"),z(ee,"max","400"),z(ee,"class","svelte-1bqqecn"),z(Y,"class","svelte-1bqqecn"),kn(ie,"height","15px"),z(ye,"type","text"),z(ye,"class","svelte-1bqqecn"),z(ue,"class","svelte-1bqqecn"),z(Be,"type","number"),z(Be,"min","0"),z(Be,"max","15"),z(Be,"class","svelte-1bqqecn"),z($e,"class","svelte-1bqqecn"),z(ae,"type","range"),z(ae,"min","1"),z(ae,"max","2"),z(ae,"class","svelte-1bqqecn"),z(te,"class","svelte-1bqqecn"),z(Ze,"type","range"),z(Ze,"min","1"),z(Ze,"max","2"),z(Ze,"class","svelte-1bqqecn"),z(vt,"class","svelte-1bqqecn"),z(Rr,"type","text"),z(Rr,"class","svelte-1bqqecn"),z(So,"class","svelte-1bqqecn"),kn(zi,"height","15px"),z(s,"class","svelte-1bqqecn"),z(i,"class","settings svelte-1bqqecn"),z(Jn,"class","ok svelte-1bqqecn"),z(e,"class","dialog svelte-1bqqecn")},m(wi,Yt){Ee(wi,e,Yt),U(e,t),U(e,r),U(e,i),U(i,s),U(s,o),U(o,a),U(o,l),U(o,c),U(c,u),ct(u,n[1]),U(s,h),U(s,f),U(f,p),U(f,d),U(f,m),U(m,y),ct(y,n[2]),U(s,w),U(s,b),U(b,O),U(b,v),U(b,_),U(_,S),ct(S,n[3]),U(_,R),U(_,N),Cn.block.m(N,Cn.anchor=null),Cn.mount=()=>N,Cn.anchor=null,U(s,T),U(s,C),U(C,Q),U(C,I),U(C,B),U(B,k),ct(k,n[4]),U(s,j),U(s,ne),U(s,Z),U(s,le),U(le,oe),U(le,pe),U(le,P),U(P,D),ct(D,n[5]),U(s,H),U(s,F),U(F,se),U(F,W),U(F,Y),U(Y,ee),ct(ee,n[6]),U(s,re),U(s,ie),U(s,V),U(s,E),U(E,$),U(E,X),U(E,ue),U(ue,ye),ct(ye,n[7]),U(s,Re),U(s,ge),U(ge,we),U(ge,Ne),U(ge,$e),U($e,Be),ct(Be,n[8]),U(s,Ce),U(s,A),U(A,L),U(A,q),U(A,te),U(te,ae),ct(ae,n[9]),U(s,ce),U(s,fe),U(fe,Ie),U(fe,at),U(fe,vt),U(vt,Ze),ct(Ze,n[10]),U(s,Et),U(s,yi),U(yi,cn),U(yi,bi),U(yi,So),U(So,Rr),ct(Rr,n[11]),U(s,Kc),U(s,zi),U(e,Ms),U(e,Jn),U(Jn,Hi),zr||(ko=[xe(u,"change",n[26]),xe(u,"input",n[26]),xe(y,"change",n[27]),xe(y,"input",n[27]),xe(S,"input",n[28]),xe(k,"input",n[29]),xe(D,"input",n[30]),xe(ee,"input",n[31]),xe(ye,"input",n[32]),xe(Be,"input",n[33]),xe(ae,"change",n[34]),xe(ae,"input",n[34]),xe(Ze,"change",n[35]),xe(Ze,"input",n[35]),xe(Rr,"input",n[36]),xe(Jn,"click",n[37])],zr=!0)},p(wi,Yt){n=wi,Yt[0]&2&&ct(u,n[1]),Yt[0]&4&&ct(y,n[2]),Yt[0]&8&&S.value!==n[3]&&ct(S,n[3]),TS(Cn,n,Yt),Yt[0]&16&&Or(k.value)!==n[4]&&ct(k,n[4]),Yt[0]&32&&Or(D.value)!==n[5]&&ct(D,n[5]),Yt[0]&64&&Or(ee.value)!==n[6]&&ct(ee,n[6]),Yt[0]&128&&ye.value!==n[7]&&ct(ye,n[7]),Yt[0]&256&&Or(Be.value)!==n[8]&&ct(Be,n[8]),Yt[0]&512&&ct(ae,n[9]),Yt[0]&1024&&ct(Ze,n[10]),Yt[0]&2048&&Rr.value!==n[11]&&ct(Rr,n[11]),Yt[0]&4096&&vi!==(vi=n[12]("dialogs.ok")+"")&&Te(Hi,vi)},i:We,o:We,d(wi){wi&&Se(e),Cn.block.d(),Cn.token=null,Cn=null,zr=!1,Wt(ko)}}}function y9(n,e,t){let r,i,s,o,a,l,c,u,h,f,p,d;Me(n,ln,W=>t(12,d=W));const{font:m,fontSize:y,pageWidth:w,pageZoom:b,titleHighlight:O,justifyText:v,lineMargin:_,lineSpacing:S,dateFormat:R,singleChapterMode:N,countChars:T}=hr;Me(n,m,W=>t(3,s=W)),Me(n,y,W=>t(4,o=W)),Me(n,w,W=>t(5,a=W)),Me(n,b,W=>t(6,l=W)),Me(n,O,W=>t(9,h=W)),Me(n,v,W=>t(10,f=W)),Me(n,_,W=>t(8,u=W)),Me(n,S,W=>t(7,c=W)),Me(n,R,W=>t(11,p=W)),Me(n,N,W=>t(1,r=W)),Me(n,T,W=>t(2,i=W));let{params:C}=e,{callback:Q}=e;const I=new Set(["EB Garamond","Garamond","Roboto","Arial","Arial Black","Bahnschrift","Calibri","Cambria","Cambria Math","Candara","Comic Sans MS","Consolas","Constantia","Corbel","Courier New","Ebrima","Franklin Gothic Medium","Gabriola","Gadugi","Georgia","HoloLens MDL2 Assets","Impact","Ink Free","Javanese Text","Leelawadee UI","Lucida Console","Lucida Sans Unicode","Malgun Gothic","Marlett","Microsoft Himalaya","Microsoft JhengHei","Microsoft New Tai Lue","Microsoft PhagsPa","Microsoft Sans Serif","Microsoft Tai Le","Microsoft YaHei","Microsoft Yi Baiti","MingLiU-ExtB","Mongolian Baiti","MS Gothic","MV Boli","Myanmar Text","Nirmala UI","Palatino Linotype","Segoe MDL2 Assets","Segoe Print","Segoe Script","Segoe UI","Segoe UI Historic","Segoe UI Emoji","Segoe UI Symbol","SimSun","Sitka","Sylfaen","Symbol","Tahoma","Times New Roman","Trebuchet MS","Verdana","Webdings","Wingdings","Yu Gothic","American Typewriter","Andale Mono","Arial","Arial Black","Arial Narrow","Arial Rounded MT Bold","Arial Unicode MS","Avenir","Avenir Next","Avenir Next Condensed","Baskerville","Big Caslon","Bodoni 72","Bodoni 72 Oldstyle","Bodoni 72 Smallcaps","Bradley Hand","Brush Script MT","Chalkboard","Chalkboard SE","Chalkduster","Charter","Cochin","Comic Sans MS","Copperplate","Courier","Courier New","Didot","DIN Alternate","DIN Condensed","Futura","Geneva","Georgia","Gill Sans","Helvetica","Helvetica Neue","Herculanum","Hoefler Text","Impact","Lucida Grande","Luminari","Marker Felt","Menlo","Microsoft Sans Serif","Monaco","Noteworthy","Optima","Palatino","Papyrus","Phosphate","Rockwell","Savoye LET","SignPainter","Skia","Snell Roundhand","Tahoma","Times","Times New Roman","Trattatello","Trebuchet MS","Verdana","Zapfino"].sort()),B=new Promise(W=>setTimeout(()=>{const Y=new Set;for(const ee of I.values())window.document.fonts.check(`12px "${ee}"`)&&Y.add(ee);W([...Y.values()])}));function k(){r=Or(this.value),N.set(r)}function j(){i=Or(this.value),T.set(i)}function ne(){s=this.value,m.set(s)}function Z(){o=Or(this.value),y.set(o)}function le(){a=Or(this.value),w.set(a)}function oe(){l=Or(this.value),b.set(l)}function pe(){c=this.value,S.set(c)}function P(){u=Or(this.value),_.set(u)}function D(){h=Or(this.value),O.set(h)}function H(){f=Or(this.value),v.set(f)}function F(){p=this.value,R.set(p)}const se=()=>Q(!0);return n.$$set=W=>{"params"in W&&t(25,C=W.params),"callback"in W&&t(0,Q=W.callback)},[Q,r,i,s,o,a,l,c,u,h,f,p,d,y,w,b,O,v,_,S,R,N,T,B,m,C,k,j,ne,Z,le,oe,pe,P,D,H,F,se]}class b9 extends En{constructor(e){super(),Tn(this,e,y9,O9,On,{params:25,callback:0},null,[-1,-1])}}function v9(n){let e,t,r,i,s,o,a,l,c;return{c(){e=G("div"),t=G("span"),i=he(),s=G("div"),o=G("span"),z(t,"class","icon-ccw"),z(e,"class","nav-element svelte-cpequy"),z(e,"title",r=n[0]("editor.buttons.undo")),z(o,"class","icon-cw"),z(s,"class","nav-element svelte-cpequy"),z(s,"title",a=n[0]("editor.buttons.redo"))},m(u,h){Ee(u,e,h),U(e,t),Ee(u,i,h),Ee(u,s,h),U(s,o),l||(c=[xe(e,"click",n[4]),xe(s,"click",n[5])],l=!0)},p(u,h){h&1&&r!==(r=u[0]("editor.buttons.undo"))&&z(e,"title",r),h&1&&a!==(a=u[0]("editor.buttons.redo"))&&z(s,"title",a)},d(u){u&&Se(e),u&&Se(i),u&&Se(s),l=!1,Wt(c)}}}function w9(n){let e,t,r,i,s,o,a,l,c,u,h,f,p,d,m=!Vt&&v9(n);return{c(){e=G("div"),t=G("span"),i=he(),m&&m.c(),s=he(),o=G("div"),a=G("span"),a.innerHTML='[<span class="icon-flash svelte-cpequy"></span>]',c=he(),u=G("div"),h=ve("[L]"),z(t,"class","icon-search"),z(e,"class","nav-element svelte-cpequy"),z(e,"title",r=n[0]("editor.buttons.find")),z(a,"class","link"),z(o,"class","nav-element svelte-cpequy"),z(o,"title",l=n[0]("editor.buttons.quicklink")),z(u,"class","nav-element svelte-cpequy"),z(u,"title",f=n[0]("editor.buttons.link"))},m(y,w){Ee(y,e,w),U(e,t),Ee(y,i,w),m&&m.m(y,w),Ee(y,s,w),Ee(y,o,w),U(o,a),Ee(y,c,w),Ee(y,u,w),U(u,h),p||(d=[xe(e,"click",n[3]),xe(o,"click",n[2]),xe(u,"click",n[1])],p=!0)},p(y,[w]){w&1&&r!==(r=y[0]("editor.buttons.find"))&&z(e,"title",r),Vt||m.p(y,w),w&1&&l!==(l=y[0]("editor.buttons.quicklink"))&&z(o,"title",l),w&1&&f!==(f=y[0]("editor.buttons.link"))&&z(u,"title",f)},i:We,o:We,d(y){y&&Se(e),y&&Se(i),m&&m.d(y),y&&Se(s),y&&Se(o),y&&Se(c),y&&Se(u),p=!1,Wt(d)}}}function _9(n,e,t){let r,i,s,o;Me(n,pr,f=>t(6,r=f)),Me(n,qa,f=>t(7,i=f)),Me(n,Bi,f=>t(8,s=f)),Me(n,ln,f=>t(0,o=f));const a=()=>{const{from:f,to:p}=s,d=r.properties.disableShortLinks=="true";it().dispatch({changes:{from:p,to:p,insert:d?"[](#)":"[]"}}),it().dispatch({selection:{anchor:p+(d?4:1)},effects:[Xe.scrollIntoView(p)]}),it().focus()},l=()=>{let{from:f,to:p}=s;const{contentStart:d,end:m,group:y}=r.chapters.get(i),w=Oh(),b=r.properties.disableShortLinks=="true"?`[](#${Oh()})`:`[${Oh()}]`;d!=it().state.doc.lineAt(p).number-1?(it().dispatch({changes:{from:p,to:p,insert:b}}),p+=b.length):(it().dispatch({changes:{from:p,to:p,insert:`
`+b}}),p+=b.length+1);const O=y?`

### ${w}
[group]:<> ("${y}")`:`

### ${w}`;df(w,O),sA(w)<=d&&(p+=O.length+1),it().dispatch({selection:{anchor:p},effects:[Xe.scrollIntoView(p)]}),it().focus()};return VO({K:()=>l(),L:()=>a()}),[o,a,l,async()=>{Ry(it())},async()=>{fd(it())},async()=>{uc(it())}]}class fP extends En{constructor(e){super(),Tn(this,e,_9,w9,On,{})}}function x9(n){let e,t,r=n[2]("navbar.file.title")+"",i,s,o,a,l=n[2]("navbar.file.new")+"",c,u,h,f,p,d=n[2]("navbar.file.newFire")+"",m,y,w,b,O,v,_,S=n[2]("navbar.file.open")+"",R,N,T,C=n[2]("navbar.file.save")+"",Q,I,B,k=n[2]("navbar.file.recover")+"",j,ne,Z;return{c(){e=G("div"),t=G("h1"),i=ve(r),s=he(),o=G("div"),a=G("p"),c=ve(l),u=he(),h=G("hr"),f=he(),p=G("p"),m=ve(d),y=he(),w=G("hr"),b=he(),O=G("input"),v=he(),_=G("label"),R=ve(S),N=he(),T=G("p"),Q=ve(C),I=he(),B=G("p"),j=ve(k),z(t,"class","nav-element"),z(a,"class","svelte-1b5j56t"),z(h,"class","svelte-1b5j56t"),z(p,"class","svelte-1b5j56t"),z(w,"class","svelte-1b5j56t"),z(O,"type","file"),z(O,"name","open"),z(O,"id","open"),z(O,"accept",".xlgc,.md, .magebook"),z(O,"class","svelte-1b5j56t"),z(_,"for","open"),z(_,"class","svelte-1b5j56t"),z(T,"class","svelte-1b5j56t"),z(B,"class","svelte-1b5j56t"),z(o,"class","content svelte-1b5j56t"),z(e,"class","svelte-1b5j56t")},m(le,oe){Ee(le,e,oe),U(e,t),U(t,i),U(e,s),U(e,o),U(o,a),U(a,c),U(o,u),U(o,h),U(o,f),U(o,p),U(p,m),U(o,y),U(o,w),U(o,b),U(o,O),U(o,v),U(o,_),U(_,R),U(o,N),U(o,T),U(T,Q),U(o,I),U(o,B),U(B,j),ne||(Z=[xe(a,"click",n[7]),xe(p,"click",n[8]),xe(O,"change",n[9]),xe(T,"click",n[10]),xe(B,"click",n[11])],ne=!0)},p(le,oe){oe&4&&r!==(r=le[2]("navbar.file.title")+"")&&Te(i,r),oe&4&&l!==(l=le[2]("navbar.file.new")+"")&&Te(c,l),oe&4&&d!==(d=le[2]("navbar.file.newFire")+"")&&Te(m,d),oe&4&&S!==(S=le[2]("navbar.file.open")+"")&&Te(R,S),oe&4&&C!==(C=le[2]("navbar.file.save")+"")&&Te(Q,C),oe&4&&k!==(k=le[2]("navbar.file.recover")+"")&&Te(j,k)},d(le){le&&Se(e),ne=!1,Wt(Z)}}}function Zx(n){let e,t,r=n[2]("navbar.book.title")+"",i,s,o,a,l=n[2]("navbar.book.graph")+"",c,u,h,f=n[2]("navbar.book.shuffle")+"",p,d,m,y=n[2]("navbar.book.sort")+"",w,b,O,v=n[2]("navbar.book.compact")+"",_,S,R,N,T,C=n[2]("navbar.export.title")+"",Q,I,B,k,j=n[2]("navbar.export.docx")+"",ne,Z,le,oe=n[2]("navbar.export.fodt")+"",pe,P,D,H=n[2]("navbar.export.html")+"",F,se,W,Y=n[2]("navbar.export.advanced")+"",ee,re,ie,V=n[2]("navbar.export.xlgc")+"",E,$,X,ue,ye,Re=n[2]("navbar.export.others")+"",ge,we,Ne,$e,Be,Ce,A=n[2]("navbar.export.settings")+"",L,q,te,ae,ce=Vt&&S9();return{c(){e=G("div"),t=G("h1"),i=ve(r),s=he(),o=G("div"),a=G("p"),c=ve(l),u=he(),h=G("p"),p=ve(f),d=he(),m=G("p"),w=ve(y),b=he(),O=G("p"),_=ve(v),S=he(),ce&&ce.c(),R=he(),N=G("div"),T=G("h1"),Q=ve(C),I=he(),B=G("div"),k=G("p"),ne=ve(j),Z=he(),le=G("p"),pe=ve(oe),P=he(),D=G("p"),F=ve(H),se=he(),W=G("p"),ee=ve(Y),re=he(),ie=G("p"),E=ve(V),$=he(),X=G("hr"),ue=he(),ye=G("a"),ge=ve(Re),Ne=he(),$e=G("hr"),Be=he(),Ce=G("a"),L=ve(A),z(t,"class","nav-element"),z(a,"class","svelte-1b5j56t"),z(h,"class","svelte-1b5j56t"),z(m,"class","svelte-1b5j56t"),z(O,"class","svelte-1b5j56t"),z(o,"class","content svelte-1b5j56t"),z(e,"class","svelte-1b5j56t"),z(T,"class","nav-element"),z(k,"class","svelte-1b5j56t"),z(le,"class","svelte-1b5j56t"),z(D,"class","svelte-1b5j56t"),z(W,"class","svelte-1b5j56t"),z(ie,"class","svelte-1b5j56t"),z(X,"class","svelte-1b5j56t"),z(ye,"href",we=n[2]("navbar.export.otherslink")),z(ye,"target","_blank"),z(ye,"rel","noreferrer"),z(ye,"class","svelte-1b5j56t"),z($e,"class","svelte-1b5j56t"),z(Ce,"href",q=n[2]("navbar.export.settingslink")),z(Ce,"target","_blank"),z(Ce,"rel","noreferrer"),z(Ce,"class","svelte-1b5j56t"),z(B,"class","content svelte-1b5j56t"),z(N,"class","svelte-1b5j56t")},m(fe,Ie){Ee(fe,e,Ie),U(e,t),U(t,i),U(e,s),U(e,o),U(o,a),U(a,c),U(o,u),U(o,h),U(h,p),U(o,d),U(o,m),U(m,w),U(o,b),U(o,O),U(O,_),U(o,S),ce&&ce.m(o,null),Ee(fe,R,Ie),Ee(fe,N,Ie),U(N,T),U(T,Q),U(N,I),U(N,B),U(B,k),U(k,ne),U(B,Z),U(B,le),U(le,pe),U(B,P),U(B,D),U(D,F),U(B,se),U(B,W),U(W,ee),U(B,re),U(B,ie),U(ie,E),U(B,$),U(B,X),U(B,ue),U(B,ye),U(ye,ge),U(B,Ne),U(B,$e),U(B,Be),U(B,Ce),U(Ce,L),te||(ae=[xe(a,"click",n[12]),xe(h,"click",n[13]),xe(m,"click",n[14]),xe(O,"click",n[15]),xe(k,"click",n[16]),xe(le,"click",n[17]),xe(D,"click",n[18]),xe(W,"click",n[19]),xe(ie,"click",n[20])],te=!0)},p(fe,Ie){Ie&4&&r!==(r=fe[2]("navbar.book.title")+"")&&Te(i,r),Ie&4&&l!==(l=fe[2]("navbar.book.graph")+"")&&Te(c,l),Ie&4&&f!==(f=fe[2]("navbar.book.shuffle")+"")&&Te(p,f),Ie&4&&y!==(y=fe[2]("navbar.book.sort")+"")&&Te(w,y),Ie&4&&v!==(v=fe[2]("navbar.book.compact")+"")&&Te(_,v),Ie&4&&C!==(C=fe[2]("navbar.export.title")+"")&&Te(Q,C),Ie&4&&j!==(j=fe[2]("navbar.export.docx")+"")&&Te(ne,j),Ie&4&&oe!==(oe=fe[2]("navbar.export.fodt")+"")&&Te(pe,oe),Ie&4&&H!==(H=fe[2]("navbar.export.html")+"")&&Te(F,H),Ie&4&&Y!==(Y=fe[2]("navbar.export.advanced")+"")&&Te(ee,Y),Ie&4&&V!==(V=fe[2]("navbar.export.xlgc")+"")&&Te(E,V),Ie&4&&Re!==(Re=fe[2]("navbar.export.others")+"")&&Te(ge,Re),Ie&4&&we!==(we=fe[2]("navbar.export.otherslink"))&&z(ye,"href",we),Ie&4&&A!==(A=fe[2]("navbar.export.settings")+"")&&Te(L,A),Ie&4&&q!==(q=fe[2]("navbar.export.settingslink"))&&z(Ce,"href",q)},d(fe){fe&&Se(e),ce&&ce.d(),fe&&Se(R),fe&&Se(N),te=!1,Wt(ae)}}}function S9(n){return{c:We,m:We,d:We}}function Gx(n){let e,t,r,i,s,o,a,l,c,u,h,f,p,d,m,y,w,b,O,v,_,S,R,N,T=Vt&&k9(),C=!Vt&&T9(n);return{c(){T&&T.c(),e=he(),t=G("div"),r=he(),i=G("span"),C&&C.c(),s=he(),o=G("div"),a=G("span"),h=he(),f=G("div"),p=G("span"),w=he(),b=G("div"),O=G("span"),z(t,"class","margin svelte-1b5j56t"),z(a,"aria-label",l=n[2]("navbar.buttons.darktheme")),z(a,"class",c=ar("dropbtn "+(n[5]=="light"?"icon-moon":"icon-sun"))+" svelte-1b5j56t"),z(o,"title",u=n[2]("navbar.buttons.darktheme")),z(o,"class","svelte-1b5j56t"),z(p,"aria-label",d=n[2]("navbar.buttons.settings")),z(p,"class",ar("dropbtn icon-cog")+" svelte-1b5j56t"),z(f,"title",m=n[2]("navbar.buttons.settings")),z(f,"class","svelte-1b5j56t"),z(i,"class",y=ar("nav-buttons "+(n[1]?"display":"hidden"))+" svelte-1b5j56t"),z(O,"aria-label",v=n[2]("sidemenu.toggle")),z(O,"class","dropbtn icon-menu svelte-1b5j56t"),z(b,"title",_=n[2]("sidemenu.toggle")),z(b,"class","nav-button sidemenu svelte-1b5j56t")},m(Q,I){T&&T.m(Q,I),Ee(Q,e,I),Ee(Q,t,I),Ee(Q,r,I),Ee(Q,i,I),C&&C.m(i,null),U(i,s),U(i,o),U(o,a),U(i,h),U(i,f),U(f,p),Ee(Q,w,I),Ee(Q,b,I),U(b,O),S=!0,R||(N=[xe(a,"click",n[23]),xe(p,"click",n[24]),xe(O,"click",n[25])],R=!0)},p(Q,I){Vt||C.p(Q,I),(!S||I&4&&l!==(l=Q[2]("navbar.buttons.darktheme")))&&z(a,"aria-label",l),(!S||I&32&&c!==(c=ar("dropbtn "+(Q[5]=="light"?"icon-moon":"icon-sun"))+" svelte-1b5j56t"))&&z(a,"class",c),(!S||I&4&&u!==(u=Q[2]("navbar.buttons.darktheme")))&&z(o,"title",u),(!S||I&4&&d!==(d=Q[2]("navbar.buttons.settings")))&&z(p,"aria-label",d),(!S||I&4&&m!==(m=Q[2]("navbar.buttons.settings")))&&z(f,"title",m),(!S||I&2&&y!==(y=ar("nav-buttons "+(Q[1]?"display":"hidden"))+" svelte-1b5j56t"))&&z(i,"class",y),(!S||I&4&&v!==(v=Q[2]("sidemenu.toggle")))&&z(O,"aria-label",v),(!S||I&4&&_!==(_=Q[2]("sidemenu.toggle")))&&z(b,"title",_)},i(Q){S||(nn(T),S=!0)},o(Q){Nn(T),S=!1},d(Q){T&&T.d(Q),Q&&Se(e),Q&&Se(t),Q&&Se(r),Q&&Se(i),C&&C.d(),Q&&Se(w),Q&&Se(b),R=!1,Wt(N)}}}function k9(n){let e,t,r,i;return r=new fP({}),{c(){e=G("div"),t=he(),Qi(r.$$.fragment),z(e,"class","margin svelte-1b5j56t")},m(s,o){Ee(s,e,o),Ee(s,t,o),ni(r,s,o),i=!0},i(s){i||(nn(r.$$.fragment,s),i=!0)},o(s){Nn(r.$$.fragment,s),i=!1},d(s){s&&Se(e),s&&Se(t),ri(r,s)}}}function T9(n){let e,t,r,i,s,o,a;return{c(){e=G("div"),t=G("span"),z(t,"aria-label",r=n[2]("navbar.buttons.fullscreen")),z(t,"class",i=ar("dropbtn "+(n[0]?"icon-resize-small":"icon-resize-full"))+" svelte-1b5j56t"),z(e,"title",s=n[2]("navbar.buttons.fullscreen")),z(e,"class","svelte-1b5j56t")},m(l,c){Ee(l,e,c),U(e,t),o||(a=xe(t,"click",n[22]),o=!0)},p(l,c){c&4&&r!==(r=l[2]("navbar.buttons.fullscreen"))&&z(t,"aria-label",r),c&1&&i!==(i=ar("dropbtn "+(l[0]?"icon-resize-small":"icon-resize-full"))+" svelte-1b5j56t")&&z(t,"class",i),c&4&&s!==(s=l[2]("navbar.buttons.fullscreen"))&&z(e,"title",s)},d(l){l&&Se(e),o=!1,a()}}}function E9(n){let e,t,r,i,s,o=n[2]("navbar.help.title")+"",a,l,c,u,h=n[2]("navbar.help.guide")+"",f,p,d,m,y=n[2]("navbar.help.forum")+"",w,b,O,v=n[2]("navbar.help.report")+"",_,S,R,N=n[2]("navbar.help.about")+"",T,C,Q,I,B,k,j=!Vt&&x9(n),ne=n[3]&&Zx(n),Z=n[3]&&Gx(n);return{c(){e=G("nav"),j&&j.c(),t=he(),ne&&ne.c(),r=he(),i=G("div"),s=G("h1"),a=ve(o),l=he(),c=G("div"),u=G("a"),f=ve(h),d=he(),m=G("a"),w=ve(y),b=he(),O=G("a"),_=ve(v),S=he(),R=G("p"),T=ve(N),C=he(),Z&&Z.c(),z(s,"class","nav-element"),z(u,"target","_blank"),z(u,"rel","noreferrer"),z(u,"href",p=n[2]("navbar.help.guidefile")),z(u,"class","svelte-1b5j56t"),z(m,"target","_blank"),z(m,"rel","noreferrer"),z(m,"href","https://www.librogame.net/index.php/forum/topic?id=5182&p=1#p148583"),z(m,"class","svelte-1b5j56t"),z(O,"target","_blank"),z(O,"rel","noreferrer"),z(O,"href","https://docs.google.com/document/d/1BlAlzgdoFxTNodg501R4kDVG0I7JeBJjPuJsMSP47sg/edit?usp=sharing"),z(O,"class","svelte-1b5j56t"),z(R,"class","svelte-1b5j56t"),z(c,"class","content svelte-1b5j56t"),z(i,"class","svelte-1b5j56t"),z(e,"class",Q=ar(n[1]?"display":"hidden")+" svelte-1b5j56t")},m(le,oe){Ee(le,e,oe),j&&j.m(e,null),U(e,t),ne&&ne.m(e,null),U(e,r),U(e,i),U(i,s),U(s,a),U(i,l),U(i,c),U(c,u),U(u,f),U(c,d),U(c,m),U(m,w),U(c,b),U(c,O),U(O,_),U(c,S),U(c,R),U(R,T),U(e,C),Z&&Z.m(e,null),I=!0,B||(k=xe(R,"click",n[21]),B=!0)},p(le,[oe]){Vt||j.p(le,oe),le[3]?ne?ne.p(le,oe):(ne=Zx(le),ne.c(),ne.m(e,r)):ne&&(ne.d(1),ne=null),(!I||oe&4)&&o!==(o=le[2]("navbar.help.title")+"")&&Te(a,o),(!I||oe&4)&&h!==(h=le[2]("navbar.help.guide")+"")&&Te(f,h),(!I||oe&4&&p!==(p=le[2]("navbar.help.guidefile")))&&z(u,"href",p),(!I||oe&4)&&y!==(y=le[2]("navbar.help.forum")+"")&&Te(w,y),(!I||oe&4)&&v!==(v=le[2]("navbar.help.report")+"")&&Te(_,v),(!I||oe&4)&&N!==(N=le[2]("navbar.help.about")+"")&&Te(T,N),le[3]?Z?(Z.p(le,oe),oe&8&&nn(Z,1)):(Z=Gx(le),Z.c(),nn(Z,1),Z.m(e,null)):Z&&(Mf(),Nn(Z,1,1,()=>{Z=null}),$f()),(!I||oe&2&&Q!==(Q=ar(le[1]?"display":"hidden")+" svelte-1b5j56t"))&&z(e,"class",Q)},i(le){I||(nn(Z),I=!0)},o(le){Nn(Z),I=!1},d(le){le&&Se(e),j&&j.d(),ne&&ne.d(),Z&&Z.d(),B=!1,k()}}}function C9(n,e,t){let r,i,s,o,a;Me(n,Br,B=>t(1,r=B)),Me(n,ln,B=>t(2,i=B)),Me(n,Lc,B=>t(3,s=B)),Me(n,yt,B=>t(4,o=B));const{theme:l}=hr;Me(n,l,B=>t(5,a=B)),Vt||VO({S:()=>Ei("md",yt.flush()),O:()=>document.getElementById("open").click()});let c=!!window.document.fullscreenElement;return document.onfullscreenchange=()=>{t(0,c=!!window.document.fullscreenElement)},[c,r,i,s,o,a,l,()=>sr(r9),()=>sr(o9),B=>Sz(B.target),()=>Ei("md",yt.flush()),()=>sr(d9),()=>sr(Yz,()=>KL(yt.flush())),()=>sr(e9),async()=>{await sr(NO,i("dialogs.confirm"),i("dialogs.chapter.sort"),!0)&&it().dispatch({changes:{from:0,to:it().state.doc.length,insert:zL(o)}})},async()=>{await sr(NO,i("dialogs.confirm"),i("dialogs.chapter.compact"),!0)&&it().dispatch({changes:{from:0,to:it().state.doc.length,insert:XL(o)}})},()=>Ei("docx",yt.flush()),()=>Ei("fodt",yt.flush()),()=>Ei("html",yt.flush()),()=>Ei("advanced",yt.flush()),()=>Ei("xlgc",yt.flush()),()=>sr(Uz),()=>{window.document.fullscreenElement?window.document.exitFullscreen():window.document.body.requestFullscreen()},()=>Js(l,a=a=="light"?"dark":"light",a),()=>sr(b9),()=>Js(Br,r=!r,r)]}class A9 extends En{constructor(e){super(),Tn(this,e,C9,E9,On,{})}}function P9(n){let e,t,r,i,s,o,a,l;return s=new fP({}),{c(){e=G("div"),t=G("h1"),r=ve(n[9]),i=he(),Qi(s.$$.fragment),z(t,"class","only-desktop svelte-1jbofnp"),z(t,"title",n[9]),z(e,"class","toolbar svelte-1jbofnp")},m(c,u){Ee(c,e,u),U(e,t),U(t,r),U(e,i),ni(s,e,null),o=!0,a||(l=xe(t,"click",n[23]),a=!0)},p(c,u){(!o||u&512)&&Te(r,c[9]),(!o||u&512)&&z(t,"title",c[9])},i(c){o||(nn(s.$$.fragment,c),o=!0)},o(c){Nn(s.$$.fragment,c),o=!1},d(c){c&&Se(e),ri(s),a=!1,l()}}}function Yx(n){let e,t=(n[11]||"").length+" "+n[12]("editor.chars"),r;return{c(){e=G("span"),r=ve(t),z(e,"class","chars-count svelte-1jbofnp")},m(i,s){Ee(i,e,s),U(e,r)},p(i,s){s&6144&&t!==(t=(i[11]||"").length+" "+i[12]("editor.chars"))&&Te(r,t)},d(i){i&&Se(e)}}}function R9(n){let e;return{c(){e=G("div"),e.innerHTML='<i class="icon-arrows-cw animate-spin svelte-1jbofnp" style="width: fit-content;"></i>'},m(t,r){Ee(t,e,r)},d(t){t&&Se(e)}}}function I9(n){let e;return{c(){e=G("i"),z(e,"class","icon-ok svelte-1jbofnp"),kn(e,"color","green")},m(t,r){Ee(t,e,r)},d(t){t&&Se(e)}}}function Q9(n){let e,t,r,i,s,o=String(n[10])==="2",a,l,c,u=!Vt&&P9(n),h=o&&Yx(n);function f(m,y){if(m[13]===!0)return I9;if(m[13]===!1)return R9}let p=f(n),d=p&&p(n);return{c(){e=G("main"),u&&u.c(),t=he(),r=G("div"),i=he(),s=G("div"),h&&h.c(),a=he(),d&&d.c(),z(r,"class","textarea svelte-1jbofnp"),z(r,"id",dA),z(s,"class","margin svelte-1jbofnp"),z(e,"class","editor svelte-1jbofnp"),z(e,"style",l=`--mage-settings-font: ${n[0].trim()};
 --mage-settings-fontsize: ${Number(String(n[1]).trim())*n[2]/100}pt;
 --mage-settings-pagewidth: ${Number(String(n[3]).trim())*2.85*n[2]/100}pt;
 --mage-settings-linemargin: ${String(n[4]).trim()}px;
 --mage-settings-linespacing: ${String(n[5]).trim()};
 --mage-settings-textalign: ${n[6]=="1"?"left":"justify"};
 ${n[7]=="1"?"--mage-settings-titlehighlight: transparent;":""}`)},m(m,y){Ee(m,e,y),u&&u.m(e,null),U(e,t),U(e,r),U(e,i),U(e,s),h&&h.m(s,null),U(s,a),d&&d.m(s,null),c=!0},p(m,[y]){Vt||u.p(m,y),y&1024&&(o=String(m[10])==="2"),o?h?h.p(m,y):(h=Yx(m),h.c(),h.m(s,a)):h&&(h.d(1),h=null),p!==(p=f(m))&&(d&&d.d(1),d=p&&p(m),d&&(d.c(),d.m(s,null))),(!c||y&255&&l!==(l=`--mage-settings-font: ${m[0].trim()};
 --mage-settings-fontsize: ${Number(String(m[1]).trim())*m[2]/100}pt;
 --mage-settings-pagewidth: ${Number(String(m[3]).trim())*2.85*m[2]/100}pt;
 --mage-settings-linemargin: ${String(m[4]).trim()}px;
 --mage-settings-linespacing: ${String(m[5]).trim()};
 --mage-settings-textalign: ${m[6]=="1"?"left":"justify"};
 ${m[7]=="1"?"--mage-settings-titlehighlight: transparent;":""}`))&&z(e,"style",l)},i(m){c||(nn(u),c=!0)},o(m){Nn(u),c=!1},d(m){m&&Se(e),u&&u.d(),h&&h.d(),d&&d.d()}}}function N9(n,e,t){let r,i,s,o,a,l,c,u,h,f,p,d,m,y;Me(n,Br,Q=>t(8,h=Q)),Me(n,wz,Q=>t(9,f=Q)),Me(n,yt,Q=>t(11,d=Q)),Me(n,ln,Q=>t(12,m=Q)),Me(n,QO,Q=>t(13,y=Q));const{font:w,fontSize:b,pageWidth:O,pageZoom:v,titleHighlight:_,justifyText:S,lineMargin:R,lineSpacing:N,countChars:T}=hr;return Me(n,w,Q=>t(0,r=Q)),Me(n,b,Q=>t(1,i=Q)),Me(n,O,Q=>t(3,o=Q)),Me(n,v,Q=>t(2,s=Q)),Me(n,_,Q=>t(7,u=Q)),Me(n,S,Q=>t(6,c=Q)),Me(n,R,Q=>t(4,a=Q)),Me(n,N,Q=>t(5,l=Q)),Me(n,T,Q=>t(10,p=Q)),oN(()=>{Vt?d8():Ld.load()}),[r,i,s,o,a,l,c,u,h,f,p,d,m,y,w,b,O,v,_,S,R,N,T,()=>Js(Br,h=!h,h)]}class L9 extends En{constructor(e){super(),Tn(this,e,N9,Q9,On,{})}}function Kx(n){return typeof n=="object"&&n!=null&&n.nodeType===1}function Jx(n,e){return(!e||n!=="hidden")&&n!=="visible"&&n!=="clip"}function Sm(n,e){if(n.clientHeight<n.scrollHeight||n.clientWidth<n.scrollWidth){var t=getComputedStyle(n,null);return Jx(t.overflowY,e)||Jx(t.overflowX,e)||function(r){var i=function(s){if(!s.ownerDocument||!s.ownerDocument.defaultView)return null;try{return s.ownerDocument.defaultView.frameElement}catch{return null}}(r);return!!i&&(i.clientHeight<r.scrollHeight||i.clientWidth<r.scrollWidth)}(n)}return!1}function Xu(n,e,t,r,i,s,o,a){return s<n&&o>e||s>n&&o<e?0:s<=n&&a<=t||o>=e&&a>=t?s-n-r:o>e&&a<t||s<n&&a>t?o-e+i:0}var eS=function(n,e){var t=window,r=e.scrollMode,i=e.block,s=e.inline,o=e.boundary,a=e.skipOverflowHiddenElements,l=typeof o=="function"?o:function(X){return X!==o};if(!Kx(n))throw new TypeError("Invalid target");for(var c,u,h=document.scrollingElement||document.documentElement,f=[],p=n;Kx(p)&&l(p);){if((p=(u=(c=p).parentElement)==null?c.getRootNode().host||null:u)===h){f.push(p);break}p!=null&&p===document.body&&Sm(p)&&!Sm(document.documentElement)||p!=null&&Sm(p,a)&&f.push(p)}for(var d=t.visualViewport?t.visualViewport.width:innerWidth,m=t.visualViewport?t.visualViewport.height:innerHeight,y=window.scrollX||pageXOffset,w=window.scrollY||pageYOffset,b=n.getBoundingClientRect(),O=b.height,v=b.width,_=b.top,S=b.right,R=b.bottom,N=b.left,T=i==="start"||i==="nearest"?_:i==="end"?R:_+O/2,C=s==="center"?N+v/2:s==="end"?S:N,Q=[],I=0;I<f.length;I++){var B=f[I],k=B.getBoundingClientRect(),j=k.height,ne=k.width,Z=k.top,le=k.right,oe=k.bottom,pe=k.left;if(r==="if-needed"&&_>=0&&N>=0&&R<=m&&S<=d&&_>=Z&&R<=oe&&N>=pe&&S<=le)return Q;var P=getComputedStyle(B),D=parseInt(P.borderLeftWidth,10),H=parseInt(P.borderTopWidth,10),F=parseInt(P.borderRightWidth,10),se=parseInt(P.borderBottomWidth,10),W=0,Y=0,ee="offsetWidth"in B?B.offsetWidth-B.clientWidth-D-F:0,re="offsetHeight"in B?B.offsetHeight-B.clientHeight-H-se:0,ie="offsetWidth"in B?B.offsetWidth===0?0:ne/B.offsetWidth:0,V="offsetHeight"in B?B.offsetHeight===0?0:j/B.offsetHeight:0;if(h===B)W=i==="start"?T:i==="end"?T-m:i==="nearest"?Xu(w,w+m,m,H,se,w+T,w+T+O,O):T-m/2,Y=s==="start"?C:s==="center"?C-d/2:s==="end"?C-d:Xu(y,y+d,d,D,F,y+C,y+C+v,v),W=Math.max(0,W+w),Y=Math.max(0,Y+y);else{W=i==="start"?T-Z-H:i==="end"?T-oe+se+re:i==="nearest"?Xu(Z,oe,j,H,se+re,T,T+O,O):T-(Z+j/2)+re/2,Y=s==="start"?C-pe-D:s==="center"?C-(pe+ne/2)+ee/2:s==="end"?C-le+F+ee:Xu(pe,le,ne,D,F+ee,C,C+v,v);var E=B.scrollLeft,$=B.scrollTop;T+=$-(W=Math.max(0,Math.min($+W/V,B.scrollHeight-j/V+re))),C+=E-(Y=Math.max(0,Math.min(E+Y/ie,B.scrollWidth-ne/ie+ee)))}Q.push({el:B,top:W,left:Y})}return Q};function dP(n){return n===Object(n)&&Object.keys(n).length!==0}function D9(n,e){e===void 0&&(e="auto");var t="scrollBehavior"in document.body.style;n.forEach(function(r){var i=r.el,s=r.top,o=r.left;i.scroll&&t?i.scroll({top:s,left:o,behavior:e}):(i.scrollTop=s,i.scrollLeft=o)})}function M9(n){return n===!1?{block:"end",inline:"nearest"}:dP(n)?n:{block:"start",inline:"nearest"}}function tS(n,e){var t=n.isConnected||n.ownerDocument.documentElement.contains(n);if(dP(e)&&typeof e.behavior=="function")return e.behavior(t?eS(n,e):[]);if(!!t){var r=M9(e);return D9(eS(n,r),r.behavior)}}var km,pP=function(){return km||(km="performance"in window?performance.now.bind(performance):Date.now),km()};function mP(n){var e=pP(),t=Math.min((e-n.startTime)/n.duration,1),r=n.ease(t),i=n.startX+(n.x-n.startX)*r,s=n.startY+(n.y-n.startY)*r;n.method(i,s),i!==n.x||s!==n.y?requestAnimationFrame(function(){return mP(n)}):n.cb()}function $9(n,e,t,r,i,s){r===void 0&&(r=600),i===void 0&&(i=function(h){return 1+--h*h*h*h*h});var o,a,l,c;o=n,a=n.scrollLeft,l=n.scrollTop,c=function(h,f){n.scrollLeft=Math.ceil(h),n.scrollTop=Math.ceil(f)},mP({scrollable:o,method:c,startTime:pP(),startX:a,startY:l,x:e,y:t,duration:r,ease:i,cb:s})}var B9=function(e){return e&&!e.behavior||e.behavior==="smooth"};function F9(n,e){var t=e||{};return B9(t)?tS(n,{block:t.block,inline:t.inline,scrollMode:t.scrollMode,boundary:t.boundary,behavior:function(i){return Promise.all(i.reduce(function(s,o){var a=o.el,l=o.left,c=o.top,u=a.scrollLeft,h=a.scrollTop;return u===l&&h===c?s:[].concat(s,[new Promise(function(f){return $9(a,l,c,t.duration,t.ease,function(){return f({el:a,left:[u,l],top:[h,c]})})})])},[]))}}):Promise.resolve(tS(n,e))}var U9=F9;const nS=U9;function rS(n,e,t){const r=n.slice();return r[23]=e[t],r}function iS(n,e,t){const r=n.slice();return r[3]=e[t],r}function sS(n){let e,t=n[3]+"",r,i;return{c(){e=G("option"),r=ve(t),e.__value=i=n[3],e.value=e.__value},m(s,o){Ee(s,e,o),U(e,r)},p(s,o){o&4&&t!==(t=s[3]+"")&&Te(r,t),o&4&&i!==(i=s[3])&&(e.__value=i,e.value=e.__value)},d(s){s&&Se(e)}}}function oS(n){let e,t,r,i,s,o;function a(){return n[19](n[23])}return{c(){e=G("div"),t=G("img"),i=he(),z(t,"alt",n[23]),io(t.src,r=n[12][n[23]])||z(t,"src",r),z(t,"class","svelte-btwwxd"),z(e,"class","svelte-btwwxd"),un(e,"selected",n[7][n[23]])},m(l,c){Ee(l,e,c),U(e,t),U(e,i),s||(o=xe(e,"click",a),s=!0)},p(l,c){n=l,c&128&&un(e,"selected",n[7][n[23]])},d(l){l&&Se(e),s=!1,o()}}}function V9(n){let e,t,r,i,s,o,a=n[11]("dialogs.chapter.name")+"",l,c,u,h,f,p,d=n[11]("dialogs.chapter.title")+"",m,y,w,b,O,v,_=n[11]("dialogs.chapter.group")+"",S,R,N,T,C,Q,I,B,k,j,ne=n[11]("dialogs.chapter.warnings.duplicate")+"",Z,le,oe,pe,P=n[11]("dialogs.chapter.warnings.invalidkey")+"",D,H,F,se,W=n[11]("dialogs.chapter.warnings.invalidgroup")+"",Y,ee,re,ie=n[11]("dialogs.ok")+"",V,E,$,X,ue=n[11]("dialogs.cancel")+"",ye,Re,ge,we=[...n[2].groups],Ne=[];for(let Ce=0;Ce<we.length;Ce+=1)Ne[Ce]=sS(iS(n,we,Ce));let $e=["final","fixed","death"],Be=[];for(let Ce=0;Ce<3;Ce+=1)Be[Ce]=oS(rS(n,$e,Ce));return{c(){e=G("div"),t=G("h3"),r=ve(n[4]),i=he(),s=G("div"),o=G("span"),l=ve(a),c=he(),u=G("input"),h=he(),f=G("div"),p=G("span"),m=ve(d),y=he(),w=G("input"),b=he(),O=G("div"),v=G("span"),S=ve(_),R=he(),N=G("input"),T=he(),C=G("datalist");for(let Ce=0;Ce<Ne.length;Ce+=1)Ne[Ce].c();Q=he(),I=G("div");for(let Ce=0;Ce<3;Ce+=1)Be[Ce].c();B=he(),k=G("p"),j=G("i"),Z=ve(ne),le=he(),oe=G("p"),pe=G("i"),D=ve(P),H=he(),F=G("p"),se=G("i"),Y=ve(W),ee=he(),re=G("button"),V=ve(ie),$=he(),X=G("button"),ye=ve(ue),z(o,"class","svelte-btwwxd"),z(u,"type","text"),z(u,"class","svelte-btwwxd"),un(u,"error",n[10]||!n[9]),z(s,"class","input svelte-btwwxd"),z(p,"class","svelte-btwwxd"),z(w,"type","text"),z(w,"class","svelte-btwwxd"),z(f,"class","input svelte-btwwxd"),z(v,"class","svelte-btwwxd"),z(N,"type","text"),z(N,"list","chapters-groups"),z(N,"class","svelte-btwwxd"),un(N,"error",!n[8]),z(C,"id","chapters-groups"),z(O,"class","input svelte-btwwxd"),z(I,"class","flags svelte-btwwxd"),z(j,"class","icon-warning svelte-btwwxd"),kn(k,"font-size","85%"),z(k,"class","svelte-btwwxd"),un(k,"hide",!n[10]),z(pe,"class","icon-warning svelte-btwwxd"),kn(oe,"font-size","85%"),z(oe,"class","svelte-btwwxd"),un(oe,"hide",n[9]),z(se,"class","icon-warning svelte-btwwxd"),kn(F,"font-size","85%"),z(F,"class","svelte-btwwxd"),un(F,"hide",n[8]),re.disabled=E=n[10]||!n[9]||!n[8],z(re,"class","ok"),z(X,"class","cancel"),z(e,"class","dialog svelte-btwwxd")},m(Ce,A){Ee(Ce,e,A),U(e,t),U(t,r),U(e,i),U(e,s),U(s,o),U(o,l),U(s,c),U(s,u),ct(u,n[1]),U(e,h),U(e,f),U(f,p),U(p,m),U(f,y),U(f,w),ct(w,n[6]),U(e,b),U(e,O),U(O,v),U(v,S),U(O,R),U(O,N),ct(N,n[3]),U(O,T),U(O,C);for(let L=0;L<Ne.length;L+=1)Ne[L].m(C,null);U(e,Q),U(e,I);for(let L=0;L<3;L+=1)Be[L].m(I,null);U(e,B),U(e,k),U(k,j),U(k,Z),U(e,le),U(e,oe),U(oe,pe),U(oe,D),U(e,H),U(e,F),U(F,se),U(F,Y),U(e,ee),U(e,re),U(re,V),U(e,$),U(e,X),U(X,ye),Re||(ge=[xe(u,"input",n[16]),xe(w,"input",n[17]),xe(N,"input",n[18]),xe(re,"click",n[20]),xe(X,"click",n[21])],Re=!0)},p(Ce,[A]){if(A&16&&Te(r,Ce[4]),A&2048&&a!==(a=Ce[11]("dialogs.chapter.name")+"")&&Te(l,a),A&2&&u.value!==Ce[1]&&ct(u,Ce[1]),A&1536&&un(u,"error",Ce[10]||!Ce[9]),A&2048&&d!==(d=Ce[11]("dialogs.chapter.title")+"")&&Te(m,d),A&64&&w.value!==Ce[6]&&ct(w,Ce[6]),A&2048&&_!==(_=Ce[11]("dialogs.chapter.group")+"")&&Te(S,_),A&8&&N.value!==Ce[3]&&ct(N,Ce[3]),A&256&&un(N,"error",!Ce[8]),A&4){we=[...Ce[2].groups];let L;for(L=0;L<we.length;L+=1){const q=iS(Ce,we,L);Ne[L]?Ne[L].p(q,A):(Ne[L]=sS(q),Ne[L].c(),Ne[L].m(C,null))}for(;L<Ne.length;L+=1)Ne[L].d(1);Ne.length=we.length}if(A&4224){$e=["final","fixed","death"];let L;for(L=0;L<3;L+=1){const q=rS(Ce,$e,L);Be[L]?Be[L].p(q,A):(Be[L]=oS(q),Be[L].c(),Be[L].m(I,null))}for(;L<3;L+=1)Be[L].d(1)}A&2048&&ne!==(ne=Ce[11]("dialogs.chapter.warnings.duplicate")+"")&&Te(Z,ne),A&1024&&un(k,"hide",!Ce[10]),A&2048&&P!==(P=Ce[11]("dialogs.chapter.warnings.invalidkey")+"")&&Te(D,P),A&512&&un(oe,"hide",Ce[9]),A&2048&&W!==(W=Ce[11]("dialogs.chapter.warnings.invalidgroup")+"")&&Te(Y,W),A&256&&un(F,"hide",Ce[8]),A&2048&&ie!==(ie=Ce[11]("dialogs.ok")+"")&&Te(V,ie),A&1792&&E!==(E=Ce[10]||!Ce[9]||!Ce[8])&&(re.disabled=E),A&2048&&ue!==(ue=Ce[11]("dialogs.cancel")+"")&&Te(ye,ue)},i:We,o:We,d(Ce){Ce&&Se(e),Sr(Ne,Ce),Sr(Be,Ce),Re=!1,Wt(ge)}}}function W9(n,e,t){let r,i,s,o,a;Me(n,pr,C=>t(2,o=C)),Me(n,ln,C=>t(11,a=C));let l={death:R0,final:I0,fixed:Q0},{params:c}=e,{callback:u}=e,h,f,p,d,m,y,w;const b=()=>Object.keys(m).filter(C=>m[C]),O=c.subscribe(C=>{t(4,[h,f,p]=C,h,t(1,f),t(5,p)),t(15,w=f),t(6,{title:d="",group:y=""}=p,d,t(3,y));const Q=p.flags||[];t(7,m={final:Q.includes("final"),fixed:Q.includes("fixed"),death:Q.includes("death")})});_S(O);function v(){f=this.value,t(1,f)}function _(){d=this.value,t(6,d)}function S(){y=this.value,t(3,y)}const R=C=>t(7,m[C]=!m[C],m),N=()=>u({key:f,value:{...p,title:d,group:y,flags:b()}}),T=()=>u(!1);return n.$$set=C=>{"params"in C&&t(14,c=C.params),"callback"in C&&t(0,u=C.callback)},n.$$.update=()=>{n.$$.dirty&32774&&t(10,r=f!==w&&o.chapters.has(f)),n.$$.dirty&2&&t(9,i=f===Vo(f)),n.$$.dirty&8&&t(8,s=y===Vo(y))},[u,f,o,y,h,p,d,m,s,i,r,a,l,b,c,w,v,_,S,R,N,T]}class aS extends En{constructor(e){super(),Tn(this,e,W9,V9,On,{params:14,callback:0})}}function j9(n){let e,t,r,i,s,o,a,l,c,u,h,f,p,d,m,y,w;return{c(){e=G("div"),t=G("div"),s=he(),o=G("div"),l=he(),c=G("div"),f=he(),p=G("div"),z(t,"class","icon-back svelte-1sp2wng"),z(t,"title",r=n[0]("sidemenu.actions.goback")),z(t,"disabled",i=!n[2]),z(o,"class","icon-plus svelte-1sp2wng"),z(o,"title",a=n[0]("sidemenu.actions.add")),z(c,"class","icon-pencil svelte-1sp2wng"),z(c,"title",u=n[0]("sidemenu.actions.edit")),z(c,"disabled",h=n[1]==""),z(p,"class","icon-trash svelte-1sp2wng"),z(p,"title",d=n[0]("sidemenu.actions.delete")),z(p,"disabled",m=n[1]==""),z(e,"class","buttons svelte-1sp2wng")},m(b,O){Ee(b,e,O),U(e,t),U(e,s),U(e,o),U(e,l),U(e,c),U(e,f),U(e,p),y||(w=[xe(t,"click",e8),xe(o,"click",n[3]),xe(c,"click",n[4]),xe(p,"click",n[5])],y=!0)},p(b,[O]){O&1&&r!==(r=b[0]("sidemenu.actions.goback"))&&z(t,"title",r),O&4&&i!==(i=!b[2])&&z(t,"disabled",i),O&1&&a!==(a=b[0]("sidemenu.actions.add"))&&z(o,"title",a),O&1&&u!==(u=b[0]("sidemenu.actions.edit"))&&z(c,"title",u),O&2&&h!==(h=b[1]=="")&&z(c,"disabled",h),O&1&&d!==(d=b[0]("sidemenu.actions.delete"))&&z(p,"title",d),O&2&&m!==(m=b[1]=="")&&z(p,"disabled",m)},i:We,o:We,d(b){b&&Se(e),y=!1,Wt(w)}}}function q9(n,e,t){let r,i,s,o,a,l;Me(n,Br,f=>t(6,r=f)),Me(n,pr,f=>t(7,i=f)),Me(n,ln,f=>t(0,s=f)),Me(n,qa,f=>t(1,o=f)),Me(n,yt,f=>t(8,a=f)),Me(n,Vy,f=>t(2,l=f));const c=async()=>{const f=await sr(aS,s("dialogs.chapter.add"),Oh(),{title:"",group:o==""?"":i.chapters.get(o).group||"",flags:[],text:""});if(!f)return;let{key:p,value:d}=f;p=Vo(p),d.group=Vo(d.group||""),p&&(df(p,tO({spacelines:2,key:p,title:d.title||"",group:d.group,flags:d.flags||[]})),Js(Br,r=!1,r),yt.flush(),va(p))},u=async()=>{const f=o;if(f=="")return;const p=await sr(aS,s("dialogs.chapter.edit"),f,i.chapters.get(f));if(!p)return;let{key:d,value:m}=p;if(d=Vo(d),m.group=Vo(m.group||""),!d)return;if(d!==f){let v=a.replace(/\[([^\[]*)\](\(\s*#(\w+)\s*\))/g,(..._)=>`[${_[1]}](#${_[3]===f?d:_[3]})`);(!i.properties.disableShortLinks||i.properties.disableShortLinks!=="true")&&(v=v.replace(/\[([^\[]*)\](?!\()/g,(..._)=>`[${_[1]===f?d:_[1]}]`)),it().dispatch({changes:{from:0,to:it().state.doc.length,insert:v}})}const y=i.chapters.get(f),w=it().state.sliceDoc(it().state.doc.line(y.contentStart+2).from,it().state.doc.line(y.contentEnd+2).to).split(`
`).filter(v=>!(v.includes("[group]:<>")||v.includes("![flag-")||v.includes("![][flag-"))).join(`
`).trim(),b=it().state.doc.line(y.start).to,O=it().state.doc.line(y.contentEnd+1).to;it().dispatch({changes:{from:b,to:O,insert:""}}),yt.flush(),df(d,tO({spacelines:2,key:d,title:m.title||"",group:m.group,flags:m.flags||[],content:w})),yt.flush(),va(d),Js(Br,r=!1,r)},h=async()=>{const f=o;if(f!=""&&await sr(NO,s("dialogs.confirm"),s("dialogs.chapter.delete").replace("%1",f))){const p=i.chapters.get(f),d=it().state.doc.line(p.start).to,m=it().state.doc.line(p.contentEnd+1).to;it().dispatch({changes:{from:d,to:m,insert:""}}),Js(Br,r=!1,r),it().focus()}};return VO({R:()=>c(),E:()=>u(),D:()=>h()}),[s,o,l,c,u,h]}class X9 extends En{constructor(e){super(),Tn(this,e,q9,j9,On,{})}}function lS(n,e,t){const r=n.slice();return r[15]=e[t],r}function cS(n,e,t){const r=n.slice();return r[18]=e[t],r}function uS(n,e,t){const r=n.slice();return r[15]=e[t][0],r[21]=e[t][1],r}function hS(n,e,t){const r=n.slice();return r[18]=e[t],r}function fS(n,e,t){const r=n.slice();return r[26]=e[t],r}function dS(n){let e,t=n[26]+"",r,i;return{c(){e=G("option"),r=ve(t),e.__value=i=n[26],e.value=e.__value},m(s,o){Ee(s,e,o),U(e,r)},p(s,o){o&8&&t!==(t=s[26]+"")&&Te(r,t),o&8&&i!==(i=s[26])&&(e.__value=i,e.value=e.__value)},d(s){s&&Se(e)}}}function pS(n){let e,t,r;return{c(){e=G("img"),io(e.src,t=n[7][n[18]])||z(e,"src",t),z(e,"alt",r=n[18])},m(i,s){Ee(i,e,s)},p(i,s){s&16&&!io(e.src,t=i[7][i[18]])&&z(e,"src",t),s&16&&r!==(r=i[18])&&z(e,"alt",r)},d(i){i&&Se(e)}}}function mS(n){let e,t=n[15]+"",r,i,s,o=(n[21].title||"")+"",a,l,c,u,h=n[8](n[15],n[21])+"",f,p,d=n[9](n[15],n[21])+"",m,y,w,b=n[21].flags||[],O=[];for(let _=0;_<b.length;_+=1)O[_]=pS(hS(n,b,_));function v(){return n[12](n[15])}return{c(){e=G("li"),r=ve(t),i=he(),s=G("b"),a=ve(o),l=he();for(let _=0;_<O.length;_+=1)O[_].c();c=he(),u=G("span"),f=he(),p=G("span"),m=he(),z(s,"class","svelte-1hmuwqt"),z(u,"class","errors svelte-1hmuwqt"),z(p,"class","errors svelte-1hmuwqt"),z(e,"class","svelte-1hmuwqt"),un(e,"selected",n[15]===n[2])},m(_,S){Ee(_,e,S),U(e,r),U(e,i),U(e,s),U(s,a),U(e,l);for(let R=0;R<O.length;R+=1)O[R].m(e,null);U(e,c),U(e,u),u.innerHTML=h,U(e,f),U(e,p),p.innerHTML=d,U(e,m),y||(w=xe(e,"click",v),y=!0)},p(_,S){if(n=_,S&16&&t!==(t=n[15]+"")&&Te(r,t),S&16&&o!==(o=(n[21].title||"")+"")&&Te(a,o),S&144){b=n[21].flags||[];let R;for(R=0;R<b.length;R+=1){const N=hS(n,b,R);O[R]?O[R].p(N,S):(O[R]=pS(N),O[R].c(),O[R].m(e,c))}for(;R<O.length;R+=1)O[R].d(1);O.length=b.length}S&16&&h!==(h=n[8](n[15],n[21])+"")&&(u.innerHTML=h),S&16&&d!==(d=n[9](n[15],n[21])+"")&&(p.innerHTML=d),S&20&&un(e,"selected",n[15]===n[2])},d(_){_&&Se(e),Sr(O,_),y=!1,w()}}}function gS(n){let e,t,r;return{c(){e=G("img"),io(e.src,t=n[7][n[18]])||z(e,"src",t),z(e,"alt",r=n[18])},m(i,s){Ee(i,e,s)},p(i,s){s&10&&!io(e.src,t=i[7][i[18]])&&z(e,"src",t),s&10&&r!==(r=i[18])&&z(e,"alt",r)},d(i){i&&Se(e)}}}function OS(n){let e,t=n[15]+"",r,i,s,o=(n[3].chapters.get(n[15]).title||"")+"",a,l,c,u,h,f=n[3].chapters.get(n[15]).flags||[],p=[];for(let m=0;m<f.length;m+=1)p[m]=gS(cS(n,f,m));function d(){return n[13](n[15])}return{c(){e=G("li"),r=ve(t),i=he(),s=G("b"),a=ve(o),l=he();for(let m=0;m<p.length;m+=1)p[m].c();c=he(),z(s,"class","svelte-1hmuwqt"),z(e,"class","svelte-1hmuwqt"),un(e,"selected",n[15]===n[2])},m(m,y){Ee(m,e,y),U(e,r),U(e,i),U(e,s),U(s,a),U(e,l);for(let w=0;w<p.length;w+=1)p[w].m(e,null);U(e,c),u||(h=xe(e,"click",d),u=!0)},p(m,y){if(n=m,y&2&&t!==(t=n[15]+"")&&Te(r,t),y&10&&o!==(o=(n[3].chapters.get(n[15]).title||"")+"")&&Te(a,o),y&138){f=n[3].chapters.get(n[15]).flags||[];let w;for(w=0;w<f.length;w+=1){const b=cS(n,f,w);p[w]?p[w].p(b,y):(p[w]=gS(b),p[w].c(),p[w].m(e,c))}for(;w<p.length;w+=1)p[w].d(1);p.length=f.length}y&6&&un(e,"selected",n[15]===n[2])},d(m){m&&Se(e),Sr(p,m),u=!1,h()}}}function z9(n){let e,t,r,i,s,o,a,l,c=n[6]("sidemenu.allgroup")+"",u,h,f=n[6]("sidemenu.allgrouperrors")+"",p,d,m=n[6]("sidemenu.allgrouporphanlinks")+"",y,w,b,O,v,_,S,R=n[6]("sidemenu.linkshere")+"",N,T,C,Q,I,B,k,j,ne,Z,le=[...n[3].groups],oe=[];for(let F=0;F<le.length;F+=1)oe[F]=dS(fS(n,le,F));b=new X9({});let pe=n[4],P=[];for(let F=0;F<pe.length;F+=1)P[F]=mS(uS(n,pe,F));let D=n[1],H=[];for(let F=0;F<D.length;F+=1)H[F]=OS(lS(n,D,F));return{c(){e=G("div"),r=he(),i=G("aside"),s=G("h1"),o=G("span"),a=G("select"),l=G("option"),u=ve(c),h=G("option"),p=ve(f),d=G("option"),y=ve(m);for(let F=0;F<oe.length;F+=1)oe[F].c();w=he(),Qi(b.$$.fragment),O=he(),v=G("ul");for(let F=0;F<P.length;F+=1)P[F].c();_=he(),S=G("h1"),N=ve(R),T=he(),C=ve(n[2]),Q=ve(":"),I=he(),B=G("ul");for(let F=0;F<H.length;F+=1)H[F].c();z(e,"class",t=ar(`mask ${n[5]?"foreground":""}`)+" svelte-1hmuwqt"),l.__value="allgroupidtag",l.value=l.__value,h.__value="allgrouperrorsidtag",h.value=h.__value,d.__value="allgrouporphanlinksidtag",d.value=d.__value,z(a,"class","svelte-1hmuwqt"),n[0]===void 0&&Ml(()=>n[11].call(a)),z(o,"class","select-dropdown"),z(s,"class","svelte-1hmuwqt"),z(v,"class","chapters svelte-1hmuwqt"),z(S,"class","svelte-1hmuwqt"),z(B,"class","links-here svelte-1hmuwqt"),z(i,"class",k=ar(n[5]?"foreground":"")+" svelte-1hmuwqt")},m(F,se){Ee(F,e,se),Ee(F,r,se),Ee(F,i,se),U(i,s),U(s,o),U(o,a),U(a,l),U(l,u),U(a,h),U(h,p),U(a,d),U(d,y);for(let W=0;W<oe.length;W+=1)oe[W].m(a,null);_h(a,n[0]),U(i,w),ni(b,i,null),U(i,O),U(i,v);for(let W=0;W<P.length;W+=1)P[W].m(v,null);U(i,_),U(i,S),U(S,N),U(S,T),U(S,C),U(S,Q),U(i,I),U(i,B);for(let W=0;W<H.length;W+=1)H[W].m(B,null);j=!0,ne||(Z=[xe(e,"click",n[10]),xe(a,"change",n[11])],ne=!0)},p(F,[se]){if((!j||se&32&&t!==(t=ar(`mask ${F[5]?"foreground":""}`)+" svelte-1hmuwqt"))&&z(e,"class",t),(!j||se&64)&&c!==(c=F[6]("sidemenu.allgroup")+"")&&Te(u,c),(!j||se&64)&&f!==(f=F[6]("sidemenu.allgrouperrors")+"")&&Te(p,f),(!j||se&64)&&m!==(m=F[6]("sidemenu.allgrouporphanlinks")+"")&&Te(y,m),se&8){le=[...F[3].groups];let W;for(W=0;W<le.length;W+=1){const Y=fS(F,le,W);oe[W]?oe[W].p(Y,se):(oe[W]=dS(Y),oe[W].c(),oe[W].m(a,null))}for(;W<oe.length;W+=1)oe[W].d(1);oe.length=le.length}if(se&9&&_h(a,F[0]),se&916){pe=F[4];let W;for(W=0;W<pe.length;W+=1){const Y=uS(F,pe,W);P[W]?P[W].p(Y,se):(P[W]=mS(Y),P[W].c(),P[W].m(v,null))}for(;W<P.length;W+=1)P[W].d(1);P.length=pe.length}if((!j||se&64)&&R!==(R=F[6]("sidemenu.linkshere")+"")&&Te(N,R),(!j||se&4)&&Te(C,F[2]),se&142){D=F[1];let W;for(W=0;W<D.length;W+=1){const Y=lS(F,D,W);H[W]?H[W].p(Y,se):(H[W]=OS(Y),H[W].c(),H[W].m(B,null))}for(;W<H.length;W+=1)H[W].d(1);H.length=D.length}(!j||se&32&&k!==(k=ar(F[5]?"foreground":"")+" svelte-1hmuwqt"))&&z(i,"class",k)},i(F){j||(nn(b.$$.fragment,F),j=!0)},o(F){Nn(b.$$.fragment,F),j=!1},d(F){F&&Se(e),F&&Se(r),F&&Se(i),Sr(oe,F),ri(b),Sr(P,F),Sr(H,F),ne=!1,Wt(Z)}}}function H9(n,e,t){let r,i,s,o,a,l;Me(n,qa,w=>t(2,s=w)),Me(n,pr,w=>t(3,o=w)),Me(n,Br,w=>t(5,a=w)),Me(n,ln,w=>t(6,l=w));const c={death:R0,final:I0,fixed:Q0};let u="allgroupidtag";const h=(w,b)=>{const O=o.linksToChapter.get(w),v=O&&O.size>0,_=b.links&&b.links.size>0||b.flags&&b.flags.length>0;return b.links&&[...b.links].some(S=>!o.chapters.has(S)),(v?"":'<i class="icon-help"></i>')+(v&&_?"":'<i class="icon-right"></i>')+(_?"":'<i class="icon-help"></i>')},f=(w,b)=>b.links&&[...b.links].some(v=>!o.chapters.has(v))?'<b>[</b><i class="icon-help"></i><b>]</b>':"",p=()=>Js(Br,a=!1,a);function d(){u=wS(this),t(0,u),t(3,o)}const m=w=>va(w),y=w=>va(w);return n.$$.update=()=>{n.$$.dirty&4&&(s!=""?(async()=>{await na();try{nS(document.querySelector("aside ul.chapters li.selected"),{behavior:"smooth",scrollMode:"if-needed"})}catch{}})():(async()=>{await na();try{nS(document.querySelector("aside ul.chapters li"),{behavior:"smooth",scrollMode:"if-needed"})}catch{}})()),n.$$.dirty&9&&([...o.groups,"allgroupidtag","allgrouperrorsidtag","allgrouporphanlinksidtag"].includes(u)||t(0,u="allgroupidtag")),n.$$.dirty&9&&t(4,r=[...o.chapters].filter(([w,b])=>{if(!u||u=="allgroupidtag")return!0;if(u=="allgrouperrorsidtag"){const v=o.linksToChapter.get(w),_=v&&v.size>0,S=b.links&&b.links.size>0||b.flags&&b.flags.length>0;return!_||!S}if(u=="allgrouporphanlinksidtag")return b.links&&[...b.links].some(_=>!o.chapters.has(_));const O=b.group;return O&&O==u})),n.$$.dirty&12&&t(1,i=[...o.linksToChapter.get(s)||new Set])},[u,i,s,o,r,a,l,c,h,f,p,d,m,y]}class Z9 extends En{constructor(e){super(),Tn(this,e,H9,z9,On,{})}}const{document:yS,window:G9}=cN;function bS(n){let e,t,r,i,s,o;return{c(){e=G("div"),t=G("div"),r=G("div"),i=he(),s=G("p"),o=ve(n[2]),z(r,"class","spinner-1"),kn(s,"color","white"),z(t,"class","dialog"),kn(t,"text-align","center"),kn(t,"margin-top","10vh"),z(e,"class","loading-mask svelte-107jblh")},m(a,l){Ee(a,e,l),U(e,t),U(t,r),U(t,i),U(t,s),U(s,o)},p(a,l){l&4&&Te(o,a[2])},d(a){a&&Se(e)}}}function Y9(n){let e,t,r,i,s,o,a,l,c,u,h,f,p,d,m=!n[1]&&bS(n);return s=new $L({}),a=new A9({}),c=new Z9({}),h=new L9({}),{c(){e=new sN(!1),t=Df(),r=he(),m&&m.c(),i=he(),Qi(s.$$.fragment),o=he(),Qi(a.$$.fragment),l=he(),Qi(c.$$.fragment),u=he(),Qi(h.$$.fragment),e.a=t},m(y,w){e.m(n[0],yS.head),U(yS.head,t),Ee(y,r,w),m&&m.m(y,w),Ee(y,i,w),ni(s,y,w),Ee(y,o,w),ni(a,y,w),Ee(y,l,w),ni(c,y,w),Ee(y,u,w),ni(h,y,w),f=!0,p||(d=xe(G9,"keydown",VL),p=!0)},p(y,[w]){(!f||w&1)&&e.p(y[0]),y[1]?m&&(m.d(1),m=null):m?m.p(y,w):(m=bS(y),m.c(),m.m(i.parentNode,i))},i(y){f||(nn(s.$$.fragment,y),nn(a.$$.fragment,y),nn(c.$$.fragment,y),nn(h.$$.fragment,y),f=!0)},o(y){Nn(s.$$.fragment,y),Nn(a.$$.fragment,y),Nn(c.$$.fragment,y),Nn(h.$$.fragment,y),f=!1},d(y){Se(t),y&&e.d(),y&&Se(r),m&&m.d(y),y&&Se(i),ri(s,y),y&&Se(o),ri(a,y),y&&Se(l),ri(c,y),y&&Se(u),ri(h,y),p=!1,d()}}}const pl="mage-version";function K9(n,e,t){let r,i,s,o,a,l;Me(n,ln,h=>t(6,i=h)),Me(n,pr,h=>t(4,s=h)),Me(n,Lc,h=>t(1,a=h)),Me(n,lP,h=>t(2,l=h));const{theme:c}=hr;Me(n,c,h=>t(5,o=h)),Vt&&window.document.body.classList.add("vscode"),localStorage[pl]||(localStorage[pl]=qs.version);const u=localStorage[pl];try{const[h,f,p]=u.split("."),[d,m]=qs.version.split(".");console.log("Checking migration from: ",u," to:",qs.version),h!==d||f!==m?sr(UL,i("dialogs.version.title")+qs.version,i("dialogs.version."+d+"."+m)+"<br><br>"+i("dialogs.version.text")).then(()=>localStorage[pl]=qs.version):localStorage[pl]=qs.version}catch{}return n.$$.update=()=>{if(n.$$.dirty&32){const h=window.document.body;h.className.split(" ").forEach(f=>{f.startsWith("mage-theme-")&&h.classList.remove(f)}),h.classList.add("mage-theme-"+o)}n.$$.dirty&32&&t(0,r=`<style>
  :root {
    color-scheme: ${o=="dark"?"dark":"light"};
  }
  </style>`),n.$$.dirty&16&&(/bot|google|baidu|bing|msn|duckduckbot|teoma|slurp|yandex/i.test(navigator.userAgent)||s&&s.properties.title&&(document.title=s.properties.title+" - Magebook"))},[r,a,l,c,s,o]}class J9 extends En{constructor(e){super(),Tn(this,e,K9,Y9,On,{})}}const e7={confirm:"Confirm?",error:"Error",ok:"Ok",cancel:"Cancel",chapter:{add:"Add chapter",edit:"Edit chapter",delete:"Chapter \u201C%1\u201D will be deleted",exists:"Chapter already exists",sort:"Chapters will be sorted. This will change the book structure permanently.",compact:"Chapters will be renamed so no number will be missing in the middle. This will change the book structure permanently.",name:"Key",title:"Title",group:"Group",warnings:{duplicate:"Another key with same name exists",invalidkey:"Key should contain only alphanumeric characters (a-z,A-Z,0-9)",invalidgroup:"Group should contain only alphanumeric characters (a-z,A-Z,0-9)"}},newbook:{new:"Create a New Book",title:"Title",author:"Author",hint:"You can recover the previous book with <b>File -> Recent sessions</b>"},newfirebook:{new:"Create or load a New Book",book:"Book name",getStarted:`This feature lets you link Magebook with your Google account. After that, you will be able to work on shared documents, like the Google Docs' ones.<br>Get start by linking Magebook to your account. <a target="_blank" href="https://librogamesland.github.io/magebook/index.html#/?id=collaborative-projects">More on the user guide here</a>.`},shuffle:{title:"Shuffle",hint:"Shuffle chapters with numeric key. You may choose to shuffle only chapters belonging to some groups, or to exclude chapters based on their flags. You should save a copy of your book before shuffling.",group:"Group filter",flags:"Exclude flags",savecopy:"Save a copy"},lock:{title:"Warning",text:"Another tab has written changes on this local session. If you overwrite, those changes will be lost. You can open a new session instead, and recover the other session with the <br><b>File -> Recent sessions</b> tool.",new:"Open in new session",overwrite:"Overwrite"},graph:{loading:"Loading graph...",open:"Open in new tab",download:"Download (as .svg)"},version:{title:"New version - ",text:'Discover more on the <a target="_blank" href="https://librogamesland.github.io/magebook/#/?id=changelog">user guide page</a>.',"1.0":"Initial release.","1.1":"Added short links format [number] and 'disableShortLinks: true'.<br>Links to orphan chapters are highlighted in the sidemenu.<br>General restyle.<br>New Website export.<br>Bug fixes.","1.2":"Major internal rewrite.<br>The editor is now powered by Codemirror6 instead of Ace. It should be prettier and more mobile friendly.<br>New setting and export properties such as renameLink, page, textFont,...<br>Now 'Latest sessions' keeps a record of collaborative projects too."}},t7={file:{title:"File",new:"New",newFire:"New collaborative",share:"Share",open:"Open/import LGC...",save:"Save",recover:"Latest sessions",recoverFire:"Collaborative sessions"},book:{title:"Book",graph:"View graph",shuffle:"Shuffle",sort:"Sort chapters",compact:"Compact chapters"},export:{title:"Export",docx:"Word (.docx)",html:"Website (.html)",fodt:"Libreoffice (.fodt)",xlgc:"LibroGameCreator 3",json:"Json",advanced:"Advanced webapp",others:"Others (ebook, Android app, ...)",otherslink:"https://librogamesland.github.io/magebook/index.html#/?id=other-formats",settings:"Export properties",settingslink:"https://librogamesland.github.io/magebook/index.html#/?id=properties"},help:{title:"Help",guide:"User guide",guidefile:"https://librogamesland.github.io/magebook",forum:"Lgl forum",report:"Report bug/suggest feature",about:"About"},buttons:{fullscreen:"Fullscreen",darktheme:"Toggle dark/light theme"}},n7={toggle:"Toggle sidemenu",chapters:"Chapters",allgroup:"All chapters",allgrouperrors:"Without links from/to",allgrouporphanlinks:"With orphan links",linkshere:"Links to",actions:{goback:"Go back",add:"Add entity (ctrl+R)",edit:"Edit entity (ctrl+E)",delete:"Delete entity (ctrl+D)"}},r7={buttons:{find:"Find (ctrl+F)",undo:"Undo last change (ctrl+Z)",redo:"Redo last change (ctrl+shift+Z)",quicklink:"Link to the first avaiable chapter (ctrl+K)",link:"Add link (ctrl+L)"},chars:"characters"},i7={contact:"Contact me",text:"Magebook is a gamebook web editor developed by <b>Luca Fabbian</b> with support of Lgl community."},s7={local:`# Book title
author: Name and Surname


### 1
Chapter example. You may edit this chapter thanks to the buttons on the right sidemenu.
This is a link going to [2]. Links may also look like [Text](#chapter).


### Chapter with a long title {#2}
This is the second chapter. Chapters may include *italic* or **bold** text. <b>Bold</b>, <i>italic</i>, and <u>underline</u> are fine as well. You may add meta text with \` \` like \`TODO: edit this chapter\`.
`,fire:`# %1
author: Name and Surname


### 1
This is a collaborative book stored on your Google account. Many people may edit this book at the same time. Save this page in your browser's bookmarks or share the page url with others - you'll see the book changing in real time.
`},o7={openlocal:"Create or open local file",openfire:"Create or access collaborative book",chooseother:"Choose another book"},a7={dialogs:e7,navbar:t7,sidemenu:n7,editor:r7,about:i7,books:s7,app:o7},l7={confirm:"Confermi?",error:"Errore",ok:"Ok",cancel:"Annulla",chapter:{add:"Aggiungi paragrafo",edit:"Modifica paragrafo",delete:"Il paragrafo \u201C%1\u201D verr\xE0 eliminato",exist:"Questo paragrafo esiste gi\xE0",sort:"I paragrafi saranno spostati cos\xEC da rispettare l'ordine di numero.",compact:"I paragrafi verranno rinominati in modo da avere numeri consecutivi, senza buchi in mezzo.",name:"Key",title:"Titolo",group:"Gruppo",warnings:{duplicate:"Esiste un'altro paragrafo con la stessa key!",invalidkey:"Key dovrebbe contenere solo caratteri alfanumerici (a-z, A-Z, 0-9)",invalidgroup:"Gruppo dovrebbe contenere solo caratteri alfanumerici (a-z, A-Z, 0-9)"}},newbook:{new:"Crea un nuovo Libro",title:"Titolo",author:"Autore",hint:"Puoi recuperare il libro precedente da <b>File -> Sessioni recenti</b>"},newfirebook:{new:"Crea o accedi a un Libro Collaborativo",book:"Nome libro",getStarted:'Con questa funzione puoi collegare Magebook al tuo account Google, cos\xEC da creare libri che si possono modificare in simultanea, proprio come i Documenti Google.<br>Prima di iniziare, dovrai collegare Magebook al tuo account <a target="_blank" href="https://librogamesland.github.io/magebook/#/?id=progetti-collaborativi">seguendo questa guida</a>.'},shuffle:{title:"Rimescola",hint:"Rimescola i paragrafi con chiave numerica. Puoi scegliere di mescolare solo i paragrafi che fanno parte di alcuni gruppi, o di escludere i paragrafi con determinati simboli. Per sicurezza, dovresti salvare una copia del libro prima di mescolare.",group:"Filtro gruppi",flags:"Escludi simboli",savecopy:"Salva una copia"},lock:{title:"Attenzione",text:"Un'altra tab ha modificato i dati di questa sessione. Se sovrascrivi, quei cambiamenti verranno persi. Se vuoi mantenere entrambe le versioni, puoi creare una nuova sessione e recuperare quella vecchia con <br><b>File -> Sessioni recenti</b>.",new:"Apri nuova sessione",overwrite:"Sovrascrivi"},graph:{loading:"Caricamento grafo...",open:"Apri un una nuova pagina",download:"Download (immagine .svg)"},version:{title:"Nuova versione - ",text:'Scopri di pi\xF9 nella <a ref="_blank" href="https://librogamesland.github.io/magebook/#/?id=versioni">guida</a>.',"1.0":"Versione iniziale.","1.1":"Aggiunto formato link corto [numero] e opzione 'disableShortLinks: true'.<br>I link a paragrafi inesistenti vengono segnalati nel menu laterale.<br>Restyle dell'interfaccia.<br>Aggiunta esportazione sito web.<br>Correzioni varie.","1.2":"Ristrutturazione massiccia del codice interno.<br>L'editor adesso \xE8 basato su Codemirror6 anzich\xE9 Ace. Dovrebbe risultare pi\xF9 veloce, bello e pi\xF9 mobile friendly.<br>Nuove impostazioni e Opzioni esportazione come renameLink, page, textFont, ...<br>Adesso 'Sessioni recenti' tiene traccia anche dei progetti collaborativi."}},c7={file:{title:"File",new:"Nuovo",newFire:"Nuovo collaborativo",share:"Condividi",open:"Apri/importa LGC...",save:"Salva",recover:"Sessioni recenti",recoverFire:"Sessioni collaborative"},book:{title:"Libro",graph:"Visualizza grafico",shuffle:"Rimescola",sort:"Riordina paragrafi",compact:"Compatta paragrafi"},export:{title:"Esporta",docx:"Word (.docx)",fodt:"Libreoffice (.fodt)",html:"Sito web (.html)",xlgc:"LibroGameCreator 3",json:"Json",advanced:"Webapp avanzata",others:"Altri (ebook, app Android, ...)",otherslink:"https://librogamesland.github.io/magebook/index.html#/?id=altri-formati",settings:"Opzioni esportazione",settingslink:"https://librogamesland.github.io/magebook/index.html#/?id=opzioni"},help:{title:"Aiuto",guide:"Guida",guidefile:"https://librogamesland.github.io/magebook",forum:"Forum Lgl",report:"Segnala bug/suggerisci feature",about:"Info"},buttons:{fullscreen:"Schermo intero",darktheme:"Cambia tema scuro/chiaro"}},u7={toggle:"Apri menu laterale",chapters:"Paragrafi",allgroup:"Tutti i paragrafi",allgrouperrors:"Senza entrata/uscita",allgrouporphanlinks:"Con link errati",linkshere:"Link al par.",actions:{goback:"Vai indietro",add:"Aggiungi entit\xE0 (ctrl+R)",edit:"Modifica entit\xE0 (ctrl+E)",delete:"Elimina entit\xE0 (ctrl+D)"}},h7={buttons:{find:"Cerca (ctrl+F)",undo:"Annulla ultimo cambiamento (ctrl+Z)",redo:"Ripristina ultimo cambiamento (ctrl+shift+Z)",quicklink:"Link al primo paragrafo disponibile (ctrl+K)",link:"Aggiungi link (ctrl+L)"},chars:"caratteri"},f7={contact:"Contattami",text:"Magebook \xE8 un editor di librogame sviluppato da <b>Luca Fabbian</b> con il supporto della community di Lgl."},d7={local:`# Titolo
author: Nome e Cognome


### 1
Esempio di paragrafo. Puoi modificarlo sfruttando i tasti a destra.
Questo \xE8 un link verso il paragrafo [2]. I link possono essere anche nel formato esteso [Testo](#paragrafo), dove Testo \xE8 opzionale.


### Paragrafo con titolo {#2}
Questo \xE8 il secondo paragrafo. I paragrafi possono contenere anche testo in *corsivo* o **grassetto**.  Puoi anche usare <b>grassetto</b>, <i>corsivo</i>, o <u>sottolineato</u>. Aggiungi commenti con \` \`, ad esempio \`NOTA: devo rivedere questo paragrafo\`.
`,fire:`# %1
author: Nome e Cognome


### 1
Questo \xE8 un libro collaborativo memorizzato sul tuo account Google e che pu\xF2 essere modificato da pi\xF9 persone contemporaneamente. Salva questa pagina fra i segnalibri del tuo browser e inviala a chi vuoi, vedrai le modifiche sincronizzate in tempo reale.
`},p7={openlocal:"Crea o apri file",openfire:"Crea o accedi a un libro collaborativo",chooseother:"Apri un altro"},m7={dialogs:l7,navbar:c7,sidemenu:u7,editor:h7,about:f7,books:d7,app:p7},g7=xL().split("-")[0];UO("en",a7);UO("it",m7);_L({fallbackLocale:"en",initialLocale:g7});"serviceWorker"in navigator&&!Vt&&window.addEventListener("load",()=>{navigator.serviceWorker.register("./sw.js")});new J9({target:document.body});
